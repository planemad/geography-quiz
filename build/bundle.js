var app=function(){"use strict";function t(){}function e(t){return t()}function i(){return Object.create(null)}function r(t){t.forEach(e)}function n(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e,i,r){if(t){const n=s(t,e,i,r);return t[0](n)}}function s(t,e,i,r){return t[1]&&r?function(t,e){for(const i in e)t[i]=e[i];return t}(i.ctx.slice(),t[1](r(e))):i.ctx}function u(t,e,i,r,n,o,a){const u=function(t,e,i,r){if(t[2]&&r){const n=t[2](r(i));if(void 0===e.dirty)return n;if("object"==typeof n){const t=[],i=Math.max(e.dirty.length,n.length);for(let r=0;r<i;r+=1)t[r]=e.dirty[r]|n[r];return t}return e.dirty|n}return e.dirty}(e,r,n,o);if(u){const n=s(e,i,r,a);t.p(n,u)}}function l(t,e){t.appendChild(e)}function c(t,e,i){t.insertBefore(e,i||null)}function p(t){t.parentNode.removeChild(t)}function h(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function f(){return d(" ")}function _(t,e,i,r){return t.addEventListener(e,i,r),()=>t.removeEventListener(e,i,r)}function g(t,e,i){null==i?t.removeAttribute(e):t.getAttribute(e)!==i&&t.setAttribute(e,i)}function m(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function y(t,e,i,r){t.style.setProperty(e,i,r?"important":"")}let v;function b(t){v=t}function x(t){(function(){if(!v)throw new Error("Function called outside component initialization");return v})().$$.on_mount.push(t)}const w=[],E=[],S=[],I=[],A=Promise.resolve();let C=!1;function P(t){S.push(t)}let T=!1;const L=new Set;function M(){if(!T){T=!0;do{for(let t=0;t<w.length;t+=1){const e=w[t];b(e),k(e.$$)}for(b(null),w.length=0;E.length;)E.pop()();for(let t=0;t<S.length;t+=1){const e=S[t];L.has(e)||(L.add(e),e())}S.length=0}while(w.length);for(;I.length;)I.pop()();C=!1,T=!1,L.clear()}}function k(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(P)}}const R=new Set;let N;function D(t,e){t&&t.i&&(R.delete(t),t.i(e))}function O(t,e,i,r){if(t&&t.o){if(R.has(t))return;R.add(t),N.c.push((()=>{R.delete(t),r&&(i&&t.d(1),r())})),t.o(e)}}function z(t){t&&t.c()}function F(t,i,o){const{fragment:a,on_mount:s,on_destroy:u,after_update:l}=t.$$;a&&a.m(i,o),P((()=>{const i=s.map(e).filter(n);u?u.push(...i):r(i),t.$$.on_mount=[]})),l.forEach(P)}function B(t,e){const i=t.$$;null!==i.fragment&&(r(i.on_destroy),i.fragment&&i.fragment.d(e),i.on_destroy=i.fragment=null,i.ctx=[])}function q(t,e){-1===t.$$.dirty[0]&&(w.push(t),C||(C=!0,A.then(M)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function U(e,n,o,a,s,u,l=[-1]){const c=v;b(e);const h=n.props||{},d=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:s,bound:i(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:i(),dirty:l,skip_bound:!1};let f=!1;if(d.ctx=o?o(e,h,((t,i,...r)=>{const n=r.length?r[0]:i;return d.ctx&&s(d.ctx[t],d.ctx[t]=n)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](n),f&&q(e,t)),i})):[],d.update(),f=!0,r(d.before_update),d.fragment=!!a&&a(d.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);d.fragment&&d.fragment.l(t),t.forEach(p)}else d.fragment&&d.fragment.c();n.intro&&D(e.$$.fragment),F(e,n.target,n.anchor),M()}b(c)}class V{$destroy(){B(this,1),this.$destroy=t}$on(t,e){const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(e),()=>{const t=i.indexOf(e);-1!==t&&i.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function G(t,e,i){return t(i={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&i.path)}},i.exports),i.exports}var j=G((function(t,e){t.exports=function(){var t,e,i;function r(r,n){if(t)if(e){var o="var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk);",a={};t(a),i=n(a),"undefined"!=typeof window&&(i.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else e=n;else t=n}return r(["exports"],(function(t){function e(t,e){return t(e={exports:{}},e.exports),e.exports}var i=r;function r(t,e,i,r){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=i,this.p2y=r}r.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},r.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},r.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},r.prototype.solveCurveX=function(t,e){var i,r,n,o,a;for(void 0===e&&(e=1e-6),n=t,a=0;a<8;a++){if(o=this.sampleCurveX(n)-t,Math.abs(o)<e)return n;var s=this.sampleCurveDerivativeX(n);if(Math.abs(s)<1e-6)break;n-=o/s}if((n=t)<(i=0))return i;if(n>(r=1))return r;for(;i<r;){if(o=this.sampleCurveX(n),Math.abs(o-t)<e)return n;t>o?i=n:r=n,n=.5*(r-i)+i}return n},r.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var n=o;function o(t,e){this.x=t,this.y=e}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),i=Math.sin(t),r=i*this.x+e*this.y;return this.x=e*this.x-i*this.y,this.y=r,this},_rotateAround:function(t,e){var i=Math.cos(t),r=Math.sin(t),n=e.y+r*(this.x-e.x)+i*(this.y-e.y);return this.x=e.x+i*(this.x-e.x)-r*(this.y-e.y),this.y=n,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(t){return t instanceof o?t:Array.isArray(t)?new o(t[0],t[1]):t};var a="undefined"!=typeof self?self:{},s=Math.pow(2,53)-1;function u(t,e,r,n){var o=new i(t,e,r,n);return function(t){return o.solve(t)}}var l=u(.25,.1,.25,1);function c(t,e,i){return Math.min(i,Math.max(e,t))}function p(t,e,i){var r=i-e,n=((t-e)%r+r)%r+e;return n===e?i:n}function h(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];for(var r=0,n=e;r<n.length;r+=1){var o=n[r];for(var a in o)t[a]=o[a]}return t}var d=1;function f(){return d++}function _(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function g(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function m(t,e){t.forEach((function(t){e[t]&&(e[t]=e[t].bind(e))}))}function y(t,e){return-1!==t.indexOf(e,t.length-e.length)}function v(t,e,i){var r={};for(var n in t)r[n]=e.call(i||this,t[n],n,t);return r}function b(t,e,i){var r={};for(var n in t)e.call(i||this,t[n],n,t)&&(r[n]=t[n]);return r}function x(t){return Array.isArray(t)?t.map(x):"object"==typeof t&&t?v(t,x):t}var w={};function E(t){w[t]||("undefined"!=typeof console&&console.warn(t),w[t]=!0)}function S(t,e,i){return(i.y-t.y)*(e.x-t.x)>(e.y-t.y)*(i.x-t.x)}function I(t){for(var e=0,i=0,r=t.length,n=r-1,o=void 0,a=void 0;i<r;n=i++)e+=((a=t[n]).x-(o=t[i]).x)*(o.y+a.y);return e}function A(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function C(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(t,i,r,n){var o=r||n;return e[i]=!o||o.toLowerCase(),""})),e["max-age"]){var i=parseInt(e["max-age"],10);isNaN(i)?delete e["max-age"]:e["max-age"]=i}return e}var P=null;function T(t){if(null==P){var e=t.navigator?t.navigator.userAgent:null;P=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return P}function L(t){try{var e=a[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}var M,k,R,N,D=a.performance&&a.performance.now?a.performance.now.bind(a.performance):Date.now.bind(Date),O=a.requestAnimationFrame||a.mozRequestAnimationFrame||a.webkitRequestAnimationFrame||a.msRequestAnimationFrame,z=a.cancelAnimationFrame||a.mozCancelAnimationFrame||a.webkitCancelAnimationFrame||a.msCancelAnimationFrame,F={now:D,frame:function(t){var e=O(t);return{cancel:function(){return z(e)}}},getImageData:function(t,e){void 0===e&&(e=0);var i=a.document.createElement("canvas"),r=i.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return i.width=t.width,i.height=t.height,r.drawImage(t,0,0,t.width,t.height),r.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:function(t){return M||(M=a.document.createElement("a")),M.href=t,M.href},hardwareConcurrency:a.navigator&&a.navigator.hardwareConcurrency||4,get devicePixelRatio(){return a.devicePixelRatio},get prefersReducedMotion(){return!!a.matchMedia&&(null==k&&(k=a.matchMedia("(prefers-reduced-motion: reduce)")),k.matches)}},B={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},q={supported:!1,testSupport:function(t){!U&&N&&(V?G(t):R=t)}},U=!1,V=!1;function G(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,N),t.isContextLost())return;q.supported=!0}catch(t){}t.deleteTexture(e),U=!0}a.document&&((N=a.document.createElement("img")).onload=function(){R&&G(R),R=null,V=!0},N.onerror=function(){U=!0,R=null},N.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var j="01",K=function(t,e){this._transformRequestFn=t,this._customAccessToken=e,this._createSkuToken()};function X(t){return 0===t.indexOf("mapbox:")}K.prototype._createSkuToken=function(){var t=function(){for(var t="",e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",j,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt},K.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},K.prototype.transformRequest=function(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}},K.prototype.normalizeStyleURL=function(t,e){if(!X(t))return t;var i=W(t);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||e)},K.prototype.normalizeGlyphsURL=function(t,e){if(!X(t))return t;var i=W(t);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||e)},K.prototype.normalizeSourceURL=function(t,e){if(!X(t))return t;var i=W(t);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||e)},K.prototype.normalizeSpriteURL=function(t,e,i,r){var n=W(t);return X(t)?(n.path="/styles/v1"+n.path+"/sprite"+e+i,this._makeAPIURL(n,this._customAccessToken||r)):(n.path+=""+e+i,Q(n))},K.prototype.normalizeTileURL=function(t,e){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!X(t))return t;var i=W(t);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,(F.devicePixelRatio>=2||512===e?"@2x":"")+(q.supported?".webp":"$1")),i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/v4"+i.path;var r=this._customAccessToken||function(t){for(var e=0,i=t;e<i.length;e+=1){var r=i[e].match(/^access_token=(.*)$/);if(r)return r[1]}return null}(i.params)||B.ACCESS_TOKEN;return B.REQUIRE_ACCESS_TOKEN&&r&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,r)},K.prototype.canonicalizeTileURL=function(t,e){var i=W(t);if(!i.path.match(/(^\/v4\/)/)||!i.path.match(/\.[\w]+$/))return t;var r="mapbox://tiles/";r+=i.path.replace("/v4/","");var n=i.params;return e&&(n=n.filter((function(t){return!t.match(/^access_token=/)}))),n.length&&(r+="?"+n.join("&")),r},K.prototype.canonicalizeTileset=function(t,e){for(var i=!!e&&X(e),r=[],n=0,o=t.tiles||[];n<o.length;n+=1){var a=o[n];Y(a)?r.push(this.canonicalizeTileURL(a,i)):r.push(a)}return r},K.prototype._makeAPIURL=function(t,e){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",r=W(B.API_URL);if(t.protocol=r.protocol,t.authority=r.authority,"/"!==r.path&&(t.path=""+r.path+t.path),!B.REQUIRE_ACCESS_TOKEN)return Q(t);if(!(e=e||B.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+i);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return t.params=t.params.filter((function(t){return-1===t.indexOf("access_token")})),t.params.push("access_token="+e),Q(t)};var Z=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Y(t){return Z.test(t)}var H=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function W(t){var e=t.match(H);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function Q(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function J(t){if(!t)return null;var e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(a.atob(e[1]).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(t){return null}}var $=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};$.prototype.getStorageKey=function(t){var e,i=J(B.ACCESS_TOKEN);return e=i&&i.u?a.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))}))):B.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+e:"mapbox.eventData:"+e},$.prototype.fetchEventData=function(){var t=L("localStorage"),e=this.getStorageKey(),i=this.getStorageKey("uuid");if(t)try{var r=a.localStorage.getItem(e);r&&(this.eventData=JSON.parse(r));var n=a.localStorage.getItem(i);n&&(this.anonId=n)}catch(t){E("Unable to read from LocalStorage")}},$.prototype.saveEventData=function(){var t=L("localStorage"),e=this.getStorageKey(),i=this.getStorageKey("uuid");if(t)try{a.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&a.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){E("Unable to write to LocalStorage")}},$.prototype.processRequests=function(t){},$.prototype.postEvent=function(t,e,i,r){var n=this;if(B.EVENTS_URL){var o=W(B.EVENTS_URL);o.params.push("access_token="+(r||B.ACCESS_TOKEN||""));var a={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.12.0",skuId:j,userId:this.anonId},s=e?h(a,e):a,u={url:Q(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=xt(u,(function(t){n.pendingRequest=null,i(t),n.saveEventData(),n.processRequests(r)}))}},$.prototype.queueRequest=function(t,e){this.queue.push(t),this.processRequests(e)};var tt,et,it=function(t){function e(){t.call(this,"map.load"),this.success={},this.skuToken=""}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postMapLoadEvent=function(t,e,i,r){this.skuToken=i,(B.EVENTS_URL&&r||B.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return X(t)||Y(t)})))&&this.queueRequest({id:e,timestamp:Date.now()},r)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var i=this.queue.shift(),r=i.id,n=i.timestamp;r&&this.success[r]||(this.anonId||this.fetchEventData(),g(this.anonId)||(this.anonId=_()),this.postEvent(n,{skuToken:this.skuToken},(function(t){t||r&&(e.success[r]=!0)}),t))}},e}($),rt=new(function(t){function e(e){t.call(this,"appUserTurnstile"),this._customAccessToken=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postTurnstileEvent=function(t,e){B.EVENTS_URL&&B.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return X(t)||Y(t)}))&&this.queueRequest(Date.now(),e)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var i=J(B.ACCESS_TOKEN),r=i?i.u:B.ACCESS_TOKEN,n=r!==this.eventData.tokenU;g(this.anonId)||(this.anonId=_(),n=!0);var o=this.queue.shift();if(this.eventData.lastSuccess){var a=new Date(this.eventData.lastSuccess),s=new Date(o),u=(o-this.eventData.lastSuccess)/864e5;n=n||u>=1||u<-1||a.getDate()!==s.getDate()}else n=!0;if(!n)return this.processRequests();this.postEvent(o,{"enabled.telemetry":!1},(function(t){t||(e.eventData.lastSuccess=o,e.eventData.tokenU=r)}),t)}},e}($)),nt=rt.postTurnstileEvent.bind(rt),ot=new it,at=ot.postMapLoadEvent.bind(ot),st=500,ut=50;function lt(){a.caches&&!tt&&(tt=a.caches.open("mapbox-tiles"))}function ct(t){var e=t.indexOf("?");return e<0?t:t.slice(0,e)}var pt,ht=1/0;function dt(){return null==pt&&(pt=a.OffscreenCanvas&&new a.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof a.createImageBitmap),pt}var ft={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(ft);var _t,gt,mt=function(t){function e(e,i,r){401===i&&Y(r)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,e),this.status=i,this.url=r,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error),yt=A()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===a.location.protocol?a.parent:a).location.href},vt=function(t,e){if(!(/^file:/.test(i=t.url)||/^file:/.test(yt())&&!/^\w+:/.test(i))){if(a.fetch&&a.Request&&a.AbortController&&a.Request.prototype.hasOwnProperty("signal"))return function(t,e){var i,r=new a.AbortController,n=new a.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:yt(),signal:r.signal}),o=!1,s=!1,u=(i=n.url).indexOf("sku=")>0&&Y(i);"json"===t.type&&n.headers.set("Accept","application/json");var l=function(i,r,o){if(!s){if(i&&"SecurityError"!==i.message&&E(i),r&&o)return c(r);var l=Date.now();a.fetch(n).then((function(i){if(i.ok){var r=u?i.clone():null;return c(i,r,l)}return e(new mt(i.statusText,i.status,t.url))})).catch((function(t){20!==t.code&&e(new Error(t.message))}))}},c=function(i,r,u){("arrayBuffer"===t.type?i.arrayBuffer():"json"===t.type?i.json():i.text()).then((function(t){s||(r&&u&&function(t,e,i){if(lt(),tt){var r={status:e.status,statusText:e.statusText,headers:new a.Headers};e.headers.forEach((function(t,e){return r.headers.set(e,t)}));var n=C(e.headers.get("Cache-Control")||"");n["no-store"]||(n["max-age"]&&r.headers.set("Expires",new Date(i+1e3*n["max-age"]).toUTCString()),new Date(r.headers.get("Expires")).getTime()-i<42e4||function(t,e){if(void 0===et)try{new Response(new ReadableStream),et=!0}catch(t){et=!1}et?e(t.body):t.blob().then(e)}(e,(function(e){var i=new a.Response(e,r);lt(),tt&&tt.then((function(e){return e.put(ct(t.url),i)})).catch((function(t){return E(t.message)}))})))}}(n,r,u),o=!0,e(null,t,i.headers.get("Cache-Control"),i.headers.get("Expires")))})).catch((function(t){s||e(new Error(t.message))}))};return u?function(t,e){if(lt(),!tt)return e(null);var i=ct(t.url);tt.then((function(t){t.match(i).then((function(r){var n=function(t){if(!t)return!1;var e=new Date(t.headers.get("Expires")||0),i=C(t.headers.get("Cache-Control")||"");return e>Date.now()&&!i["no-cache"]}(r);t.delete(i),n&&t.put(i,r.clone()),e(null,r,n)})).catch(e)})).catch(e)}(n,l):l(null,null),{cancel:function(){s=!0,o||r.abort()}}}(t,e);if(A()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var i;return function(t,e){var i=new a.XMLHttpRequest;for(var r in i.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(i.responseType="arraybuffer"),t.headers)i.setRequestHeader(r,t.headers[r]);return"json"===t.type&&(i.responseType="text",i.setRequestHeader("Accept","application/json")),i.withCredentials="include"===t.credentials,i.onerror=function(){e(new Error(i.statusText))},i.onload=function(){if((i.status>=200&&i.status<300||0===i.status)&&null!==i.response){var r=i.response;if("json"===t.type)try{r=JSON.parse(i.response)}catch(t){return e(t)}e(null,r,i.getResponseHeader("Cache-Control"),i.getResponseHeader("Expires"))}else e(new mt(i.statusText,i.status,t.url))},i.send(t.body),{cancel:function(){return i.abort()}}}(t,e)},bt=function(t,e){return vt(h(t,{type:"arrayBuffer"}),e)},xt=function(t,e){return vt(h(t,{method:"POST"}),e)};_t=[],gt=0;var wt=function(t,e){if(q.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),gt>=B.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:t,callback:e,cancelled:!1,cancel:function(){this.cancelled=!0}};return _t.push(i),i}gt++;var r=!1,n=function(){if(!r)for(r=!0,gt--;_t.length&&gt<B.MAX_PARALLEL_IMAGE_REQUESTS;){var t=_t.shift();t.cancelled||(t.cancel=wt(t.requestParameters,t.callback).cancel)}},o=bt(t,(function(t,i,r,o){n(),t?e(t):i&&(dt()?function(t,e){var i=new a.Blob([new Uint8Array(t)],{type:"image/png"});a.createImageBitmap(i).then((function(t){e(null,t)})).catch((function(t){e(new Error("Could not load image because of "+t.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))}))}(i,e):function(t,e,i,r){var n=new a.Image,o=a.URL;n.onload=function(){e(null,n),o.revokeObjectURL(n.src)},n.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var s=new a.Blob([new Uint8Array(t)],{type:"image/png"});n.cacheControl=i,n.expires=r,n.src=t.byteLength?o.createObjectURL(s):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(i,e,r,o))}));return{cancel:function(){o.cancel(),n()}}};function Et(t,e,i){i[t]&&-1!==i[t].indexOf(e)||(i[t]=i[t]||[],i[t].push(e))}function St(t,e,i){if(i&&i[t]){var r=i[t].indexOf(e);-1!==r&&i[t].splice(r,1)}}var It=function(t,e){void 0===e&&(e={}),h(this,e),this.type=t},At=function(t){function e(e,i){void 0===i&&(i={}),t.call(this,"error",h({error:e},i))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(It),Ct=function(){};Ct.prototype.on=function(t,e){return this._listeners=this._listeners||{},Et(t,e,this._listeners),this},Ct.prototype.off=function(t,e){return St(t,e,this._listeners),St(t,e,this._oneTimeListeners),this},Ct.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},Et(t,e,this._oneTimeListeners),this},Ct.prototype.fire=function(t,e){"string"==typeof t&&(t=new It(t,e||{}));var i=t.type;if(this.listens(i)){t.target=this;for(var r=0,n=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];r<n.length;r+=1)n[r].call(this,t);for(var o=0,a=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];o<a.length;o+=1){var s=a[o];St(i,s,this._oneTimeListeners),s.call(this,t)}var u=this._eventedParent;u&&(h(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),u.fire(t))}else t instanceof At&&console.error(t.error);return this},Ct.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},Ct.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var Pt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Tt=function(t,e,i,r){this.message=(t?t+": ":"")+i,r&&(this.identifier=r),null!=e&&e.__line__&&(this.line=e.__line__)};function Lt(t){var e=t.value;return e?[new Tt(t.key,e,"constants have been deprecated as of v8")]:[]}function Mt(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];for(var r=0,n=e;r<n.length;r+=1){var o=n[r];for(var a in o)t[a]=o[a]}return t}function kt(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Rt(t){if(Array.isArray(t))return t.map(Rt);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var i in t)e[i]=Rt(t[i]);return e}return kt(t)}var Nt=function(t){function e(e,i){t.call(this,i),this.message=i,this.key=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),Dt=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var i=0,r=e;i<r.length;i+=1){var n=r[i];this.bindings[n[0]]=n[1]}};Dt.prototype.concat=function(t){return new Dt(this,t)},Dt.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},Dt.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var Ot={kind:"null"},zt={kind:"number"},Ft={kind:"string"},Bt={kind:"boolean"},qt={kind:"color"},Ut={kind:"object"},Vt={kind:"value"},Gt={kind:"collator"},jt={kind:"formatted"},Kt={kind:"resolvedImage"};function Xt(t,e){return{kind:"array",itemType:t,N:e}}function Zt(t){if("array"===t.kind){var e=Zt(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var Yt=[Ot,zt,Ft,Bt,qt,jt,Ut,Xt(Vt),Kt];function Ht(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Ht(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var i=0,r=Yt;i<r.length;i+=1)if(!Ht(r[i],e))return null}return"Expected "+Zt(t)+" but found "+Zt(e)+" instead."}function Wt(t,e){return e.some((function(e){return e.kind===t.kind}))}function Qt(t,e){return e.some((function(e){return"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t}))}var Jt=e((function(t,e){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(t){return(t=Math.round(t))<0?0:t>255?255:t}function n(t){return r("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function o(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function a(t,e,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}try{e.parseCSSColor=function(t){var e,s=t.replace(/ /g,"").toLowerCase();if(s in i)return i[s].slice();if("#"===s[0])return 4===s.length?(e=parseInt(s.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===s.length&&(e=parseInt(s.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var u=s.indexOf("("),l=s.indexOf(")");if(-1!==u&&l+1===s.length){var c=s.substr(0,u),p=s.substr(u+1,l-(u+1)).split(","),h=1;switch(c){case"rgba":if(4!==p.length)return null;h=o(p.pop());case"rgb":return 3!==p.length?null:[n(p[0]),n(p[1]),n(p[2]),h];case"hsla":if(4!==p.length)return null;h=o(p.pop());case"hsl":if(3!==p.length)return null;var d=(parseFloat(p[0])%360+360)%360/360,f=o(p[1]),_=o(p[2]),g=_<=.5?_*(f+1):_+f-_*f,m=2*_-g;return[r(255*a(m,g,d+1/3)),r(255*a(m,g,d)),r(255*a(m,g,d-1/3)),h];default:return null}}return null}}catch(t){}})).parseCSSColor,$t=function(t,e,i,r){void 0===r&&(r=1),this.r=t,this.g=e,this.b=i,this.a=r};$t.parse=function(t){if(t){if(t instanceof $t)return t;if("string"==typeof t){var e=Jt(t);if(e)return new $t(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},$t.prototype.toString=function(){var t=this.toArray(),e=t[1],i=t[2],r=t[3];return"rgba("+Math.round(t[0])+","+Math.round(e)+","+Math.round(i)+","+r+")"},$t.prototype.toArray=function(){var t=this.a;return 0===t?[0,0,0,0]:[255*this.r/t,255*this.g/t,255*this.b/t,t]},$t.black=new $t(0,0,0,1),$t.white=new $t(1,1,1,1),$t.transparent=new $t(0,0,0,0),$t.red=new $t(1,0,0,1);var te=function(t,e,i){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};te.prototype.compare=function(t,e){return this.collator.compare(t,e)},te.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var ee=function(t,e,i,r,n){this.text=t,this.image=e,this.scale=i,this.fontStack=r,this.textColor=n},ie=function(t){this.sections=t};ie.fromString=function(t){return new ie([new ee(t,null,null,null,null)])},ie.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some((function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length}))},ie.factory=function(t){return t instanceof ie?t:ie.fromString(t)},ie.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map((function(t){return t.text})).join("")},ie.prototype.serialize=function(){for(var t=["format"],e=0,i=this.sections;e<i.length;e+=1){var r=i[e];if(r.image)t.push(["image",r.image.name]);else{t.push(r.text);var n={};r.fontStack&&(n["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(n["font-scale"]=r.scale),r.textColor&&(n["text-color"]=["rgba"].concat(r.textColor.toArray())),t.push(n)}}return t};var re=function(t){this.name=t.name,this.available=t.available};function ne(t,e,i,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[t,e,i,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[t,e,i,r]:[t,e,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function oe(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof $t)return!0;if(t instanceof te)return!0;if(t instanceof ie)return!0;if(t instanceof re)return!0;if(Array.isArray(t)){for(var e=0,i=t;e<i.length;e+=1)if(!oe(i[e]))return!1;return!0}if("object"==typeof t){for(var r in t)if(!oe(t[r]))return!1;return!0}return!1}function ae(t){if(null===t)return Ot;if("string"==typeof t)return Ft;if("boolean"==typeof t)return Bt;if("number"==typeof t)return zt;if(t instanceof $t)return qt;if(t instanceof te)return Gt;if(t instanceof ie)return jt;if(t instanceof re)return Kt;if(Array.isArray(t)){for(var e,i=t.length,r=0,n=t;r<n.length;r+=1){var o=ae(n[r]);if(e){if(e===o)continue;e=Vt;break}e=o}return Xt(e||Vt,i)}return Ut}function se(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof $t||t instanceof ie||t instanceof re?t.toString():JSON.stringify(t)}re.prototype.toString=function(){return this.name},re.fromString=function(t){return t?new re({name:t,available:!1}):null},re.prototype.serialize=function(){return["image",this.name]};var ue=function(t,e){this.type=t,this.value=e};ue.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!oe(t[1]))return e.error("invalid value");var i=t[1],r=ae(i),n=e.expectedType;return"array"!==r.kind||0!==r.N||!n||"array"!==n.kind||"number"==typeof n.N&&0!==n.N||(r=n),new ue(r,i)},ue.prototype.evaluate=function(){return this.value},ue.prototype.eachChild=function(){},ue.prototype.outputDefined=function(){return!0},ue.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof $t?["rgba"].concat(this.value.toArray()):this.value instanceof ie?this.value.serialize():this.value};var le=function(t){this.name="ExpressionEvaluationError",this.message=t};le.prototype.toJSON=function(){return this.message};var ce={string:Ft,number:zt,boolean:Bt,object:Ut},pe=function(t,e){this.type=t,this.args=e};pe.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i,r=1,n=t[0];if("array"===n){var o,a;if(t.length>2){var s=t[1];if("string"!=typeof s||!(s in ce)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);o=ce[s],r++}else o=Vt;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);a=t[2],r++}i=Xt(o,a)}else i=ce[n];for(var u=[];r<t.length;r++){var l=e.parse(t[r],r,Vt);if(!l)return null;u.push(l)}return new pe(i,u)},pe.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var i=this.args[e].evaluate(t);if(!Ht(this.type,ae(i)))return i;if(e===this.args.length-1)throw new le("Expected value to be of type "+Zt(this.type)+", but found "+Zt(ae(i))+" instead.")}return null},pe.prototype.eachChild=function(t){this.args.forEach(t)},pe.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},pe.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var i=t.itemType;if("string"===i.kind||"number"===i.kind||"boolean"===i.kind){e.push(i.kind);var r=t.N;("number"==typeof r||this.args.length>1)&&e.push(r)}}return e.concat(this.args.map((function(t){return t.serialize()})))};var he=function(t){this.type=jt,this.sections=t};he.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i=t[1];if(!Array.isArray(i)&&"object"==typeof i)return e.error("First argument must be an image or text section.");for(var r=[],n=!1,o=1;o<=t.length-1;++o){var a=t[o];if(n&&"object"==typeof a&&!Array.isArray(a)){n=!1;var s=null;if(a["font-scale"]&&!(s=e.parse(a["font-scale"],1,zt)))return null;var u=null;if(a["text-font"]&&!(u=e.parse(a["text-font"],1,Xt(Ft))))return null;var l=null;if(a["text-color"]&&!(l=e.parse(a["text-color"],1,qt)))return null;var c=r[r.length-1];c.scale=s,c.font=u,c.textColor=l}else{var p=e.parse(t[o],1,Vt);if(!p)return null;var h=p.type.kind;if("string"!==h&&"value"!==h&&"null"!==h&&"resolvedImage"!==h)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");n=!0,r.push({content:p,scale:null,font:null,textColor:null})}}return new he(r)},he.prototype.evaluate=function(t){return new ie(this.sections.map((function(e){var i=e.content.evaluate(t);return ae(i)===Kt?new ee("",i,null,null,null):new ee(se(i),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))},he.prototype.eachChild=function(t){for(var e=0,i=this.sections;e<i.length;e+=1){var r=i[e];t(r.content),r.scale&&t(r.scale),r.font&&t(r.font),r.textColor&&t(r.textColor)}},he.prototype.outputDefined=function(){return!1},he.prototype.serialize=function(){for(var t=["format"],e=0,i=this.sections;e<i.length;e+=1){var r=i[e];t.push(r.content.serialize());var n={};r.scale&&(n["font-scale"]=r.scale.serialize()),r.font&&(n["text-font"]=r.font.serialize()),r.textColor&&(n["text-color"]=r.textColor.serialize()),t.push(n)}return t};var de=function(t){this.type=Kt,this.input=t};de.parse=function(t,e){if(2!==t.length)return e.error("Expected two arguments.");var i=e.parse(t[1],1,Ft);return i?new de(i):e.error("No image name provided.")},de.prototype.evaluate=function(t){var e=this.input.evaluate(t),i=re.fromString(e);return i&&t.availableImages&&(i.available=t.availableImages.indexOf(e)>-1),i},de.prototype.eachChild=function(t){t(this.input)},de.prototype.outputDefined=function(){return!1},de.prototype.serialize=function(){return["image",this.input.serialize()]};var fe={"to-boolean":Bt,"to-color":qt,"to-number":zt,"to-string":Ft},_e=function(t,e){this.type=t,this.args=e};_e.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i=t[0];if(("to-boolean"===i||"to-string"===i)&&2!==t.length)return e.error("Expected one argument.");for(var r=fe[i],n=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,Vt);if(!a)return null;n.push(a)}return new _e(r,n)},_e.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,i,r=0,n=this.args;r<n.length;r+=1){if(i=null,(e=n[r].evaluate(t))instanceof $t)return e;if("string"==typeof e){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(i=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":ne(e[0],e[1],e[2],e[3])))return new $t(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new le(i||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'")}if("number"===this.type.kind){for(var a=null,s=0,u=this.args;s<u.length;s+=1){if(null===(a=u[s].evaluate(t)))return 0;var l=Number(a);if(!isNaN(l))return l}throw new le("Could not convert "+JSON.stringify(a)+" to number.")}return"formatted"===this.type.kind?ie.fromString(se(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?re.fromString(se(this.args[0].evaluate(t))):se(this.args[0].evaluate(t))},_e.prototype.eachChild=function(t){this.args.forEach(t)},_e.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},_e.prototype.serialize=function(){if("formatted"===this.type.kind)return new he([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new de(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild((function(e){t.push(e.serialize())})),t};var ge=["Unknown","Point","LineString","Polygon"],me=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};me.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},me.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?ge[this.feature.type]:this.feature.type:null},me.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},me.prototype.canonicalID=function(){return this.canonical},me.prototype.properties=function(){return this.feature&&this.feature.properties||{}},me.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=$t.parse(t)),e};var ye=function(t,e,i,r){this.name=t,this.type=e,this._evaluate=i,this.args=r};ye.prototype.evaluate=function(t){return this._evaluate(t,this.args)},ye.prototype.eachChild=function(t){this.args.forEach(t)},ye.prototype.outputDefined=function(){return!1},ye.prototype.serialize=function(){return[this.name].concat(this.args.map((function(t){return t.serialize()})))},ye.parse=function(t,e){var i,r=t[0],n=ye.definitions[r];if(!n)return e.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(n)?n[0]:n.type,a=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,s=a.filter((function(e){var i=e[0];return!Array.isArray(i)||i.length===t.length-1})),u=null,l=0,c=s;l<c.length;l+=1){var p=c[l],h=p[0],d=p[1];u=new qe(e.registry,e.path,null,e.scope);for(var f=[],_=!1,g=1;g<t.length;g++){var m=t[g],y=Array.isArray(h)?h[g-1]:h.type,v=u.parse(m,1+f.length,y);if(!v){_=!0;break}f.push(v)}if(!_)if(Array.isArray(h)&&h.length!==f.length)u.error("Expected "+h.length+" arguments, but found "+f.length+" instead.");else{for(var b=0;b<f.length;b++){var x=Array.isArray(h)?h[b]:h.type,w=f[b];u.concat(b+1).checkSubtype(x,w.type)}if(0===u.errors.length)return new ye(r,o,d,f)}}if(1===s.length)(i=e.errors).push.apply(i,u.errors);else{for(var E=(s.length?s:a).map((function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(Zt).join(", ")+")":"("+Zt(e.type)+"...)"})).join(" | "),S=[],I=1;I<t.length;I++){var A=e.parse(t[I],1+S.length);if(!A)return null;S.push(Zt(A.type))}e.error("Expected arguments of type "+E+", but found ("+S.join(", ")+") instead.")}return null},ye.register=function(t,e){for(var i in ye.definitions=e,e)t[i]=ye};var ve=function(t,e,i){this.type=Gt,this.locale=i,this.caseSensitive=t,this.diacriticSensitive=e};function be(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function xe(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function we(t,e){var i=(180+t[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,n=Math.pow(2,e.z);return[Math.round(i*n*8192),Math.round(r*n*8192)]}function Ee(t,e,i){return e[1]>t[1]!=i[1]>t[1]&&t[0]<(i[0]-e[0])*(t[1]-e[1])/(i[1]-e[1])+e[0]}function Se(t,e){for(var i,r,n,o,a,s,u,l=!1,c=0,p=e.length;c<p;c++)for(var h=e[c],d=0,f=h.length;d<f-1;d++){if((o=(i=t)[0]-(r=h[d])[0])*(u=i[1]-(n=h[d+1])[1])-(s=i[0]-n[0])*(a=i[1]-r[1])==0&&o*s<=0&&a*u<=0)return!1;Ee(t,h[d],h[d+1])&&(l=!l)}return l}function Ie(t,e){for(var i=0;i<e.length;i++)if(Se(t,e[i]))return!0;return!1}function Ae(t,e,i,r){var n=r[0]-i[0],o=r[1]-i[1],a=(t[0]-i[0])*o-n*(t[1]-i[1]),s=(e[0]-i[0])*o-n*(e[1]-i[1]);return a>0&&s<0||a<0&&s>0}function Ce(t,e,i){for(var r=0,n=i;r<n.length;r+=1)for(var o=n[r],a=0;a<o.length-1;++a)if(0!=(p=[(c=o[a+1])[0]-(l=o[a])[0],c[1]-l[1]])[0]*(h=[(u=e)[0]-(s=t)[0],u[1]-s[1]])[1]-p[1]*h[0]&&Ae(s,u,l,c)&&Ae(l,c,s,u))return!0;var s,u,l,c,p,h;return!1}function Pe(t,e){for(var i=0;i<t.length;++i)if(!Se(t[i],e))return!1;for(var r=0;r<t.length-1;++r)if(Ce(t[r],t[r+1],e))return!1;return!0}function Te(t,e){for(var i=0;i<e.length;i++)if(Pe(t,e[i]))return!0;return!1}function Le(t,e,i){for(var r=[],n=0;n<t.length;n++){for(var o=[],a=0;a<t[n].length;a++){var s=we(t[n][a],i);be(e,s),o.push(s)}r.push(o)}return r}function Me(t,e,i){for(var r=[],n=0;n<t.length;n++){var o=Le(t[n],e,i);r.push(o)}return r}function ke(t,e,i,r){if(t[0]<i[0]||t[0]>i[2]){var n=.5*r,o=t[0]-i[0]>n?-r:i[0]-t[0]>n?r:0;0===o&&(o=t[0]-i[2]>n?-r:i[2]-t[0]>n?r:0),t[0]+=o}be(e,t)}function Re(t,e,i,r){for(var n=8192*Math.pow(2,r.z),o=[8192*r.x,8192*r.y],a=[],s=0,u=t;s<u.length;s+=1)for(var l=0,c=u[s];l<c.length;l+=1){var p=c[l],h=[p.x+o[0],p.y+o[1]];ke(h,e,i,n),a.push(h)}return a}function Ne(t,e,i,r){for(var n,o=8192*Math.pow(2,r.z),a=[8192*r.x,8192*r.y],s=[],u=0,l=t;u<l.length;u+=1){for(var c=[],p=0,h=l[u];p<h.length;p+=1){var d=h[p],f=[d.x+a[0],d.y+a[1]];be(e,f),c.push(f)}s.push(c)}if(e[2]-e[0]<=o/2){(n=e)[0]=n[1]=1/0,n[2]=n[3]=-1/0;for(var _=0,g=s;_<g.length;_+=1)for(var m=0,y=g[_];m<y.length;m+=1)ke(y[m],e,i,o)}return s}ve.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var i=t[1];if("object"!=typeof i||Array.isArray(i))return e.error("Collator options argument must be an object.");var r=e.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,Bt);if(!r)return null;var n=e.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,Bt);if(!n)return null;var o=null;return i.locale&&!(o=e.parse(i.locale,1,Ft))?null:new ve(r,n,o)},ve.prototype.evaluate=function(t){return new te(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},ve.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},ve.prototype.outputDefined=function(){return!1},ve.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var De=function(t,e){this.type=Bt,this.geojson=t,this.geometries=e};function Oe(t){if(t instanceof ye){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof De)return!1;var e=!0;return t.eachChild((function(t){e&&!Oe(t)&&(e=!1)})),e}function ze(t){if(t instanceof ye&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild((function(t){e&&!ze(t)&&(e=!1)})),e}function Fe(t,e){if(t instanceof ye&&e.indexOf(t.name)>=0)return!1;var i=!0;return t.eachChild((function(t){i&&!Fe(t,e)&&(i=!1)})),i}De.parse=function(t,e){if(2!==t.length)return e.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(oe(t[1])){var i=t[1];if("FeatureCollection"===i.type)for(var r=0;r<i.features.length;++r){var n=i.features[r].geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new De(i,i.features[r].geometry)}else if("Feature"===i.type){var o=i.geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new De(i,i.geometry)}else if("Polygon"===i.type||"MultiPolygon"===i.type)return new De(i,i)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")},De.prototype.evaluate=function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){var i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],n=t.canonicalID();if("Polygon"===e.type){var o=Le(e.coordinates,r,n),a=Re(t.geometry(),i,r,n);if(!xe(i,r))return!1;for(var s=0,u=a;s<u.length;s+=1)if(!Se(u[s],o))return!1}if("MultiPolygon"===e.type){var l=Me(e.coordinates,r,n),c=Re(t.geometry(),i,r,n);if(!xe(i,r))return!1;for(var p=0,h=c;p<h.length;p+=1)if(!Ie(h[p],l))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){var i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],n=t.canonicalID();if("Polygon"===e.type){var o=Le(e.coordinates,r,n),a=Ne(t.geometry(),i,r,n);if(!xe(i,r))return!1;for(var s=0,u=a;s<u.length;s+=1)if(!Pe(u[s],o))return!1}if("MultiPolygon"===e.type){var l=Me(e.coordinates,r,n),c=Ne(t.geometry(),i,r,n);if(!xe(i,r))return!1;for(var p=0,h=c;p<h.length;p+=1)if(!Te(h[p],l))return!1}return!0}(t,this.geometries)}return!1},De.prototype.eachChild=function(){},De.prototype.outputDefined=function(){return!0},De.prototype.serialize=function(){return["within",this.geojson]};var Be=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};Be.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var i=t[1];return e.scope.has(i)?new Be(i,e.scope.get(i)):e.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},Be.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},Be.prototype.eachChild=function(){},Be.prototype.outputDefined=function(){return!1},Be.prototype.serialize=function(){return["var",this.name]};var qe=function(t,e,i,r,n){void 0===e&&(e=[]),void 0===r&&(r=new Dt),void 0===n&&(n=[]),this.registry=t,this.path=e,this.key=e.map((function(t){return"["+t+"]"})).join(""),this.scope=r,this.errors=n,this.expectedType=i};function Ue(t,e){for(var i,r=t.length-1,n=0,o=r,a=0;n<=o;)if((i=t[a=Math.floor((n+o)/2)])<=e){if(a===r||e<t[a+1])return a;n=a+1}else{if(!(i>e))throw new le("Input is not a number.");o=a-1}return 0}qe.prototype.parse=function(t,e,i,r,n){return void 0===n&&(n={}),e?this.concat(e,i,r)._parse(t,n):this._parse(t,n)},qe.prototype._parse=function(t,e){function i(t,e,i){return"assert"===i?new pe(e,[t]):"coerce"===i?new _e(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=t[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found "+typeof r+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var n=this.registry[r];if(n){var o=n.parse(t,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,s=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind&&"resolvedImage"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else o=i(o,a,e.typeAnnotation||"coerce");else o=i(o,a,e.typeAnnotation||"assert")}if(!(o instanceof ue)&&"resolvedImage"!==o.type.kind&&function t(e){if(e instanceof Be)return t(e.boundExpression);if(e instanceof ye&&"error"===e.name)return!1;if(e instanceof ve)return!1;if(e instanceof De)return!1;var i=e instanceof _e||e instanceof pe,r=!0;return e.eachChild((function(e){r=i?r&&t(e):r&&e instanceof ue})),!!r&&Oe(e)&&Fe(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(o)){var u=new me;try{o=new ue(o.type,o.evaluate(u))}catch(t){return this.error(t.message),null}}return o}return this.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof t+" instead.")},qe.prototype.concat=function(t,e,i){var r="number"==typeof t?this.path.concat(t):this.path,n=i?this.scope.concat(i):this.scope;return new qe(this.registry,r,e||null,n,this.errors)},qe.prototype.error=function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];var r=""+this.key+e.map((function(t){return"["+t+"]"})).join("");this.errors.push(new Nt(r,t))},qe.prototype.checkSubtype=function(t,e){var i=Ht(t,e);return i&&this.error(i),i};var Ve=function(t,e,i){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var r=0,n=i;r<n.length;r+=1){var o=n[r],a=o[1];this.labels.push(o[0]),this.outputs.push(a)}};function Ge(t,e,i){return t*(1-i)+e*i}Ve.parse=function(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");var i=e.parse(t[1],1,zt);if(!i)return null;var r=[],n=null;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var o=1;o<t.length;o+=2){var a=1===o?-1/0:t[o],s=t[o+1],u=o,l=o+1;if("number"!=typeof a)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(r.length&&r[r.length-1][0]>=a)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var c=e.parse(s,l,n);if(!c)return null;n=n||c.type,r.push([a,c])}return new Ve(n,i,r)},Ve.prototype.evaluate=function(t){var e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return i[0].evaluate(t);var n=e.length;return r>=e[n-1]?i[n-1].evaluate(t):i[Ue(e,r)].evaluate(t)},Ve.prototype.eachChild=function(t){t(this.input);for(var e=0,i=this.outputs;e<i.length;e+=1)t(i[e])},Ve.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},Ve.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var je=Object.freeze({__proto__:null,number:Ge,color:function(t,e,i){return new $t(Ge(t.r,e.r,i),Ge(t.g,e.g,i),Ge(t.b,e.b,i),Ge(t.a,e.a,i))},array:function(t,e,i){return t.map((function(t,r){return Ge(t,e[r],i)}))}}),Ke=6/29*3*(6/29),Xe=Math.PI/180,Ze=180/Math.PI;function Ye(t){return t>.008856451679035631?Math.pow(t,1/3):t/Ke+4/29}function He(t){return t>6/29?t*t*t:Ke*(t-4/29)}function We(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Qe(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Je(t){var e=Qe(t.r),i=Qe(t.g),r=Qe(t.b),n=Ye((.4124564*e+.3575761*i+.1804375*r)/.95047),o=Ye((.2126729*e+.7151522*i+.072175*r)/1);return{l:116*o-16,a:500*(n-o),b:200*(o-Ye((.0193339*e+.119192*i+.9503041*r)/1.08883)),alpha:t.a}}function $e(t){var e=(t.l+16)/116,i=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=1*He(e),i=.95047*He(i),r=1.08883*He(r),new $t(We(3.2404542*i-1.5371385*e-.4985314*r),We(-.969266*i+1.8760108*e+.041556*r),We(.0556434*i-.2040259*e+1.0572252*r),t.alpha)}function ti(t,e,i){var r=e-t;return t+i*(r>180||r<-180?r-360*Math.round(r/360):r)}var ei={forward:Je,reverse:$e,interpolate:function(t,e,i){return{l:Ge(t.l,e.l,i),a:Ge(t.a,e.a,i),b:Ge(t.b,e.b,i),alpha:Ge(t.alpha,e.alpha,i)}}},ii={forward:function(t){var e=Je(t),i=e.l,r=e.a,n=e.b,o=Math.atan2(n,r)*Ze;return{h:o<0?o+360:o,c:Math.sqrt(r*r+n*n),l:i,alpha:t.a}},reverse:function(t){var e=t.h*Xe,i=t.c;return $e({l:t.l,a:Math.cos(e)*i,b:Math.sin(e)*i,alpha:t.alpha})},interpolate:function(t,e,i){return{h:ti(t.h,e.h,i),c:Ge(t.c,e.c,i),l:Ge(t.l,e.l,i),alpha:Ge(t.alpha,e.alpha,i)}}},ri=Object.freeze({__proto__:null,lab:ei,hcl:ii}),ni=function(t,e,i,r,n){this.type=t,this.operator=e,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(var o=0,a=n;o<a.length;o+=1){var s=a[o],u=s[1];this.labels.push(s[0]),this.outputs.push(u)}};function oi(t,e,i,r){var n=r-i,o=t-i;return 0===n?0:1===e?o/n:(Math.pow(e,o)-1)/(Math.pow(e,n)-1)}ni.interpolationFactor=function(t,e,r,n){var o=0;if("exponential"===t.name)o=oi(e,t.base,r,n);else if("linear"===t.name)o=oi(e,1,r,n);else if("cubic-bezier"===t.name){var a=t.controlPoints;o=new i(a[0],a[1],a[2],a[3]).solve(oi(e,1,r,n))}return o},ni.parse=function(t,e){var i=t[0],r=t[1],n=t[2],o=t.slice(3);if(!Array.isArray(r)||0===r.length)return e.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){var a=r[1];if("number"!=typeof a)return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:a}}else{if("cubic-bezier"!==r[0])return e.error("Unknown interpolation type "+String(r[0]),1,0);var s=r.slice(1);if(4!==s.length||s.some((function(t){return"number"!=typeof t||t<0||t>1})))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(n=e.parse(n,2,zt)))return null;var u=[],l=null;"interpolate-hcl"===i||"interpolate-lab"===i?l=qt:e.expectedType&&"value"!==e.expectedType.kind&&(l=e.expectedType);for(var c=0;c<o.length;c+=2){var p=o[c],h=o[c+1],d=c+3,f=c+4;if("number"!=typeof p)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(u.length&&u[u.length-1][0]>=p)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',d);var _=e.parse(h,f,l);if(!_)return null;l=l||_.type,u.push([p,_])}return"number"===l.kind||"color"===l.kind||"array"===l.kind&&"number"===l.itemType.kind&&"number"==typeof l.N?new ni(l,i,r,n,u):e.error("Type "+Zt(l)+" is not interpolatable.")},ni.prototype.evaluate=function(t){var e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return i[0].evaluate(t);var n=e.length;if(r>=e[n-1])return i[n-1].evaluate(t);var o=Ue(e,r),a=ni.interpolationFactor(this.interpolation,r,e[o],e[o+1]),s=i[o].evaluate(t),u=i[o+1].evaluate(t);return"interpolate"===this.operator?je[this.type.kind.toLowerCase()](s,u,a):"interpolate-hcl"===this.operator?ii.reverse(ii.interpolate(ii.forward(s),ii.forward(u),a)):ei.reverse(ei.interpolate(ei.forward(s),ei.forward(u),a))},ni.prototype.eachChild=function(t){t(this.input);for(var e=0,i=this.outputs;e<i.length;e+=1)t(i[e])},ni.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},ni.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],i=0;i<this.labels.length;i++)e.push(this.labels[i],this.outputs[i].serialize());return e};var ai=function(t,e){this.type=t,this.args=e};ai.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var i=null,r=e.expectedType;r&&"value"!==r.kind&&(i=r);for(var n=[],o=0,a=t.slice(1);o<a.length;o+=1){var s=e.parse(a[o],1+n.length,i,void 0,{typeAnnotation:"omit"});if(!s)return null;i=i||s.type,n.push(s)}var u=r&&n.some((function(t){return Ht(r,t.type)}));return new ai(u?Vt:i,n)},ai.prototype.evaluate=function(t){for(var e,i=null,r=0,n=0,o=this.args;n<o.length&&(r++,(i=o[n].evaluate(t))&&i instanceof re&&!i.available&&(e||(e=i.name),i=null,r===this.args.length&&(i=e)),null===i);n+=1);return i},ai.prototype.eachChild=function(t){this.args.forEach(t)},ai.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},ai.prototype.serialize=function(){var t=["coalesce"];return this.eachChild((function(e){t.push(e.serialize())})),t};var si=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};si.prototype.evaluate=function(t){return this.result.evaluate(t)},si.prototype.eachChild=function(t){for(var e=0,i=this.bindings;e<i.length;e+=1)t(i[e][1]);t(this.result)},si.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var i=[],r=1;r<t.length-1;r+=2){var n=t[r];if("string"!=typeof n)return e.error("Expected string, but found "+typeof n+" instead.",r);if(/[^a-zA-Z0-9_]/.test(n))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);var o=e.parse(t[r+1],r+1);if(!o)return null;i.push([n,o])}var a=e.parse(t[t.length-1],t.length-1,e.expectedType,i);return a?new si(i,a):null},si.prototype.outputDefined=function(){return this.result.outputDefined()},si.prototype.serialize=function(){for(var t=["let"],e=0,i=this.bindings;e<i.length;e+=1){var r=i[e];t.push(r[0],r[1].serialize())}return t.push(this.result.serialize()),t};var ui=function(t,e,i){this.type=t,this.index=e,this.input=i};ui.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,zt),r=e.parse(t[2],2,Xt(e.expectedType||Vt));return i&&r?new ui(r.type.itemType,i,r):null},ui.prototype.evaluate=function(t){var e=this.index.evaluate(t),i=this.input.evaluate(t);if(e<0)throw new le("Array index out of bounds: "+e+" < 0.");if(e>=i.length)throw new le("Array index out of bounds: "+e+" > "+(i.length-1)+".");if(e!==Math.floor(e))throw new le("Array index must be an integer, but found "+e+" instead.");return i[e]},ui.prototype.eachChild=function(t){t(this.index),t(this.input)},ui.prototype.outputDefined=function(){return!1},ui.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var li=function(t,e){this.type=Bt,this.needle=t,this.haystack=e};li.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,Vt),r=e.parse(t[2],2,Vt);return i&&r?Wt(i.type,[Bt,Ft,zt,Ot,Vt])?new li(i,r):e.error("Expected first argument to be of type boolean, string, number or null, but found "+Zt(i.type)+" instead"):null},li.prototype.evaluate=function(t){var e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!i)return!1;if(!Qt(e,["boolean","string","number","null"]))throw new le("Expected first argument to be of type boolean, string, number or null, but found "+Zt(ae(e))+" instead.");if(!Qt(i,["string","array"]))throw new le("Expected second argument to be of type array or string, but found "+Zt(ae(i))+" instead.");return i.indexOf(e)>=0},li.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},li.prototype.outputDefined=function(){return!0},li.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var ci=function(t,e,i){this.type=zt,this.needle=t,this.haystack=e,this.fromIndex=i};ci.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,Vt),r=e.parse(t[2],2,Vt);if(!i||!r)return null;if(!Wt(i.type,[Bt,Ft,zt,Ot,Vt]))return e.error("Expected first argument to be of type boolean, string, number or null, but found "+Zt(i.type)+" instead");if(4===t.length){var n=e.parse(t[3],3,zt);return n?new ci(i,r,n):null}return new ci(i,r)},ci.prototype.evaluate=function(t){var e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!Qt(e,["boolean","string","number","null"]))throw new le("Expected first argument to be of type boolean, string, number or null, but found "+Zt(ae(e))+" instead.");if(!Qt(i,["string","array"]))throw new le("Expected second argument to be of type array or string, but found "+Zt(ae(i))+" instead.");if(this.fromIndex){var r=this.fromIndex.evaluate(t);return i.indexOf(e,r)}return i.indexOf(e)},ci.prototype.eachChild=function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)},ci.prototype.outputDefined=function(){return!1},ci.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var pi=function(t,e,i,r,n,o){this.inputType=t,this.type=e,this.input=i,this.cases=r,this.outputs=n,this.otherwise=o};pi.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var i,r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var n={},o=[],a=2;a<t.length-1;a+=2){var s=t[a],u=t[a+1];Array.isArray(s)||(s=[s]);var l=e.concat(a);if(0===s.length)return l.error("Expected at least one branch label.");for(var c=0,p=s;c<p.length;c+=1){var h=p[c];if("number"!=typeof h&&"string"!=typeof h)return l.error("Branch labels must be numbers or strings.");if("number"==typeof h&&Math.abs(h)>Number.MAX_SAFE_INTEGER)return l.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof h&&Math.floor(h)!==h)return l.error("Numeric branch labels must be integer values.");if(i){if(l.checkSubtype(i,ae(h)))return null}else i=ae(h);if(void 0!==n[String(h)])return l.error("Branch labels must be unique.");n[String(h)]=o.length}var d=e.parse(u,a,r);if(!d)return null;r=r||d.type,o.push(d)}var f=e.parse(t[1],1,Vt);if(!f)return null;var _=e.parse(t[t.length-1],t.length-1,r);return _?"value"!==f.type.kind&&e.concat(1).checkSubtype(i,f.type)?null:new pi(i,r,f,n,o,_):null},pi.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(ae(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},pi.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},pi.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))&&this.otherwise.outputDefined()},pi.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],i=[],r={},n=0,o=Object.keys(this.cases).sort();n<o.length;n+=1){var a=o[n];void 0===(p=r[this.cases[a]])?(r[this.cases[a]]=i.length,i.push([this.cases[a],[a]])):i[p][1].push(a)}for(var s=function(e){return"number"===t.inputType.kind?Number(e):e},u=0,l=i;u<l.length;u+=1){var c=l[u],p=c[0],h=c[1];e.push(1===h.length?s(h[0]):h.map(s)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var hi=function(t,e,i){this.type=t,this.branches=e,this.otherwise=i};hi.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var r=[],n=1;n<t.length-1;n+=2){var o=e.parse(t[n],n,Bt);if(!o)return null;var a=e.parse(t[n+1],n+1,i);if(!a)return null;r.push([o,a]),i=i||a.type}var s=e.parse(t[t.length-1],t.length-1,i);return s?new hi(i,r,s):null},hi.prototype.evaluate=function(t){for(var e=0,i=this.branches;e<i.length;e+=1){var r=i[e],n=r[1];if(r[0].evaluate(t))return n.evaluate(t)}return this.otherwise.evaluate(t)},hi.prototype.eachChild=function(t){for(var e=0,i=this.branches;e<i.length;e+=1){var r=i[e],n=r[1];t(r[0]),t(n)}t(this.otherwise)},hi.prototype.outputDefined=function(){return this.branches.every((function(t){return t[1].outputDefined()}))&&this.otherwise.outputDefined()},hi.prototype.serialize=function(){var t=["case"];return this.eachChild((function(e){t.push(e.serialize())})),t};var di=function(t,e,i,r){this.type=t,this.input=e,this.beginIndex=i,this.endIndex=r};function fi(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function _i(t,e,i,r){return 0===r.compare(e,i)}function gi(t,e,i){var r="=="!==t&&"!="!==t;return function(){function n(t,e,i){this.type=Bt,this.lhs=t,this.rhs=e,this.collator=i,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return n.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var i=t[0],o=e.parse(t[1],1,Vt);if(!o)return null;if(!fi(i,o.type))return e.concat(1).error('"'+i+"\" comparisons are not supported for type '"+Zt(o.type)+"'.");var a=e.parse(t[2],2,Vt);if(!a)return null;if(!fi(i,a.type))return e.concat(2).error('"'+i+"\" comparisons are not supported for type '"+Zt(a.type)+"'.");if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot compare types '"+Zt(o.type)+"' and '"+Zt(a.type)+"'.");r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new pe(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new pe(o.type,[a])));var s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,Gt)))return null}return new n(o,a,s)},n.prototype.evaluate=function(n){var o=this.lhs.evaluate(n),a=this.rhs.evaluate(n);if(r&&this.hasUntypedArgument){var s=ae(o),u=ae(a);if(s.kind!==u.kind||"string"!==s.kind&&"number"!==s.kind)throw new le('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+s.kind+", "+u.kind+") instead.")}if(this.collator&&!r&&this.hasUntypedArgument){var l=ae(o),c=ae(a);if("string"!==l.kind||"string"!==c.kind)return e(n,o,a)}return this.collator?i(n,o,a,this.collator.evaluate(n)):e(n,o,a)},n.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},n.prototype.outputDefined=function(){return!0},n.prototype.serialize=function(){var e=[t];return this.eachChild((function(t){e.push(t.serialize())})),e},n}()}di.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,Vt),r=e.parse(t[2],2,zt);if(!i||!r)return null;if(!Wt(i.type,[Xt(Vt),Ft,Vt]))return e.error("Expected first argument to be of type array or string, but found "+Zt(i.type)+" instead");if(4===t.length){var n=e.parse(t[3],3,zt);return n?new di(i.type,i,r,n):null}return new di(i.type,i,r)},di.prototype.evaluate=function(t){var e=this.input.evaluate(t),i=this.beginIndex.evaluate(t);if(!Qt(e,["string","array"]))throw new le("Expected first argument to be of type array or string, but found "+Zt(ae(e))+" instead.");if(this.endIndex){var r=this.endIndex.evaluate(t);return e.slice(i,r)}return e.slice(i)},di.prototype.eachChild=function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)},di.prototype.outputDefined=function(){return!1},di.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var mi=gi("==",(function(t,e,i){return e===i}),_i),yi=gi("!=",(function(t,e,i){return e!==i}),(function(t,e,i,r){return!_i(0,e,i,r)})),vi=gi("<",(function(t,e,i){return e<i}),(function(t,e,i,r){return r.compare(e,i)<0})),bi=gi(">",(function(t,e,i){return e>i}),(function(t,e,i,r){return r.compare(e,i)>0})),xi=gi("<=",(function(t,e,i){return e<=i}),(function(t,e,i,r){return r.compare(e,i)<=0})),wi=gi(">=",(function(t,e,i){return e>=i}),(function(t,e,i,r){return r.compare(e,i)>=0})),Ei=function(t,e,i,r,n){this.type=Ft,this.number=t,this.locale=e,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=n};Ei.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var i=e.parse(t[1],1,zt);if(!i)return null;var r=t[2];if("object"!=typeof r||Array.isArray(r))return e.error("NumberFormat options argument must be an object.");var n=null;if(r.locale&&!(n=e.parse(r.locale,1,Ft)))return null;var o=null;if(r.currency&&!(o=e.parse(r.currency,1,Ft)))return null;var a=null;if(r["min-fraction-digits"]&&!(a=e.parse(r["min-fraction-digits"],1,zt)))return null;var s=null;return r["max-fraction-digits"]&&!(s=e.parse(r["max-fraction-digits"],1,zt))?null:new Ei(i,n,o,a,s)},Ei.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},Ei.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},Ei.prototype.outputDefined=function(){return!1},Ei.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var Si=function(t){this.type=zt,this.input=t};Si.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?e.error("Expected argument of type string or array, but found "+Zt(i.type)+" instead."):new Si(i):null},Si.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new le("Expected value to be of type string or array, but found "+Zt(ae(e))+" instead.")},Si.prototype.eachChild=function(t){t(this.input)},Si.prototype.outputDefined=function(){return!1},Si.prototype.serialize=function(){var t=["length"];return this.eachChild((function(e){t.push(e.serialize())})),t};var Ii={"==":mi,"!=":yi,">":bi,"<":vi,">=":wi,"<=":xi,array:pe,at:ui,boolean:pe,case:hi,coalesce:ai,collator:ve,format:he,image:de,in:li,"index-of":ci,interpolate:ni,"interpolate-hcl":ni,"interpolate-lab":ni,length:Si,let:si,literal:ue,match:pi,number:pe,"number-format":Ei,object:pe,slice:di,step:Ve,string:pe,"to-boolean":_e,"to-color":_e,"to-number":_e,"to-string":_e,var:Be,within:De};function Ai(t,e){var i=e[0],r=e[1],n=e[2],o=e[3];i=i.evaluate(t),r=r.evaluate(t),n=n.evaluate(t);var a=o?o.evaluate(t):1,s=ne(i,r,n,a);if(s)throw new le(s);return new $t(i/255*a,r/255*a,n/255*a,a)}function Ci(t,e){return t in e}function Pi(t,e){var i=e[t];return void 0===i?null:i}function Ti(t){return{type:t}}function Li(t){return{result:"success",value:t}}function Mi(t){return{result:"error",value:t}}function ki(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function Ri(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Ni(t){return!!t.expression&&t.expression.interpolated}function Di(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Oi(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function zi(t){return t}function Fi(t,e,i){return void 0!==t?t:void 0!==e?e:void 0!==i?i:void 0}function Bi(t,e,i,r,n){return Fi(typeof i===n?r[i]:void 0,t.default,e.default)}function qi(t,e,i){if("number"!==Di(i))return Fi(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[r-1][0])return t.stops[r-1][1];var n=Ue(t.stops.map((function(t){return t[0]})),i);return t.stops[n][1]}function Ui(t,e,i){var r=void 0!==t.base?t.base:1;if("number"!==Di(i))return Fi(t.default,e.default);var n=t.stops.length;if(1===n)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[n-1][0])return t.stops[n-1][1];var o=Ue(t.stops.map((function(t){return t[0]})),i),a=function(t,e,i,r){var n=r-i,o=t-i;return 0===n?0:1===e?o/n:(Math.pow(e,o)-1)/(Math.pow(e,n)-1)}(i,r,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],u=t.stops[o+1][1],l=je[e.type]||zi;if(t.colorSpace&&"rgb"!==t.colorSpace){var c=ri[t.colorSpace];l=function(t,e){return c.reverse(c.interpolate(c.forward(t),c.forward(e),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=s.evaluate.apply(void 0,t),r=u.evaluate.apply(void 0,t);if(void 0!==i&&void 0!==r)return l(i,r,a)}}:l(s,u,a)}function Vi(t,e,i){return"color"===e.type?i=$t.parse(i):"formatted"===e.type?i=ie.fromString(i.toString()):"resolvedImage"===e.type?i=re.fromString(i.toString()):Di(i)===e.type||"enum"===e.type&&e.values[i]||(i=void 0),Fi(i,t.default,e.default)}ye.register(Ii,{error:[{kind:"error"},[Ft],function(t,e){throw new le(e[0].evaluate(t))}],typeof:[Ft,[Vt],function(t,e){return Zt(ae(e[0].evaluate(t)))}],"to-rgba":[Xt(zt,4),[qt],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[qt,[zt,zt,zt],Ai],rgba:[qt,[zt,zt,zt,zt],Ai],has:{type:Bt,overloads:[[[Ft],function(t,e){return Ci(e[0].evaluate(t),t.properties())}],[[Ft,Ut],function(t,e){var i=e[1];return Ci(e[0].evaluate(t),i.evaluate(t))}]]},get:{type:Vt,overloads:[[[Ft],function(t,e){return Pi(e[0].evaluate(t),t.properties())}],[[Ft,Ut],function(t,e){var i=e[1];return Pi(e[0].evaluate(t),i.evaluate(t))}]]},"feature-state":[Vt,[Ft],function(t,e){return Pi(e[0].evaluate(t),t.featureState||{})}],properties:[Ut,[],function(t){return t.properties()}],"geometry-type":[Ft,[],function(t){return t.geometryType()}],id:[Vt,[],function(t){return t.id()}],zoom:[zt,[],function(t){return t.globals.zoom}],"heatmap-density":[zt,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[zt,[],function(t){return t.globals.lineProgress||0}],accumulated:[Vt,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[zt,Ti(zt),function(t,e){for(var i=0,r=0,n=e;r<n.length;r+=1)i+=n[r].evaluate(t);return i}],"*":[zt,Ti(zt),function(t,e){for(var i=1,r=0,n=e;r<n.length;r+=1)i*=n[r].evaluate(t);return i}],"-":{type:zt,overloads:[[[zt,zt],function(t,e){var i=e[1];return e[0].evaluate(t)-i.evaluate(t)}],[[zt],function(t,e){return-e[0].evaluate(t)}]]},"/":[zt,[zt,zt],function(t,e){var i=e[1];return e[0].evaluate(t)/i.evaluate(t)}],"%":[zt,[zt,zt],function(t,e){var i=e[1];return e[0].evaluate(t)%i.evaluate(t)}],ln2:[zt,[],function(){return Math.LN2}],pi:[zt,[],function(){return Math.PI}],e:[zt,[],function(){return Math.E}],"^":[zt,[zt,zt],function(t,e){var i=e[1];return Math.pow(e[0].evaluate(t),i.evaluate(t))}],sqrt:[zt,[zt],function(t,e){return Math.sqrt(e[0].evaluate(t))}],log10:[zt,[zt],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN10}],ln:[zt,[zt],function(t,e){return Math.log(e[0].evaluate(t))}],log2:[zt,[zt],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN2}],sin:[zt,[zt],function(t,e){return Math.sin(e[0].evaluate(t))}],cos:[zt,[zt],function(t,e){return Math.cos(e[0].evaluate(t))}],tan:[zt,[zt],function(t,e){return Math.tan(e[0].evaluate(t))}],asin:[zt,[zt],function(t,e){return Math.asin(e[0].evaluate(t))}],acos:[zt,[zt],function(t,e){return Math.acos(e[0].evaluate(t))}],atan:[zt,[zt],function(t,e){return Math.atan(e[0].evaluate(t))}],min:[zt,Ti(zt),function(t,e){return Math.min.apply(Math,e.map((function(e){return e.evaluate(t)})))}],max:[zt,Ti(zt),function(t,e){return Math.max.apply(Math,e.map((function(e){return e.evaluate(t)})))}],abs:[zt,[zt],function(t,e){return Math.abs(e[0].evaluate(t))}],round:[zt,[zt],function(t,e){var i=e[0].evaluate(t);return i<0?-Math.round(-i):Math.round(i)}],floor:[zt,[zt],function(t,e){return Math.floor(e[0].evaluate(t))}],ceil:[zt,[zt],function(t,e){return Math.ceil(e[0].evaluate(t))}],"filter-==":[Bt,[Ft,Vt],function(t,e){var i=e[0],r=e[1];return t.properties()[i.value]===r.value}],"filter-id-==":[Bt,[Vt],function(t,e){var i=e[0];return t.id()===i.value}],"filter-type-==":[Bt,[Ft],function(t,e){var i=e[0];return t.geometryType()===i.value}],"filter-<":[Bt,[Ft,Vt],function(t,e){var i=e[0],r=e[1],n=t.properties()[i.value],o=r.value;return typeof n==typeof o&&n<o}],"filter-id-<":[Bt,[Vt],function(t,e){var i=e[0],r=t.id(),n=i.value;return typeof r==typeof n&&r<n}],"filter->":[Bt,[Ft,Vt],function(t,e){var i=e[0],r=e[1],n=t.properties()[i.value],o=r.value;return typeof n==typeof o&&n>o}],"filter-id->":[Bt,[Vt],function(t,e){var i=e[0],r=t.id(),n=i.value;return typeof r==typeof n&&r>n}],"filter-<=":[Bt,[Ft,Vt],function(t,e){var i=e[0],r=e[1],n=t.properties()[i.value],o=r.value;return typeof n==typeof o&&n<=o}],"filter-id-<=":[Bt,[Vt],function(t,e){var i=e[0],r=t.id(),n=i.value;return typeof r==typeof n&&r<=n}],"filter->=":[Bt,[Ft,Vt],function(t,e){var i=e[0],r=e[1],n=t.properties()[i.value],o=r.value;return typeof n==typeof o&&n>=o}],"filter-id->=":[Bt,[Vt],function(t,e){var i=e[0],r=t.id(),n=i.value;return typeof r==typeof n&&r>=n}],"filter-has":[Bt,[Vt],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[Bt,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[Bt,[Xt(Ft)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[Bt,[Xt(Vt)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[Bt,[Ft,Xt(Vt)],function(t,e){var i=e[0];return e[1].value.indexOf(t.properties()[i.value])>=0}],"filter-in-large":[Bt,[Ft,Xt(Vt)],function(t,e){var i=e[0],r=e[1];return function(t,e,i,r){for(;i<=r;){var n=i+r>>1;if(e[n]===t)return!0;e[n]>t?r=n-1:i=n+1}return!1}(t.properties()[i.value],r.value,0,r.value.length-1)}],all:{type:Bt,overloads:[[[Bt,Bt],function(t,e){var i=e[1];return e[0].evaluate(t)&&i.evaluate(t)}],[Ti(Bt),function(t,e){for(var i=0,r=e;i<r.length;i+=1)if(!r[i].evaluate(t))return!1;return!0}]]},any:{type:Bt,overloads:[[[Bt,Bt],function(t,e){var i=e[1];return e[0].evaluate(t)||i.evaluate(t)}],[Ti(Bt),function(t,e){for(var i=0,r=e;i<r.length;i+=1)if(r[i].evaluate(t))return!0;return!1}]]},"!":[Bt,[Bt],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[Bt,[Ft],function(t,e){var i=t.globals&&t.globals.isSupportedScript;return!i||i(e[0].evaluate(t))}],upcase:[Ft,[Ft],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[Ft,[Ft],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[Ft,Ti(Vt),function(t,e){return e.map((function(e){return se(e.evaluate(t))})).join("")}],"resolved-locale":[Ft,[Gt],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var Gi=function(t,e){this.expression=t,this._warningHistory={},this._evaluator=new me,this._defaultValue=e?function(t){return"color"===t.type&&Oi(t.default)?new $t(0,0,0,0):"color"===t.type?$t.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null};function ji(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Ii}function Ki(t,e){var i=new qe(Ii,[],e?function(t){var e={color:qt,string:Ft,number:zt,enum:Ft,boolean:Bt,formatted:jt,resolvedImage:Kt};return"array"===t.type?Xt(e[t.value]||Vt,t.length):e[t.type]}(e):void 0),r=i.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return r?Li(new Gi(r,e)):Mi(i.errors)}Gi.prototype.evaluateWithoutErrorHandling=function(t,e,i,r,n,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=i,this._evaluator.canonical=r,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)},Gi.prototype.evaluate=function(t,e,i,r,n,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=o||null;try{var a=this.expression.evaluate(this._evaluator);if(null==a||"number"==typeof a&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new le("Expected value to be one of "+Object.keys(this._enumValues).map((function(t){return JSON.stringify(t)})).join(", ")+", but found "+JSON.stringify(a)+" instead.");return a}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var Xi=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!ze(e.expression)};Xi.prototype.evaluateWithoutErrorHandling=function(t,e,i,r,n,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,r,n,o)},Xi.prototype.evaluate=function(t,e,i,r,n,o){return this._styleExpression.evaluate(t,e,i,r,n,o)};var Zi=function(t,e,i,r){this.kind=t,this.zoomStops=i,this._styleExpression=e,this.isStateDependent="camera"!==t&&!ze(e.expression),this.interpolationType=r};function Yi(t,e){if("error"===(t=Ki(t,e)).result)return t;var i=t.value.expression,r=Oe(i);if(!r&&!ki(e))return Mi([new Nt("","data expressions not supported")]);var n=Fe(i,["zoom"]);if(!n&&!Ri(e))return Mi([new Nt("","zoom expressions not supported")]);var o=function t(e){var i=null;if(e instanceof si)i=t(e.result);else if(e instanceof ai)for(var r=0,n=e.args;r<n.length&&!(i=t(n[r]));r+=1);else(e instanceof Ve||e instanceof ni)&&e.input instanceof ye&&"zoom"===e.input.name&&(i=e);return i instanceof Nt||e.eachChild((function(e){var r=t(e);r instanceof Nt?i=r:!i&&r?i=new Nt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&r&&i!==r&&(i=new Nt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),i}(i);return o||n?o instanceof Nt?Mi([o]):o instanceof ni&&!Ni(e)?Mi([new Nt("",'"interpolate" expressions cannot be used with this property')]):Li(o?new Zi(r?"camera":"composite",t.value,o.labels,o instanceof ni?o.interpolation:void 0):new Xi(r?"constant":"source",t.value)):Mi([new Nt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Zi.prototype.evaluateWithoutErrorHandling=function(t,e,i,r,n,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,r,n,o)},Zi.prototype.evaluate=function(t,e,i,r,n,o){return this._styleExpression.evaluate(t,e,i,r,n,o)},Zi.prototype.interpolationFactor=function(t,e,i){return this.interpolationType?ni.interpolationFactor(this.interpolationType,t,e,i):0};var Hi=function(t,e){this._parameters=t,this._specification=e,Mt(this,function t(e,i){var r,n,o,a="color"===i.type,s=e.stops&&"object"==typeof e.stops[0][0],u=s||!(s||void 0!==e.property),l=e.type||(Ni(i)?"exponential":"interval");if(a&&((e=Mt({},e)).stops&&(e.stops=e.stops.map((function(t){return[t[0],$t.parse(t[1])]}))),e.default=$t.parse(e.default?e.default:i.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!ri[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===l)r=Ui;else if("interval"===l)r=qi;else if("categorical"===l){r=Bi,n=Object.create(null);for(var c=0,p=e.stops;c<p.length;c+=1){var h=p[c];n[h[0]]=h[1]}o=typeof e.stops[0][0]}else{if("identity"!==l)throw new Error('Unknown function type "'+l+'"');r=Vi}if(s){for(var d={},f=[],_=0;_<e.stops.length;_++){var g=e.stops[_],m=g[0].zoom;void 0===d[m]&&(d[m]={zoom:m,type:e.type,property:e.property,default:e.default,stops:[]},f.push(m)),d[m].stops.push([g[0].value,g[1]])}for(var y=[],v=0,b=f;v<b.length;v+=1){var x=b[v];y.push([d[x].zoom,t(d[x],i)])}var w={name:"linear"};return{kind:"composite",interpolationType:w,interpolationFactor:ni.interpolationFactor.bind(void 0,w),zoomStops:y.map((function(t){return t[0]})),evaluate:function(t,r){var n=t.zoom;return Ui({stops:y,base:e.base},i,n).evaluate(n,r)}}}if(u){var E="exponential"===l?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:E,interpolationFactor:ni.interpolationFactor.bind(void 0,E),zoomStops:e.stops.map((function(t){return t[0]})),evaluate:function(t){return r(e,i,t.zoom,n,o)}}}return{kind:"source",evaluate:function(t,a){var s=a&&a.properties?a.properties[e.property]:void 0;return void 0===s?Fi(e.default,i.default):r(e,i,s,n,o)}}}(this._parameters,this._specification))};function Wi(t){var e=t.key,i=t.value,r=t.valueSpec||{},n=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=[],u=Di(i);if("object"!==u)return[new Tt(e,i,"object expected, "+u+" found")];for(var l in i){var c=l.split(".")[0],p=r[c]||r["*"],h=void 0;if(n[c])h=n[c];else if(r[c])h=xr;else if(n["*"])h=n["*"];else{if(!r["*"]){s.push(new Tt(e,i[l],'unknown property "'+l+'"'));continue}h=xr}s=s.concat(h({key:(e?e+".":e)+l,value:i[l],valueSpec:p,style:o,styleSpec:a,object:i,objectKey:l},i))}for(var d in r)n[d]||r[d].required&&void 0===r[d].default&&void 0===i[d]&&s.push(new Tt(e,i,'missing required property "'+d+'"'));return s}function Qi(t){var e=t.value,i=t.valueSpec,r=t.style,n=t.styleSpec,o=t.key,a=t.arrayElementValidator||xr;if("array"!==Di(e))return[new Tt(o,e,"array expected, "+Di(e)+" found")];if(i.length&&e.length!==i.length)return[new Tt(o,e,"array length "+i.length+" expected, length "+e.length+" found")];if(i["min-length"]&&e.length<i["min-length"])return[new Tt(o,e,"array length at least "+i["min-length"]+" expected, length "+e.length+" found")];var s={type:i.value,values:i.values};n.$version<7&&(s.function=i.function),"object"===Di(i.value)&&(s=i.value);for(var u=[],l=0;l<e.length;l++)u=u.concat(a({array:e,arrayIndex:l,value:e[l],valueSpec:s,style:r,styleSpec:n,key:o+"["+l+"]"}));return u}function Ji(t){var e=t.key,i=t.value,r=t.valueSpec,n=Di(i);return"number"===n&&i!=i&&(n="NaN"),"number"!==n?[new Tt(e,i,"number expected, "+n+" found")]:"minimum"in r&&i<r.minimum?[new Tt(e,i,i+" is less than the minimum value "+r.minimum)]:"maximum"in r&&i>r.maximum?[new Tt(e,i,i+" is greater than the maximum value "+r.maximum)]:[]}function $i(t){var e,i,r,n=t.valueSpec,o=kt(t.value.type),a={},s="categorical"!==o&&void 0===t.value.property,u=!s,l="array"===Di(t.value.stops)&&"array"===Di(t.value.stops[0])&&"object"===Di(t.value.stops[0][0]),c=Wi({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===o)return[new Tt(t.key,t.value,'identity function may not have a "stops" property')];var e=[],i=t.value;return e=e.concat(Qi({key:t.key,value:i,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:p})),"array"===Di(i)&&0===i.length&&e.push(new Tt(t.key,i,"array must have at least one stop")),e},default:function(t){return xr({key:t.key,value:t.value,valueSpec:n,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===o&&s&&c.push(new Tt(t.key,t.value,'missing required property "property"')),"identity"===o||t.value.stops||c.push(new Tt(t.key,t.value,'missing required property "stops"')),"exponential"===o&&t.valueSpec.expression&&!Ni(t.valueSpec)&&c.push(new Tt(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(u&&!ki(t.valueSpec)?c.push(new Tt(t.key,t.value,"property functions not supported")):s&&!Ri(t.valueSpec)&&c.push(new Tt(t.key,t.value,"zoom functions not supported"))),"categorical"!==o&&!l||void 0!==t.value.property||c.push(new Tt(t.key,t.value,'"property" property is required')),c;function p(t){var e=[],o=t.value,s=t.key;if("array"!==Di(o))return[new Tt(s,o,"array expected, "+Di(o)+" found")];if(2!==o.length)return[new Tt(s,o,"array length 2 expected, length "+o.length+" found")];if(l){if("object"!==Di(o[0]))return[new Tt(s,o,"object expected, "+Di(o[0])+" found")];if(void 0===o[0].zoom)return[new Tt(s,o,"object stop key must have zoom")];if(void 0===o[0].value)return[new Tt(s,o,"object stop key must have value")];if(r&&r>kt(o[0].zoom))return[new Tt(s,o[0].zoom,"stop zoom values must appear in ascending order")];kt(o[0].zoom)!==r&&(r=kt(o[0].zoom),i=void 0,a={}),e=e.concat(Wi({key:s+"[0]",value:o[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:Ji,value:h}}))}else e=e.concat(h({key:s+"[0]",value:o[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},o));return ji(Rt(o[1]))?e.concat([new Tt(s+"[1]",o[1],"expressions are not allowed in function stops.")]):e.concat(xr({key:s+"[1]",value:o[1],valueSpec:n,style:t.style,styleSpec:t.styleSpec}))}function h(t,r){var s=Di(t.value),u=kt(t.value),l=null!==t.value?t.value:r;if(e){if(s!==e)return[new Tt(t.key,l,s+" stop domain type must match previous stop domain type "+e)]}else e=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new Tt(t.key,l,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==o){var c="number expected, "+s+" found";return ki(n)&&void 0===o&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Tt(t.key,l,c)]}return"categorical"!==o||"number"!==s||isFinite(u)&&Math.floor(u)===u?"categorical"!==o&&"number"===s&&void 0!==i&&u<i?[new Tt(t.key,l,"stop domain values must appear in ascending order")]:(i=u,"categorical"===o&&u in a?[new Tt(t.key,l,"stop domain values must be unique")]:(a[u]=!0,[])):[new Tt(t.key,l,"integer expected, found "+u)]}}function tr(t){var e=("property"===t.expressionContext?Yi:Ki)(Rt(t.value),t.valueSpec);if("error"===e.result)return e.value.map((function(e){return new Tt(""+t.key+e.key,t.value,e.message)}));var i=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!i.outputDefined())return[new Tt(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!ze(i))return[new Tt(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!ze(i))return[new Tt(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!Fe(i,["zoom","feature-state"]))return[new Tt(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!Oe(i))return[new Tt(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function er(t){var e=t.key,i=t.value,r=t.valueSpec,n=[];return Array.isArray(r.values)?-1===r.values.indexOf(kt(i))&&n.push(new Tt(e,i,"expected one of ["+r.values.join(", ")+"], "+JSON.stringify(i)+" found")):-1===Object.keys(r.values).indexOf(kt(i))&&n.push(new Tt(e,i,"expected one of ["+Object.keys(r.values).join(", ")+"], "+JSON.stringify(i)+" found")),n}function ir(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,i=t.slice(1);e<i.length;e+=1){var r=i[e];if(!ir(r)&&"boolean"!=typeof r)return!1}return!0;default:return!0}}Hi.deserialize=function(t){return new Hi(t._parameters,t._specification)},Hi.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var rr={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function nr(t){if(null==t)return{filter:function(){return!0},needGeometry:!1};ir(t)||(t=ar(t));var e=Ki(t,rr);if("error"===e.result)throw new Error(e.value.map((function(t){return t.key+": "+t.message})).join(", "));return{filter:function(t,i,r){return e.value.evaluate(t,i,{},r)},needGeometry:function t(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var i=1;i<e.length;i++)if(t(e[i]))return!0;return!1}(t)}}function or(t,e){return t<e?-1:t>e?1:0}function ar(t){if(!t)return!0;var e,i=t[0];return t.length<=1?"any"!==i:"=="===i?sr(t[1],t[2],"=="):"!="===i?cr(sr(t[1],t[2],"==")):"<"===i||">"===i||"<="===i||">="===i?sr(t[1],t[2],i):"any"===i?(e=t.slice(1),["any"].concat(e.map(ar))):"all"===i?["all"].concat(t.slice(1).map(ar)):"none"===i?["all"].concat(t.slice(1).map(ar).map(cr)):"in"===i?ur(t[1],t.slice(2)):"!in"===i?cr(ur(t[1],t.slice(2))):"has"===i?lr(t[1]):"!has"===i?cr(lr(t[1])):"within"!==i||t}function sr(t,e,i){switch(t){case"$type":return["filter-type-"+i,e];case"$id":return["filter-id-"+i,e];default:return["filter-"+i,t,e]}}function ur(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((function(t){return typeof t!=typeof e[0]}))?["filter-in-large",t,["literal",e.sort(or)]]:["filter-in-small",t,["literal",e]]}}function lr(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function cr(t){return["!",t]}function pr(t){return ir(Rt(t.value))?tr(Mt({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var i=e.value,r=e.key;if("array"!==Di(i))return[new Tt(r,i,"array expected, "+Di(i)+" found")];var n,o=e.styleSpec,a=[];if(i.length<1)return[new Tt(r,i,"filter array must have at least 1 element")];switch(a=a.concat(er({key:r+"[0]",value:i[0],valueSpec:o.filter_operator,style:e.style,styleSpec:e.styleSpec})),kt(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&"$type"===kt(i[1])&&a.push(new Tt(r,i,'"$type" cannot be use with operator "'+i[0]+'"'));case"==":case"!=":3!==i.length&&a.push(new Tt(r,i,'filter array for operator "'+i[0]+'" must have 3 elements'));case"in":case"!in":i.length>=2&&"string"!==(n=Di(i[1]))&&a.push(new Tt(r+"[1]",i[1],"string expected, "+n+" found"));for(var s=2;s<i.length;s++)n=Di(i[s]),"$type"===kt(i[1])?a=a.concat(er({key:r+"["+s+"]",value:i[s],valueSpec:o.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==n&&"number"!==n&&"boolean"!==n&&a.push(new Tt(r+"["+s+"]",i[s],"string, number, or boolean expected, "+n+" found"));break;case"any":case"all":case"none":for(var u=1;u<i.length;u++)a=a.concat(t({key:r+"["+u+"]",value:i[u],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":n=Di(i[1]),2!==i.length?a.push(new Tt(r,i,'filter array for "'+i[0]+'" operator must have 2 elements')):"string"!==n&&a.push(new Tt(r+"[1]",i[1],"string expected, "+n+" found"));break;case"within":n=Di(i[1]),2!==i.length?a.push(new Tt(r,i,'filter array for "'+i[0]+'" operator must have 2 elements')):"object"!==n&&a.push(new Tt(r+"[1]",i[1],"object expected, "+n+" found"))}return a}(t)}function hr(t,e){var i=t.key,r=t.style,n=t.styleSpec,o=t.value,a=t.objectKey,s=n[e+"_"+t.layerType];if(!s)return[];var u=a.match(/^(.*)-transition$/);if("paint"===e&&u&&s[u[1]]&&s[u[1]].transition)return xr({key:i,value:o,valueSpec:n.transition,style:r,styleSpec:n});var l,c=t.valueSpec||s[a];if(!c)return[new Tt(i,o,'unknown property "'+a+'"')];if("string"===Di(o)&&ki(c)&&!c.tokens&&(l=/^{([^}]+)}$/.exec(o)))return[new Tt(i,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(l[1])+" }`.")];var p=[];return"symbol"===t.layerType&&("text-field"===a&&r&&!r.glyphs&&p.push(new Tt(i,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Oi(Rt(o))&&"identity"===kt(o.type)&&p.push(new Tt(i,o,'"text-font" does not support identity functions'))),p.concat(xr({key:t.key,value:o,valueSpec:c,style:r,styleSpec:n,expressionContext:"property",propertyType:e,propertyKey:a}))}function dr(t){return hr(t,"paint")}function fr(t){return hr(t,"layout")}function _r(t){var e=[],i=t.value,r=t.key,n=t.style,o=t.styleSpec;i.type||i.ref||e.push(new Tt(r,i,'either "type" or "ref" is required'));var a,s=kt(i.type),u=kt(i.ref);if(i.id)for(var l=kt(i.id),c=0;c<t.arrayIndex;c++){var p=n.layers[c];kt(p.id)===l&&e.push(new Tt(r,i.id,'duplicate layer id "'+i.id+'", previously used at line '+p.id.__line__))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach((function(t){t in i&&e.push(new Tt(r,i[t],'"'+t+'" is prohibited for ref layers'))})),n.layers.forEach((function(t){kt(t.id)===u&&(a=t)})),a?a.ref?e.push(new Tt(r,i.ref,"ref cannot reference another ref layer")):s=kt(a.type):e.push(new Tt(r,i.ref,'ref layer "'+u+'" not found'));else if("background"!==s)if(i.source){var h=n.sources&&n.sources[i.source],d=h&&kt(h.type);h?"vector"===d&&"raster"===s?e.push(new Tt(r,i.source,'layer "'+i.id+'" requires a raster source')):"raster"===d&&"raster"!==s?e.push(new Tt(r,i.source,'layer "'+i.id+'" requires a vector source')):"vector"!==d||i["source-layer"]?"raster-dem"===d&&"hillshade"!==s?e.push(new Tt(r,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!i.paint||!i.paint["line-gradient"]||"geojson"===d&&h.lineMetrics||e.push(new Tt(r,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new Tt(r,i,'layer "'+i.id+'" must specify a "source-layer"')):e.push(new Tt(r,i.source,'source "'+i.source+'" not found'))}else e.push(new Tt(r,i,'missing required property "source"'));return e=e.concat(Wi({key:r,value:i,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return xr({key:r+".type",value:i.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:i,objectKey:"type"})},filter:pr,layout:function(t){return Wi({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return fr(Mt({layerType:s},t))}}})},paint:function(t){return Wi({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return dr(Mt({layerType:s},t))}}})}}}))}function gr(t){var e=t.value,i=t.key,r=Di(e);return"string"!==r?[new Tt(i,e,"string expected, "+r+" found")]:[]}var mr={promoteId:function(t){var e=t.key,i=t.value;if("string"===Di(i))return gr({key:e,value:i});var r=[];for(var n in i)r.push.apply(r,gr({key:e+"."+n,value:i[n]}));return r}};function yr(t){var e=t.value,i=t.key,r=t.styleSpec,n=t.style;if(!e.type)return[new Tt(i,e,'"type" is required')];var o,a=kt(e.type);switch(a){case"vector":case"raster":case"raster-dem":return Wi({key:i,value:e,valueSpec:r["source_"+a.replace("-","_")],style:t.style,styleSpec:r,objectElementValidators:mr});case"geojson":if(o=Wi({key:i,value:e,valueSpec:r.source_geojson,style:n,styleSpec:r,objectElementValidators:mr}),e.cluster)for(var s in e.clusterProperties){var u=e.clusterProperties[s],l=u[0],c="string"==typeof l?[l,["accumulated"],["get",s]]:l;o.push.apply(o,tr({key:i+"."+s+".map",value:u[1],expressionContext:"cluster-map"})),o.push.apply(o,tr({key:i+"."+s+".reduce",value:c,expressionContext:"cluster-reduce"}))}return o;case"video":return Wi({key:i,value:e,valueSpec:r.source_video,style:n,styleSpec:r});case"image":return Wi({key:i,value:e,valueSpec:r.source_image,style:n,styleSpec:r});case"canvas":return[new Tt(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return er({key:i+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:n,styleSpec:r})}}function vr(t){var e=t.value,i=t.styleSpec,r=i.light,n=t.style,o=[],a=Di(e);if(void 0===e)return o;if("object"!==a)return o.concat([new Tt("light",e,"object expected, "+a+" found")]);for(var s in e){var u=s.match(/^(.*)-transition$/);o=o.concat(u&&r[u[1]]&&r[u[1]].transition?xr({key:s,value:e[s],valueSpec:i.transition,style:n,styleSpec:i}):r[s]?xr({key:s,value:e[s],valueSpec:r[s],style:n,styleSpec:i}):[new Tt(s,e[s],'unknown property "'+s+'"')])}return o}var br={"*":function(){return[]},array:Qi,boolean:function(t){var e=t.value,i=t.key,r=Di(e);return"boolean"!==r?[new Tt(i,e,"boolean expected, "+r+" found")]:[]},number:Ji,color:function(t){var e=t.key,i=t.value,r=Di(i);return"string"!==r?[new Tt(e,i,"color expected, "+r+" found")]:null===Jt(i)?[new Tt(e,i,'color expected, "'+i+'" found')]:[]},constants:Lt,enum:er,filter:pr,function:$i,layer:_r,object:Wi,source:yr,light:vr,string:gr,formatted:function(t){return 0===gr(t).length?[]:tr(t)},resolvedImage:function(t){return 0===gr(t).length?[]:tr(t)}};function xr(t){var e=t.value,i=t.valueSpec,r=t.styleSpec;return i.expression&&Oi(kt(e))?$i(t):i.expression&&ji(Rt(e))?tr(t):i.type&&br[i.type]?br[i.type](t):Wi(Mt({},t,{valueSpec:i.type?r[i.type]:i}))}function wr(t){var e=t.value,i=t.key,r=gr(t);return r.length||(-1===e.indexOf("{fontstack}")&&r.push(new Tt(i,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new Tt(i,e,'"glyphs" url must include a "{range}" token'))),r}function Er(t,e){void 0===e&&(e=Pt);var i=[];return i=i.concat(xr({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:wr,"*":function(){return[]}}})),t.constants&&(i=i.concat(Lt({key:"constants",value:t.constants,style:t,styleSpec:e}))),Sr(i)}function Sr(t){return[].concat(t).sort((function(t,e){return t.line-e.line}))}function Ir(t){return function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];return Sr(t.apply(this,e))}}Er.source=Ir(yr),Er.light=Ir(vr),Er.layer=Ir(_r),Er.filter=Ir(pr),Er.paintProperty=Ir(dr),Er.layoutProperty=Ir(fr);var Ar=Er,Cr=Ar.light,Pr=Ar.paintProperty,Tr=Ar.layoutProperty;function Lr(t,e){var i=!1;if(e&&e.length)for(var r=0,n=e;r<n.length;r+=1)t.fire(new At(new Error(n[r].message))),i=!0;return i}var Mr=kr;function kr(t,e,i){var r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var n=new Int32Array(this.arrayBuffer);t=n[0],this.d=(e=n[1])+2*(i=n[2]);for(var o=0;o<this.d*this.d;o++){var a=n[3+o],s=n[3+o+1];r.push(a===s?null:n.subarray(a,s))}var u=n[3+r.length+1];this.keys=n.subarray(n[3+r.length],u),this.bboxes=n.subarray(u),this.insert=this._insertReadonly}else{this.d=e+2*i;for(var l=0;l<this.d*this.d;l++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=i,this.scale=e/t,this.uid=0;var c=i/e*t;this.min=-c,this.max=t+c}kr.prototype.insert=function(t,e,i,r,n){this._forEachCell(e,i,r,n,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(r),this.bboxes.push(n)},kr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},kr.prototype._insertCell=function(t,e,i,r,n,o){this.cells[n].push(o)},kr.prototype.query=function(t,e,i,r,n){var o=this.min,a=this.max;if(t<=o&&e<=o&&a<=i&&a<=r&&!n)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,i,r,this._queryCell,s,{},n),s},kr.prototype._queryCell=function(t,e,i,r,n,o,a,s){var u=this.cells[n];if(null!==u)for(var l=this.keys,c=this.bboxes,p=0;p<u.length;p++){var h=u[p];if(void 0===a[h]){var d=4*h;(s?s(c[d+0],c[d+1],c[d+2],c[d+3]):t<=c[d+2]&&e<=c[d+3]&&i>=c[d+0]&&r>=c[d+1])?(a[h]=!0,o.push(l[h])):a[h]=!1}}},kr.prototype._forEachCell=function(t,e,i,r,n,o,a,s){for(var u=this._convertToCellCoord(t),l=this._convertToCellCoord(e),c=this._convertToCellCoord(i),p=this._convertToCellCoord(r),h=u;h<=c;h++)for(var d=l;d<=p;d++){var f=this.d*d+h;if((!s||s(this._convertFromCellCoord(h),this._convertFromCellCoord(d),this._convertFromCellCoord(h+1),this._convertFromCellCoord(d+1)))&&n.call(this,t,e,i,r,f,o,a,s))return}},kr.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},kr.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},kr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,i=0,r=0;r<this.cells.length;r++)i+=this.cells[r].length;var n=new Int32Array(e+i+this.keys.length+this.bboxes.length);n[0]=this.extent,n[1]=this.n,n[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];n[3+a]=o,n.set(s,o),o+=s.length}return n[3+t.length]=o,n.set(this.keys,o),n[3+t.length+1]=o+=this.keys.length,n.set(this.bboxes,o),o+=this.bboxes.length,n.buffer};var Rr=a.ImageData,Nr=a.ImageBitmap,Dr={};function Or(t,e,i){void 0===i&&(i={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Dr[t]={klass:e,omit:i.omit||[],shallow:i.shallow||[]}}for(var zr in Or("Object",Object),Mr.serialize=function(t,e){var i=t.toArrayBuffer();return e&&e.push(i),{buffer:i}},Mr.deserialize=function(t){return new Mr(t.buffer)},Or("Grid",Mr),Or("Color",$t),Or("Error",Error),Or("ResolvedImage",re),Or("StylePropertyFunction",Hi),Or("StyleExpression",Gi,{omit:["_evaluator"]}),Or("ZoomDependentExpression",Zi),Or("ZoomConstantExpression",Xi),Or("CompoundExpression",ye,{omit:["_evaluate"]}),Ii)Ii[zr]._classRegistryKey||Or("Expression_"+zr,Ii[zr]);function Fr(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Br(t){return Nr&&t instanceof Nr}function qr(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(Fr(t)||Br(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var i=t;return e&&e.push(i.buffer),i}if(t instanceof Rr)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var r=[],n=0,o=t;n<o.length;n+=1)r.push(qr(o[n],e));return r}if("object"==typeof t){var a=t.constructor,s=a._classRegistryKey;if(!s)throw new Error("can't serialize object of unregistered class");var u=a.serialize?a.serialize(t,e):{};if(!a.serialize){for(var l in t)if(t.hasOwnProperty(l)&&!(Dr[s].omit.indexOf(l)>=0)){var c=t[l];u[l]=Dr[s].shallow.indexOf(l)>=0?c:qr(c,e)}t instanceof Error&&(u.message=t.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(u.$name=s),u}throw new Error("can't serialize object of type "+typeof t)}function Ur(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||Fr(t)||Br(t)||ArrayBuffer.isView(t)||t instanceof Rr)return t;if(Array.isArray(t))return t.map(Ur);if("object"==typeof t){var e=t.$name||"Object",i=Dr[e].klass;if(!i)throw new Error("can't deserialize unregistered class "+e);if(i.deserialize)return i.deserialize(t);for(var r=Object.create(i.prototype),n=0,o=Object.keys(t);n<o.length;n+=1){var a=o[n];if("$name"!==a){var s=t[a];r[a]=Dr[e].shallow.indexOf(a)>=0?s:Ur(s)}}return r}throw new Error("can't deserialize object of type "+typeof t)}var Vr=function(){this.first=!0};Vr.prototype.update=function(t,e){var i=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=i,!0))};var Gr={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};function jr(t){for(var e=0,i=t;e<i.length;e+=1)if(Kr(i[e].charCodeAt(0)))return!0;return!1}function Kr(t){return!(746!==t&&747!==t&&(t<4352||!(Gr["Bopomofo Extended"](t)||Gr.Bopomofo(t)||Gr["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||Gr["CJK Compatibility Ideographs"](t)||Gr["CJK Compatibility"](t)||Gr["CJK Radicals Supplement"](t)||Gr["CJK Strokes"](t)||!(!Gr["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||Gr["CJK Unified Ideographs Extension A"](t)||Gr["CJK Unified Ideographs"](t)||Gr["Enclosed CJK Letters and Months"](t)||Gr["Hangul Compatibility Jamo"](t)||Gr["Hangul Jamo Extended-A"](t)||Gr["Hangul Jamo Extended-B"](t)||Gr["Hangul Jamo"](t)||Gr["Hangul Syllables"](t)||Gr.Hiragana(t)||Gr["Ideographic Description Characters"](t)||Gr.Kanbun(t)||Gr["Kangxi Radicals"](t)||Gr["Katakana Phonetic Extensions"](t)||Gr.Katakana(t)&&12540!==t||!(!Gr["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!Gr["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||Gr["Unified Canadian Aboriginal Syllabics"](t)||Gr["Unified Canadian Aboriginal Syllabics Extended"](t)||Gr["Vertical Forms"](t)||Gr["Yijing Hexagram Symbols"](t)||Gr["Yi Syllables"](t)||Gr["Yi Radicals"](t))))}function Xr(t){return!(Kr(t)||function(t){return!!(Gr["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||Gr["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||Gr["Letterlike Symbols"](t)||Gr["Number Forms"](t)||Gr["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||Gr["Control Pictures"](t)&&9251!==t||Gr["Optical Character Recognition"](t)||Gr["Enclosed Alphanumerics"](t)||Gr["Geometric Shapes"](t)||Gr["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Gr["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Gr["CJK Symbols and Punctuation"](t)||Gr.Katakana(t)||Gr["Private Use Area"](t)||Gr["CJK Compatibility Forms"](t)||Gr["Small Form Variants"](t)||Gr["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function Zr(t){return t>=1424&&t<=2303||Gr["Arabic Presentation Forms-A"](t)||Gr["Arabic Presentation Forms-B"](t)}function Yr(t,e){return!(!e&&Zr(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||Gr.Khmer(t))}function Hr(t){for(var e=0,i=t;e<i.length;e+=1)if(Zr(i[e].charCodeAt(0)))return!0;return!1}var Wr=null,Qr="unavailable",Jr=null,$r=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(Qr="error"),Wr&&Wr(t)};function tn(){en.fire(new It("pluginStateChange",{pluginStatus:Qr,pluginURL:Jr}))}var en=new Ct,rn=function(){return Qr},nn=function(){if("deferred"!==Qr||!Jr)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Qr="loading",tn(),Jr&&bt({url:Jr},(function(t){t?$r(t):(Qr="loaded",tn())}))},on={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===Qr||null!=on.applyArabicShaping},isLoading:function(){return"loading"===Qr},setState:function(t){Qr=t.pluginStatus,Jr=t.pluginURL},isParsed:function(){return null!=on.applyArabicShaping&&null!=on.processBidirectionalText&&null!=on.processStyledBidirectionalText},getPluginURL:function(){return Jr}},an=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Vr,this.transition={})};an.prototype.isSupportedScript=function(t){return function(t,e){for(var i=0,r=t;i<r.length;i+=1)if(!Yr(r[i].charCodeAt(0),e))return!1;return!0}(t,on.isLoaded())},an.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},an.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),i=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*e}};var sn=function(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(Oi(t))return new Hi(t,e);if(ji(t)){var i=Yi(t,e);if("error"===i.result)throw new Error(i.value.map((function(t){return t.key+": "+t.message})).join(", "));return i.value}var r=t;return"string"==typeof t&&"color"===e.type&&(r=$t.parse(t)),{kind:"constant",evaluate:function(){return r}}}(void 0===e?t.specification.default:e,t.specification)};sn.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},sn.prototype.possiblyEvaluate=function(t,e,i){return this.property.possiblyEvaluate(this,t,e,i)};var un=function(t){this.property=t,this.value=new sn(t,void 0)};un.prototype.transitioned=function(t,e){return new cn(this.property,this.value,e,h({},t.transition,this.transition),t.now)},un.prototype.untransitioned=function(){return new cn(this.property,this.value,null,{},0)};var ln=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};ln.prototype.getValue=function(t){return x(this._values[t].value.value)},ln.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new un(this._values[t].property)),this._values[t].value=new sn(this._values[t].property,null===e?void 0:x(e))},ln.prototype.getTransition=function(t){return x(this._values[t].transition)},ln.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new un(this._values[t].property)),this._values[t].transition=x(e)||void 0},ln.prototype.serialize=function(){for(var t={},e=0,i=Object.keys(this._values);e<i.length;e+=1){var r=i[e],n=this.getValue(r);void 0!==n&&(t[r]=n);var o=this.getTransition(r);void 0!==o&&(t[r+"-transition"]=o)}return t},ln.prototype.transitioned=function(t,e){for(var i=new pn(this._properties),r=0,n=Object.keys(this._values);r<n.length;r+=1){var o=n[r];i._values[o]=this._values[o].transitioned(t,e._values[o])}return i},ln.prototype.untransitioned=function(){for(var t=new pn(this._properties),e=0,i=Object.keys(this._values);e<i.length;e+=1){var r=i[e];t._values[r]=this._values[r].untransitioned()}return t};var cn=function(t,e,i,r,n){this.property=t,this.value=e,this.begin=n+r.delay||0,this.end=this.begin+r.duration||0,t.specification.transition&&(r.delay||r.duration)&&(this.prior=i)};cn.prototype.possiblyEvaluate=function(t,e,i){var r=t.now||0,n=this.value.possiblyEvaluate(t,e,i),o=this.prior;if(o){if(r>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(r<this.begin)return o.possiblyEvaluate(t,e,i);var a=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,i),n,function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,i=e*t;return 4*(t<.5?i:3*(t-e)+i-.75)}(a))}return n};var pn=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};pn.prototype.possiblyEvaluate=function(t,e,i){for(var r=new fn(this._properties),n=0,o=Object.keys(this._values);n<o.length;n+=1){var a=o[n];r._values[a]=this._values[a].possiblyEvaluate(t,e,i)}return r},pn.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1)if(this._values[e[t]].prior)return!0;return!1};var hn=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};hn.prototype.getValue=function(t){return x(this._values[t].value)},hn.prototype.setValue=function(t,e){this._values[t]=new sn(this._values[t].property,null===e?void 0:x(e))},hn.prototype.serialize=function(){for(var t={},e=0,i=Object.keys(this._values);e<i.length;e+=1){var r=i[e],n=this.getValue(r);void 0!==n&&(t[r]=n)}return t},hn.prototype.possiblyEvaluate=function(t,e,i){for(var r=new fn(this._properties),n=0,o=Object.keys(this._values);n<o.length;n+=1){var a=o[n];r._values[a]=this._values[a].possiblyEvaluate(t,e,i)}return r};var dn=function(t,e,i){this.property=t,this.value=e,this.parameters=i};dn.prototype.isConstant=function(){return"constant"===this.value.kind},dn.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},dn.prototype.evaluate=function(t,e,i,r){return this.property.evaluate(this.value,this.parameters,t,e,i,r)};var fn=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};fn.prototype.get=function(t){return this._values[t]};var _n=function(t){this.specification=t};_n.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},_n.prototype.interpolate=function(t,e,i){var r=je[this.specification.type];return r?r(t,e,i):t};var gn=function(t,e){this.specification=t,this.overrides=e};gn.prototype.possiblyEvaluate=function(t,e,i,r){return new dn(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},i,r)}:t.expression,e)},gn.prototype.interpolate=function(t,e,i){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new dn(this,{kind:"constant",value:void 0},t.parameters);var r=je[this.specification.type];return r?new dn(this,{kind:"constant",value:r(t.value.value,e.value.value,i)},t.parameters):t},gn.prototype.evaluate=function(t,e,i,r,n,o){return"constant"===t.kind?t.value:t.evaluate(e,i,r,n,o)};var mn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(t,e,i,r){if(void 0===t.value)return new dn(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var n=t.expression.evaluate(e,null,{},i,r),o="resolvedImage"===t.property.specification.type&&"string"!=typeof n?n.name:n,a=this._calculate(o,o,o,e);return new dn(this,{kind:"constant",value:a},e)}if("camera"===t.expression.kind){var s=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new dn(this,{kind:"constant",value:s},e)}return new dn(this,t.expression,e)},e.prototype.evaluate=function(t,e,i,r,n,o){if("source"===t.kind){var a=t.evaluate(e,i,r,n,o);return this._calculate(a,a,a,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},i,r),t.evaluate({zoom:Math.floor(e.zoom)},i,r),t.evaluate({zoom:Math.floor(e.zoom)+1},i,r),e):t.value},e.prototype._calculate=function(t,e,i,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}},e.prototype.interpolate=function(t){return t},e}(gn),yn=function(t){this.specification=t};yn.prototype.possiblyEvaluate=function(t,e,i,r){if(void 0!==t.value){if("constant"===t.expression.kind){var n=t.expression.evaluate(e,null,{},i,r);return this._calculate(n,n,n,e)}return this._calculate(t.expression.evaluate(new an(Math.floor(e.zoom-1),e)),t.expression.evaluate(new an(Math.floor(e.zoom),e)),t.expression.evaluate(new an(Math.floor(e.zoom+1),e)),e)}},yn.prototype._calculate=function(t,e,i,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}},yn.prototype.interpolate=function(t){return t};var vn=function(t){this.specification=t};vn.prototype.possiblyEvaluate=function(t,e,i,r){return!!t.expression.evaluate(e,null,{},i,r)},vn.prototype.interpolate=function(){return!1};var bn=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var i=t[e];i.specification.overridable&&this.overridableProperties.push(e);var r=this.defaultPropertyValues[e]=new sn(i,void 0),n=this.defaultTransitionablePropertyValues[e]=new un(i);this.defaultTransitioningPropertyValues[e]=n.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=r.possiblyEvaluate({})}};Or("DataDrivenProperty",gn),Or("DataConstantProperty",_n),Or("CrossFadedDataDrivenProperty",mn),Or("CrossFadedProperty",yn),Or("ColorRampProperty",vn);var xn=function(t){function e(e,i){if(t.call(this),this.id=e.id,this.type=e.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==e.type&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),i.layout&&(this._unevaluatedLayout=new hn(i.layout)),i.paint)){for(var r in this._transitionablePaint=new ln(i.paint),e.paint)this.setPaintProperty(r,e.paint[r],{validate:!1});for(var n in e.layout)this.setLayoutProperty(n,e.layout[n],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new fn(i.paint)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,i){void 0===i&&(i={}),null!=e&&this._validate(Tr,"layers."+this.id+".layout."+t,t,e,i)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)},e.prototype.getPaintProperty=function(t){return y(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,i){if(void 0===i&&(i={}),null!=e&&this._validate(Pr,"layers."+this.id+".paint."+t,t,e,i))return!1;if(y(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var r=this._transitionablePaint._values[t],n="cross-faded-data-driven"===r.property.specification["property-type"],o=r.value.isDataDriven(),a=r.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);var s=this._transitionablePaint._values[t].value;return s.isDataDriven()||o||n||this._handleOverridablePaintPropertyUpdate(t,a,s)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype._handleOverridablePaintPropertyUpdate=function(t,e,i){return!1},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),b(t,(function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)}))},e.prototype._validate=function(t,e,i,r,n){return void 0===n&&(n={}),(!n||!1!==n.validate)&&Lr(this,t.call(Ar,{key:e,layerType:this.type,objectKey:i,value:r,styleSpec:Pt,style:{glyphs:!0,sprite:!0}}))},e.prototype.is3D=function(){return!1},e.prototype.isTileClipped=function(){return!1},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof dn&&ki(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e}(Ct),wn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},En=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Sn=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function In(t,e){void 0===e&&(e=1);var i=0,r=0;return{members:t.map((function(t){var n=wn[t.type].BYTES_PER_ELEMENT,o=i=An(i,Math.max(e,n)),a=t.components||1;return r=Math.max(r,n),i+=n*a,{name:t.name,type:t.type,components:a,offset:o}})),size:An(i,Math.max(r,e)),alignment:e}}function An(t,e){return Math.ceil(t/e)*e}Sn.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},Sn.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},Sn.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Sn.prototype.clear=function(){this.length=0},Sn.prototype.resize=function(t){this.reserve(t),this.length=t},Sn.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},Sn.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Cn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var i=this.length;return this.resize(i+1),this.emplace(i,t,e)},e.prototype.emplace=function(t,e,i){var r=2*t;return this.int16[r+0]=e,this.int16[r+1]=i,t},e}(Sn);Cn.prototype.bytesPerElement=4,Or("StructArrayLayout2i4",Cn);var Pn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,i,r)},e.prototype.emplace=function(t,e,i,r,n){var o=4*t;return this.int16[o+0]=e,this.int16[o+1]=i,this.int16[o+2]=r,this.int16[o+3]=n,t},e}(Sn);Pn.prototype.bytesPerElement=8,Or("StructArrayLayout4i8",Pn);var Tn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,r,n,o)},e.prototype.emplace=function(t,e,i,r,n,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=i,this.int16[s+2]=r,this.int16[s+3]=n,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(Sn);Tn.prototype.bytesPerElement=12,Or("StructArrayLayout2i4i12",Tn);var Ln=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,r,n,o)},e.prototype.emplace=function(t,e,i,r,n,o,a){var s=4*t,u=8*t;return this.int16[s+0]=e,this.int16[s+1]=i,this.uint8[u+4]=r,this.uint8[u+5]=n,this.uint8[u+6]=o,this.uint8[u+7]=a,t},e}(Sn);Ln.prototype.bytesPerElement=8,Or("StructArrayLayout2i4ub8",Ln);var Mn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var i=this.length;return this.resize(i+1),this.emplace(i,t,e)},e.prototype.emplace=function(t,e,i){var r=2*t;return this.float32[r+0]=e,this.float32[r+1]=i,t},e}(Sn);Mn.prototype.bytesPerElement=8,Or("StructArrayLayout2f8",Mn);var kn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,o,a,s,u,l){var c=this.length;return this.resize(c+1),this.emplace(c,t,e,i,r,n,o,a,s,u,l)},e.prototype.emplace=function(t,e,i,r,n,o,a,s,u,l,c){var p=10*t;return this.uint16[p+0]=e,this.uint16[p+1]=i,this.uint16[p+2]=r,this.uint16[p+3]=n,this.uint16[p+4]=o,this.uint16[p+5]=a,this.uint16[p+6]=s,this.uint16[p+7]=u,this.uint16[p+8]=l,this.uint16[p+9]=c,t},e}(Sn);kn.prototype.bytesPerElement=20,Or("StructArrayLayout10ui20",kn);var Rn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,o,a,s,u,l,c,p){var h=this.length;return this.resize(h+1),this.emplace(h,t,e,i,r,n,o,a,s,u,l,c,p)},e.prototype.emplace=function(t,e,i,r,n,o,a,s,u,l,c,p,h){var d=12*t;return this.int16[d+0]=e,this.int16[d+1]=i,this.int16[d+2]=r,this.int16[d+3]=n,this.uint16[d+4]=o,this.uint16[d+5]=a,this.uint16[d+6]=s,this.uint16[d+7]=u,this.int16[d+8]=l,this.int16[d+9]=c,this.int16[d+10]=p,this.int16[d+11]=h,t},e}(Sn);Rn.prototype.bytesPerElement=24,Or("StructArrayLayout4i4ui4i24",Rn);var Nn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)},e.prototype.emplace=function(t,e,i,r){var n=3*t;return this.float32[n+0]=e,this.float32[n+1]=i,this.float32[n+2]=r,t},e}(Sn);Nn.prototype.bytesPerElement=12,Or("StructArrayLayout3f12",Nn);var Dn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint32[1*t+0]=e,t},e}(Sn);Dn.prototype.bytesPerElement=4,Or("StructArrayLayout1ul4",Dn);var On=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,o,a,s,u){var l=this.length;return this.resize(l+1),this.emplace(l,t,e,i,r,n,o,a,s,u)},e.prototype.emplace=function(t,e,i,r,n,o,a,s,u,l){var c=10*t,p=5*t;return this.int16[c+0]=e,this.int16[c+1]=i,this.int16[c+2]=r,this.int16[c+3]=n,this.int16[c+4]=o,this.int16[c+5]=a,this.uint32[p+3]=s,this.uint16[c+8]=u,this.uint16[c+9]=l,t},e}(Sn);On.prototype.bytesPerElement=20,Or("StructArrayLayout6i1ul2ui20",On);var zn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,r,n,o)},e.prototype.emplace=function(t,e,i,r,n,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=i,this.int16[s+2]=r,this.int16[s+3]=n,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(Sn);zn.prototype.bytesPerElement=12,Or("StructArrayLayout2i2i2i12",zn);var Fn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,i,r,n)},e.prototype.emplace=function(t,e,i,r,n,o){var a=4*t,s=8*t;return this.float32[a+0]=e,this.float32[a+1]=i,this.float32[a+2]=r,this.int16[s+6]=n,this.int16[s+7]=o,t},e}(Sn);Fn.prototype.bytesPerElement=16,Or("StructArrayLayout2f1f2i16",Fn);var Bn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,i,r)},e.prototype.emplace=function(t,e,i,r,n){var o=12*t,a=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=i,this.float32[a+1]=r,this.float32[a+2]=n,t},e}(Sn);Bn.prototype.bytesPerElement=12,Or("StructArrayLayout2ub2f12",Bn);var qn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)},e.prototype.emplace=function(t,e,i,r){var n=3*t;return this.uint16[n+0]=e,this.uint16[n+1]=i,this.uint16[n+2]=r,t},e}(Sn);qn.prototype.bytesPerElement=6,Or("StructArrayLayout3ui6",qn);var Un=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,o,a,s,u,l,c,p,h,d,f,_,g){var m=this.length;return this.resize(m+1),this.emplace(m,t,e,i,r,n,o,a,s,u,l,c,p,h,d,f,_,g)},e.prototype.emplace=function(t,e,i,r,n,o,a,s,u,l,c,p,h,d,f,_,g,m){var y=24*t,v=12*t,b=48*t;return this.int16[y+0]=e,this.int16[y+1]=i,this.uint16[y+2]=r,this.uint16[y+3]=n,this.uint32[v+2]=o,this.uint32[v+3]=a,this.uint32[v+4]=s,this.uint16[y+10]=u,this.uint16[y+11]=l,this.uint16[y+12]=c,this.float32[v+7]=p,this.float32[v+8]=h,this.uint8[b+36]=d,this.uint8[b+37]=f,this.uint8[b+38]=_,this.uint32[v+10]=g,this.int16[y+22]=m,t},e}(Sn);Un.prototype.bytesPerElement=48,Or("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Un);var Vn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,o,a,s,u,l,c,p,h,d,f,_,g,m,y,v,b,x,w,E,S,I,A,C){var P=this.length;return this.resize(P+1),this.emplace(P,t,e,i,r,n,o,a,s,u,l,c,p,h,d,f,_,g,m,y,v,b,x,w,E,S,I,A,C)},e.prototype.emplace=function(t,e,i,r,n,o,a,s,u,l,c,p,h,d,f,_,g,m,y,v,b,x,w,E,S,I,A,C,P){var T=34*t,L=17*t;return this.int16[T+0]=e,this.int16[T+1]=i,this.int16[T+2]=r,this.int16[T+3]=n,this.int16[T+4]=o,this.int16[T+5]=a,this.int16[T+6]=s,this.int16[T+7]=u,this.uint16[T+8]=l,this.uint16[T+9]=c,this.uint16[T+10]=p,this.uint16[T+11]=h,this.uint16[T+12]=d,this.uint16[T+13]=f,this.uint16[T+14]=_,this.uint16[T+15]=g,this.uint16[T+16]=m,this.uint16[T+17]=y,this.uint16[T+18]=v,this.uint16[T+19]=b,this.uint16[T+20]=x,this.uint16[T+21]=w,this.uint16[T+22]=E,this.uint32[L+12]=S,this.float32[L+13]=I,this.float32[L+14]=A,this.float32[L+15]=C,this.float32[L+16]=P,t},e}(Sn);Vn.prototype.bytesPerElement=68,Or("StructArrayLayout8i15ui1ul4f68",Vn);var Gn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.float32[1*t+0]=e,t},e}(Sn);Gn.prototype.bytesPerElement=4,Or("StructArrayLayout1f4",Gn);var jn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)},e.prototype.emplace=function(t,e,i,r){var n=3*t;return this.int16[n+0]=e,this.int16[n+1]=i,this.int16[n+2]=r,t},e}(Sn);jn.prototype.bytesPerElement=6,Or("StructArrayLayout3i6",jn);var Kn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)},e.prototype.emplace=function(t,e,i,r){var n=4*t;return this.uint32[2*t+0]=e,this.uint16[n+2]=i,this.uint16[n+3]=r,t},e}(Sn);Kn.prototype.bytesPerElement=8,Or("StructArrayLayout1ul2ui8",Kn);var Xn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var i=this.length;return this.resize(i+1),this.emplace(i,t,e)},e.prototype.emplace=function(t,e,i){var r=2*t;return this.uint16[r+0]=e,this.uint16[r+1]=i,t},e}(Sn);Xn.prototype.bytesPerElement=4,Or("StructArrayLayout2ui4",Xn);var Zn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint16[1*t+0]=e,t},e}(Sn);Zn.prototype.bytesPerElement=2,Or("StructArrayLayout1ui2",Zn);var Yn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,i,r)},e.prototype.emplace=function(t,e,i,r,n){var o=4*t;return this.float32[o+0]=e,this.float32[o+1]=i,this.float32[o+2]=r,this.float32[o+3]=n,t},e}(Sn);Yn.prototype.bytesPerElement=16,Or("StructArrayLayout4f16",Yn);var Hn=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.anchorPoint.get=function(){return new n(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,i),e}(En);Hn.prototype.size=20;var Wn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Hn(this,t)},e}(On);Or("CollisionBoxArray",Wn);var Qn=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},i.placedOrientation.set=function(t){this._structArray.uint8[this._pos1+37]=t},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},i.hidden.set=function(t){this._structArray.uint8[this._pos1+38]=t},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},i.crossTileID.set=function(t){this._structArray.uint32[this._pos4+10]=t},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(e.prototype,i),e}(En);Qn.prototype.size=48;var Jn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Qn(this,t)},e}(Un);Or("PlacedSymbolArray",Jn);var $n=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},i.key.get=function(){return this._structArray.uint16[this._pos2+8]},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},i.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},i.crossTileID.set=function(t){this._structArray.uint32[this._pos4+12]=t},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},i.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(e.prototype,i),e}(En);$n.prototype.size=68;var to=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new $n(this,t)},e}(Vn);Or("SymbolInstanceArray",to);var eo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e}(Gn);Or("GlyphOffsetArray",eo);var io=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e}(jn);Or("SymbolLineVertexArray",io);var ro=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(e.prototype,i),e}(En);ro.prototype.size=8;var no=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new ro(this,t)},e}(Kn);Or("FeatureIndexArray",no);var oo=In([{name:"a_pos",components:2,type:"Int16"}],4).members,ao=function(t){void 0===t&&(t=[]),this.segments=t};function so(t,e){return 256*(t=c(Math.floor(t),0,255))+c(Math.floor(e),0,255)}ao.prototype.prepareSegment=function(t,e,i,r){var n=this.segments[this.segments.length-1];return t>ao.MAX_VERTEX_ARRAY_LENGTH&&E("Max vertices per segment is "+ao.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!n||n.vertexLength+t>ao.MAX_VERTEX_ARRAY_LENGTH||n.sortKey!==r)&&(n={vertexOffset:e.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},void 0!==r&&(n.sortKey=r),this.segments.push(n)),n},ao.prototype.get=function(){return this.segments},ao.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var i=e[t];for(var r in i.vaos)i.vaos[r].destroy()}},ao.simpleSegment=function(t,e,i,r){return new ao([{vertexOffset:t,primitiveOffset:e,vertexLength:i,primitiveLength:r,vaos:{},sortKey:0}])},ao.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Or("SegmentVector",ao);var uo=In([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),lo=e((function(t){t.exports=function(t,e){var i,r,n,o,a,s,u,l;for(r=t.length-(i=3&t.length),n=e,a=3432918353,s=461845907,l=0;l<r;)u=255&t.charCodeAt(l)|(255&t.charCodeAt(++l))<<8|(255&t.charCodeAt(++l))<<16|(255&t.charCodeAt(++l))<<24,++l,n=27492+(65535&(o=5*(65535&(n=(n^=u=(65535&(u=(u=(65535&u)*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295)<<13|n>>>19))+((5*(n>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(u=0,i){case 3:u^=(255&t.charCodeAt(l+2))<<16;case 2:u^=(255&t.charCodeAt(l+1))<<8;case 1:n^=u=(65535&(u=(u=(65535&(u^=255&t.charCodeAt(l)))*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295}return n^=t.length,n=2246822507*(65535&(n^=n>>>16))+((2246822507*(n>>>16)&65535)<<16)&4294967295,n=3266489909*(65535&(n^=n>>>13))+((3266489909*(n>>>16)&65535)<<16)&4294967295,(n^=n>>>16)>>>0}})),co=e((function(t){t.exports=function(t,e){for(var i,r=t.length,n=e^r,o=0;r>=4;)i=1540483477*(65535&(i=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(i>>>16)&65535)<<16),n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:n^=(255&t.charCodeAt(o+2))<<16;case 2:n^=(255&t.charCodeAt(o+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(o)))+((1540483477*(n>>>16)&65535)<<16)}return n=1540483477*(65535&(n^=n>>>13))+((1540483477*(n>>>16)&65535)<<16),(n^=n>>>15)>>>0}})),po=lo,ho=co;po.murmur3=lo,po.murmur2=ho;var fo=function(){this.ids=[],this.positions=[],this.indexed=!1};fo.prototype.add=function(t,e,i,r){this.ids.push(go(t)),this.positions.push(e,i,r)},fo.prototype.getPositions=function(t){for(var e=go(t),i=0,r=this.ids.length-1;i<r;){var n=i+r>>1;this.ids[n]>=e?r=n:i=n+1}for(var o=[];this.ids[i]===e;)o.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return o},fo.serialize=function(t,e){var i=new Float64Array(t.ids),r=new Uint32Array(t.positions);return function t(e,i,r,n){for(;r<n;){for(var o=e[r+n>>1],a=r-1,s=n+1;;){do{a++}while(e[a]<o);do{s--}while(e[s]>o);if(a>=s)break;mo(e,a,s),mo(i,3*a,3*s),mo(i,3*a+1,3*s+1),mo(i,3*a+2,3*s+2)}s-r<n-s?(t(e,i,r,s),r=s+1):(t(e,i,s+1,n),n=s)}}(i,r,0,i.length-1),e&&e.push(i.buffer,r.buffer),{ids:i,positions:r}},fo.deserialize=function(t){var e=new fo;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e};var _o=Math.pow(2,53)-1;function go(t){var e=+t;return!isNaN(e)&&e<=_o?e:po(String(t))}function mo(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}Or("FeaturePositionMap",fo);var yo=function(t,e){this.gl=t.gl,this.location=e},vo=function(t){function e(e,i){t.call(this,e,i),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},e}(yo),bo=function(t){function e(e,i){t.call(this,e,i),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},e}(yo),xo=function(t){function e(e,i){t.call(this,e,i),this.current=[0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},e}(yo),wo=function(t){function e(e,i){t.call(this,e,i),this.current=[0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},e}(yo),Eo=function(t){function e(e,i){t.call(this,e,i),this.current=[0,0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},e}(yo),So=function(t){function e(e,i){t.call(this,e,i),this.current=$t.transparent}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},e}(yo),Io=new Float32Array(16),Ao=function(t){function e(e,i){t.call(this,e,i),this.current=Io}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},e}(yo);function Co(t){return[so(255*t.r,255*t.g),so(255*t.b,255*t.a)]}var Po=function(t,e,i){this.value=t,this.uniformNames=e.map((function(t){return"u_"+t})),this.type=i};Po.prototype.setUniform=function(t,e,i){t.set(i.constantOr(this.value))},Po.prototype.getBinding=function(t,e,i){return"color"===this.type?new So(t,e):new bo(t,e)};var To=function(t,e){this.uniformNames=e.map((function(t){return"u_"+t})),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};To.prototype.setConstantPatternPositions=function(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr},To.prototype.setUniform=function(t,e,i,r){var n="u_pattern_to"===r?this.patternTo:"u_pattern_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;n&&t.set(n)},To.prototype.getBinding=function(t,e,i){return"u_pattern"===i.substr(0,9)?new Eo(t,e):new bo(t,e)};var Lo=function(t,e,i,r){this.expression=t,this.type=i,this.maxValue=0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===i?2:1,offset:0}})),this.paintVertexArray=new r};Lo.prototype.populatePaintArray=function(t,e,i,r,n){var o=this.paintVertexArray.length,a=this.expression.evaluate(new an(0),e,{},r,[],n);this.paintVertexArray.resize(t),this._setPaintValue(o,t,a)},Lo.prototype.updatePaintArray=function(t,e,i,r){var n=this.expression.evaluate({zoom:0},i,r);this._setPaintValue(t,e,n)},Lo.prototype._setPaintValue=function(t,e,i){if("color"===this.type)for(var r=Co(i),n=t;n<e;n++)this.paintVertexArray.emplace(n,r[0],r[1]);else{for(var o=t;o<e;o++)this.paintVertexArray.emplace(o,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}},Lo.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Lo.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Mo=function(t,e,i,r,n,o){this.expression=t,this.uniformNames=e.map((function(t){return"u_"+t+"_t"})),this.type=i,this.useIntegerZoom=r,this.zoom=n,this.maxValue=0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===i?4:2,offset:0}})),this.paintVertexArray=new o};Mo.prototype.populatePaintArray=function(t,e,i,r,n){var o=this.expression.evaluate(new an(this.zoom),e,{},r,[],n),a=this.expression.evaluate(new an(this.zoom+1),e,{},r,[],n),s=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(s,t,o,a)},Mo.prototype.updatePaintArray=function(t,e,i,r){var n=this.expression.evaluate({zoom:this.zoom},i,r),o=this.expression.evaluate({zoom:this.zoom+1},i,r);this._setPaintValue(t,e,n,o)},Mo.prototype._setPaintValue=function(t,e,i,r){if("color"===this.type)for(var n=Co(i),o=Co(r),a=t;a<e;a++)this.paintVertexArray.emplace(a,n[0],n[1],o[0],o[1]);else{for(var s=t;s<e;s++)this.paintVertexArray.emplace(s,i,r);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(r))}},Mo.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Mo.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Mo.prototype.setUniform=function(t,e){var i=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,r=c(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);t.set(r)},Mo.prototype.getBinding=function(t,e,i){return new bo(t,e)};var ko=function(t,e,i,r,n,o){this.expression=t,this.type=e,this.useIntegerZoom=i,this.zoom=r,this.layerId=o,this.zoomInPaintVertexArray=new n,this.zoomOutPaintVertexArray=new n};ko.prototype.populatePaintArray=function(t,e,i){var r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(r,t,e.patterns&&e.patterns[this.layerId],i)},ko.prototype.updatePaintArray=function(t,e,i,r,n){this._setPaintValues(t,e,i.patterns&&i.patterns[this.layerId],n)},ko.prototype._setPaintValues=function(t,e,i,r){if(r&&i){var n=r[i.min],o=r[i.mid],a=r[i.max];if(n&&o&&a)for(var s=t;s<e;s++)this.zoomInPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],n.tl[0],n.tl[1],n.br[0],n.br[1],o.pixelRatio,n.pixelRatio),this.zoomOutPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],a.tl[0],a.tl[1],a.br[0],a.br[1],o.pixelRatio,a.pixelRatio)}},ko.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,uo.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,uo.members,this.expression.isStateDependent))},ko.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ro=function(t,e,i){this.binders={},this._buffers=[];var r=[];for(var n in t.paint._values)if(i(n)){var o=t.paint.get(n);if(o instanceof dn&&ki(o.property.specification)){var a=Do(n,t.type),s=o.value,u=o.property.specification.type,l=o.property.useIntegerZoom,c=o.property.specification["property-type"],p="cross-faded"===c||"cross-faded-data-driven"===c;if("constant"===s.kind)this.binders[n]=p?new To(s.value,a):new Po(s.value,a,u),r.push("/u_"+n);else if("source"===s.kind||p){var h=Oo(n,u,"source");this.binders[n]=p?new ko(s,u,l,e,h,t.id):new Lo(s,a,u,h),r.push("/a_"+n)}else{var d=Oo(n,u,"composite");this.binders[n]=new Mo(s,a,u,l,e,d),r.push("/z_"+n)}}}this.cacheKey=r.sort().join("")};Ro.prototype.getMaxValue=function(t){var e=this.binders[t];return e instanceof Lo||e instanceof Mo?e.maxValue:0},Ro.prototype.populatePaintArrays=function(t,e,i,r,n){for(var o in this.binders){var a=this.binders[o];(a instanceof Lo||a instanceof Mo||a instanceof ko)&&a.populatePaintArray(t,e,i,r,n)}},Ro.prototype.setConstantPatternPositions=function(t,e){for(var i in this.binders){var r=this.binders[i];r instanceof To&&r.setConstantPatternPositions(t,e)}},Ro.prototype.updatePaintArrays=function(t,e,i,r,n){var o=!1;for(var a in t)for(var s=0,u=e.getPositions(a);s<u.length;s+=1){var l=u[s],c=i.feature(l.index);for(var p in this.binders){var h=this.binders[p];if((h instanceof Lo||h instanceof Mo||h instanceof ko)&&!0===h.expression.isStateDependent){var d=r.paint.get(p);h.expression=d.value,h.updatePaintArray(l.start,l.end,c,t[a],n),o=!0}}}return o},Ro.prototype.defines=function(){var t=[];for(var e in this.binders){var i=this.binders[e];(i instanceof Po||i instanceof To)&&t.push.apply(t,i.uniformNames.map((function(t){return"#define HAS_UNIFORM_"+t})))}return t},Ro.prototype.getBinderAttributes=function(){var t=[];for(var e in this.binders){var i=this.binders[e];if(i instanceof Lo||i instanceof Mo)for(var r=0;r<i.paintVertexAttributes.length;r++)t.push(i.paintVertexAttributes[r].name);else if(i instanceof ko)for(var n=0;n<uo.members.length;n++)t.push(uo.members[n].name)}return t},Ro.prototype.getBinderUniforms=function(){var t=[];for(var e in this.binders){var i=this.binders[e];if(i instanceof Po||i instanceof To||i instanceof Mo)for(var r=0,n=i.uniformNames;r<n.length;r+=1)t.push(n[r])}return t},Ro.prototype.getPaintVertexBuffers=function(){return this._buffers},Ro.prototype.getUniforms=function(t,e){var i=[];for(var r in this.binders){var n=this.binders[r];if(n instanceof Po||n instanceof To||n instanceof Mo)for(var o=0,a=n.uniformNames;o<a.length;o+=1){var s=a[o];if(e[s]){var u=n.getBinding(t,e[s],s);i.push({name:s,property:r,binding:u})}}}return i},Ro.prototype.setUniforms=function(t,e,i,r){for(var n=0,o=e;n<o.length;n+=1){var a=o[n],s=a.name,u=a.property;this.binders[u].setUniform(a.binding,r,i.get(u),s)}},Ro.prototype.updatePaintBuffers=function(t){for(var e in this._buffers=[],this.binders){var i=this.binders[e];if(t&&i instanceof ko){var r=2===t.fromScale?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;r&&this._buffers.push(r)}else(i instanceof Lo||i instanceof Mo)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}},Ro.prototype.upload=function(t){for(var e in this.binders){var i=this.binders[e];(i instanceof Lo||i instanceof Mo||i instanceof ko)&&i.upload(t)}this.updatePaintBuffers()},Ro.prototype.destroy=function(){for(var t in this.binders){var e=this.binders[t];(e instanceof Lo||e instanceof Mo||e instanceof ko)&&e.destroy()}};var No=function(t,e,i){void 0===i&&(i=function(){return!0}),this.programConfigurations={};for(var r=0,n=t;r<n.length;r+=1){var o=n[r];this.programConfigurations[o.id]=new Ro(o,e,i)}this.needsUpload=!1,this._featureMap=new fo,this._bufferOffset=0};function Do(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]}function Oo(t,e,i){var r={color:{source:Mn,composite:Yn},number:{source:Gn,composite:Mn}},n=function(t){return{"line-pattern":{source:kn,composite:kn},"fill-pattern":{source:kn,composite:kn},"fill-extrusion-pattern":{source:kn,composite:kn}}[t]}(t);return n&&n[i]||r[e][i]}No.prototype.populatePaintArrays=function(t,e,i,r,n,o){for(var a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(t,e,r,n,o);void 0!==e.id&&this._featureMap.add(e.id,i,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0},No.prototype.updatePaintArrays=function(t,e,i,r){for(var n=0,o=i;n<o.length;n+=1){var a=o[n];this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(t,this._featureMap,e,a,r)||this.needsUpload}},No.prototype.get=function(t){return this.programConfigurations[t]},No.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},No.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},Or("ConstantBinder",Po),Or("CrossFadedConstantBinder",To),Or("SourceExpressionBinder",Lo),Or("CrossFadedCompositeBinder",ko),Or("CompositeExpressionBinder",Mo),Or("ProgramConfiguration",Ro,{omit:["_buffers"]}),Or("ProgramConfigurationSet",No);var zo=Math.pow(2,14)-1,Fo=-zo-1;function Bo(t){for(var e=8192/t.extent,i=t.loadGeometry(),r=0;r<i.length;r++)for(var n=i[r],o=0;o<n.length;o++){var a=n[o],s=Math.round(a.x*e),u=Math.round(a.y*e);a.x=c(s,Fo,zo),a.y=c(u,Fo,zo),(s<a.x||s>a.x+1||u<a.y||u>a.y+1)&&E("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}function qo(t,e,i,r,n){t.emplaceBack(2*e+(r+1)/2,2*i+(n+1)/2)}var Uo=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Cn,this.indexArray=new qn,this.segments=new ao,this.programConfigurations=new No(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function Vo(t,e){for(var i=0;i<t.length;i++)if(Qo(e,t[i]))return!0;for(var r=0;r<e.length;r++)if(Qo(t,e[r]))return!0;return!!Xo(t,e)}function Go(t,e,i){return!!Qo(t,e)||!!Yo(e,t,i)}function jo(t,e){if(1===t.length)return Wo(e,t[0]);for(var i=0;i<e.length;i++)for(var r=e[i],n=0;n<r.length;n++)if(Qo(t,r[n]))return!0;for(var o=0;o<t.length;o++)if(Wo(e,t[o]))return!0;for(var a=0;a<e.length;a++)if(Xo(t,e[a]))return!0;return!1}function Ko(t,e,i){if(t.length>1){if(Xo(t,e))return!0;for(var r=0;r<e.length;r++)if(Yo(e[r],t,i))return!0}for(var n=0;n<t.length;n++)if(Yo(t[n],e,i))return!0;return!1}function Xo(t,e){if(0===t.length||0===e.length)return!1;for(var i=0;i<t.length-1;i++)for(var r=t[i],n=t[i+1],o=0;o<e.length-1;o++)if(Zo(r,n,e[o],e[o+1]))return!0;return!1}function Zo(t,e,i,r){return S(t,i,r)!==S(e,i,r)&&S(t,e,i)!==S(t,e,r)}function Yo(t,e,i){var r=i*i;if(1===e.length)return t.distSqr(e[0])<r;for(var n=1;n<e.length;n++)if(Ho(t,e[n-1],e[n])<r)return!0;return!1}function Ho(t,e,i){var r=e.distSqr(i);if(0===r)return t.distSqr(e);var n=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/r;return t.distSqr(n<0?e:n>1?i:i.sub(e)._mult(n)._add(e))}function Wo(t,e){for(var i,r,n,o=!1,a=0;a<t.length;a++)for(var s=0,u=(i=t[a]).length-1;s<i.length;u=s++)(r=i[s]).y>e.y!=(n=i[u]).y>e.y&&e.x<(n.x-r.x)*(e.y-r.y)/(n.y-r.y)+r.x&&(o=!o);return o}function Qo(t,e){for(var i=!1,r=0,n=t.length-1;r<t.length;n=r++){var o=t[r],a=t[n];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(i=!i)}return i}function Jo(t,e,i){var r=i[0],n=i[2];if(t.x<r.x&&e.x<r.x||t.x>n.x&&e.x>n.x||t.y<r.y&&e.y<r.y||t.y>n.y&&e.y>n.y)return!1;var o=S(t,e,i[0]);return o!==S(t,e,i[1])||o!==S(t,e,i[2])||o!==S(t,e,i[3])}function $o(t,e,i){var r=e.paint.get(t).value;return"constant"===r.kind?r.value:i.programConfigurations.get(e.id).getMaxValue(t)}function ta(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function ea(t,e,i,r,o){if(!e[0]&&!e[1])return t;var a=n.convert(e)._mult(o);"viewport"===i&&a._rotate(-r);for(var s=[],u=0;u<t.length;u++)s.push(t[u].sub(a));return s}Uo.prototype.populate=function(t,e,i){var r=this.layers[0],n=[],o=null;"circle"===r.type&&(o=r.layout.get("circle-sort-key"));for(var a=0,s=t;a<s.length;a+=1){var u=s[a],l=u.feature,c=u.id,p=u.index,h=u.sourceLayerIndex,d=this.layers[0]._featureFilter.needGeometry,f={type:l.type,id:c,properties:l.properties,geometry:d?Bo(l):[]};if(this.layers[0]._featureFilter.filter(new an(this.zoom),f,i)){d||(f.geometry=Bo(l));var _=o?o.evaluate(f,{},i):void 0;n.push({id:c,properties:l.properties,type:l.type,sourceLayerIndex:h,index:p,geometry:f.geometry,patterns:{},sortKey:_})}}o&&n.sort((function(t,e){return t.sortKey-e.sortKey}));for(var g=0,m=n;g<m.length;g+=1){var y=m[g],v=y.geometry,b=y.index,x=y.sourceLayerIndex,w=t[b].feature;this.addFeature(y,v,b,i),e.featureIndex.insert(w,v,b,x,this.index)}},Uo.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},Uo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Uo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Uo.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,oo),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Uo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Uo.prototype.addFeature=function(t,e,i,r){for(var n=0,o=e;n<o.length;n+=1)for(var a=0,s=o[n];a<s.length;a+=1){var u=s[a],l=u.x,c=u.y;if(!(l<0||l>=8192||c<0||c>=8192)){var p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),h=p.vertexLength;qo(this.layoutVertexArray,l,c,-1,-1),qo(this.layoutVertexArray,l,c,1,-1),qo(this.layoutVertexArray,l,c,1,1),qo(this.layoutVertexArray,l,c,-1,1),this.indexArray.emplaceBack(h,h+1,h+2),this.indexArray.emplaceBack(h,h+3,h+2),p.vertexLength+=4,p.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,{},r)},Or("CircleBucket",Uo,{omit:["layers"]});var ia=new bn({"circle-sort-key":new gn(Pt.layout_circle["circle-sort-key"])}),ra={paint:new bn({"circle-radius":new gn(Pt.paint_circle["circle-radius"]),"circle-color":new gn(Pt.paint_circle["circle-color"]),"circle-blur":new gn(Pt.paint_circle["circle-blur"]),"circle-opacity":new gn(Pt.paint_circle["circle-opacity"]),"circle-translate":new _n(Pt.paint_circle["circle-translate"]),"circle-translate-anchor":new _n(Pt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new _n(Pt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new _n(Pt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new gn(Pt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new gn(Pt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new gn(Pt.paint_circle["circle-stroke-opacity"])}),layout:ia},na="undefined"!=typeof Float32Array?Float32Array:Array;function oa(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function aa(t,e,i){var r=e[0],n=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],p=e[8],h=e[9],d=e[10],f=e[11],_=e[12],g=e[13],m=e[14],y=e[15],v=i[0],b=i[1],x=i[2],w=i[3];return t[0]=v*r+b*s+x*p+w*_,t[1]=v*n+b*u+x*h+w*g,t[2]=v*o+b*l+x*d+w*m,t[3]=v*a+b*c+x*f+w*y,t[4]=(v=i[4])*r+(b=i[5])*s+(x=i[6])*p+(w=i[7])*_,t[5]=v*n+b*u+x*h+w*g,t[6]=v*o+b*l+x*d+w*m,t[7]=v*a+b*c+x*f+w*y,t[8]=(v=i[8])*r+(b=i[9])*s+(x=i[10])*p+(w=i[11])*_,t[9]=v*n+b*u+x*h+w*g,t[10]=v*o+b*l+x*d+w*m,t[11]=v*a+b*c+x*f+w*y,t[12]=(v=i[12])*r+(b=i[13])*s+(x=i[14])*p+(w=i[15])*_,t[13]=v*n+b*u+x*h+w*g,t[14]=v*o+b*l+x*d+w*m,t[15]=v*a+b*c+x*f+w*y,t}Math.hypot||(Math.hypot=function(){for(var t=arguments,e=0,i=arguments.length;i--;)e+=t[i]*t[i];return Math.sqrt(e)});var sa,ua=aa;function la(t,e,i){var r=e[0],n=e[1],o=e[2],a=e[3];return t[0]=i[0]*r+i[4]*n+i[8]*o+i[12]*a,t[1]=i[1]*r+i[5]*n+i[9]*o+i[13]*a,t[2]=i[2]*r+i[6]*n+i[10]*o+i[14]*a,t[3]=i[3]*r+i[7]*n+i[11]*o+i[15]*a,t}sa=new na(3),na!=Float32Array&&(sa[0]=0,sa[1]=0,sa[2]=0),function(){var t=new na(4);na!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();var ca=(function(){var t=new na(2);na!=Float32Array&&(t[0]=0,t[1]=0)}(),function(t){function e(e){t.call(this,e,ra)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new Uo(t)},e.prototype.queryRadius=function(t){var e=t;return $o("circle-radius",this,e)+$o("circle-stroke-width",this,e)+ta(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,i,r,n,o,a,s){for(var u=ea(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),l=this.paint.get("circle-radius").evaluate(e,i)+this.paint.get("circle-stroke-width").evaluate(e,i),c="map"===this.paint.get("circle-pitch-alignment"),p=c?u:function(t,e){return t.map((function(t){return pa(t,e)}))}(u,s),h=c?l*a:l,d=0,f=r;d<f.length;d+=1)for(var _=0,g=f[d];_<g.length;_+=1){var m=g[_],y=c?m:pa(m,s),v=h,b=la([],[m.x,m.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?v*=b[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(v*=o.cameraToCenterDistance/b[3]),Go(p,y,v))return!0}return!1},e}(xn));function pa(t,e){var i=la([],[t.x,t.y,0,1],e);return new n(i[0]/i[3],i[1]/i[3])}var ha=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Uo);function da(t,e,i,r){var n=e.width,o=e.height;if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==n*o*i)throw new RangeError("mismatched image size")}else r=new Uint8Array(n*o*i);return t.width=n,t.height=o,t.data=r,t}function fa(t,e,i){var r=e.width,n=e.height;if(r!==t.width||n!==t.height){var o=da({},{width:r,height:n},i);_a(t,o,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,r),height:Math.min(t.height,n)},i),t.width=r,t.height=n,t.data=o.data}}function _a(t,e,i,r,n,o){if(0===n.width||0===n.height)return e;if(n.width>t.width||n.height>t.height||i.x>t.width-n.width||i.y>t.height-n.height)throw new RangeError("out of range source coordinates for image copy");if(n.width>e.width||n.height>e.height||r.x>e.width-n.width||r.y>e.height-n.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,s=e.data,u=0;u<n.height;u++)for(var l=((i.y+u)*t.width+i.x)*o,c=((r.y+u)*e.width+r.x)*o,p=0;p<n.width*o;p++)s[c+p]=a[l+p];return e}Or("HeatmapBucket",ha,{omit:["layers"]});var ga=function(t,e){da(this,t,1,e)};ga.prototype.resize=function(t){fa(this,t,1)},ga.prototype.clone=function(){return new ga({width:this.width,height:this.height},new Uint8Array(this.data))},ga.copy=function(t,e,i,r,n){_a(t,e,i,r,n,1)};var ma=function(t,e){da(this,t,4,e)};ma.prototype.resize=function(t){fa(this,t,4)},ma.prototype.replace=function(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t},ma.prototype.clone=function(){return new ma({width:this.width,height:this.height},new Uint8Array(this.data))},ma.copy=function(t,e,i,r,n){_a(t,e,i,r,n,4)},Or("AlphaImage",ga),Or("RGBAImage",ma);var ya={paint:new bn({"heatmap-radius":new gn(Pt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new gn(Pt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new _n(Pt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new vn(Pt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new _n(Pt.paint_heatmap["heatmap-opacity"])})};function va(t){var e={},i=t.resolution||256,r=t.clips?t.clips.length:1,n=t.image||new ma({width:i,height:r}),o=function(i,r,o){e[t.evaluationKey]=o;var a=t.expression.evaluate(e);n.data[i+r+0]=Math.floor(255*a.r/a.a),n.data[i+r+1]=Math.floor(255*a.g/a.a),n.data[i+r+2]=Math.floor(255*a.b/a.a),n.data[i+r+3]=Math.floor(255*a.a)};if(t.clips)for(var a=0,s=0;a<r;++a,s+=4*i)for(var u=0,l=0;u<i;u++,l+=4){var c=u/(i-1),p=t.clips[a];o(s,l,p.start*(1-c)+p.end*c)}else for(var h=0,d=0;h<i;h++,d+=4)o(0,d,h/(i-1));return n}var ba=function(t){function e(e){t.call(this,e,ya),this._updateColorRamp()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new ha(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){this.colorRamp=va({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(xn),xa={paint:new bn({"hillshade-illumination-direction":new _n(Pt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new _n(Pt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new _n(Pt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new _n(Pt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new _n(Pt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new _n(Pt.paint_hillshade["hillshade-accent-color"])})},wa=function(t){function e(e){t.call(this,e,xa)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(xn),Ea=In([{name:"a_pos",components:2,type:"Int16"}],4).members,Sa=Aa,Ia=Aa;function Aa(t,e,i){i=i||2;var r,n,o,a,s,u,l,c=e&&e.length,p=c?e[0]*i:t.length,h=Ca(t,0,p,i,!0),d=[];if(!h||h.next===h.prev)return d;if(c&&(h=function(t,e,i,r){var n,o,a,s=[];for(n=0,o=e.length;n<o;n++)(a=Ca(t,e[n]*r,n<o-1?e[n+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(Fa(a));for(s.sort(Na),n=0;n<s.length;n++)Da(s[n],i),i=Pa(i,i.next);return i}(t,e,h,i)),t.length>80*i){r=o=t[0],n=a=t[1];for(var f=i;f<p;f+=i)(s=t[f])<r&&(r=s),(u=t[f+1])<n&&(n=u),s>o&&(o=s),u>a&&(a=u);l=0!==(l=Math.max(o-r,a-n))?1/l:0}return Ta(h,d,i,r,n,l),d}function Ca(t,e,i,r,n){var o,a;if(n===Qa(t,e,i,r)>0)for(o=e;o<i;o+=r)a=Ya(o,t[o],t[o+1],a);else for(o=i-r;o>=e;o-=r)a=Ya(o,t[o],t[o+1],a);return a&&Va(a,a.next)&&(Ha(a),a=a.next),a}function Pa(t,e){if(!t)return t;e||(e=t);var i,r=t;do{if(i=!1,r.steiner||!Va(r,r.next)&&0!==Ua(r.prev,r,r.next))r=r.next;else{if(Ha(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function Ta(t,e,i,r,n,o,a){if(t){!a&&o&&function(t,e,i,r){var n=t;do{null===n.z&&(n.z=za(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,i,r,n,o,a,s,u,l=1;do{for(i=t,t=null,o=null,a=0;i;){for(a++,r=i,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||i.z<=r.z)?(n=i,i=i.nextZ,s--):(n=r,r=r.nextZ,u--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;i=r}o.nextZ=null,l*=2}while(a>1)}(n)}(t,r,n,o);for(var s,u,l=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?Ma(t,r,n,o):La(t))e.push(s.i/i),e.push(t.i/i),e.push(u.i/i),Ha(t),t=u.next,l=u.next;else if((t=u)===l){a?1===a?Ta(t=ka(Pa(t),e,i),e,i,r,n,o,2):2===a&&Ra(t,e,i,r,n,o):Ta(Pa(t),e,i,r,n,o,1);break}}}function La(t){var e=t.prev,i=t,r=t.next;if(Ua(e,i,r)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(Ba(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&Ua(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function Ma(t,e,i,r){var n=t.prev,o=t,a=t.next;if(Ua(n,o,a)>=0)return!1;for(var s=n.x>o.x?n.x>a.x?n.x:a.x:o.x>a.x?o.x:a.x,u=n.y>o.y?n.y>a.y?n.y:a.y:o.y>a.y?o.y:a.y,l=za(n.x<o.x?n.x<a.x?n.x:a.x:o.x<a.x?o.x:a.x,n.y<o.y?n.y<a.y?n.y:a.y:o.y<a.y?o.y:a.y,e,i,r),c=za(s,u,e,i,r),p=t.prevZ,h=t.nextZ;p&&p.z>=l&&h&&h.z<=c;){if(p!==t.prev&&p!==t.next&&Ba(n.x,n.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Ua(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,h!==t.prev&&h!==t.next&&Ba(n.x,n.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Ua(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(;p&&p.z>=l;){if(p!==t.prev&&p!==t.next&&Ba(n.x,n.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Ua(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;h&&h.z<=c;){if(h!==t.prev&&h!==t.next&&Ba(n.x,n.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Ua(h.prev,h,h.next)>=0)return!1;h=h.nextZ}return!0}function ka(t,e,i){var r=t;do{var n=r.prev,o=r.next.next;!Va(n,o)&&Ga(n,r,r.next,o)&&Xa(n,o)&&Xa(o,n)&&(e.push(n.i/i),e.push(r.i/i),e.push(o.i/i),Ha(r),Ha(r.next),r=t=o),r=r.next}while(r!==t);return Pa(r)}function Ra(t,e,i,r,n,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&qa(a,s)){var u=Za(a,s);return a=Pa(a,a.next),u=Pa(u,u.next),Ta(a,e,i,r,n,o),void Ta(u,e,i,r,n,o)}s=s.next}a=a.next}while(a!==t)}function Na(t,e){return t.x-e.x}function Da(t,e){if(e=function(t,e){var i,r=e,n=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>a){if(a=s,s===n){if(o===r.y)return r;if(o===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!i)return null;if(n===a)return i;var u,l=i,c=i.x,p=i.y,h=1/0;r=i;do{n>=r.x&&r.x>=c&&n!==r.x&&Ba(o<p?n:a,o,c,p,o<p?a:n,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(n-r.x),Xa(r,t)&&(u<h||u===h&&(r.x>i.x||r.x===i.x&&Oa(i,r)))&&(i=r,h=u)),r=r.next}while(r!==l);return i}(t,e)){var i=Za(e,t);Pa(e,e.next),Pa(i,i.next)}}function Oa(t,e){return Ua(t.prev,t,e.prev)<0&&Ua(e.next,t,t.next)<0}function za(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Fa(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function Ba(t,e,i,r,n,o,a,s){return(n-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(i-a)*(e-s)>=0&&(i-a)*(o-s)-(n-a)*(r-s)>=0}function qa(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&Ga(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(Xa(t,e)&&Xa(e,t)&&function(t,e){var i=t,r=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&n<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==t);return r}(t,e)&&(Ua(t.prev,t,e.prev)||Ua(t,e.prev,e))||Va(t,e)&&Ua(t.prev,t,t.next)>0&&Ua(e.prev,e,e.next)>0)}function Ua(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function Va(t,e){return t.x===e.x&&t.y===e.y}function Ga(t,e,i,r){var n=Ka(Ua(t,e,i)),o=Ka(Ua(t,e,r)),a=Ka(Ua(i,r,t)),s=Ka(Ua(i,r,e));return n!==o&&a!==s||!(0!==n||!ja(t,i,e))||!(0!==o||!ja(t,r,e))||!(0!==a||!ja(i,t,r))||!(0!==s||!ja(i,e,r))}function ja(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function Ka(t){return t>0?1:t<0?-1:0}function Xa(t,e){return Ua(t.prev,t,t.next)<0?Ua(t,e,t.next)>=0&&Ua(t,t.prev,e)>=0:Ua(t,e,t.prev)<0||Ua(t,t.next,e)<0}function Za(t,e){var i=new Wa(t.i,t.x,t.y),r=new Wa(e.i,e.x,e.y),n=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=n,n.prev=i,r.next=i,i.prev=r,o.next=r,r.prev=o,r}function Ya(t,e,i,r){var n=new Wa(t,e,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function Ha(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Wa(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Qa(t,e,i,r){for(var n=0,o=e,a=i-r;o<i;o+=r)n+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return n}function Ja(t,e,i,r,n){!function t(e,i,r,n,o){for(;n>r;){if(n-r>600){var a=n-r+1,s=i-r+1,u=Math.log(a),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(a-l)/a)*(s-a/2<0?-1:1);t(e,i,Math.max(r,Math.floor(i-s*l/a+c)),Math.min(n,Math.floor(i+(a-s)*l/a+c)),o)}var p=e[i],h=r,d=n;for($a(e,r,i),o(e[n],p)>0&&$a(e,r,n);h<d;){for($a(e,h,d),h++,d--;o(e[h],p)<0;)h++;for(;o(e[d],p)>0;)d--}0===o(e[r],p)?$a(e,r,d):$a(e,++d,n),d<=i&&(r=d+1),i<=d&&(n=d-1)}}(t,e,i||0,r||t.length-1,n||ts)}function $a(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function ts(t,e){return t<e?-1:t>e?1:0}function es(t,e){var i=t.length;if(i<=1)return[t];for(var r,n,o=[],a=0;a<i;a++){var s=I(t[a]);0!==s&&(t[a].area=Math.abs(s),void 0===n&&(n=s<0),n===s<0?(r&&o.push(r),r=[t[a]]):r.push(t[a]))}if(r&&o.push(r),e>1)for(var u=0;u<o.length;u++)o[u].length<=e||(Ja(o[u],e,1,o[u].length-1,is),o[u]=o[u].slice(0,e));return o}function is(t,e){return e.area-t.area}function rs(t,e,i){for(var r=i.patternDependencies,n=!1,o=0,a=e;o<a.length;o+=1){var s=a[o].paint.get(t+"-pattern");s.isConstant()||(n=!0);var u=s.constantOr(null);u&&(n=!0,r[u.to]=!0,r[u.from]=!0)}return n}function ns(t,e,i,r,n){for(var o=n.patternDependencies,a=0,s=e;a<s.length;a+=1){var u=s[a],l=u.paint.get(t+"-pattern").value;if("constant"!==l.kind){var c=l.evaluate({zoom:r-1},i,{},n.availableImages),p=l.evaluate({zoom:r},i,{},n.availableImages),h=l.evaluate({zoom:r+1},i,{},n.availableImages);p=p&&p.name?p.name:p,h=h&&h.name?h.name:h,o[c=c&&c.name?c.name:c]=!0,o[p]=!0,o[h]=!0,i.patterns[u.id]={min:c,mid:p,max:h}}}return i}Aa.deviation=function(t,e,i,r){var n=e&&e.length,o=Math.abs(Qa(t,0,n?e[0]*i:t.length,i));if(n)for(var a=0,s=e.length;a<s;a++)o-=Math.abs(Qa(t,e[a]*i,a<s-1?e[a+1]*i:t.length,i));var u=0;for(a=0;a<r.length;a+=3){var l=r[a]*i,c=r[a+1]*i,p=r[a+2]*i;u+=Math.abs((t[l]-t[p])*(t[c+1]-t[l+1])-(t[l]-t[c])*(t[p+1]-t[l+1]))}return 0===o&&0===u?0:Math.abs((u-o)/o)},Aa.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var a=0;a<e;a++)i.vertices.push(t[n][o][a]);n>0&&i.holes.push(r+=t[n-1].length)}return i},Sa.default=Ia;var os=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Cn,this.indexArray=new qn,this.indexArray2=new Xn,this.programConfigurations=new No(t.layers,t.zoom),this.segments=new ao,this.segments2=new ao,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};os.prototype.populate=function(t,e,i){this.hasPattern=rs("fill",this.layers,e);for(var r=this.layers[0].layout.get("fill-sort-key"),n=[],o=0,a=t;o<a.length;o+=1){var s=a[o],u=s.feature,l=s.id,c=s.index,p=s.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,d={type:u.type,id:l,properties:u.properties,geometry:h?Bo(u):[]};if(this.layers[0]._featureFilter.filter(new an(this.zoom),d,i)){h||(d.geometry=Bo(u));var f=r?r.evaluate(d,{},i,e.availableImages):void 0;n.push({id:l,properties:u.properties,type:u.type,sourceLayerIndex:p,index:c,geometry:d.geometry,patterns:{},sortKey:f})}}r&&n.sort((function(t,e){return t.sortKey-e.sortKey}));for(var _=0,g=n;_<g.length;_+=1){var m=g[_],y=m.geometry,v=m.index,b=m.sourceLayerIndex;if(this.hasPattern){var x=ns("fill",this.layers,m,this.zoom,e);this.patternFeatures.push(x)}else this.addFeature(m,y,v,i,{});e.featureIndex.insert(t[v].feature,y,v,b,this.index)}},os.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},os.prototype.addFeatures=function(t,e,i){for(var r=0,n=this.patternFeatures;r<n.length;r+=1){var o=n[r];this.addFeature(o,o.geometry,o.index,e,i)}},os.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},os.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},os.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ea),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},os.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},os.prototype.addFeature=function(t,e,i,r,n){for(var o=0,a=es(e,500);o<a.length;o+=1){for(var s=a[o],u=0,l=0,c=s;l<c.length;l+=1)u+=c[l].length;for(var p=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray),h=p.vertexLength,d=[],f=[],_=0,g=s;_<g.length;_+=1){var m=g[_];if(0!==m.length){m!==s[0]&&f.push(d.length/2);var y=this.segments2.prepareSegment(m.length,this.layoutVertexArray,this.indexArray2),v=y.vertexLength;this.layoutVertexArray.emplaceBack(m[0].x,m[0].y),this.indexArray2.emplaceBack(v+m.length-1,v),d.push(m[0].x),d.push(m[0].y);for(var b=1;b<m.length;b++)this.layoutVertexArray.emplaceBack(m[b].x,m[b].y),this.indexArray2.emplaceBack(v+b-1,v+b),d.push(m[b].x),d.push(m[b].y);y.vertexLength+=m.length,y.primitiveLength+=m.length}}for(var x=Sa(d,f),w=0;w<x.length;w+=3)this.indexArray.emplaceBack(h+x[w],h+x[w+1],h+x[w+2]);p.vertexLength+=u,p.primitiveLength+=x.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,n,r)},Or("FillBucket",os,{omit:["layers","patternFeatures"]});var as=new bn({"fill-sort-key":new gn(Pt.layout_fill["fill-sort-key"])}),ss={paint:new bn({"fill-antialias":new _n(Pt.paint_fill["fill-antialias"]),"fill-opacity":new gn(Pt.paint_fill["fill-opacity"]),"fill-color":new gn(Pt.paint_fill["fill-color"]),"fill-outline-color":new gn(Pt.paint_fill["fill-outline-color"]),"fill-translate":new _n(Pt.paint_fill["fill-translate"]),"fill-translate-anchor":new _n(Pt.paint_fill["fill-translate-anchor"]),"fill-pattern":new mn(Pt.paint_fill["fill-pattern"])}),layout:as},us=function(t){function e(e){t.call(this,e,ss)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,i){t.prototype.recalculate.call(this,e,i);var r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new os(t)},e.prototype.queryRadius=function(){return ta(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,i,r,n,o,a){return jo(ea(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),r)},e.prototype.isTileClipped=function(){return!0},e}(xn),ls=In([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,cs=ps;function ps(t,e,i,r,n){this.properties={},this.extent=i,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=n,t.readFields(hs,this,e)}function hs(t,e,i){1==t?e.id=i.readVarint():2==t?function(t,e){for(var i=t.readVarint()+t.pos;t.pos<i;){var r=e._keys[t.readVarint()],n=e._values[t.readVarint()];e.properties[r]=n}}(i,e):3==t?e.type=i.readVarint():4==t&&(e._geometry=i.pos)}function ds(t){for(var e,i,r=0,n=0,o=t.length,a=o-1;n<o;a=n++)r+=((i=t[a]).x-(e=t[n]).x)*(e.y+i.y);return r}ps.types=["Unknown","Point","LineString","Polygon"],ps.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,i=t.readVarint()+t.pos,r=1,o=0,a=0,s=0,u=[];t.pos<i;){if(o<=0){var l=t.readVarint();r=7&l,o=l>>3}if(o--,1===r||2===r)a+=t.readSVarint(),s+=t.readSVarint(),1===r&&(e&&u.push(e),e=[]),e.push(new n(a,s));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&u.push(e),u},ps.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,i=1,r=0,n=0,o=0,a=1/0,s=-1/0,u=1/0,l=-1/0;t.pos<e;){if(r<=0){var c=t.readVarint();i=7&c,r=c>>3}if(r--,1===i||2===i)(n+=t.readSVarint())<a&&(a=n),n>s&&(s=n),(o+=t.readSVarint())<u&&(u=o),o>l&&(l=o);else if(7!==i)throw new Error("unknown command "+i)}return[a,u,s,l]},ps.prototype.toGeoJSON=function(t,e,i){var r,n,o=this.extent*Math.pow(2,i),a=this.extent*t,s=this.extent*e,u=this.loadGeometry(),l=ps.types[this.type];function c(t){for(var e=0;e<t.length;e++){var i=t[e];t[e]=[360*(i.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(i.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var p=[];for(r=0;r<u.length;r++)p[r]=u[r][0];c(u=p);break;case 2:for(r=0;r<u.length;r++)c(u[r]);break;case 3:for(u=function(t){var e=t.length;if(e<=1)return[t];for(var i,r,n=[],o=0;o<e;o++){var a=ds(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(i&&n.push(i),i=[t[o]]):i.push(t[o]))}return i&&n.push(i),n}(u),r=0;r<u.length;r++)for(n=0;n<u[r].length;n++)c(u[r][n])}1===u.length?u=u[0]:l="Multi"+l;var h={type:"Feature",geometry:{type:l,coordinates:u},properties:this.properties};return"id"in this&&(h.id=this.id),h};var fs=_s;function _s(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(gs,this,e),this.length=this._features.length}function gs(t,e,i){15===t?e.version=i.readVarint():1===t?e.name=i.readString():5===t?e.extent=i.readVarint():2===t?e._features.push(i.pos):3===t?e._keys.push(i.readString()):4===t&&e._values.push(function(t){for(var e=null,i=t.readVarint()+t.pos;t.pos<i;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(i))}function ms(t,e,i){if(3===t){var r=new fs(i,i.readVarint()+i.pos);r.length&&(e[r.name]=r)}}_s.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new cs(this._pbf,e,this.extent,this._keys,this._values)};var ys={VectorTile:function(t,e){this.layers=t.readFields(ms,{},e)},VectorTileFeature:cs,VectorTileLayer:fs},vs=ys.VectorTileFeature.types,bs=Math.pow(2,13);function xs(t,e,i,r,n,o,a,s){t.emplaceBack(e,i,2*Math.floor(r*bs)+a,n*bs*2,o*bs*2,Math.round(s))}var ws=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Tn,this.indexArray=new qn,this.programConfigurations=new No(t.layers,t.zoom),this.segments=new ao,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function Es(t,e){return t.x===e.x&&(t.x<0||t.x>8192)||t.y===e.y&&(t.y<0||t.y>8192)}ws.prototype.populate=function(t,e,i){this.features=[],this.hasPattern=rs("fill-extrusion",this.layers,e);for(var r=0,n=t;r<n.length;r+=1){var o=n[r],a=o.feature,s=o.id,u=o.index,l=o.sourceLayerIndex,c=this.layers[0]._featureFilter.needGeometry,p={type:a.type,id:s,properties:a.properties,geometry:c?Bo(a):[]};if(this.layers[0]._featureFilter.filter(new an(this.zoom),p,i)){var h={id:s,sourceLayerIndex:l,index:u,geometry:c?p.geometry:Bo(a),properties:a.properties,type:a.type,patterns:{}};this.hasPattern?this.features.push(ns("fill-extrusion",this.layers,h,this.zoom,e)):this.addFeature(h,h.geometry,u,i,{}),e.featureIndex.insert(a,h.geometry,u,l,this.index,!0)}}},ws.prototype.addFeatures=function(t,e,i){for(var r=0,n=this.features;r<n.length;r+=1){var o=n[r];this.addFeature(o,o.geometry,o.index,e,i)}},ws.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},ws.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ws.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ws.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ls),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},ws.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ws.prototype.addFeature=function(t,e,i,r,n){for(var o=0,a=es(e,500);o<a.length;o+=1){for(var s=a[o],u=0,l=0,c=s;l<c.length;l+=1)u+=c[l].length;for(var p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),h=0,d=s;h<d.length;h+=1){var f=d[h];if(0!==f.length&&!((k=f).every((function(t){return t.x<0}))||k.every((function(t){return t.x>8192}))||k.every((function(t){return t.y<0}))||k.every((function(t){return t.y>8192}))))for(var _=0,g=0;g<f.length;g++){var m=f[g];if(g>=1){var y=f[g-1];if(!Es(m,y)){p.vertexLength+4>ao.MAX_VERTEX_ARRAY_LENGTH&&(p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var v=m.sub(y)._perp()._unit(),b=y.dist(m);_+b>32768&&(_=0),xs(this.layoutVertexArray,m.x,m.y,v.x,v.y,0,0,_),xs(this.layoutVertexArray,m.x,m.y,v.x,v.y,0,1,_),xs(this.layoutVertexArray,y.x,y.y,v.x,v.y,0,0,_+=b),xs(this.layoutVertexArray,y.x,y.y,v.x,v.y,0,1,_);var x=p.vertexLength;this.indexArray.emplaceBack(x,x+2,x+1),this.indexArray.emplaceBack(x+1,x+2,x+3),p.vertexLength+=4,p.primitiveLength+=2}}}}if(p.vertexLength+u>ao.MAX_VERTEX_ARRAY_LENGTH&&(p=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray)),"Polygon"===vs[t.type]){for(var w=[],E=[],S=p.vertexLength,I=0,A=s;I<A.length;I+=1){var C=A[I];if(0!==C.length){C!==s[0]&&E.push(w.length/2);for(var P=0;P<C.length;P++){var T=C[P];xs(this.layoutVertexArray,T.x,T.y,0,0,1,1,0),w.push(T.x),w.push(T.y)}}}for(var L=Sa(w,E),M=0;M<L.length;M+=3)this.indexArray.emplaceBack(S+L[M],S+L[M+2],S+L[M+1]);p.primitiveLength+=L.length/3,p.vertexLength+=u}}var k;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,n,r)},Or("FillExtrusionBucket",ws,{omit:["layers","features"]});var Ss={paint:new bn({"fill-extrusion-opacity":new _n(Pt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new gn(Pt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new _n(Pt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new _n(Pt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new mn(Pt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new gn(Pt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new gn(Pt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new _n(Pt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Is=function(t){function e(e){t.call(this,e,Ss)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new ws(t)},e.prototype.queryRadius=function(){return ta(this.paint.get("fill-extrusion-translate"))},e.prototype.is3D=function(){return!0},e.prototype.queryIntersectsFeature=function(t,e,i,r,o,a,s,u){var l=ea(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,s),c=this.paint.get("fill-extrusion-height").evaluate(e,i),p=this.paint.get("fill-extrusion-base").evaluate(e,i),h=function(t,e,i,r){for(var o=[],a=0,s=t;a<s.length;a+=1){var u=s[a],l=[u.x,u.y,0,1];la(l,l,e),o.push(new n(l[0]/l[3],l[1]/l[3]))}return o}(l,u),d=function(t,e,i,r){for(var o=[],a=[],s=r[8]*e,u=r[9]*e,l=r[10]*e,c=r[11]*e,p=r[8]*i,h=r[9]*i,d=r[10]*i,f=r[11]*i,_=0,g=t;_<g.length;_+=1){for(var m=[],y=[],v=0,b=g[_];v<b.length;v+=1){var x=b[v],w=x.x,E=x.y,S=r[0]*w+r[4]*E+r[12],I=r[1]*w+r[5]*E+r[13],A=r[2]*w+r[6]*E+r[14],C=r[3]*w+r[7]*E+r[15],P=A+l,T=C+c,L=S+p,M=I+h,k=A+d,R=C+f,N=new n((S+s)/T,(I+u)/T);N.z=P/T,m.push(N);var D=new n(L/R,M/R);D.z=k/R,y.push(D)}o.push(m),a.push(y)}return[o,a]}(r,p,c,u);return function(t,e,i){var r=1/0;jo(i,e)&&(r=Cs(i,e[0]));for(var n=0;n<e.length;n++)for(var o=e[n],a=t[n],s=0;s<o.length-1;s++){var u=o[s],l=[u,o[s+1],a[s+1],a[s],u];Vo(i,l)&&(r=Math.min(r,Cs(i,l)))}return r!==1/0&&r}(d[0],d[1],h)},e}(xn);function As(t,e){return t.x*e.x+t.y*e.y}function Cs(t,e){if(1===t.length){for(var i,r=0,n=e[r++];!i||n.equals(i);)if(!(i=e[r++]))return 1/0;for(;r<e.length;r++){var o=e[r],a=t[0],s=i.sub(n),u=o.sub(n),l=a.sub(n),c=As(s,s),p=As(s,u),h=As(u,u),d=As(l,s),f=As(l,u),_=c*h-p*p,g=(h*d-p*f)/_,m=(c*f-p*d)/_,y=n.z*(1-g-m)+i.z*g+o.z*m;if(isFinite(y))return y}return 1/0}for(var v=1/0,b=0,x=e;b<x.length;b+=1)v=Math.min(v,x[b].z);return v}var Ps=In([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Ts=In([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Ls=ys.VectorTileFeature.types,Ms=Math.cos(Math.PI/180*37.5),ks=Math.pow(2,14)/.5,Rs=function(t){var e=this;this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((function(t){e.gradients[t.id]={}})),this.layoutVertexArray=new Ln,this.layoutVertexArray2=new Mn,this.indexArray=new qn,this.programConfigurations=new No(t.layers,t.zoom),this.segments=new ao,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};Rs.prototype.populate=function(t,e,i){this.hasPattern=rs("line",this.layers,e);for(var r=this.layers[0].layout.get("line-sort-key"),n=[],o=0,a=t;o<a.length;o+=1){var s=a[o],u=s.feature,l=s.id,c=s.index,p=s.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,d={type:u.type,id:l,properties:u.properties,geometry:h?Bo(u):[]};if(this.layers[0]._featureFilter.filter(new an(this.zoom),d,i)){h||(d.geometry=Bo(u));var f=r?r.evaluate(d,{},i):void 0;n.push({id:l,properties:u.properties,type:u.type,sourceLayerIndex:p,index:c,geometry:d.geometry,patterns:{},sortKey:f})}}r&&n.sort((function(t,e){return t.sortKey-e.sortKey}));for(var _=0,g=n;_<g.length;_+=1){var m=g[_],y=m.geometry,v=m.index,b=m.sourceLayerIndex;if(this.hasPattern){var x=ns("line",this.layers,m,this.zoom,e);this.patternFeatures.push(x)}else this.addFeature(m,y,v,i,{});e.featureIndex.insert(t[v].feature,y,v,b,this.index)}},Rs.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},Rs.prototype.addFeatures=function(t,e,i){for(var r=0,n=this.patternFeatures;r<n.length;r+=1){var o=n[r];this.addFeature(o,o.geometry,o.index,e,i)}},Rs.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Rs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Rs.prototype.upload=function(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Ts)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ps),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Rs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Rs.prototype.lineFeatureClips=function(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}},Rs.prototype.addFeature=function(t,e,i,r,n){var o=this.layers[0].layout,a=o.get("line-join").evaluate(t,{}),s=o.get("line-cap"),u=o.get("line-miter-limit"),l=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(var c=0,p=e;c<p.length;c+=1)this.addLine(p[c],t,a,s,u,l);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,n,r)},Rs.prototype.addLine=function(t,e,i,r,n,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var a=0;a<t.length-1;a++)this.totalDistance+=t[a].dist(t[a+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var s="Polygon"===Ls[e.type],u=t.length;u>=2&&t[u-1].equals(t[u-2]);)u--;for(var l=0;l<u-1&&t[l].equals(t[l+1]);)l++;if(!(u<(s?3:2))){"bevel"===i&&(n=1.05);var c,p=this.overscaling<=16?122880/(512*this.overscaling):0,h=this.segments.prepareSegment(10*u,this.layoutVertexArray,this.indexArray),d=void 0,f=void 0,_=void 0,g=void 0;this.e1=this.e2=-1,s&&(g=t[l].sub(c=t[u-2])._unit()._perp());for(var m=l;m<u;m++)if(!(f=m===u-1?s?t[l+1]:void 0:t[m+1])||!t[m].equals(f)){g&&(_=g),c&&(d=c),c=t[m],g=f?f.sub(c)._unit()._perp():_;var y=(_=_||g).add(g);0===y.x&&0===y.y||y._unit();var v=_.x*g.x+_.y*g.y,b=y.x*g.x+y.y*g.y,x=0!==b?1/b:1/0,w=2*Math.sqrt(2-2*b),E=b<Ms&&d&&f,S=_.x*g.y-_.y*g.x>0;if(E&&m>l){var I=c.dist(d);if(I>2*p){var A=c.sub(c.sub(d)._mult(p/I)._round());this.updateDistance(d,A),this.addCurrentVertex(A,_,0,0,h),d=A}}var C=d&&f,P=C?i:s?"butt":r;if(C&&"round"===P&&(x<o?P="miter":x<=2&&(P="fakeround")),"miter"===P&&x>n&&(P="bevel"),"bevel"===P&&(x>2&&(P="flipbevel"),x<n&&(P="miter")),d&&this.updateDistance(d,c),"miter"===P)y._mult(x),this.addCurrentVertex(c,y,0,0,h);else if("flipbevel"===P){if(x>100)y=g.mult(-1);else{var T=x*_.add(g).mag()/_.sub(g).mag();y._perp()._mult(T*(S?-1:1))}this.addCurrentVertex(c,y,0,0,h),this.addCurrentVertex(c,y.mult(-1),0,0,h)}else if("bevel"===P||"fakeround"===P){var L=-Math.sqrt(x*x-1),M=S?L:0,k=S?0:L;if(d&&this.addCurrentVertex(c,_,M,k,h),"fakeround"===P)for(var R=Math.round(180*w/Math.PI/20),N=1;N<R;N++){var D=N/R;if(.5!==D){var O=D-.5;D+=D*O*(D-1)*((1.0904+v*(v*(3.55645-1.43519*v)-3.2452))*O*O+(.848013+v*(.215638*v-1.06021)))}var z=g.sub(_)._mult(D)._add(_)._unit()._mult(S?-1:1);this.addHalfVertex(c,z.x,z.y,!1,S,0,h)}f&&this.addCurrentVertex(c,g,-M,-k,h)}else if("butt"===P)this.addCurrentVertex(c,y,0,0,h);else if("square"===P){var F=d?1:-1;this.addCurrentVertex(c,y,F,F,h)}else"round"===P&&(d&&(this.addCurrentVertex(c,_,0,0,h),this.addCurrentVertex(c,_,1,1,h,!0)),f&&(this.addCurrentVertex(c,g,-1,-1,h,!0),this.addCurrentVertex(c,g,0,0,h)));if(E&&m<u-1){var B=c.dist(f);if(B>2*p){var q=c.add(f.sub(c)._mult(p/B)._round());this.updateDistance(c,q),this.addCurrentVertex(q,g,0,0,h),c=q}}}}},Rs.prototype.addCurrentVertex=function(t,e,i,r,n,o){void 0===o&&(o=!1);var a=e.y*r-e.x,s=-e.y-e.x*r;this.addHalfVertex(t,e.x+e.y*i,e.y-e.x*i,o,!1,i,n),this.addHalfVertex(t,a,s,o,!0,-r,n),this.distance>ks/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,i,r,n,o))},Rs.prototype.addHalfVertex=function(t,e,i,r,n,o,a){var s=.5*(this.lineClips?this.scaledDistance*(ks-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t.x<<1)+(r?1:0),(t.y<<1)+(n?1:0),Math.round(63*e)+128,Math.round(63*i)+128,1+(0===o?0:o<0?-1:1)|(63&s)<<2,s>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var u=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,u),a.primitiveLength++),n?this.e2=u:this.e1=u},Rs.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Rs.prototype.updateDistance=function(t,e){this.distance+=t.dist(e),this.updateScaledDistance()},Or("LineBucket",Rs,{omit:["layers","patternFeatures"]});var Ns=new bn({"line-cap":new _n(Pt.layout_line["line-cap"]),"line-join":new gn(Pt.layout_line["line-join"]),"line-miter-limit":new _n(Pt.layout_line["line-miter-limit"]),"line-round-limit":new _n(Pt.layout_line["line-round-limit"]),"line-sort-key":new gn(Pt.layout_line["line-sort-key"])}),Ds={paint:new bn({"line-opacity":new gn(Pt.paint_line["line-opacity"]),"line-color":new gn(Pt.paint_line["line-color"]),"line-translate":new _n(Pt.paint_line["line-translate"]),"line-translate-anchor":new _n(Pt.paint_line["line-translate-anchor"]),"line-width":new gn(Pt.paint_line["line-width"]),"line-gap-width":new gn(Pt.paint_line["line-gap-width"]),"line-offset":new gn(Pt.paint_line["line-offset"]),"line-blur":new gn(Pt.paint_line["line-blur"]),"line-dasharray":new yn(Pt.paint_line["line-dasharray"]),"line-pattern":new mn(Pt.paint_line["line-pattern"]),"line-gradient":new vn(Pt.paint_line["line-gradient"])}),layout:Ns},Os=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(e,i){return i=new an(Math.floor(i.zoom),{now:i.now,fadeDuration:i.fadeDuration,zoomHistory:i.zoomHistory,transition:i.transition}),t.prototype.possiblyEvaluate.call(this,e,i)},e.prototype.evaluate=function(e,i,r,n){return i=h({},i,{zoom:Math.floor(i.zoom)}),t.prototype.evaluate.call(this,e,i,r,n)},e}(gn))(Ds.paint.properties["line-width"].specification);Os.useIntegerZoom=!0;var zs=function(t){function e(e){t.call(this,e,Ds),this.gradientVersion=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ve,this.gradientVersion=(this.gradientVersion+1)%s)},e.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},e.prototype.recalculate=function(e,i){t.prototype.recalculate.call(this,e,i),this.paint._values["line-floorwidth"]=Os.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new Rs(t)},e.prototype.queryRadius=function(t){var e=t,i=Fs($o("line-width",this,e),$o("line-gap-width",this,e)),r=$o("line-offset",this,e);return i/2+Math.abs(r)+ta(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,i,r,o,a,s){var u=ea(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,s),l=s/2*Fs(this.paint.get("line-width").evaluate(e,i),this.paint.get("line-gap-width").evaluate(e,i)),c=this.paint.get("line-offset").evaluate(e,i);return c&&(r=function(t,e){for(var i=[],r=new n(0,0),o=0;o<t.length;o++){for(var a=t[o],s=[],u=0;u<a.length;u++){var l=a[u],c=a[u+1],p=0===u?r:l.sub(a[u-1])._unit()._perp(),h=u===a.length-1?r:c.sub(l)._unit()._perp(),d=p._add(h)._unit();d._mult(1/(d.x*h.x+d.y*h.y)),s.push(d._mult(e)._add(l))}i.push(s)}return i}(r,c*s)),function(t,e,i){for(var r=0;r<e.length;r++){var n=e[r];if(t.length>=3)for(var o=0;o<n.length;o++)if(Qo(t,n[o]))return!0;if(Ko(t,n,i))return!0}return!1}(u,r,l)},e.prototype.isTileClipped=function(){return!0},e}(xn);function Fs(t,e){return e>0?e+2*t:t}var Bs=In([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),qs=In([{name:"a_projected_pos",components:3,type:"Float32"}],4),Us=(In([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),In([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Vs=(In([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),In([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Gs=In([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function js(t,e,i){return t.sections.forEach((function(t){t.text=function(t,e,i){var r=e.layout.get("text-transform").evaluate(i,{});return"uppercase"===r?t=t.toLocaleUpperCase():"lowercase"===r&&(t=t.toLocaleLowerCase()),on.applyArabicShaping&&(t=on.applyArabicShaping(t)),t}(t.text,e,i)})),t}In([{name:"triangle",components:3,type:"Uint16"}]),In([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),In([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),In([{type:"Float32",name:"offsetX"}]),In([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Ks={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},Xs=function(t,e,i,r,n){var o,a,s=8*n-r-1,u=(1<<s)-1,l=u>>1,c=-7,p=i?n-1:0,h=i?-1:1,d=t[e+p];for(p+=h,o=d&(1<<-c)-1,d>>=-c,c+=s;c>0;o=256*o+t[e+p],p+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+p],p+=h,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=l}return(d?-1:1)*a*Math.pow(2,o-r)},Zs=function(t,e,i,r,n,o){var a,s,u,l=8*o-n-1,c=(1<<l)-1,p=c>>1,h=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,f=r?1:-1,_=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+p>=1?h/u:h*Math.pow(2,1-p))*u>=2&&(a++,u/=2),a+p>=c?(s=0,a=c):a+p>=1?(s=(e*u-1)*Math.pow(2,n),a+=p):(s=e*Math.pow(2,p-1)*Math.pow(2,n),a=0));n>=8;t[i+d]=255&s,d+=f,s/=256,n-=8);for(a=a<<n|s,l+=n;l>0;t[i+d]=255&a,d+=f,a/=256,l-=8);t[i+d-f]|=128*_},Ys=Hs;function Hs(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Hs.Varint=0,Hs.Fixed64=1,Hs.Bytes=2,Hs.Fixed32=5;var Ws="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Qs(t){return t.type===Hs.Bytes?t.readVarint()+t.pos:t.pos+1}function Js(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function $s(t,e,i){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(r);for(var n=i.pos-1;n>=t;n--)i.buf[n+r]=i.buf[n]}function tu(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function eu(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function iu(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function ru(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function nu(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function ou(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function au(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function su(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function uu(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function lu(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function cu(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function pu(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function hu(t,e,i){1===t&&i.readMessage(du,e)}function du(t,e,i){if(3===t){var r=i.readMessage(fu,{}),n=r.width,o=r.height,a=r.left,s=r.top,u=r.advance;e.push({id:r.id,bitmap:new ga({width:n+6,height:o+6},r.bitmap),metrics:{width:n,height:o,left:a,top:s,advance:u}})}}function fu(t,e,i){1===t?e.id=i.readVarint():2===t?e.bitmap=i.readBytes():3===t?e.width=i.readVarint():4===t?e.height=i.readVarint():5===t?e.left=i.readSVarint():6===t?e.top=i.readSVarint():7===t&&(e.advance=i.readVarint())}function _u(t){for(var e=0,i=0,r=0,n=t;r<n.length;r+=1){var o=n[r];e+=o.w*o.h,i=Math.max(i,o.w)}t.sort((function(t,e){return e.h-t.h}));for(var a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),i),h:1/0}],s=0,u=0,l=0,c=t;l<c.length;l+=1)for(var p=c[l],h=a.length-1;h>=0;h--){var d=a[h];if(!(p.w>d.w||p.h>d.h)){if(p.x=d.x,p.y=d.y,u=Math.max(u,p.y+p.h),s=Math.max(s,p.x+p.w),p.w===d.w&&p.h===d.h){var f=a.pop();h<a.length&&(a[h]=f)}else p.h===d.h?(d.x+=p.w,d.w-=p.w):p.w===d.w?(d.y+=p.h,d.h-=p.h):(a.push({x:d.x+p.w,y:d.y,w:d.w-p.w,h:p.h}),d.y+=p.h,d.h-=p.h);break}}return{w:s,h:u,fill:e/(s*u)||0}}Hs.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),n=r>>3,o=this.pos;this.type=7&r,t(n,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=lu(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=pu(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=lu(this.buf,this.pos)+4294967296*lu(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=lu(this.buf,this.pos)+4294967296*pu(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=Xs(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Xs(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,r=this.buf;return e=127&(i=r[this.pos++]),i<128?e:(e|=(127&(i=r[this.pos++]))<<7,i<128?e:(e|=(127&(i=r[this.pos++]))<<14,i<128?e:(e|=(127&(i=r[this.pos++]))<<21,i<128?e:function(t,e,i){var r,n,o=i.buf;if(r=(112&(n=o[i.pos++]))>>4,n<128)return Js(t,r,e);if(r|=(127&(n=o[i.pos++]))<<3,n<128)return Js(t,r,e);if(r|=(127&(n=o[i.pos++]))<<10,n<128)return Js(t,r,e);if(r|=(127&(n=o[i.pos++]))<<17,n<128)return Js(t,r,e);if(r|=(127&(n=o[i.pos++]))<<24,n<128)return Js(t,r,e);if(r|=(1&(n=o[i.pos++]))<<31,n<128)return Js(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&Ws?function(t,e,i){return Ws.decode(t.subarray(e,i))}(this.buf,e,t):function(t,e,i){for(var r="",n=e;n<i;){var o,a,s,u=t[n],l=null,c=u>239?4:u>223?3:u>191?2:1;if(n+c>i)break;1===c?u<128&&(l=u):2===c?128==(192&(o=t[n+1]))&&(l=(31&u)<<6|63&o)<=127&&(l=null):3===c?(a=t[n+2],128==(192&(o=t[n+1]))&&128==(192&a)&&((l=(15&u)<<12|(63&o)<<6|63&a)<=2047||l>=55296&&l<=57343)&&(l=null)):4===c&&(a=t[n+2],s=t[n+3],128==(192&(o=t[n+1]))&&128==(192&a)&&128==(192&s)&&((l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,c=1):l>65535&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),r+=String.fromCharCode(l),n+=c}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Hs.Bytes)return t.push(this.readVarint(e));var i=Qs(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Hs.Bytes)return t.push(this.readSVarint());var e=Qs(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Hs.Bytes)return t.push(this.readBoolean());var e=Qs(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Hs.Bytes)return t.push(this.readFloat());var e=Qs(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Hs.Bytes)return t.push(this.readDouble());var e=Qs(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Hs.Bytes)return t.push(this.readFixed32());var e=Qs(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Hs.Bytes)return t.push(this.readSFixed32());var e=Qs(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Hs.Bytes)return t.push(this.readFixed64());var e=Qs(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Hs.Bytes)return t.push(this.readSFixed64());var e=Qs(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Hs.Varint)for(;this.buf[this.pos++]>127;);else if(e===Hs.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Hs.Fixed32)this.pos+=4;else{if(e!==Hs.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),cu(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),cu(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),cu(this.buf,-1&t,this.pos),cu(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),cu(this.buf,-1&t,this.pos),cu(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var i,r;if(t>=0?(i=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,i.buf[i.pos]=127&(t>>>=7)}(i,0,e),function(t,e){var i=(7&t)<<4;e.buf[e.pos++]|=i|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var r,n,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!n){r>56319||o+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):n=r;continue}if(r<56320){t[i++]=239,t[i++]=191,t[i++]=189,n=r;continue}r=n-55296<<10|r-56320|65536,n=null}else n&&(t[i++]=239,t[i++]=191,t[i++]=189,n=null);r<128?t[i++]=r:(r<2048?t[i++]=r>>6|192:(r<65536?t[i++]=r>>12|224:(t[i++]=r>>18|240,t[i++]=r>>12&63|128),t[i++]=r>>6&63|128),t[i++]=63&r|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&$s(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),Zs(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Zs(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var r=this.pos-i;r>=128&&$s(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,i){this.writeTag(t,Hs.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,tu,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,eu,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,nu,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,iu,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,ru,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,ou,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,au,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,su,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,uu,e)},writeBytesField:function(t,e){this.writeTag(t,Hs.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Hs.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Hs.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Hs.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Hs.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Hs.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Hs.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Hs.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Hs.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Hs.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var gu=function(t,e){var i=e.pixelRatio,r=e.version,n=e.stretchX,o=e.stretchY,a=e.content;this.paddedRect=t,this.pixelRatio=i,this.stretchX=n,this.stretchY=o,this.content=a,this.version=r},mu={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};mu.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},mu.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},mu.tlbr.get=function(){return this.tl.concat(this.br)},mu.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(gu.prototype,mu);var yu=function(t,e){var i={},r={};this.haveRenderCallbacks=[];var n=[];this.addImages(t,i,n),this.addImages(e,r,n);var o=_u(n),a=new ma({width:o.w||1,height:o.h||1});for(var s in t){var u=t[s],l=i[s].paddedRect;ma.copy(u.data,a,{x:0,y:0},{x:l.x+1,y:l.y+1},u.data)}for(var c in e){var p=e[c],h=r[c].paddedRect,d=h.x+1,f=h.y+1,_=p.data.width,g=p.data.height;ma.copy(p.data,a,{x:0,y:0},{x:d,y:f},p.data),ma.copy(p.data,a,{x:0,y:g-1},{x:d,y:f-1},{width:_,height:1}),ma.copy(p.data,a,{x:0,y:0},{x:d,y:f+g},{width:_,height:1}),ma.copy(p.data,a,{x:_-1,y:0},{x:d-1,y:f},{width:1,height:g}),ma.copy(p.data,a,{x:0,y:0},{x:d+_,y:f},{width:1,height:g})}this.image=a,this.iconPositions=i,this.patternPositions=r};yu.prototype.addImages=function(t,e,i){for(var r in t){var n=t[r],o={x:0,y:0,w:n.data.width+2,h:n.data.height+2};i.push(o),e[r]=new gu(o,n),n.hasRenderCallback&&this.haveRenderCallbacks.push(r)}},yu.prototype.patchUpdatedImages=function(t,e){for(var i in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[i],t.getImage(i),e),this.patchUpdatedImage(this.patternPositions[i],t.getImage(i),e)},yu.prototype.patchUpdatedImage=function(t,e,i){if(t&&e&&t.version!==e.version){t.version=e.version;var r=t.tl;i.update(e.data,void 0,{x:r[0],y:r[1]})}},Or("ImagePosition",gu),Or("ImageAtlas",yu);var vu={horizontal:1,vertical:2,horizontalOnly:3},bu=function(){this.scale=1,this.fontStack="",this.imageName=null};bu.forText=function(t,e){var i=new bu;return i.scale=t||1,i.fontStack=e,i},bu.forImage=function(t){var e=new bu;return e.imageName=t,e};var xu=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function wu(t,e,i,r,n,o,a,s,u,l,c,p,h,d,f,_){var g,m=xu.fromFeature(t,n);p===vu.vertical&&m.verticalizePunctuation();var y=on.processBidirectionalText,v=on.processStyledBidirectionalText;if(y&&1===m.sections.length){g=[];for(var b=0,x=y(m.toString(),Tu(m,l,o,e,r,d,f));b<x.length;b+=1){var w=x[b],E=new xu;E.text=w,E.sections=m.sections;for(var S=0;S<w.length;S++)E.sectionIndex.push(0);g.push(E)}}else if(v){g=[];for(var I=0,A=v(m.text,m.sectionIndex,Tu(m,l,o,e,r,d,f));I<A.length;I+=1){var C=A[I],P=new xu;P.text=C[0],P.sectionIndex=C[1],P.sections=m.sections,g.push(P)}}else g=function(t,e){for(var i=[],r=t.text,n=0,o=0,a=e;o<a.length;o+=1){var s=a[o];i.push(t.substring(n,s)),n=s}return n<r.length&&i.push(t.substring(n,r.length)),i}(m,Tu(m,l,o,e,r,d,f));var T=[],L={positionedLines:T,text:m.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:p,iconsInText:!1,verticalizable:!1};return function(t,e,i,r,n,o,a,s,u,l,c,p){for(var h=0,d=-17,f=0,_=0,g="right"===s?1:"left"===s?0:.5,m=0,y=0,v=n;y<v.length;y+=1){var b=v[y];b.trim();var x=b.getMaxScale(),w=24*(x-1),E={positionedGlyphs:[],lineOffset:0};t.positionedLines[m]=E;var S=E.positionedGlyphs,I=0;if(b.length()){for(var A=0;A<b.length();A++){var C=b.getSection(A),P=b.getSectionIndex(A),T=b.getCharCode(A),L=0,M=null,k=null,R=null,N=24,D=!(u===vu.horizontal||!c&&!Kr(T)||c&&(Eu[T]||(j=T,Gr.Arabic(j)||Gr["Arabic Supplement"](j)||Gr["Arabic Extended-A"](j)||Gr["Arabic Presentation Forms-A"](j)||Gr["Arabic Presentation Forms-B"](j))));if(C.imageName){var O=r[C.imageName];if(!O)continue;R=C.imageName,t.iconsInText=t.iconsInText||!0,k=O.paddedRect;var z=O.displaySize;C.scale=24*C.scale/p,L=w+(24-z[1]*C.scale),N=(M={width:z[0],height:z[1],left:1,top:-3,advance:D?z[1]:z[0]}).advance;var F=D?z[0]*C.scale-24*x:z[1]*C.scale-24*x;F>0&&F>I&&(I=F)}else{var B=i[C.fontStack],q=B&&B[T];if(q&&q.rect)k=q.rect,M=q.metrics;else{var U=e[C.fontStack],V=U&&U[T];if(!V)continue;M=V.metrics}L=24*(x-C.scale)}D?(t.verticalizable=!0,S.push({glyph:T,imageName:R,x:h,y:d+L,vertical:D,scale:C.scale,fontStack:C.fontStack,sectionIndex:P,metrics:M,rect:k}),h+=N*C.scale+l):(S.push({glyph:T,imageName:R,x:h,y:d+L,vertical:D,scale:C.scale,fontStack:C.fontStack,sectionIndex:P,metrics:M,rect:k}),h+=M.advance*C.scale+l)}0!==S.length&&(f=Math.max(h-l,f),Mu(S,0,S.length-1,g,I)),h=0;var G=o*x+I;E.lineOffset=Math.max(I,w),d+=G,_=Math.max(G,_),++m}else d+=o,++m}var j,K=d- -17,X=Lu(a),Z=X.horizontalAlign,Y=X.verticalAlign;(function(t,e,i,r,n,o,a,s,u){var l,c=(e-i)*n;l=o!==a?-s*r- -17:(-r*u+.5)*a;for(var p=0,h=t;p<h.length;p+=1)for(var d=0,f=h[p].positionedGlyphs;d<f.length;d+=1){var _=f[d];_.x+=c,_.y+=l}})(t.positionedLines,g,Z,Y,f,_,o,K,n.length),t.top+=-Y*K,t.bottom=t.top+K,t.left+=-Z*f,t.right=t.left+f}(L,e,i,r,g,a,s,u,p,l,h,_),!function(t){for(var e=0,i=t;e<i.length;e+=1)if(0!==i[e].positionedGlyphs.length)return!1;return!0}(T)&&L}xu.fromFeature=function(t,e){for(var i=new xu,r=0;r<t.sections.length;r++){var n=t.sections[r];n.image?i.addImageSection(n):i.addTextSection(n,e)}return i},xu.prototype.length=function(){return this.text.length},xu.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},xu.prototype.getSectionIndex=function(t){return this.sectionIndex[t]},xu.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},xu.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",i=0;i<t.length;i++){var r=t.charCodeAt(i+1)||null,n=t.charCodeAt(i-1)||null;e+=r&&Xr(r)&&!Ks[t[i+1]]||n&&Xr(n)&&!Ks[t[i-1]]||!Ks[t[i]]?t[i]:Ks[t[i]]}return e}(this.text)},xu.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&Eu[this.text.charCodeAt(e)];e++)t++;for(var i=this.text.length,r=this.text.length-1;r>=0&&r>=t&&Eu[this.text.charCodeAt(r)];r--)i--;this.text=this.text.substring(t,i),this.sectionIndex=this.sectionIndex.slice(t,i)},xu.prototype.substring=function(t,e){var i=new xu;return i.text=this.text.substring(t,e),i.sectionIndex=this.sectionIndex.slice(t,e),i.sections=this.sections,i},xu.prototype.toString=function(){return this.text},xu.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce((function(e,i){return Math.max(e,t.sections[i].scale)}),0)},xu.prototype.addTextSection=function(t,e){this.text+=t.text,this.sections.push(bu.forText(t.scale,t.fontStack||e));for(var i=this.sections.length-1,r=0;r<t.text.length;++r)this.sectionIndex.push(i)},xu.prototype.addImageSection=function(t){var e=t.image?t.image.name:"";if(0!==e.length){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(bu.forImage(e)),this.sectionIndex.push(this.sections.length-1)):E("Reached maximum number of images 6401")}else E("Can't add FormattedSection with an empty image.")},xu.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Eu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Su={};function Iu(t,e,i,r,n,o){if(e.imageName){var a=r[e.imageName];return a?a.displaySize[0]*e.scale*24/o+n:0}var s=i[e.fontStack],u=s&&s[t];return u?u.metrics.advance*e.scale+n:0}function Au(t,e,i,r){var n=Math.pow(t-e,2);return r?t<e?n/2:2*n:n+Math.abs(i)*i}function Cu(t,e,i){var r=0;return 10===t&&(r-=1e4),i&&(r+=150),40!==t&&65288!==t||(r+=50),41!==e&&65289!==e||(r+=50),r}function Pu(t,e,i,r,n,o){for(var a=null,s=Au(e,i,n,o),u=0,l=r;u<l.length;u+=1){var c=l[u],p=Au(e-c.x,i,n,o)+c.badness;p<=s&&(a=c,s=p)}return{index:t,x:e,priorBreak:a,badness:s}}function Tu(t,e,i,r,n,o,a){if("point"!==o)return[];if(!t)return[];for(var s,u=[],l=function(t,e,i,r,n,o){for(var a=0,s=0;s<t.length();s++){var u=t.getSection(s);a+=Iu(t.getCharCode(s),u,r,n,e,o)}return a/Math.max(1,Math.ceil(a/i))}(t,e,i,r,n,a),c=t.text.indexOf("​")>=0,p=0,h=0;h<t.length();h++){var d=t.getSection(h),f=t.getCharCode(h);if(Eu[f]||(p+=Iu(f,d,r,n,e,a)),h<t.length()-1){var _=!((s=f)<11904||!(Gr["Bopomofo Extended"](s)||Gr.Bopomofo(s)||Gr["CJK Compatibility Forms"](s)||Gr["CJK Compatibility Ideographs"](s)||Gr["CJK Compatibility"](s)||Gr["CJK Radicals Supplement"](s)||Gr["CJK Strokes"](s)||Gr["CJK Symbols and Punctuation"](s)||Gr["CJK Unified Ideographs Extension A"](s)||Gr["CJK Unified Ideographs"](s)||Gr["Enclosed CJK Letters and Months"](s)||Gr["Halfwidth and Fullwidth Forms"](s)||Gr.Hiragana(s)||Gr["Ideographic Description Characters"](s)||Gr["Kangxi Radicals"](s)||Gr["Katakana Phonetic Extensions"](s)||Gr.Katakana(s)||Gr["Vertical Forms"](s)||Gr["Yi Radicals"](s)||Gr["Yi Syllables"](s)));(Su[f]||_||d.imageName)&&u.push(Pu(h+1,p,l,u,Cu(f,t.getCharCode(h+1),_&&c),!1))}}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(Pu(t.length(),p,l,u,0,!0))}function Lu(t){var e=.5,i=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:e,verticalAlign:i}}function Mu(t,e,i,r,n){if(r||n)for(var o=t[i],a=(t[i].x+o.metrics.advance*o.scale)*r,s=e;s<=i;s++)t[s].x-=a,t[s].y+=n}function ku(t,e,i,r,n,o){var a,s=t.image;if(s.content){var u=s.content,l=s.pixelRatio||1;a=[u[0]/l,u[1]/l,s.displaySize[0]-u[2]/l,s.displaySize[1]-u[3]/l]}var c,p,h,d,f=e.left*o,_=e.right*o;"width"===i||"both"===i?(d=n[0]+f-r[3],p=n[0]+_+r[1]):p=(d=n[0]+(f+_-s.displaySize[0])/2)+s.displaySize[0];var g=e.top*o,m=e.bottom*o;return"height"===i||"both"===i?(c=n[1]+g-r[0],h=n[1]+m+r[2]):h=(c=n[1]+(g+m-s.displaySize[1])/2)+s.displaySize[1],{image:s,top:c,right:p,bottom:h,left:d,collisionPadding:a}}Su[10]=!0,Su[32]=!0,Su[38]=!0,Su[40]=!0,Su[41]=!0,Su[43]=!0,Su[45]=!0,Su[47]=!0,Su[173]=!0,Su[183]=!0,Su[8203]=!0,Su[8208]=!0,Su[8211]=!0,Su[8231]=!0;var Ru=function(t){function e(e,i,r,n){t.call(this,e,i),this.angle=r,void 0!==n&&(this.segment=n)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(n);function Nu(t,e){var i=e.expression;if("constant"===i.kind)return{kind:"constant",layoutSize:i.evaluate(new an(t+1))};if("source"===i.kind)return{kind:"source"};for(var r=i.zoomStops,n=i.interpolationType,o=0;o<r.length&&r[o]<=t;)o++;for(var a=o=Math.max(0,o-1);a<r.length&&r[a]<t+1;)a++;a=Math.min(r.length-1,a);var s=r[o],u=r[a];return"composite"===i.kind?{kind:"composite",minZoom:s,maxZoom:u,interpolationType:n}:{kind:"camera",minZoom:s,maxZoom:u,minSize:i.evaluate(new an(s)),maxSize:i.evaluate(new an(u)),interpolationType:n}}function Du(t,e,i){var r=e.uSize,n=i.lowerSize;return"source"===t.kind?n/128:"composite"===t.kind?Ge(n/128,i.upperSize/128,e.uSizeT):r}function Ou(t,e){var i=0,r=0;if("constant"===t.kind)r=t.layoutSize;else if("source"!==t.kind){var n=t.interpolationType,o=n?c(ni.interpolationFactor(n,e,t.minZoom,t.maxZoom),0,1):0;"camera"===t.kind?r=Ge(t.minSize,t.maxSize,o):i=o}return{uSizeT:i,uSize:r}}Or("Anchor",Ru);var zu=Object.freeze({__proto__:null,getSizeData:Nu,evaluateSizeForFeature:Du,evaluateSizeForZoom:Ou,SIZE_PACK_FACTOR:128});function Fu(t,e,i,r,n){if(void 0===e.segment)return!0;for(var o=e,a=e.segment+1,s=0;s>-i/2;){if(--a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var u=[],l=0;s<i/2;){var c=t[a],p=t[a+1];if(!p)return!1;var h=t[a-1].angleTo(c)-c.angleTo(p);for(h=Math.abs((h+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:h}),l+=h;s-u[0].distance>r;)l-=u.shift().angleDelta;if(l>n)return!1;a++,s+=c.dist(p)}return!0}function Bu(t){for(var e=0,i=0;i<t.length-1;i++)e+=t[i].dist(t[i+1]);return e}function qu(t,e,i){return t?.6*e*i:0}function Uu(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Vu(t,e,i,r,n,o){for(var a=qu(i,n,o),s=Uu(i,r)*o,u=0,l=Bu(t)/2,c=0;c<t.length-1;c++){var p=t[c],h=t[c+1],d=p.dist(h);if(u+d>l){var f=(l-u)/d,_=Ge(p.x,h.x,f),g=Ge(p.y,h.y,f),m=new Ru(_,g,h.angleTo(p),c);return m._round(),!a||Fu(t,m,s,a,e)?m:void 0}u+=d}}function Gu(t,e,i,r,n,o,a,s,u){var l=qu(r,o,a),c=Uu(r,n),p=c*a,h=0===t[0].x||t[0].x===u||0===t[0].y||t[0].y===u;return e-p<e/4&&(e=p+e/4),function t(e,i,r,n,o,a,s,u,l){for(var c=a/2,p=Bu(e),h=0,d=i-r,f=[],_=0;_<e.length-1;_++){for(var g=e[_],m=e[_+1],y=g.dist(m),v=m.angleTo(g);d+r<h+y;){var b=((d+=r)-h)/y,x=Ge(g.x,m.x,b),w=Ge(g.y,m.y,b);if(x>=0&&x<l&&w>=0&&w<l&&d-c>=0&&d+c<=p){var E=new Ru(x,w,v,_);E._round(),n&&!Fu(e,E,a,n,o)||f.push(E)}}h+=y}return u||f.length||s||(f=t(e,h/2,r,n,o,a,s,!0,l)),f}(t,h?e/2*s%e:(c/2+2*o)*a*s%e,e,l,i,p,h,!1,u)}function ju(t,e,i,r,o){for(var a=[],s=0;s<t.length;s++)for(var u=t[s],l=void 0,c=0;c<u.length-1;c++){var p=u[c],h=u[c+1];p.x<e&&h.x<e||(p.x<e?p=new n(e,p.y+(e-p.x)/(h.x-p.x)*(h.y-p.y))._round():h.x<e&&(h=new n(e,p.y+(e-p.x)/(h.x-p.x)*(h.y-p.y))._round()),p.y<i&&h.y<i||(p.y<i?p=new n(p.x+(i-p.y)/(h.y-p.y)*(h.x-p.x),i)._round():h.y<i&&(h=new n(p.x+(i-p.y)/(h.y-p.y)*(h.x-p.x),i)._round()),p.x>=r&&h.x>=r||(p.x>=r?p=new n(r,p.y+(r-p.x)/(h.x-p.x)*(h.y-p.y))._round():h.x>=r&&(h=new n(r,p.y+(r-p.x)/(h.x-p.x)*(h.y-p.y))._round()),p.y>=o&&h.y>=o||(p.y>=o?p=new n(p.x+(o-p.y)/(h.y-p.y)*(h.x-p.x),o)._round():h.y>=o&&(h=new n(p.x+(o-p.y)/(h.y-p.y)*(h.x-p.x),o)._round()),l&&p.equals(l[l.length-1])||a.push(l=[p]),l.push(h)))))}return a}function Ku(t,e,i,r){var o=[],a=t.image,s=a.pixelRatio,u=a.paddedRect.w-2,l=a.paddedRect.h-2,c=t.right-t.left,p=t.bottom-t.top,h=a.stretchX||[[0,u]],d=a.stretchY||[[0,l]],f=function(t,e){return t+e[1]-e[0]},_=h.reduce(f,0),g=d.reduce(f,0),m=u-_,y=l-g,v=0,b=_,x=0,w=g,E=0,S=m,I=0,A=y;if(a.content&&r){var C=a.content;v=Xu(h,0,C[0]),x=Xu(d,0,C[1]),b=Xu(h,C[0],C[2]),w=Xu(d,C[1],C[3]),E=C[0]-v,I=C[1]-x,S=C[2]-C[0]-b,A=C[3]-C[1]-w}var P=function(r,o,u,l){var h=Yu(r.stretch-v,b,c,t.left),d=Hu(r.fixed-E,S,r.stretch,_),f=Yu(o.stretch-x,w,p,t.top),m=Hu(o.fixed-I,A,o.stretch,g),y=Yu(u.stretch-v,b,c,t.left),C=Hu(u.fixed-E,S,u.stretch,_),P=Yu(l.stretch-x,w,p,t.top),T=Hu(l.fixed-I,A,l.stretch,g),L=new n(h,f),M=new n(y,f),k=new n(y,P),R=new n(h,P),N=new n(d/s,m/s),D=new n(C/s,T/s),O=e*Math.PI/180;if(O){var z=Math.sin(O),F=Math.cos(O),B=[F,-z,z,F];L._matMult(B),M._matMult(B),R._matMult(B),k._matMult(B)}var q=r.stretch+r.fixed,U=o.stretch+o.fixed;return{tl:L,tr:M,bl:R,br:k,tex:{x:a.paddedRect.x+1+q,y:a.paddedRect.y+1+U,w:u.stretch+u.fixed-q,h:l.stretch+l.fixed-U},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:N,pixelOffsetBR:D,minFontScaleX:S/s/c,minFontScaleY:A/s/p,isSDF:i}};if(r&&(a.stretchX||a.stretchY))for(var T=Zu(h,m,_),L=Zu(d,y,g),M=0;M<T.length-1;M++)for(var k=T[M],R=T[M+1],N=0;N<L.length-1;N++)o.push(P(k,L[N],R,L[N+1]));else o.push(P({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:u+1},{fixed:0,stretch:l+1}));return o}function Xu(t,e,i){for(var r=0,n=0,o=t;n<o.length;n+=1){var a=o[n];r+=Math.max(e,Math.min(i,a[1]))-Math.max(e,Math.min(i,a[0]))}return r}function Zu(t,e,i){for(var r=[{fixed:-1,stretch:0}],n=0,o=t;n<o.length;n+=1){var a=o[n],s=a[0],u=a[1],l=r[r.length-1];r.push({fixed:s-l.stretch,stretch:l.stretch}),r.push({fixed:s-l.stretch,stretch:l.stretch+(u-s)})}return r.push({fixed:e+1,stretch:i}),r}function Yu(t,e,i,r){return t/e*i+r}function Hu(t,e,i,r){return t-e*i/r}var Wu=function(t,e,i,r,o,a,s,u,l,c){if(this.boxStartIndex=t.length,l){var p=a.top,h=a.bottom,d=a.collisionPadding;d&&(p-=d[1],h+=d[3]);var f=h-p;f>0&&(f=Math.max(10,f),this.circleDiameter=f)}else{var _=a.top*s-u,g=a.bottom*s+u,m=a.left*s-u,y=a.right*s+u,v=a.collisionPadding;if(v&&(m-=v[0]*s,_-=v[1]*s,y+=v[2]*s,g+=v[3]*s),c){var b=new n(m,_),x=new n(y,_),w=new n(m,g),E=new n(y,g),S=c*Math.PI/180;b._rotate(S),x._rotate(S),w._rotate(S),E._rotate(S),m=Math.min(b.x,x.x,w.x,E.x),y=Math.max(b.x,x.x,w.x,E.x),_=Math.min(b.y,x.y,w.y,E.y),g=Math.max(b.y,x.y,w.y,E.y)}t.emplaceBack(e.x,e.y,m,_,y,g,i,r,o)}this.boxEndIndex=t.length},Qu=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=Ju),this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};function Ju(t,e){return t<e?-1:t>e?1:0}function $u(t,e,i){void 0===e&&(e=1),void 0===i&&(i=!1);for(var r=1/0,o=1/0,a=-1/0,s=-1/0,u=t[0],l=0;l<u.length;l++){var c=u[l];(!l||c.x<r)&&(r=c.x),(!l||c.y<o)&&(o=c.y),(!l||c.x>a)&&(a=c.x),(!l||c.y>s)&&(s=c.y)}var p=Math.min(a-r,s-o),h=p/2,d=new Qu([],tl);if(0===p)return new n(r,o);for(var f=r;f<a;f+=p)for(var _=o;_<s;_+=p)d.push(new el(f+h,_+h,h,t));for(var g=function(t){for(var e=0,i=0,r=0,n=t[0],o=0,a=n.length,s=a-1;o<a;s=o++){var u=n[o],l=n[s],c=u.x*l.y-l.x*u.y;i+=(u.x+l.x)*c,r+=(u.y+l.y)*c,e+=3*c}return new el(i/e,r/e,0,t)}(t),m=d.length;d.length;){var y=d.pop();(y.d>g.d||!g.d)&&(g=y,i&&console.log("found best %d after %d probes",Math.round(1e4*y.d)/1e4,m)),y.max-g.d<=e||(d.push(new el(y.p.x-(h=y.h/2),y.p.y-h,h,t)),d.push(new el(y.p.x+h,y.p.y-h,h,t)),d.push(new el(y.p.x-h,y.p.y+h,h,t)),d.push(new el(y.p.x+h,y.p.y+h,h,t)),m+=4)}return i&&(console.log("num probes: "+m),console.log("best distance: "+g.d)),g.p}function tl(t,e){return e.max-t.max}function el(t,e,i,r){this.p=new n(t,e),this.h=i,this.d=function(t,e){for(var i=!1,r=1/0,n=0;n<e.length;n++)for(var o=e[n],a=0,s=o.length,u=s-1;a<s;u=a++){var l=o[a],c=o[u];l.y>t.y!=c.y>t.y&&t.x<(c.x-l.x)*(t.y-l.y)/(c.y-l.y)+l.x&&(i=!i),r=Math.min(r,Ho(t,l,c))}return(i?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}Qu.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},Qu.prototype.pop=function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}},Qu.prototype.peek=function(){return this.data[0]},Qu.prototype._up=function(t){for(var e=this.data,i=this.compare,r=e[t];t>0;){var n=t-1>>1,o=e[n];if(i(r,o)>=0)break;e[t]=o,t=n}e[t]=r},Qu.prototype._down=function(t){for(var e=this.data,i=this.compare,r=this.length>>1,n=e[t];t<r;){var o=1+(t<<1),a=e[o],s=o+1;if(s<this.length&&i(e[s],a)<0&&(o=s,a=e[s]),i(a,n)>=0)break;e[t]=a,t=o}e[t]=n};var il=Number.POSITIVE_INFINITY;function rl(t,e){return e[1]!==il?function(t,e,i){var r=0,n=0;switch(e=Math.abs(e),i=Math.abs(i),t){case"top-right":case"top-left":case"top":n=i-7;break;case"bottom-right":case"bottom-left":case"bottom":n=7-i}switch(t){case"top-right":case"bottom-right":case"right":r=-e;break;case"top-left":case"bottom-left":case"left":r=e}return[r,n]}(t,e[0],e[1]):function(t,e){var i=0,r=0;e<0&&(e=0);var n=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":r=n-7;break;case"bottom-right":case"bottom-left":r=7-n;break;case"bottom":r=7-e;break;case"top":r=e-7}switch(t){case"top-right":case"bottom-right":i=-n;break;case"top-left":case"bottom-left":i=n;break;case"left":i=e;break;case"right":i=-e}return[i,r]}(t,e[0])}function nl(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function ol(t,e,i,r,o,a,s,u,l,c,p,h,d,f,_){var g=function(t,e,i,r,o,a,s,u){for(var l=r.layout.get("text-rotate").evaluate(a,{})*Math.PI/180,c=[],p=0,h=e.positionedLines;p<h.length;p+=1)for(var d=h[p],f=0,_=d.positionedGlyphs;f<_.length;f+=1){var g=_[f];if(g.rect){var m=g.rect||{},y=4,v=!0,b=1,x=0,w=(o||u)&&g.vertical,E=g.metrics.advance*g.scale/2;if(u&&e.verticalizable&&(x=d.lineOffset/2-(g.imageName?-(24-g.metrics.width*g.scale)/2:24*(g.scale-1))),g.imageName){var S=s[g.imageName];v=S.sdf,y=1/(b=S.pixelRatio)}var I=o?[g.x+E,g.y]:[0,0],A=o?[0,0]:[g.x+E+i[0],g.y+i[1]-x],C=[0,0];w&&(C=A,A=[0,0]);var P=(g.metrics.left-y)*g.scale-E+A[0],T=(-g.metrics.top-y)*g.scale+A[1],L=P+m.w*g.scale/b,M=T+m.h*g.scale/b,k=new n(P,T),R=new n(L,T),N=new n(P,M),D=new n(L,M);if(w){var O=new n(-E,E- -17),z=-Math.PI/2,F=12-E,B=new n(22-F,-(g.imageName?F:0)),q=new(Function.prototype.bind.apply(n,[null].concat(C)));k._rotateAround(z,O)._add(B)._add(q),R._rotateAround(z,O)._add(B)._add(q),N._rotateAround(z,O)._add(B)._add(q),D._rotateAround(z,O)._add(B)._add(q)}if(l){var U=Math.sin(l),V=Math.cos(l),G=[V,-U,U,V];k._matMult(G),R._matMult(G),N._matMult(G),D._matMult(G)}var j=new n(0,0),K=new n(0,0);c.push({tl:k,tr:R,bl:N,br:D,tex:m,writingMode:e.writingMode,glyphOffset:I,sectionIndex:g.sectionIndex,isSDF:v,pixelOffsetTL:j,pixelOffsetBR:K,minFontScaleX:0,minFontScaleY:0})}}return c}(0,i,u,o,a,s,r,t.allowVerticalPlacement),m=t.textSizeData,y=null;"source"===m.kind?(y=[128*o.layout.get("text-size").evaluate(s,{})])[0]>32640&&E(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===m.kind&&((y=[128*f.compositeTextSizes[0].evaluate(s,{},_),128*f.compositeTextSizes[1].evaluate(s,{},_)])[0]>32640||y[1]>32640)&&E(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),t.addSymbols(t.text,g,y,u,a,s,c,e,l.lineStartIndex,l.lineLength,d,_);for(var v=0,b=p;v<b.length;v+=1)h[b[v]]=t.text.placedSymbolArray.length-1;return 4*g.length}function al(t){for(var e in t)return t[e];return null}function sl(t,e,i,r){var n=t.compareText;if(e in n){for(var o=n[e],a=o.length-1;a>=0;a--)if(r.dist(o[a])<i)return!0}else n[e]=[];return n[e].push(r),!1}var ul=ys.VectorTileFeature.types,ll=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function cl(t,e,i,r,n,o,a,s,u,l,c,p,h){var d=s?Math.min(32640,Math.round(s[0])):0,f=s?Math.min(32640,Math.round(s[1])):0;t.emplaceBack(e,i,Math.round(32*r),Math.round(32*n),o,a,(d<<1)+(u?1:0),f,16*l,16*c,256*p,256*h)}function pl(t,e,i){t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i)}function hl(t){for(var e=0,i=t.sections;e<i.length;e+=1)if(Hr(i[e].text))return!0;return!1}var dl=function(t){this.layoutVertexArray=new Rn,this.indexArray=new qn,this.programConfigurations=t,this.segments=new ao,this.dynamicLayoutVertexArray=new Nn,this.opacityVertexArray=new Dn,this.placedSymbolArray=new Jn};dl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},dl.prototype.upload=function(t,e,i,r){this.isEmpty()||(i&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Bs.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,qs.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,ll,!0),this.opacityVertexBuffer.itemSize=1),(i||r)&&this.programConfigurations.upload(t))},dl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Or("SymbolBuffers",dl);var fl=function(t,e,i){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new i,this.segments=new ao,this.collisionVertexArray=new Bn};fl.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Us.members,!0)},fl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Or("CollisionBuffers",fl);var _l=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=oa([]),this.placementViewportMatrix=oa([]);var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Nu(this.zoom,e["text-size"]),this.iconSizeData=Nu(this.zoom,e["icon-size"]);var i=this.layers[0].layout,r=i.get("symbol-sort-key"),n=i.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==n&&void 0!==r.constantOr(1),this.sortFeaturesByY=("viewport-y"===n||"auto"===n&&!this.sortFeaturesByKey)&&(i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement")),"point"===i.get("symbol-placement")&&(this.writingModes=i.get("text-writing-mode").map((function(t){return vu[t]}))),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id})),this.sourceID=t.sourceID};_l.prototype.createArrays=function(){this.text=new dl(new No(this.layers,this.zoom,(function(t){return/^text/.test(t)}))),this.icon=new dl(new No(this.layers,this.zoom,(function(t){return/^icon/.test(t)}))),this.glyphOffsetArray=new eo,this.lineVertexArray=new io,this.symbolInstances=new to},_l.prototype.calculateGlyphDependencies=function(t,e,i,r,n){for(var o=0;o<t.length;o++)if(e[t.charCodeAt(o)]=!0,(i||r)&&n){var a=Ks[t.charAt(o)];a&&(e[a.charCodeAt(0)]=!0)}},_l.prototype.populate=function(t,e,i){var r=this.layers[0],n=r.layout,o=n.get("text-font"),a=n.get("text-field"),s=n.get("icon-image"),u=("constant"!==a.value.kind||a.value.value instanceof ie&&!a.value.value.isEmpty()||a.value.value.toString().length>0)&&("constant"!==o.value.kind||o.value.value.length>0),l="constant"!==s.value.kind||!!s.value.value||Object.keys(s.parameters).length>0,c=n.get("symbol-sort-key");if(this.features=[],u||l){for(var p=e.iconDependencies,h=e.glyphDependencies,d=e.availableImages,f=new an(this.zoom),_=0,g=t;_<g.length;_+=1){var m=g[_],y=m.feature,v=m.id,b=m.index,x=m.sourceLayerIndex,w=r._featureFilter.needGeometry,E={type:y.type,id:v,properties:y.properties,geometry:w?Bo(y):[]};if(r._featureFilter.filter(f,E,i)){w||(E.geometry=Bo(y));var S=void 0;if(u){var I=r.getValueAndResolveTokens("text-field",E,i,d),A=ie.factory(I);hl(A)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===rn()||this.hasRTLText&&on.isParsed())&&(S=js(A,r,E))}var C=void 0;if(l){var P=r.getValueAndResolveTokens("icon-image",E,i,d);C=P instanceof re?P:re.fromString(P)}if(S||C){var T=this.sortFeaturesByKey?c.evaluate(E,{},i):void 0,L={id:v,text:S,icon:C,index:b,sourceLayerIndex:x,geometry:Bo(y),properties:y.properties,type:ul[y.type],sortKey:T};if(this.features.push(L),C&&(p[C.name]=!0),S){var M=o.evaluate(E,{},i).join(","),k="map"===n.get("text-rotation-alignment")&&"point"!==n.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(vu.vertical)>=0;for(var R=0,N=S.sections;R<N.length;R+=1){var D=N[R];if(D.image)p[D.image.name]=!0;else{var O=jr(S.toString()),z=D.fontStack||M,F=h[z]=h[z]||{};this.calculateGlyphDependencies(D.text,F,k,this.allowVerticalPlacement,O)}}}}}}"line"===n.get("symbol-placement")&&(this.features=function(t){var e={},i={},r=[],n=0;function o(e){r.push(t[e]),n++}function a(t,e,n){var o=i[t];return delete i[t],i[e]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(n[0]),o}function s(t,i,n){var o=e[i];return delete e[i],e[t]=o,r[o].geometry[0].shift(),r[o].geometry[0]=n[0].concat(r[o].geometry[0]),o}function u(t,e,i){var r=i?e[0][e[0].length-1]:e[0][0];return t+":"+r.x+":"+r.y}for(var l=0;l<t.length;l++){var c=t[l],p=c.geometry,h=c.text?c.text.toString():null;if(h){var d=u(h,p),f=u(h,p,!0);if(d in i&&f in e&&i[d]!==e[f]){var _=s(d,f,p),g=a(d,f,r[_].geometry);delete e[d],delete i[f],i[u(h,r[g].geometry,!0)]=g,r[_].geometry=null}else d in i?a(d,f,p):f in e?s(d,f,p):(o(l),e[d]=n-1,i[f]=n-1)}else o(l)}return r.filter((function(t){return t.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(t,e){return t.sortKey-e.sortKey}))}},_l.prototype.update=function(t,e,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,i),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,i))},_l.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},_l.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},_l.prototype.upload=function(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},_l.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},_l.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},_l.prototype.addToLineVertexArray=function(t,e){var i=this.lineVertexArray.length;if(void 0!==t.segment){for(var r=t.dist(e[t.segment+1]),n=t.dist(e[t.segment]),o={},a=t.segment+1;a<e.length;a++)o[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:r},a<e.length-1&&(r+=e[a+1].dist(e[a]));for(var s=t.segment||0;s>=0;s--)o[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:n},s>0&&(n+=e[s-1].dist(e[s]));for(var u=0;u<e.length;u++){var l=o[u];this.lineVertexArray.emplaceBack(l.x,l.y,l.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},_l.prototype.addSymbols=function(t,e,i,r,n,o,a,s,u,l,c,p){for(var h=t.indexArray,d=t.layoutVertexArray,f=t.segments.prepareSegment(4*e.length,d,h,o.sortKey),_=this.glyphOffsetArray.length,g=f.vertexLength,m=this.allowVerticalPlacement&&a===vu.vertical?Math.PI/2:0,y=o.text&&o.text.sections,v=0;v<e.length;v++){var b=e[v],x=b.tl,w=b.tr,E=b.bl,S=b.br,I=b.tex,A=b.pixelOffsetTL,C=b.pixelOffsetBR,P=b.minFontScaleX,T=b.minFontScaleY,L=b.glyphOffset,M=b.isSDF,k=b.sectionIndex,R=f.vertexLength,N=L[1];cl(d,s.x,s.y,x.x,N+x.y,I.x,I.y,i,M,A.x,A.y,P,T),cl(d,s.x,s.y,w.x,N+w.y,I.x+I.w,I.y,i,M,C.x,A.y,P,T),cl(d,s.x,s.y,E.x,N+E.y,I.x,I.y+I.h,i,M,A.x,C.y,P,T),cl(d,s.x,s.y,S.x,N+S.y,I.x+I.w,I.y+I.h,i,M,C.x,C.y,P,T),pl(t.dynamicLayoutVertexArray,s,m),h.emplaceBack(R,R+1,R+2),h.emplaceBack(R+1,R+2,R+3),f.vertexLength+=4,f.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(L[0]),v!==e.length-1&&k===e[v+1].sectionIndex||t.programConfigurations.populatePaintArrays(d.length,o,o.index,{},p,y&&y[k])}t.placedSymbolArray.emplaceBack(s.x,s.y,_,this.glyphOffsetArray.length-_,g,u,l,s.segment,i?i[0]:0,i?i[1]:0,r[0],r[1],a,0,!1,0,c)},_l.prototype._addCollisionDebugVertex=function(t,e,i,r,n,o){return e.emplaceBack(0,0),t.emplaceBack(i.x,i.y,r,n,Math.round(o.x),Math.round(o.y))},_l.prototype.addCollisionDebugVertices=function(t,e,i,r,o,a,s){var u=o.segments.prepareSegment(4,o.layoutVertexArray,o.indexArray),l=u.vertexLength,c=o.layoutVertexArray,p=o.collisionVertexArray,h=s.anchorX,d=s.anchorY;this._addCollisionDebugVertex(c,p,a,h,d,new n(t,e)),this._addCollisionDebugVertex(c,p,a,h,d,new n(i,e)),this._addCollisionDebugVertex(c,p,a,h,d,new n(i,r)),this._addCollisionDebugVertex(c,p,a,h,d,new n(t,r)),u.vertexLength+=4;var f=o.indexArray;f.emplaceBack(l,l+1),f.emplaceBack(l+1,l+2),f.emplaceBack(l+2,l+3),f.emplaceBack(l+3,l),u.primitiveLength+=4},_l.prototype.addDebugCollisionBoxes=function(t,e,i,r){for(var n=t;n<e;n++){var o=this.collisionBoxArray.get(n);this.addCollisionDebugVertices(o.x1,o.y1,o.x2,o.y2,r?this.textCollisionBox:this.iconCollisionBox,o.anchorPoint,i)}},_l.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new fl(zn,Vs.members,Xn),this.iconCollisionBox=new fl(zn,Vs.members,Xn);for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}},_l.prototype._deserializeCollisionBoxesForSymbol=function(t,e,i,r,n,o,a,s,u){for(var l={},c=e;c<i;c++){var p=t.get(c);l.textBox={x1:p.x1,y1:p.y1,x2:p.x2,y2:p.y2,anchorPointX:p.anchorPointX,anchorPointY:p.anchorPointY},l.textFeatureIndex=p.featureIndex;break}for(var h=r;h<n;h++){var d=t.get(h);l.verticalTextBox={x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2,anchorPointX:d.anchorPointX,anchorPointY:d.anchorPointY},l.verticalTextFeatureIndex=d.featureIndex;break}for(var f=o;f<a;f++){var _=t.get(f);l.iconBox={x1:_.x1,y1:_.y1,x2:_.x2,y2:_.y2,anchorPointX:_.anchorPointX,anchorPointY:_.anchorPointY},l.iconFeatureIndex=_.featureIndex;break}for(var g=s;g<u;g++){var m=t.get(g);l.verticalIconBox={x1:m.x1,y1:m.y1,x2:m.x2,y2:m.y2,anchorPointX:m.anchorPointX,anchorPointY:m.anchorPointY},l.verticalIconFeatureIndex=m.featureIndex;break}return l},_l.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var i=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}},_l.prototype.hasTextData=function(){return this.text.segments.get().length>0},_l.prototype.hasIconData=function(){return this.icon.segments.get().length>0},_l.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},_l.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},_l.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},_l.prototype.addIndicesForPlacedSymbol=function(t,e){for(var i=t.placedSymbolArray.get(e),r=i.vertexStartIndex+4*i.numGlyphs,n=i.vertexStartIndex;n<r;n+=4)t.indexArray.emplaceBack(n,n+1,n+2),t.indexArray.emplaceBack(n+1,n+2,n+3)},_l.prototype.getSortedSymbolIndexes=function(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var e=Math.sin(t),i=Math.cos(t),r=[],n=[],o=[],a=0;a<this.symbolInstances.length;++a){o.push(a);var s=this.symbolInstances.get(a);r.push(0|Math.round(e*s.anchorX+i*s.anchorY)),n.push(s.featureIndex)}return o.sort((function(t,e){return r[t]-r[e]||n[e]-n[t]})),o},_l.prototype.addToSortKeyRanges=function(t,e){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===e?i.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})},_l.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var i=0,r=this.symbolInstanceIndexes;i<r.length;i+=1){var n=this.symbolInstances.get(r[i]);this.featureSortOrder.push(n.featureIndex),[n.rightJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.leftJustifiedTextSymbolIndex].forEach((function(t,i,r){t>=0&&r.indexOf(t)===i&&e.addIndicesForPlacedSymbol(e.text,t)})),n.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,n.verticalPlacedTextSymbolIndex),n.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,n.placedIconSymbolIndex),n.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,n.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Or("SymbolBucket",_l,{omit:["layers","collisionBoxArray","features","compareText"]}),_l.MAX_GLYPHS=65535,_l.addDynamicAttributes=pl;var gl=new bn({"symbol-placement":new _n(Pt.layout_symbol["symbol-placement"]),"symbol-spacing":new _n(Pt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new _n(Pt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new gn(Pt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new _n(Pt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new _n(Pt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new _n(Pt.layout_symbol["icon-ignore-placement"]),"icon-optional":new _n(Pt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new _n(Pt.layout_symbol["icon-rotation-alignment"]),"icon-size":new gn(Pt.layout_symbol["icon-size"]),"icon-text-fit":new _n(Pt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new _n(Pt.layout_symbol["icon-text-fit-padding"]),"icon-image":new gn(Pt.layout_symbol["icon-image"]),"icon-rotate":new gn(Pt.layout_symbol["icon-rotate"]),"icon-padding":new _n(Pt.layout_symbol["icon-padding"]),"icon-keep-upright":new _n(Pt.layout_symbol["icon-keep-upright"]),"icon-offset":new gn(Pt.layout_symbol["icon-offset"]),"icon-anchor":new gn(Pt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new _n(Pt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new _n(Pt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new _n(Pt.layout_symbol["text-rotation-alignment"]),"text-field":new gn(Pt.layout_symbol["text-field"]),"text-font":new gn(Pt.layout_symbol["text-font"]),"text-size":new gn(Pt.layout_symbol["text-size"]),"text-max-width":new gn(Pt.layout_symbol["text-max-width"]),"text-line-height":new _n(Pt.layout_symbol["text-line-height"]),"text-letter-spacing":new gn(Pt.layout_symbol["text-letter-spacing"]),"text-justify":new gn(Pt.layout_symbol["text-justify"]),"text-radial-offset":new gn(Pt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new _n(Pt.layout_symbol["text-variable-anchor"]),"text-anchor":new gn(Pt.layout_symbol["text-anchor"]),"text-max-angle":new _n(Pt.layout_symbol["text-max-angle"]),"text-writing-mode":new _n(Pt.layout_symbol["text-writing-mode"]),"text-rotate":new gn(Pt.layout_symbol["text-rotate"]),"text-padding":new _n(Pt.layout_symbol["text-padding"]),"text-keep-upright":new _n(Pt.layout_symbol["text-keep-upright"]),"text-transform":new gn(Pt.layout_symbol["text-transform"]),"text-offset":new gn(Pt.layout_symbol["text-offset"]),"text-allow-overlap":new _n(Pt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new _n(Pt.layout_symbol["text-ignore-placement"]),"text-optional":new _n(Pt.layout_symbol["text-optional"])}),ml={paint:new bn({"icon-opacity":new gn(Pt.paint_symbol["icon-opacity"]),"icon-color":new gn(Pt.paint_symbol["icon-color"]),"icon-halo-color":new gn(Pt.paint_symbol["icon-halo-color"]),"icon-halo-width":new gn(Pt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new gn(Pt.paint_symbol["icon-halo-blur"]),"icon-translate":new _n(Pt.paint_symbol["icon-translate"]),"icon-translate-anchor":new _n(Pt.paint_symbol["icon-translate-anchor"]),"text-opacity":new gn(Pt.paint_symbol["text-opacity"]),"text-color":new gn(Pt.paint_symbol["text-color"],{runtimeType:qt,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new gn(Pt.paint_symbol["text-halo-color"]),"text-halo-width":new gn(Pt.paint_symbol["text-halo-width"]),"text-halo-blur":new gn(Pt.paint_symbol["text-halo-blur"]),"text-translate":new _n(Pt.paint_symbol["text-translate"]),"text-translate-anchor":new _n(Pt.paint_symbol["text-translate-anchor"])}),layout:gl},yl=function(t){this.type=t.property.overrides?t.property.overrides.runtimeType:Ot,this.defaultValue=t};yl.prototype.evaluate=function(t){if(t.formattedSection){var e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default},yl.prototype.eachChild=function(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)},yl.prototype.outputDefined=function(){return!1},yl.prototype.serialize=function(){return null},Or("FormatSectionOverride",yl,{omit:["defaultValue"]});var vl=function(t){function e(e){t.call(this,e,ml)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,i){if(t.prototype.recalculate.call(this,e,i),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var r=this.layout.get("text-writing-mode");if(r){for(var n=[],o=0,a=r;o<a.length;o+=1){var s=a[o];n.indexOf(s)<0&&n.push(s)}this.layout._values["text-writing-mode"]=n}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},e.prototype.getValueAndResolveTokens=function(t,e,i,r){var n=this.layout.get(t).evaluate(e,{},i,r),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||ji(o.value)||!n?n:function(t,e){return e.replace(/{([^{}]+)}/g,(function(e,i){return i in t?String(t[i]):""}))}(e.properties,n)},e.prototype.createBucket=function(t){return new _l(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype._setPaintOverrides=function(){for(var t=0,i=ml.paint.overridableProperties;t<i.length;t+=1){var r=i[t];if(e.hasPaintOverride(this.layout,r)){var n,o=this.paint.get(r),a=new yl(o),s=new Gi(a,o.property.specification);n="constant"===o.value.kind||"source"===o.value.kind?new Xi("source",s):new Zi("composite",s,o.value.zoomStops,o.value._interpolationType),this.paint._values[r]=new dn(o.property,n,o.parameters)}}},e.prototype._handleOverridablePaintPropertyUpdate=function(t,i,r){return!(!this.layout||i.isDataDriven()||r.isDataDriven())&&e.hasPaintOverride(this.layout,t)},e.hasPaintOverride=function(t,e){var i=t.get("text-field"),r=ml.paint.properties[e],n=!1,o=function(t){for(var e=0,i=t;e<i.length;e+=1)if(r.overrides&&r.overrides.hasOverride(i[e]))return void(n=!0)};if("constant"===i.value.kind&&i.value.value instanceof ie)o(i.value.value.sections);else if("source"===i.value.kind){var a=function(t){n||(t instanceof ue&&ae(t.value)===jt?o(t.value.sections):t instanceof he?o(t.sections):t.eachChild(a))},s=i.value;s._styleExpression&&a(s._styleExpression.expression)}return n},e}(xn),bl={paint:new bn({"background-color":new _n(Pt.paint_background["background-color"]),"background-pattern":new yn(Pt.paint_background["background-pattern"]),"background-opacity":new _n(Pt.paint_background["background-opacity"])})},xl=function(t){function e(e){t.call(this,e,bl)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(xn),wl={paint:new bn({"raster-opacity":new _n(Pt.paint_raster["raster-opacity"]),"raster-hue-rotate":new _n(Pt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new _n(Pt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new _n(Pt.paint_raster["raster-brightness-max"]),"raster-saturation":new _n(Pt.paint_raster["raster-saturation"]),"raster-contrast":new _n(Pt.paint_raster["raster-contrast"]),"raster-resampling":new _n(Pt.paint_raster["raster-resampling"]),"raster-fade-duration":new _n(Pt.paint_raster["raster-fade-duration"])})},El=function(t){function e(e){t.call(this,e,wl)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(xn),Sl=function(t){function e(e){t.call(this,e,{}),this.implementation=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},e.prototype.onRemove=function(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},e}(xn),Il={circle:ca,heatmap:ba,hillshade:wa,fill:us,"fill-extrusion":Is,line:zs,symbol:vl,background:xl,raster:El},Al=a.HTMLImageElement,Cl=a.HTMLCanvasElement,Pl=a.HTMLVideoElement,Tl=a.ImageData,Ll=a.ImageBitmap,Ml=function(t,e,i,r){this.context=t,this.format=i,this.texture=t.gl.createTexture(),this.update(e,r)};Ml.prototype.update=function(t,e,i){var r=t.width,n=t.height,o=!(this.size&&this.size[0]===r&&this.size[1]===n||i),a=this.context,s=a.gl;if(this.useMipmap=Boolean(e&&e.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!e||!1!==e.premultiply)),o)this.size=[r,n],t instanceof Al||t instanceof Cl||t instanceof Pl||t instanceof Tl||Ll&&t instanceof Ll?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,t):s.texImage2D(s.TEXTURE_2D,0,this.format,r,n,0,this.format,s.UNSIGNED_BYTE,t.data);else{var u=i||{x:0,y:0},l=u.x,c=u.y;t instanceof Al||t instanceof Cl||t instanceof Pl||t instanceof Tl||Ll&&t instanceof Ll?s.texSubImage2D(s.TEXTURE_2D,0,l,c,s.RGBA,s.UNSIGNED_BYTE,t):s.texSubImage2D(s.TEXTURE_2D,0,l,c,r,n,s.RGBA,s.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)},Ml.prototype.bind=function(t,e,i){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),i!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=r.LINEAR),t!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,i||t),this.filter=t),e!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e),this.wrap=e)},Ml.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Ml.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var kl=function(t){var e=this;this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){e._triggered=!1,e._callback()})};kl.prototype.trigger=function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){t._triggered=!1,t._callback()}),0))},kl.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Rl=function(t,e,i){this.target=t,this.parent=e,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},m(["receive","process"],this),this.invoker=new kl(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=A()?t:a};function Nl(t,e,i){var r=2*Math.PI*6378137/256/Math.pow(2,i);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}Rl.prototype.send=function(t,e,i,r,n){var o=this;void 0===n&&(n=!1);var a=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[a]=i);var s=T(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:t,hasCallback:!!i,targetMapId:r,mustQueue:n,sourceMapId:this.mapId,data:qr(e,s)},s),{cancel:function(){i&&delete o.callbacks[a],o.target.postMessage({id:a,type:"<cancel>",targetMapId:r,sourceMapId:o.mapId})}}},Rl.prototype.receive=function(t){var e=t.data,i=e.id;if(i&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[i];var r=this.cancelCallbacks[i];delete this.cancelCallbacks[i],r&&r()}else A()||e.mustQueue?(this.tasks[i]=e,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,e)},Rl.prototype.process=function(){if(this.taskQueue.length){var t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(t,e)}},Rl.prototype.processTask=function(t,e){var i=this;if("<response>"===e.type){var r=this.callbacks[t];delete this.callbacks[t],r&&(e.error?r(Ur(e.error)):r(null,Ur(e.data)))}else{var n=!1,o=T(this.globalScope)?void 0:[],a=e.hasCallback?function(e,r){n=!0,delete i.cancelCallbacks[t],i.target.postMessage({id:t,type:"<response>",sourceMapId:i.mapId,error:e?qr(e):null,data:qr(r,o)},o)}:function(t){n=!0},s=null,u=Ur(e.data);if(this.parent[e.type])s=this.parent[e.type](e.sourceMapId,u,a);else if(this.parent.getWorkerSource){var l=e.type.split(".");s=this.parent.getWorkerSource(e.sourceMapId,l[0],u.source)[l[1]](u,a)}else a(new Error("Could not find function "+e.type));!n&&s&&s.cancel&&(this.cancelCallbacks[t]=s.cancel)}},Rl.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Dl=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};Dl.prototype.setNorthEast=function(t){return this._ne=t instanceof Ol?new Ol(t.lng,t.lat):Ol.convert(t),this},Dl.prototype.setSouthWest=function(t){return this._sw=t instanceof Ol?new Ol(t.lng,t.lat):Ol.convert(t),this},Dl.prototype.extend=function(t){var e,i,r=this._sw,n=this._ne;if(t instanceof Ol)e=t,i=t;else{if(!(t instanceof Dl))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(Dl.convert(t)):this.extend(Ol.convert(t)):this;if(i=t._ne,!(e=t._sw)||!i)return this}return r||n?(r.lng=Math.min(e.lng,r.lng),r.lat=Math.min(e.lat,r.lat),n.lng=Math.max(i.lng,n.lng),n.lat=Math.max(i.lat,n.lat)):(this._sw=new Ol(e.lng,e.lat),this._ne=new Ol(i.lng,i.lat)),this},Dl.prototype.getCenter=function(){return new Ol((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Dl.prototype.getSouthWest=function(){return this._sw},Dl.prototype.getNorthEast=function(){return this._ne},Dl.prototype.getNorthWest=function(){return new Ol(this.getWest(),this.getNorth())},Dl.prototype.getSouthEast=function(){return new Ol(this.getEast(),this.getSouth())},Dl.prototype.getWest=function(){return this._sw.lng},Dl.prototype.getSouth=function(){return this._sw.lat},Dl.prototype.getEast=function(){return this._ne.lng},Dl.prototype.getNorth=function(){return this._ne.lat},Dl.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Dl.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Dl.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Dl.prototype.contains=function(t){var e=Ol.convert(t),i=e.lng,r=e.lat,n=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(n=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&n},Dl.convert=function(t){return!t||t instanceof Dl?t:new Dl(t)};var Ol=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Ol.prototype.wrap=function(){return new Ol(p(this.lng,-180,180),this.lat)},Ol.prototype.toArray=function(){return[this.lng,this.lat]},Ol.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Ol.prototype.distanceTo=function(t){var e=Math.PI/180,i=this.lat*e,r=t.lat*e,n=Math.sin(i)*Math.sin(r)+Math.cos(i)*Math.cos(r)*Math.cos((t.lng-this.lng)*e);return 6371008.8*Math.acos(Math.min(n,1))},Ol.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return new Dl(new Ol(this.lng-i,this.lat-e),new Ol(this.lng+i,this.lat+e))},Ol.convert=function(t){if(t instanceof Ol)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Ol(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Ol(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var zl=2*Math.PI*6371008.8;function Fl(t){return zl*Math.cos(t*Math.PI/180)}function Bl(t){return(180+t)/360}function ql(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Ul(t,e){return t/Fl(e)}function Vl(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}var Gl=function(t,e,i){void 0===i&&(i=0),this.x=+t,this.y=+e,this.z=+i};Gl.fromLngLat=function(t,e){void 0===e&&(e=0);var i=Ol.convert(t);return new Gl(Bl(i.lng),ql(i.lat),Ul(e,i.lat))},Gl.prototype.toLngLat=function(){return new Ol(360*this.x-180,Vl(this.y))},Gl.prototype.toAltitude=function(){return this.z*Fl(Vl(this.y))},Gl.prototype.meterInMercatorCoordinateUnits=function(){return 1/zl*(t=Vl(this.y),1/Math.cos(t*Math.PI/180));var t};var jl=function(t,e,i){this.z=t,this.x=e,this.y=i,this.key=Zl(0,t,t,e,i)};jl.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},jl.prototype.url=function(t,e){var i,r,n,o,a,s=(r=this.y,n=this.z,o=Nl(256*(i=this.x),256*(r=Math.pow(2,n)-r-1),n),a=Nl(256*(i+1),256*(r+1),n),o[0]+","+o[1]+","+a[0]+","+a[1]),u=function(t,e,i){for(var r,n="",o=t;o>0;o--)n+=(e&(r=1<<o-1)?1:0)+(i&r?2:0);return n}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",s)},jl.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new n(8192*(t.x*e-this.x),8192*(t.y*e-this.y))},jl.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Kl=function(t,e){this.wrap=t,this.canonical=e,this.key=Zl(t,e.z,e.z,e.x,e.y)},Xl=function(t,e,i,r,n){this.overscaledZ=t,this.wrap=e,this.canonical=new jl(i,+r,+n),this.key=Zl(e,t,i,r,n)};function Zl(t,e,i,r,n){(t*=2)<0&&(t=-1*t-1);var o=1<<i;return(o*o*t+o*n+r).toString(36)+i.toString(36)+e.toString(36)}Xl.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},Xl.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new Xl(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Xl(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},Xl.prototype.calculateScaledKey=function(t,e){var i=this.canonical.z-t;return t>this.canonical.z?Zl(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):Zl(this.wrap*+e,t,t,this.canonical.x>>i,this.canonical.y>>i)},Xl.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},Xl.prototype.children=function(t){if(this.overscaledZ>=t)return[new Xl(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,i=2*this.canonical.x,r=2*this.canonical.y;return[new Xl(e,this.wrap,e,i,r),new Xl(e,this.wrap,e,i+1,r),new Xl(e,this.wrap,e,i,r+1),new Xl(e,this.wrap,e,i+1,r+1)]},Xl.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},Xl.prototype.wrapped=function(){return new Xl(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Xl.prototype.unwrapTo=function(t){return new Xl(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},Xl.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Xl.prototype.toUnwrapped=function(){return new Kl(this.wrap,this.canonical)},Xl.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Xl.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new Gl(t.x-this.wrap,t.y))},Or("CanonicalTileID",jl),Or("OverscaledTileID",Xl,{omit:["posMatrix"]});var Yl=function(t,e,i){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(i&&"mapbox"!==i&&"terrarium"!==i)return E('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=e.height;var r=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=i||"mapbox";for(var n=0;n<r;n++)this.data[this._idx(-1,n)]=this.data[this._idx(0,n)],this.data[this._idx(r,n)]=this.data[this._idx(r-1,n)],this.data[this._idx(n,-1)]=this.data[this._idx(n,0)],this.data[this._idx(n,r)]=this.data[this._idx(n,r-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(r,-1)]=this.data[this._idx(r-1,0)],this.data[this._idx(-1,r)]=this.data[this._idx(0,r-1)],this.data[this._idx(r,r)]=this.data[this._idx(r-1,r-1)]};Yl.prototype.get=function(t,e){var i=new Uint8Array(this.data.buffer),r=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(i[r],i[r+1],i[r+2])},Yl.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Yl.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},Yl.prototype._unpackMapbox=function(t,e,i){return(256*t*256+256*e+i)/10-1e4},Yl.prototype._unpackTerrarium=function(t,e,i){return 256*t+e+i/256-32768},Yl.prototype.getPixels=function(){return new ma({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Yl.prototype.backfillBorder=function(t,e,i){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var r=e*this.dim,n=e*this.dim+this.dim,o=i*this.dim,a=i*this.dim+this.dim;switch(e){case-1:r=n-1;break;case 1:n=r+1}switch(i){case-1:o=a-1;break;case 1:a=o+1}for(var s=-e*this.dim,u=-i*this.dim,l=o;l<a;l++)for(var c=r;c<n;c++)this.data[this._idx(c,l)]=t.data[this._idx(c+s,l+u)]},Or("DEMData",Yl);var Hl=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var i=t[e];this._stringToNumber[i]=e,this._numberToString[e]=i}};Hl.prototype.encode=function(t){return this._stringToNumber[t]},Hl.prototype.decode=function(t){return this._numberToString[t]};var Wl=function(t,e,i,r,n){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=i,t._y=r,this.properties=t.properties,this.id=n},Ql={geometry:{configurable:!0}};Ql.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Ql.geometry.set=function(t){this._geometry=t},Wl.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(Wl.prototype,Ql);var Jl=function(){this.state={},this.stateChanges={},this.deletedStates={}};Jl.prototype.updateState=function(t,e,i){var r=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][r]=this.stateChanges[t][r]||{},h(this.stateChanges[t][r],i),null===this.deletedStates[t])for(var n in this.deletedStates[t]={},this.state[t])n!==r&&(this.deletedStates[t][n]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][r])for(var o in this.deletedStates[t][r]={},this.state[t][r])i[o]||(this.deletedStates[t][r][o]=null);else for(var a in i)this.deletedStates[t]&&this.deletedStates[t][r]&&null===this.deletedStates[t][r][a]&&delete this.deletedStates[t][r][a]},Jl.prototype.removeFeatureState=function(t,e,i){if(null!==this.deletedStates[t]){var r=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},i&&void 0!==e)null!==this.deletedStates[t][r]&&(this.deletedStates[t][r]=this.deletedStates[t][r]||{},this.deletedStates[t][r][i]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][r])for(i in this.deletedStates[t][r]={},this.stateChanges[t][r])this.deletedStates[t][r][i]=null;else this.deletedStates[t][r]=null;else this.deletedStates[t]=null}},Jl.prototype.getState=function(t,e){var i=String(e),r=h({},(this.state[t]||{})[i],(this.stateChanges[t]||{})[i]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var n=this.deletedStates[t][e];if(null===n)return{};for(var o in n)delete r[o]}return r},Jl.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},Jl.prototype.coalesceChanges=function(t,e){var i={};for(var r in this.stateChanges){this.state[r]=this.state[r]||{};var n={};for(var o in this.stateChanges[r])this.state[r][o]||(this.state[r][o]={}),h(this.state[r][o],this.stateChanges[r][o]),n[o]=this.state[r][o];i[r]=n}for(var a in this.deletedStates){this.state[a]=this.state[a]||{};var s={};if(null===this.deletedStates[a])for(var u in this.state[a])s[u]={},this.state[a][u]={};else for(var l in this.deletedStates[a]){if(null===this.deletedStates[a][l])this.state[a][l]={};else for(var c=0,p=Object.keys(this.deletedStates[a][l]);c<p.length;c+=1)delete this.state[a][l][p[c]];s[l]=this.state[a][l]}i[a]=i[a]||{},h(i[a],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(i).length)for(var d in t)t[d].setFeatureState(i,e)};var $l=function(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Mr(8192,16,0),this.grid3D=new Mr(8192,16,0),this.featureIndexArray=new no,this.promoteId=e};function tc(t,e,i,r,n){return v(t,(function(t,o){var a=e instanceof fn?e.get(o):null;return a&&a.evaluate?a.evaluate(i,r,n):a}))}function ec(t){for(var e=1/0,i=1/0,r=-1/0,n=-1/0,o=0,a=t;o<a.length;o+=1){var s=a[o];e=Math.min(e,s.x),i=Math.min(i,s.y),r=Math.max(r,s.x),n=Math.max(n,s.y)}return{minX:e,minY:i,maxX:r,maxY:n}}function ic(t,e){return e-t}$l.prototype.insert=function(t,e,i,r,n,o){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,r,n);for(var s=o?this.grid3D:this.grid,u=0;u<e.length;u++){for(var l=e[u],c=[1/0,1/0,-1/0,-1/0],p=0;p<l.length;p++){var h=l[p];c[0]=Math.min(c[0],h.x),c[1]=Math.min(c[1],h.y),c[2]=Math.max(c[2],h.x),c[3]=Math.max(c[3],h.y)}c[0]<8192&&c[1]<8192&&c[2]>=0&&c[3]>=0&&s.insert(a,c[0],c[1],c[2],c[3])}},$l.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new ys.VectorTile(new Ys(this.rawTileData)).layers,this.sourceLayerCoder=new Hl(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},$l.prototype.query=function(t,e,i,r){var o=this;this.loadVTLayers();for(var a=t.params||{},s=8192/t.tileSize/t.scale,u=nr(a.filter),l=t.queryGeometry,c=t.queryPadding*s,p=ec(l),h=this.grid.query(p.minX-c,p.minY-c,p.maxX+c,p.maxY+c),d=ec(t.cameraQueryGeometry),f=0,_=this.grid3D.query(d.minX-c,d.minY-c,d.maxX+c,d.maxY+c,(function(e,i,r,o){return function(t,e,i,r,o){for(var a=0,s=t;a<s.length;a+=1){var u=s[a];if(e<=u.x&&i<=u.y&&r>=u.x&&o>=u.y)return!0}var l=[new n(e,i),new n(e,o),new n(r,o),new n(r,i)];if(t.length>2)for(var c=0,p=l;c<p.length;c+=1)if(Qo(t,p[c]))return!0;for(var h=0;h<t.length-1;h++)if(Jo(t[h],t[h+1],l))return!0;return!1}(t.cameraQueryGeometry,e-c,i-c,r+c,o+c)}));f<_.length;f+=1)h.push(_[f]);h.sort(ic);for(var g,m={},y=function(n){var c=h[n];if(c!==g){g=c;var p=o.featureIndexArray.get(c),d=null;o.loadMatchingFeature(m,p.bucketIndex,p.sourceLayerIndex,p.featureIndex,u,a.layers,a.availableImages,e,i,r,(function(e,i,r){return d||(d=Bo(e)),i.queryIntersectsFeature(l,e,r,d,o.z,t.transform,s,t.pixelPosMatrix)}))}},v=0;v<h.length;v++)y(v);return m},$l.prototype.loadMatchingFeature=function(t,e,i,r,n,o,a,s,u,l,c){var p=this.bucketLayerIDs[e];if(!o||function(t,e){for(var i=0;i<t.length;i++)if(e.indexOf(t[i])>=0)return!0;return!1}(o,p)){var h=this.sourceLayerCoder.decode(i),d=this.vtLayers[h].feature(r);if(n.filter(new an(this.tileID.overscaledZ),d))for(var f=this.getId(d,h),_=0;_<p.length;_++){var g=p[_];if(!(o&&o.indexOf(g)<0)){var m=s[g];if(m){var y={};void 0!==f&&l&&(y=l.getState(m.sourceLayer||"_geojsonTileLayer",f));var v=u[g];v.paint=tc(v.paint,m.paint,d,y,a),v.layout=tc(v.layout,m.layout,d,y,a);var b=!c||c(d,m,y);if(b){var x=new Wl(d,this.z,this.x,this.y,f);x.layer=v;var w=t[g];void 0===w&&(w=t[g]=[]),w.push({featureIndex:r,feature:x,intersectionZ:b})}}}}}},$l.prototype.lookupSymbolFeatures=function(t,e,i,r,n,o,a,s){var u={};this.loadVTLayers();for(var l=nr(n),c=0,p=t;c<p.length;c+=1)this.loadMatchingFeature(u,i,r,p[c],l,o,a,s,e);return u},$l.prototype.hasLayer=function(t){for(var e=0,i=this.bucketLayerIDs;e<i.length;e+=1)for(var r=0,n=i[e];r<n.length;r+=1)if(t===n[r])return!0;return!1},$l.prototype.getId=function(t,e){var i=t.id;return this.promoteId&&"boolean"==typeof(i=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]])&&(i=Number(i)),i},Or("FeatureIndex",$l,{omit:["rawTileData","sourceLayerCoder"]});var rc=function(t,e){this.tileID=t,this.uid=f(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};rc.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<F.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},rc.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},rc.prototype.loadVectorData=function(t,e,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var r in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var i={};if(!e)return i;for(var r=function(){var t=o[n],r=t.layerIds.map((function(t){return e.getLayer(t)})).filter(Boolean);if(0!==r.length){t.layers=r,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map((function(t){return r.filter((function(e){return e.id===t}))[0]})));for(var a=0,s=r;a<s.length;a+=1)i[s[a].id]=t}},n=0,o=t;n<o.length;n+=1)r();return i}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var n=this.buckets[r];if(n instanceof _l){if(this.hasSymbolBuckets=!0,!i)break;n.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var o in this.buckets){var a=this.buckets[o];if(a instanceof _l&&a.hasRTLText){this.hasRTLText=!0,on.isLoading()||on.isLoaded()||"deferred"!==rn()||nn();break}}for(var s in this.queryPadding=0,this.buckets){var u=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(s).queryRadius(u))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new Wn},rc.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},rc.prototype.getBucket=function(t){return this.buckets[t.id]},rc.prototype.upload=function(t){for(var e in this.buckets){var i=this.buckets[e];i.uploadPending()&&i.upload(t)}var r=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ml(t,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ml(t,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)},rc.prototype.prepare=function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)},rc.prototype.queryRenderedFeatures=function(t,e,i,r,n,o,a,s,u,l){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:n,scale:o,tileSize:this.tileSize,pixelPosMatrix:l,transform:s,params:a,queryPadding:this.queryPadding*u},t,e,i):{}},rc.prototype.querySourceFeatures=function(t,e){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var r=i.loadVTLayers(),n=e?e.sourceLayer:"",o=r._geojsonTileLayer||r[n];if(o)for(var a=nr(e&&e.filter),s=this.tileID.canonical,u=s.z,l=s.x,c=s.y,p={z:u,x:l,y:c},h=0;h<o.length;h++){var d=o.feature(h);if(a.filter(new an(this.tileID.overscaledZ),d)){var f=i.getId(d,n),_=new Wl(d,u,l,c,f);_.tile=p,t.push(_)}}}},rc.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},rc.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},rc.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var i=C(t.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var r=Date.now(),n=!1;if(this.expirationTime>r)n=!1;else if(e)if(this.expirationTime<e)n=!0;else{var o=this.expirationTime-e;o?this.expirationTime=r+Math.max(o,3e4):n=!0}else n=!0;n?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},rc.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},rc.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var i=this.latestFeatureIndex.loadVTLayers();for(var r in this.buckets)if(e.style.hasLayer(r)){var n=this.buckets[r],o=n.layers[0].sourceLayer||"_geojsonTileLayer",a=i[o],s=t[o];if(a&&s&&0!==Object.keys(s).length){n.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{});var u=e&&e.style&&e.style.getLayer(r);u&&(this.queryPadding=Math.max(this.queryPadding,u.queryRadius(n)))}}}},rc.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},rc.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<F.now()},rc.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},rc.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=F.now()+t},rc.prototype.setDependencies=function(t,e){for(var i={},r=0,n=e;r<n.length;r+=1)i[n[r]]=!0;this.dependencies[t]=i},rc.prototype.hasDependency=function(t,e){for(var i=0,r=t;i<r.length;i+=1){var n=this.dependencies[r[i]];if(n)for(var o=0,a=e;o<a.length;o+=1)if(n[a[o]])return!0}return!1};var nc=a.performance,oc=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},nc.mark(this._marks.start)};oc.prototype.finish=function(){nc.mark(this._marks.end);var t=nc.getEntriesByName(this._marks.measure);return 0===t.length&&(nc.measure(this._marks.measure,this._marks.start,this._marks.end),t=nc.getEntriesByName(this._marks.measure),nc.clearMarks(this._marks.start),nc.clearMarks(this._marks.end),nc.clearMeasures(this._marks.measure)),t},t.Actor=Rl,t.AlphaImage=ga,t.CanonicalTileID=jl,t.CollisionBoxArray=Wn,t.Color=$t,t.DEMData=Yl,t.DataConstantProperty=_n,t.DictionaryCoder=Hl,t.EXTENT=8192,t.ErrorEvent=At,t.EvaluationParameters=an,t.Event=It,t.Evented=Ct,t.FeatureIndex=$l,t.FillBucket=os,t.FillExtrusionBucket=ws,t.ImageAtlas=yu,t.ImagePosition=gu,t.LineBucket=Rs,t.LngLat=Ol,t.LngLatBounds=Dl,t.MercatorCoordinate=Gl,t.ONE_EM=24,t.OverscaledTileID=Xl,t.Point=n,t.Point$1=n,t.Properties=bn,t.Protobuf=Ys,t.RGBAImage=ma,t.RequestManager=K,t.RequestPerformance=oc,t.ResourceType=ft,t.SegmentVector=ao,t.SourceFeatureState=Jl,t.StructArrayLayout1ui2=Zn,t.StructArrayLayout2f1f2i16=Fn,t.StructArrayLayout2i4=Cn,t.StructArrayLayout3ui6=qn,t.StructArrayLayout4i8=Pn,t.SymbolBucket=_l,t.Texture=Ml,t.Tile=rc,t.Transitionable=ln,t.Uniform1f=bo,t.Uniform1i=vo,t.Uniform2f=xo,t.Uniform3f=wo,t.Uniform4f=Eo,t.UniformColor=So,t.UniformMatrix4f=Ao,t.UnwrappedTileID=Kl,t.ValidationError=Tt,t.WritingMode=vu,t.ZoomHistory=Vr,t.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t},t.addDynamicAttributes=pl,t.asyncAll=function(t,e,i){if(!t.length)return i(null,[]);var r=t.length,n=new Array(t.length),o=null;t.forEach((function(t,a){e(t,(function(t,e){t&&(o=t),n[a]=e,0==--r&&i(o,n)}))}))},t.bezier=u,t.bindAll=m,t.browser=F,t.cacheEntryPossiblyAdded=function(t){++ht>ut&&(t.getActor().send("enforceCacheSizeLimit",st),ht=0)},t.clamp=c,t.clearTileCache=function(t){var e=a.caches.delete("mapbox-tiles");t&&e.catch(t).then((function(){return t()}))},t.clipLine=ju,t.clone=function(t){var e=new na(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=x,t.clone$2=function(t){var e=new na(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.collisionCircleLayout=Gs,t.config=B,t.create=function(){var t=new na(16);return na!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=function(){var t=new na(9);return na!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},t.create$2=function(){var t=new na(4);return na!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.createCommonjsModule=e,t.createExpression=Ki,t.createLayout=In,t.createStyleLayer=function(t){return"custom"===t.type?new Sl(t):new Il[t.type](t)},t.cross=function(t,e,i){var r=e[0],n=e[1],o=e[2],a=i[0],s=i[1],u=i[2];return t[0]=n*u-o*s,t[1]=o*a-r*u,t[2]=r*s-n*a,t},t.deepEqual=function t(e,i){if(Array.isArray(e)){if(!Array.isArray(i)||e.length!==i.length)return!1;for(var r=0;r<e.length;r++)if(!t(e[r],i[r]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==i){if("object"!=typeof i)return!1;if(Object.keys(e).length!==Object.keys(i).length)return!1;for(var n in e)if(!t(e[n],i[n]))return!1;return!0}return e===i},t.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},t.dot$1=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},t.ease=l,t.emitValidationErrors=Lr,t.endsWith=y,t.enforceCacheSizeLimit=function(t){lt(),tt&&tt.then((function(e){e.keys().then((function(i){for(var r=0;r<i.length-t;r++)e.delete(i[r])}))}))},t.evaluateSizeForFeature=Du,t.evaluateSizeForZoom=Ou,t.evaluateVariableOffset=rl,t.evented=en,t.extend=h,t.featureFilter=nr,t.filterObject=b,t.fromRotation=function(t,e){var i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=-i,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.getAnchorAlignment=Lu,t.getAnchorJustification=nl,t.getArrayBuffer=bt,t.getImage=wt,t.getJSON=function(t,e){return vt(h(t,{type:"json"}),e)},t.getRTLTextPluginStatus=rn,t.getReferrer=yt,t.getVideo=function(t,e){var i,r,n=a.document.createElement("video");n.muted=!0,n.onloadstart=function(){e(null,n)};for(var o=0;o<t.length;o++){var s=a.document.createElement("source");i=t[o],r=void 0,(r=a.document.createElement("a")).href=i,(r.protocol!==a.document.location.protocol||r.host!==a.document.location.host)&&(n.crossOrigin="Anonymous"),s.src=t[o],n.appendChild(s)}return{cancel:function(){}}},t.identity=oa,t.invert=function(t,e){var i=e[0],r=e[1],n=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],p=e[9],h=e[10],d=e[11],f=e[12],_=e[13],g=e[14],m=e[15],y=i*s-r*a,v=i*u-n*a,b=i*l-o*a,x=r*u-n*s,w=r*l-o*s,E=n*l-o*u,S=c*_-p*f,I=c*g-h*f,A=c*m-d*f,C=p*g-h*_,P=p*m-d*_,T=h*m-d*g,L=y*T-v*P+b*C+x*A-w*I+E*S;return L?(t[0]=(s*T-u*P+l*C)*(L=1/L),t[1]=(n*P-r*T-o*C)*L,t[2]=(_*E-g*w+m*x)*L,t[3]=(h*w-p*E-d*x)*L,t[4]=(u*A-a*T-l*I)*L,t[5]=(i*T-n*A+o*I)*L,t[6]=(g*b-f*E-m*v)*L,t[7]=(c*E-h*b+d*v)*L,t[8]=(a*P-s*A+l*S)*L,t[9]=(r*A-i*P-o*S)*L,t[10]=(f*w-_*b+m*y)*L,t[11]=(p*b-c*w-d*y)*L,t[12]=(s*I-a*C-u*S)*L,t[13]=(i*C-r*I+n*S)*L,t[14]=(_*v-f*x-g*y)*L,t[15]=(c*x-p*v+h*y)*L,t):null},t.isChar=Gr,t.isMapboxURL=X,t.keysDifference=function(t,e){var i=[];for(var r in t)r in e||i.push(r);return i},t.makeRequest=vt,t.mapObject=v,t.mercatorXfromLng=Bl,t.mercatorYfromLat=ql,t.mercatorZfromAltitude=Ul,t.mul=ua,t.multiply=aa,t.mvt=ys,t.nextPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},t.normalize=function(t,e){var i=e[0],r=e[1],n=e[2],o=i*i+r*r+n*n;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t},t.number=Ge,t.offscreenCanvasSupported=dt,t.ortho=function(t,e,i,r,n,o,a){var s=1/(e-i),u=1/(r-n),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+i)*s,t[13]=(n+r)*u,t[14]=(a+o)*l,t[15]=1,t},t.parseGlyphPBF=function(t){return new Ys(t).readFields(hu,[])},t.pbf=Ys,t.performSymbolLayout=function(t,e,i,r,n,o,a){t.createArrays(),t.tilePixelRatio=8192/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;var s=t.layers[0].layout,u=t.layers[0]._unevaluatedLayout._values,l={};if("composite"===t.textSizeData.kind){var c=t.textSizeData,p=c.maxZoom;l.compositeTextSizes=[u["text-size"].possiblyEvaluate(new an(c.minZoom),a),u["text-size"].possiblyEvaluate(new an(p),a)]}if("composite"===t.iconSizeData.kind){var h=t.iconSizeData,d=h.maxZoom;l.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new an(h.minZoom),a),u["icon-size"].possiblyEvaluate(new an(d),a)]}l.layoutTextSize=u["text-size"].possiblyEvaluate(new an(t.zoom+1),a),l.layoutIconSize=u["icon-size"].possiblyEvaluate(new an(t.zoom+1),a),l.textMaxSize=u["text-size"].possiblyEvaluate(new an(18));for(var f=24*s.get("text-line-height"),_="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement"),g=s.get("text-keep-upright"),m=s.get("text-size"),y=function(){var o=b[v],u=s.get("text-font").evaluate(o,{},a).join(","),c=m.evaluate(o,{},a),p=l.layoutTextSize.evaluate(o,{},a),h=l.layoutIconSize.evaluate(o,{},a),d={horizontal:{},vertical:void 0},y=o.text,x=[0,0];if(y){var w=y.toString(),S=24*s.get("text-letter-spacing").evaluate(o,{},a),I=function(t){for(var e=0,i=t;e<i.length;e+=1)if(r=i[e].charCodeAt(0),Gr.Arabic(r)||Gr["Arabic Supplement"](r)||Gr["Arabic Extended-A"](r)||Gr["Arabic Presentation Forms-A"](r)||Gr["Arabic Presentation Forms-B"](r))return!1;var r;return!0}(w)?S:0,A=s.get("text-anchor").evaluate(o,{},a),C=s.get("text-variable-anchor");if(!C){var P=s.get("text-radial-offset").evaluate(o,{},a);x=P?rl(A,[24*P,il]):s.get("text-offset").evaluate(o,{},a).map((function(t){return 24*t}))}var T=_?"center":s.get("text-justify").evaluate(o,{},a),L=s.get("symbol-placement"),M="point"===L?24*s.get("text-max-width").evaluate(o,{},a):0,k=function(){t.allowVerticalPlacement&&jr(w)&&(d.vertical=wu(y,e,i,n,u,M,f,A,"left",I,x,vu.vertical,!0,L,p,c))};if(!_&&C){for(var R="auto"===T?C.map((function(t){return nl(t)})):[T],N=!1,D=0;D<R.length;D++){var O=R[D];if(!d.horizontal[O])if(N)d.horizontal[O]=d.horizontal[0];else{var z=wu(y,e,i,n,u,M,f,"center",O,I,x,vu.horizontal,!1,L,p,c);z&&(d.horizontal[O]=z,N=1===z.positionedLines.length)}}k()}else{"auto"===T&&(T=nl(A));var F=wu(y,e,i,n,u,M,f,A,T,I,x,vu.horizontal,!1,L,p,c);F&&(d.horizontal[T]=F),k(),jr(w)&&_&&g&&(d.vertical=wu(y,e,i,n,u,M,f,A,T,I,x,vu.vertical,!1,L,p,c))}}var B=void 0,q=!1;if(o.icon&&o.icon.name){var U=r[o.icon.name];U&&(B=function(t,e,i){var r=Lu(i),n=e[0]-t.displaySize[0]*r.horizontalAlign,o=e[1]-t.displaySize[1]*r.verticalAlign;return{image:t,top:o,bottom:o+t.displaySize[1],left:n,right:n+t.displaySize[0]}}(n[o.icon.name],s.get("icon-offset").evaluate(o,{},a),s.get("icon-anchor").evaluate(o,{},a)),q=U.sdf,void 0===t.sdfIcons?t.sdfIcons=U.sdf:t.sdfIcons!==U.sdf&&E("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(U.pixelRatio!==t.pixelRatio||0!==s.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}var V=al(d.horizontal)||d.vertical;t.iconsInText=!!V&&V.iconsInText,(V||B)&&function(t,e,i,r,n,o,a,s,u,l,c){var p=o.textMaxSize.evaluate(e,{});void 0===p&&(p=a);var h,d=t.layers[0].layout,f=d.get("icon-offset").evaluate(e,{},c),_=al(i.horizontal),g=a/24,m=t.tilePixelRatio*g,y=t.tilePixelRatio*p/24,v=t.tilePixelRatio*s,b=t.tilePixelRatio*d.get("symbol-spacing"),x=d.get("text-padding")*t.tilePixelRatio,w=d.get("icon-padding")*t.tilePixelRatio,S=d.get("text-max-angle")/180*Math.PI,I="map"===d.get("text-rotation-alignment")&&"point"!==d.get("symbol-placement"),A="map"===d.get("icon-rotation-alignment")&&"point"!==d.get("symbol-placement"),C=d.get("symbol-placement"),P=b/2,T=d.get("icon-text-fit");r&&"none"!==T&&(t.allowVerticalPlacement&&i.vertical&&(h=ku(r,i.vertical,T,d.get("icon-text-fit-padding"),f,g)),_&&(r=ku(r,_,T,d.get("icon-text-fit-padding"),f,g)));var L=function(s,p){p.x<0||p.x>=8192||p.y<0||p.y>=8192||function(t,e,i,r,n,o,a,s,u,l,c,p,h,d,f,_,g,m,y,v,b,x,w,S,I){var A,C,P,T,L,M=t.addToLineVertexArray(e,i),k=0,R=0,N=0,D=0,O=-1,z=-1,F={},B=po(""),q=0,U=0;if(void 0===s._unevaluatedLayout.getValue("text-radial-offset")?(q=(A=s.layout.get("text-offset").evaluate(b,{},S).map((function(t){return 24*t})))[0],U=A[1]):(q=24*s.layout.get("text-radial-offset").evaluate(b,{},S),U=il),t.allowVerticalPlacement&&r.vertical){var V=s.layout.get("text-rotate").evaluate(b,{},S)+90;T=new Wu(u,e,l,c,p,r.vertical,h,d,f,V),a&&(L=new Wu(u,e,l,c,p,a,g,m,f,V))}if(n){var G=s.layout.get("icon-rotate").evaluate(b,{}),j="none"!==s.layout.get("icon-text-fit"),K=Ku(n,G,w,j),X=a?Ku(a,G,w,j):void 0;P=new Wu(u,e,l,c,p,n,g,m,!1,G),k=4*K.length;var Z=t.iconSizeData,Y=null;"source"===Z.kind?(Y=[128*s.layout.get("icon-size").evaluate(b,{})])[0]>32640&&E(t.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===Z.kind&&((Y=[128*x.compositeIconSizes[0].evaluate(b,{},S),128*x.compositeIconSizes[1].evaluate(b,{},S)])[0]>32640||Y[1]>32640)&&E(t.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),t.addSymbols(t.icon,K,Y,v,y,b,!1,e,M.lineStartIndex,M.lineLength,-1,S),O=t.icon.placedSymbolArray.length-1,X&&(R=4*X.length,t.addSymbols(t.icon,X,Y,v,y,b,vu.vertical,e,M.lineStartIndex,M.lineLength,-1,S),z=t.icon.placedSymbolArray.length-1)}for(var H in r.horizontal){var W=r.horizontal[H];if(!C){B=po(W.text);var Q=s.layout.get("text-rotate").evaluate(b,{},S);C=new Wu(u,e,l,c,p,W,h,d,f,Q)}var J=1===W.positionedLines.length;if(N+=ol(t,e,W,o,s,f,b,_,M,r.vertical?vu.horizontal:vu.horizontalOnly,J?Object.keys(r.horizontal):[H],F,O,x,S),J)break}r.vertical&&(D+=ol(t,e,r.vertical,o,s,f,b,_,M,vu.vertical,["vertical"],F,z,x,S));var $=C?C.boxStartIndex:t.collisionBoxArray.length,tt=C?C.boxEndIndex:t.collisionBoxArray.length,et=T?T.boxStartIndex:t.collisionBoxArray.length,it=T?T.boxEndIndex:t.collisionBoxArray.length,rt=P?P.boxStartIndex:t.collisionBoxArray.length,nt=P?P.boxEndIndex:t.collisionBoxArray.length,ot=L?L.boxStartIndex:t.collisionBoxArray.length,at=L?L.boxEndIndex:t.collisionBoxArray.length,st=-1,ut=function(t,e){return t&&t.circleDiameter?Math.max(t.circleDiameter,e):e};st=ut(C,st),st=ut(T,st),st=ut(P,st);var lt=(st=ut(L,st))>-1?1:0;lt&&(st*=I/24),t.glyphOffsetArray.length>=_l.MAX_GLYPHS&&E("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==b.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,b.sortKey),t.symbolInstances.emplaceBack(e.x,e.y,F.right>=0?F.right:-1,F.center>=0?F.center:-1,F.left>=0?F.left:-1,F.vertical||-1,O,z,B,$,tt,et,it,rt,nt,ot,at,l,N,D,k,R,lt,0,h,q,U,st)}(t,p,s,i,r,n,h,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,m,x,I,u,v,w,A,f,e,o,l,c,a)};if("line"===C)for(var M=0,k=ju(e.geometry,0,0,8192,8192);M<k.length;M+=1)for(var R=k[M],N=0,D=Gu(R,b,S,i.vertical||_,r,24,y,t.overscaling,8192);N<D.length;N+=1){var O=D[N];_&&sl(t,_.text,P,O)||L(R,O)}else if("line-center"===C)for(var z=0,F=e.geometry;z<F.length;z+=1){var B=F[z];if(B.length>1){var q=Vu(B,S,i.vertical||_,r,24,y);q&&L(B,q)}}else if("Polygon"===e.type)for(var U=0,V=es(e.geometry,0);U<V.length;U+=1){var G=V[U],j=$u(G,16);L(G[0],new Ru(j.x,j.y,0))}else if("LineString"===e.type)for(var K=0,X=e.geometry;K<X.length;K+=1){var Z=X[K];L(Z,new Ru(Z[0].x,Z[0].y,0))}else if("Point"===e.type)for(var Y=0,H=e.geometry;Y<H.length;Y+=1)for(var W=0,Q=H[Y];W<Q.length;W+=1){var J=Q[W];L([J],new Ru(J.x,J.y,0))}}(t,o,d,B,r,l,p,h,x,q,a)},v=0,b=t.features;v<b.length;v+=1)y();o&&t.generateCollisionDebugBuffers()},t.perspective=function(t,e,i,r,n){var o,a=1/Math.tan(e/2);return t[0]=a/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0?(t[10]=(n+r)*(o=1/(r-n)),t[14]=2*n*r*o):(t[10]=-1,t[14]=-2*r),t},t.pick=function(t,e){for(var i={},r=0;r<e.length;r++){var n=e[r];n in t&&(i[n]=t[n])}return i},t.plugin=on,t.polygonIntersectsPolygon=Vo,t.postMapLoadEvent=at,t.postTurnstileEvent=nt,t.potpack=_u,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=Or,t.registerForPluginStateChange=function(t){return t({pluginStatus:Qr,pluginURL:Jr}),en.on("pluginStateChange",t),t},t.renderColorRamp=va,t.rotate=function(t,e,i){var r=e[0],n=e[1],o=e[2],a=e[3],s=Math.sin(i),u=Math.cos(i);return t[0]=r*u+o*s,t[1]=n*u+a*s,t[2]=r*-s+o*u,t[3]=n*-s+a*u,t},t.rotateX=function(t,e,i){var r=Math.sin(i),n=Math.cos(i),o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],p=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*n+l*r,t[5]=a*n+c*r,t[6]=s*n+p*r,t[7]=u*n+h*r,t[8]=l*n-o*r,t[9]=c*n-a*r,t[10]=p*n-s*r,t[11]=h*n-u*r,t},t.rotateZ=function(t,e,i){var r=Math.sin(i),n=Math.cos(i),o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],p=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*n+l*r,t[1]=a*n+c*r,t[2]=s*n+p*r,t[3]=u*n+h*r,t[4]=l*n-o*r,t[5]=c*n-a*r,t[6]=p*n-s*r,t[7]=h*n-u*r,t},t.scale=function(t,e,i){var r=i[0],n=i[1],o=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.scale$1=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t},t.scale$2=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t},t.setCacheLimits=function(t,e){st=t,ut=e},t.setRTLTextPlugin=function(t,e,i){if(void 0===i&&(i=!1),"deferred"===Qr||"loading"===Qr||"loaded"===Qr)throw new Error("setRTLTextPlugin cannot be called multiple times.");Jr=F.resolveURL(t),Qr="deferred",Wr=e,tn(),i||nn()},t.sphericalToCartesian=function(t){var e=t[0],i=t[1],r=t[2];return i+=90,i*=Math.PI/180,r*=Math.PI/180,{x:e*Math.cos(i)*Math.sin(r),y:e*Math.sin(i)*Math.sin(r),z:e*Math.cos(r)}},t.sqrLen=function(t){var e=t[0],i=t[1];return e*e+i*i},t.styleSpec=Pt,t.sub=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t},t.symbolSize=zu,t.transformMat3=function(t,e,i){var r=e[0],n=e[1],o=e[2];return t[0]=r*i[0]+n*i[3]+o*i[6],t[1]=r*i[1]+n*i[4]+o*i[7],t[2]=r*i[2]+n*i[5]+o*i[8],t},t.transformMat4=la,t.translate=function(t,e,i){var r,n,o,a,s,u,l,c,p,h,d,f,_=i[0],g=i[1],m=i[2];return e===t?(t[12]=e[0]*_+e[4]*g+e[8]*m+e[12],t[13]=e[1]*_+e[5]*g+e[9]*m+e[13],t[14]=e[2]*_+e[6]*g+e[10]*m+e[14],t[15]=e[3]*_+e[7]*g+e[11]*m+e[15]):(n=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],p=e[8],h=e[9],d=e[10],f=e[11],t[0]=r=e[0],t[1]=n,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=p,t[9]=h,t[10]=d,t[11]=f,t[12]=r*_+s*g+p*m+e[12],t[13]=n*_+u*g+h*m+e[13],t[14]=o*_+l*g+d*m+e[14],t[15]=a*_+c*g+f*m+e[15]),t},t.triggerPluginCompletionEvent=$r,t.uniqueId=f,t.validateCustomStyleLayer=function(t){var e=[],i=t.id;return void 0===i&&e.push({message:"layers."+i+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+i+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),e},t.validateLight=Cr,t.validateStyle=Ar,t.values=function(t){var e=[];for(var i in t)e.push(t[i]);return e},t.vectorTile=ys,t.version="1.12.0",t.warnOnce=E,t.webpSupported=q,t.window=a,t.wrap=p})),r(["./shared"],(function(t){function e(t){var i=typeof t;if("number"===i||"boolean"===i||"string"===i||null==t)return JSON.stringify(t);if(Array.isArray(t)){for(var r="[",n=0,o=t;n<o.length;n+=1)r+=e(o[n])+",";return r+"]"}for(var a=Object.keys(t).sort(),s="{",u=0;u<a.length;u++)s+=JSON.stringify(a[u])+":"+e(t[a[u]])+",";return s+"}"}function i(i){for(var r="",n=0,o=t.refProperties;n<o.length;n+=1)r+="/"+e(i[o[n]]);return r}var r=function(t){this.keyCache={},t&&this.replace(t)};r.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},r.prototype.update=function(e,r){for(var n=this,o=0,a=e;o<a.length;o+=1){var s=a[o];this._layerConfigs[s.id]=s;var u=this._layers[s.id]=t.createStyleLayer(s);u._featureFilter=t.featureFilter(u.filter),this.keyCache[s.id]&&delete this.keyCache[s.id]}for(var l=0,c=r;l<c.length;l+=1){var p=c[l];delete this.keyCache[p],delete this._layerConfigs[p],delete this._layers[p]}this.familiesBySource={};for(var h=0,d=function(t,e){for(var r={},n=0;n<t.length;n++){var o=e&&e[t[n].id]||i(t[n]);e&&(e[t[n].id]=o);var a=r[o];a||(a=r[o]=[]),a.push(t[n])}var s=[];for(var u in r)s.push(r[u]);return s}(t.values(this._layerConfigs),this.keyCache);h<d.length;h+=1){var f=d[h].map((function(t){return n._layers[t.id]})),_=f[0];if("none"!==_.visibility){var g=_.source||"",m=this.familiesBySource[g];m||(m=this.familiesBySource[g]={});var y=_.sourceLayer||"_geojsonTileLayer",v=m[y];v||(v=m[y]=[]),v.push(f)}}};var n=function(e){var i={},r=[];for(var n in e){var o=e[n],a=i[n]={};for(var s in o){var u=o[+s];if(u&&0!==u.bitmap.width&&0!==u.bitmap.height){var l={x:0,y:0,w:u.bitmap.width+2,h:u.bitmap.height+2};r.push(l),a[s]={rect:l,metrics:u.metrics}}}}var c=t.potpack(r),p=new t.AlphaImage({width:c.w||1,height:c.h||1});for(var h in e){var d=e[h];for(var f in d){var _=d[+f];if(_&&0!==_.bitmap.width&&0!==_.bitmap.height){var g=i[h][f].rect;t.AlphaImage.copy(_.bitmap,p,{x:0,y:0},{x:g.x+1,y:g.y+1},_.bitmap)}}}this.image=p,this.positions=i};t.register("GlyphAtlas",n);var o=function(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId};function a(e,i,r){for(var n=new t.EvaluationParameters(i),o=0,a=e;o<a.length;o+=1)a[o].recalculate(n,r)}function s(e,i){var r=t.getArrayBuffer(e.request,(function(e,r,n,o){e?i(e):r&&i(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(r)),rawData:r,cacheControl:n,expires:o})}));return function(){r.cancel(),i()}}o.prototype.parse=function(e,i,r,o,s){var u=this;this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;var l=new t.DictionaryCoder(Object.keys(e.layers).sort()),c=new t.FeatureIndex(this.tileID,this.promoteId);c.bucketLayerIDs=[];var p,h,d,f,_={},g={featureIndex:c,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:r},m=i.familiesBySource[this.source];for(var y in m){var v=e.layers[y];if(v){1===v.version&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+y+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var b=l.encode(y),x=[],w=0;w<v.length;w++){var E=v.feature(w),S=c.getId(E,y);x.push({feature:E,id:S,index:w,sourceLayerIndex:b})}for(var I=0,A=m[y];I<A.length;I+=1){var C=A[I],P=C[0];P.minzoom&&this.zoom<Math.floor(P.minzoom)||P.maxzoom&&this.zoom>=P.maxzoom||"none"!==P.visibility&&(a(C,this.zoom,r),(_[P.id]=P.createBucket({index:c.bucketLayerIDs.length,layers:C,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:b,sourceID:this.source})).populate(x,g,this.tileID.canonical),c.bucketLayerIDs.push(C.map((function(t){return t.id}))))}}}var T=t.mapObject(g.glyphDependencies,(function(t){return Object.keys(t).map(Number)}));Object.keys(T).length?o.send("getGlyphs",{uid:this.uid,stacks:T},(function(t,e){p||(p=t,h=e,k.call(u))})):h={};var L=Object.keys(g.iconDependencies);L.length?o.send("getImages",{icons:L,source:this.source,tileID:this.tileID,type:"icons"},(function(t,e){p||(p=t,d=e,k.call(u))})):d={};var M=Object.keys(g.patternDependencies);function k(){if(p)return s(p);if(h&&d&&f){var e=new n(h),i=new t.ImageAtlas(d,f);for(var o in _){var u=_[o];u instanceof t.SymbolBucket?(a(u.layers,this.zoom,r),t.performSymbolLayout(u,h,e.positions,d,i.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):u.hasPattern&&(u instanceof t.LineBucket||u instanceof t.FillBucket||u instanceof t.FillExtrusionBucket)&&(a(u.layers,this.zoom,r),u.addFeatures(g,this.tileID.canonical,i.patternPositions))}this.status="done",s(null,{buckets:t.values(_).filter((function(t){return!t.isEmpty()})),featureIndex:c,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:i,glyphMap:this.returnDependencies?h:null,iconMap:this.returnDependencies?d:null,glyphPositions:this.returnDependencies?e.positions:null})}}M.length?o.send("getImages",{icons:M,source:this.source,tileID:this.tileID,type:"patterns"},(function(t,e){p||(p=t,f=e,k.call(u))})):f={},k.call(this)};var u=function(t,e,i,r){this.actor=t,this.layerIndex=e,this.availableImages=i,this.loadVectorData=r||s,this.loading={},this.loaded={}};u.prototype.loadTile=function(e,i){var r=this,n=e.uid;this.loading||(this.loading={});var a=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.RequestPerformance(e.request),s=this.loading[n]=new o(e);s.abort=this.loadVectorData(e,(function(e,o){if(delete r.loading[n],e||!o)return s.status="done",r.loaded[n]=s,i(e);var u=o.rawData,l={};o.expires&&(l.expires=o.expires),o.cacheControl&&(l.cacheControl=o.cacheControl);var c={};if(a){var p=a.finish();p&&(c.resourceTiming=JSON.parse(JSON.stringify(p)))}s.vectorTile=o.vectorTile,s.parse(o.vectorTile,r.layerIndex,r.availableImages,r.actor,(function(e,r){if(e||!r)return i(e);i(null,t.extend({rawTileData:u.slice(0)},r,l,c))})),r.loaded=r.loaded||{},r.loaded[n]=s}))},u.prototype.reloadTile=function(t,e){var i=this,r=this.loaded,n=t.uid,o=this;if(r&&r[n]){var a=r[n];a.showCollisionBoxes=t.showCollisionBoxes;var s=function(t,r){var n=a.reloadCallback;n&&(delete a.reloadCallback,a.parse(a.vectorTile,o.layerIndex,i.availableImages,o.actor,n)),e(t,r)};"parsing"===a.status?a.reloadCallback=s:"done"===a.status&&(a.vectorTile?a.parse(a.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}},u.prototype.abortTile=function(t,e){var i=this.loading,r=t.uid;i&&i[r]&&i[r].abort&&(i[r].abort(),delete i[r]),e()},u.prototype.removeTile=function(t,e){var i=this.loaded,r=t.uid;i&&i[r]&&delete i[r],e()};var l=t.window.ImageBitmap,c=function(){this.loaded={}};function p(t,e){if(0!==t.length){h(t[0],e);for(var i=1;i<t.length;i++)h(t[i],!e)}}function h(t,e){for(var i=0,r=0,n=t.length,o=n-1;r<n;o=r++)i+=(t[r][0]-t[o][0])*(t[o][1]+t[r][1]);i>=0!=!!e&&t.reverse()}c.prototype.loadTile=function(e,i){var r=e.uid,n=e.encoding,o=e.rawImageData,a=l&&o instanceof l?this.getImageData(o):o,s=new t.DEMData(r,a,n);this.loaded=this.loaded||{},this.loaded[r]=s,i(null,s)},c.prototype.getImageData=function(e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);var i=this.offscreenCanvasContext.getImageData(-1,-1,e.width+2,e.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:i.width,height:i.height},i.data)},c.prototype.removeTile=function(t){var e=this.loaded,i=t.uid;e&&e[i]&&delete e[i]};var d=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,f=function(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};f.prototype.loadGeometry=function(){if(1===this._feature.type){for(var e=[],i=0,r=this._feature.geometry;i<r.length;i+=1){var n=r[i];e.push([new t.Point$1(n[0],n[1])])}return e}for(var o=[],a=0,s=this._feature.geometry;a<s.length;a+=1){for(var u=[],l=0,c=s[a];l<c.length;l+=1){var p=c[l];u.push(new t.Point$1(p[0],p[1]))}o.push(u)}return o},f.prototype.toGeoJSON=function(t,e,i){return d.call(this,t,e,i)};var _=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e};_.prototype.feature=function(t){return new f(this._features[t])};var g=t.vectorTile.VectorTileFeature,m=y;function y(t,e){this.options=e||{},this.features=t,this.length=t.length}function v(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}y.prototype.feature=function(t){return new v(this.features[t],this.options.extent)},v.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var i=0;i<e.length;i++){for(var r=e[i],n=[],o=0;o<r.length;o++)n.push(new t.Point$1(r[o][0],r[o][1]));this.geometry.push(n)}return this.geometry},v.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,i=-1/0,r=1/0,n=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var u=a[s];e=Math.min(e,u.x),i=Math.max(i,u.x),r=Math.min(r,u.y),n=Math.max(n,u.y)}return[e,r,i,n]},v.prototype.toGeoJSON=g.prototype.toGeoJSON;var b=w,x=m;function w(e){var i=new t.pbf;return function(t,e){for(var i in t.layers)e.writeMessage(3,E,t.layers[i])}(e,i),i.finish()}function E(t,e){var i;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(i=0;i<t.length;i++)r.feature=t.feature(i),e.writeMessage(2,S,r);var n=r.keys;for(i=0;i<n.length;i++)e.writeStringField(3,n[i]);var o=r.values;for(i=0;i<o.length;i++)e.writeMessage(4,T,o[i])}function S(t,e){var i=t.feature;void 0!==i.id&&e.writeVarintField(1,i.id),e.writeMessage(2,I,t),e.writeVarintField(3,i.type),e.writeMessage(4,P,i)}function I(t,e){var i=t.feature,r=t.keys,n=t.values,o=t.keycache,a=t.valuecache;for(var s in i.properties){var u=o[s];void 0===u&&(r.push(s),o[s]=u=r.length-1),e.writeVarint(u);var l=i.properties[s],c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var p=c+":"+l,h=a[p];void 0===h&&(n.push(l),a[p]=h=n.length-1),e.writeVarint(h)}}function A(t,e){return(e<<3)+(7&t)}function C(t){return t<<1^t>>31}function P(t,e){for(var i=t.loadGeometry(),r=t.type,n=0,o=0,a=i.length,s=0;s<a;s++){var u=i[s],l=1;1===r&&(l=u.length),e.writeVarint(A(1,l));for(var c=3===r?u.length-1:u.length,p=0;p<c;p++){1===p&&1!==r&&e.writeVarint(A(2,c-1));var h=u[p].x-n,d=u[p].y-o;e.writeVarint(C(h)),e.writeVarint(C(d)),n+=h,o+=d}3===r&&e.writeVarint(A(7,1))}}function T(t,e){var i=typeof t;"string"===i?e.writeStringField(1,t):"boolean"===i?e.writeBooleanField(7,t):"number"===i&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function L(t,e,i,r){M(t,i,r),M(e,2*i,2*r),M(e,2*i+1,2*r+1)}function M(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function k(t,e,i,r){var n=t-i,o=e-r;return n*n+o*o}b.fromVectorTileJs=w,b.fromGeojsonVt=function(t,e){e=e||{};var i={};for(var r in t)i[r]=new m(t[r].features,e),i[r].name=r,i[r].version=e.version,i[r].extent=e.extent;return w({layers:i})},b.GeoJSONWrapper=x;var R=function(t){return t[0]},N=function(t){return t[1]},D=function(t,e,i,r,n){void 0===e&&(e=R),void 0===i&&(i=N),void 0===r&&(r=64),void 0===n&&(n=Float64Array),this.nodeSize=r,this.points=t;for(var o=t.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(t.length),s=this.coords=new n(2*t.length),u=0;u<t.length;u++)a[u]=u,s[2*u]=e(t[u]),s[2*u+1]=i(t[u]);!function t(e,i,r,n,o,a){if(!(o-n<=r)){var s=n+o>>1;!function t(e,i,r,n,o,a){for(;o>n;){if(o-n>600){var s=o-n+1,u=r-n+1,l=Math.log(s),c=.5*Math.exp(2*l/3),p=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1);t(e,i,r,Math.max(n,Math.floor(r-u*c/s+p)),Math.min(o,Math.floor(r+(s-u)*c/s+p)),a)}var h=i[2*r+a],d=n,f=o;for(L(e,i,n,r),i[2*o+a]>h&&L(e,i,n,o);d<f;){for(L(e,i,d,f),d++,f--;i[2*d+a]<h;)d++;for(;i[2*f+a]>h;)f--}i[2*n+a]===h?L(e,i,n,f):L(e,i,++f,o),f<=r&&(n=f+1),r<=f&&(o=f-1)}}(e,i,s,n,o,a%2),t(e,i,r,n,s-1,a+1),t(e,i,r,s+1,o,a+1)}}(a,s,r,0,a.length-1,0)};D.prototype.range=function(t,e,i,r){return function(t,e,i,r,n,o,a){for(var s,u,l=[0,t.length-1,0],c=[];l.length;){var p=l.pop(),h=l.pop(),d=l.pop();if(h-d<=a)for(var f=d;f<=h;f++)u=e[2*f+1],(s=e[2*f])>=i&&s<=n&&u>=r&&u<=o&&c.push(t[f]);else{var _=Math.floor((d+h)/2);u=e[2*_+1],(s=e[2*_])>=i&&s<=n&&u>=r&&u<=o&&c.push(t[_]);var g=(p+1)%2;(0===p?i<=s:r<=u)&&(l.push(d),l.push(_-1),l.push(g)),(0===p?n>=s:o>=u)&&(l.push(_+1),l.push(h),l.push(g))}}return c}(this.ids,this.coords,t,e,i,r,this.nodeSize)},D.prototype.within=function(t,e,i){return function(t,e,i,r,n,o){for(var a=[0,t.length-1,0],s=[],u=n*n;a.length;){var l=a.pop(),c=a.pop(),p=a.pop();if(c-p<=o)for(var h=p;h<=c;h++)k(e[2*h],e[2*h+1],i,r)<=u&&s.push(t[h]);else{var d=Math.floor((p+c)/2),f=e[2*d],_=e[2*d+1];k(f,_,i,r)<=u&&s.push(t[d]);var g=(l+1)%2;(0===l?i-n<=f:r-n<=_)&&(a.push(p),a.push(d-1),a.push(g)),(0===l?i+n>=f:r+n>=_)&&(a.push(d+1),a.push(c),a.push(g))}}return s}(this.ids,this.coords,t,e,i,this.nodeSize)};var O={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(t){return t}},z=function(t){this.options=j(Object.create(O),t),this.trees=new Array(this.options.maxZoom+1)};function F(t,e,i,r,n){return{x:t,y:e,zoom:1/0,id:i,parentId:-1,numPoints:r,properties:n}}function B(t,e){var i=t.geometry.coordinates,r=i[1];return{x:V(i[0]),y:G(r),zoom:1/0,index:e,parentId:-1}}function q(t){return{type:"Feature",id:t.id,properties:U(t),geometry:{type:"Point",coordinates:[(r=t.x,360*(r-.5)),(e=t.y,i=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(i))/Math.PI-90)]}};var e,i,r}function U(t){var e=t.numPoints,i=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return j(j({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:i})}function V(t){return t/360+.5}function G(t){var e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:i>1?1:i}function j(t,e){for(var i in e)t[i]=e[i];return t}function K(t){return t.x}function X(t){return t.y}function Z(t,e,i,r,n,o){var a=n-i,s=o-r;if(0!==a||0!==s){var u=((t-i)*a+(e-r)*s)/(a*a+s*s);u>1?(i=n,r=o):u>0&&(i+=a*u,r+=s*u)}return(a=t-i)*a+(s=e-r)*s}function Y(t,e,i,r){var n={id:void 0===t?null:t,type:e,geometry:i,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,i=t.type;if("Point"===i||"MultiPoint"===i||"LineString"===i)H(t,e);else if("Polygon"===i||"MultiLineString"===i)for(var r=0;r<e.length;r++)H(t,e[r]);else if("MultiPolygon"===i)for(r=0;r<e.length;r++)for(var n=0;n<e[r].length;n++)H(t,e[r][n])}(n),n}function H(t,e){for(var i=0;i<e.length;i+=3)t.minX=Math.min(t.minX,e[i]),t.minY=Math.min(t.minY,e[i+1]),t.maxX=Math.max(t.maxX,e[i]),t.maxY=Math.max(t.maxY,e[i+1])}function W(t,e,i,r){if(e.geometry){var n=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(i.tolerance/((1<<i.maxZoom)*i.extent),2),s=[],u=e.id;if(i.promoteId?u=e.properties[i.promoteId]:i.generateId&&(u=r||0),"Point"===o)Q(n,s);else if("MultiPoint"===o)for(var l=0;l<n.length;l++)Q(n[l],s);else if("LineString"===o)J(n,s,a,!1);else if("MultiLineString"===o){if(i.lineMetrics){for(l=0;l<n.length;l++)J(n[l],s=[],a,!1),t.push(Y(u,"LineString",s,e.properties));return}$(n,s,a,!1)}else if("Polygon"===o)$(n,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(l=0;l<e.geometry.geometries.length;l++)W(t,{id:u,geometry:e.geometry.geometries[l],properties:e.properties},i,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(l=0;l<n.length;l++){var c=[];$(n[l],c,a,!0),s.push(c)}}t.push(Y(u,o,s,e.properties))}}function Q(t,e){e.push(tt(t[0])),e.push(et(t[1])),e.push(0)}function J(t,e,i,r){for(var n,o,a=0,s=0;s<t.length;s++){var u=tt(t[s][0]),l=et(t[s][1]);e.push(u),e.push(l),e.push(0),s>0&&(a+=r?(n*l-u*o)/2:Math.sqrt(Math.pow(u-n,2)+Math.pow(l-o,2))),n=u,o=l}var c=e.length-3;e[2]=1,function t(e,i,r,n){for(var o,a=n,s=r-i>>1,u=r-i,l=e[i],c=e[i+1],p=e[r],h=e[r+1],d=i+3;d<r;d+=3){var f=Z(e[d],e[d+1],l,c,p,h);if(f>a)o=d,a=f;else if(f===a){var _=Math.abs(d-s);_<u&&(o=d,u=_)}}a>n&&(o-i>3&&t(e,i,o,n),e[o+2]=a,r-o>3&&t(e,o,r,n))}(e,0,c,i),e[c+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function $(t,e,i,r){for(var n=0;n<t.length;n++){var o=[];J(t[n],o,i,r),e.push(o)}}function tt(t){return t/360+.5}function et(t){var e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:i>1?1:i}function it(t,e,i,r,n,o,a,s){if(r/=e,o>=(i/=e)&&a<r)return t;if(a<i||o>=r)return null;for(var u=[],l=0;l<t.length;l++){var c=t[l],p=c.geometry,h=c.type,d=0===n?c.minX:c.minY,f=0===n?c.maxX:c.maxY;if(d>=i&&f<r)u.push(c);else if(!(f<i||d>=r)){var _=[];if("Point"===h||"MultiPoint"===h)rt(p,_,i,r,n);else if("LineString"===h)nt(p,_,i,r,n,!1,s.lineMetrics);else if("MultiLineString"===h)at(p,_,i,r,n,!1);else if("Polygon"===h)at(p,_,i,r,n,!0);else if("MultiPolygon"===h)for(var g=0;g<p.length;g++){var m=[];at(p[g],m,i,r,n,!0),m.length&&_.push(m)}if(_.length){if(s.lineMetrics&&"LineString"===h){for(g=0;g<_.length;g++)u.push(Y(c.id,h,_[g],c.tags));continue}"LineString"!==h&&"MultiLineString"!==h||(1===_.length?(h="LineString",_=_[0]):h="MultiLineString"),"Point"!==h&&"MultiPoint"!==h||(h=3===_.length?"Point":"MultiPoint"),u.push(Y(c.id,h,_,c.tags))}}}return u.length?u:null}function rt(t,e,i,r,n){for(var o=0;o<t.length;o+=3){var a=t[o+n];a>=i&&a<=r&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function nt(t,e,i,r,n,o,a){for(var s,u,l=ot(t),c=0===n?ut:lt,p=t.start,h=0;h<t.length-3;h+=3){var d=t[h],f=t[h+1],_=t[h+2],g=t[h+3],m=t[h+4],y=0===n?d:f,v=0===n?g:m,b=!1;a&&(s=Math.sqrt(Math.pow(d-g,2)+Math.pow(f-m,2))),y<i?v>i&&(u=c(l,d,f,g,m,i),a&&(l.start=p+s*u)):y>r?v<r&&(u=c(l,d,f,g,m,r),a&&(l.start=p+s*u)):st(l,d,f,_),v<i&&y>=i&&(u=c(l,d,f,g,m,i),b=!0),v>r&&y<=r&&(u=c(l,d,f,g,m,r),b=!0),!o&&b&&(a&&(l.end=p+s*u),e.push(l),l=ot(t)),a&&(p+=s)}var x=t.length-3;d=t[x],f=t[x+1],_=t[x+2],(y=0===n?d:f)>=i&&y<=r&&st(l,d,f,_),x=l.length-3,o&&x>=3&&(l[x]!==l[0]||l[x+1]!==l[1])&&st(l,l[0],l[1],l[2]),l.length&&e.push(l)}function ot(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function at(t,e,i,r,n,o){for(var a=0;a<t.length;a++)nt(t[a],e,i,r,n,o,!1)}function st(t,e,i,r){t.push(e),t.push(i),t.push(r)}function ut(t,e,i,r,n,o){var a=(o-e)/(r-e);return t.push(o),t.push(i+(n-i)*a),t.push(1),a}function lt(t,e,i,r,n,o){var a=(o-i)/(n-i);return t.push(e+(r-e)*a),t.push(o),t.push(1),a}function ct(t,e){for(var i=[],r=0;r<t.length;r++){var n,o=t[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)n=pt(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){n=[];for(var s=0;s<o.geometry.length;s++)n.push(pt(o.geometry[s],e))}else if("MultiPolygon"===a)for(n=[],s=0;s<o.geometry.length;s++){for(var u=[],l=0;l<o.geometry[s].length;l++)u.push(pt(o.geometry[s][l],e));n.push(u)}i.push(Y(o.id,a,n,o.tags))}return i}function pt(t,e){var i=[];i.size=t.size,void 0!==t.start&&(i.start=t.start,i.end=t.end);for(var r=0;r<t.length;r+=3)i.push(t[r]+e,t[r+1],t[r+2]);return i}function ht(t,e){if(t.transformed)return t;var i,r,n,o=1<<t.z,a=t.x,s=t.y;for(i=0;i<t.features.length;i++){var u=t.features[i],l=u.geometry,c=u.type;if(u.geometry=[],1===c)for(r=0;r<l.length;r+=2)u.geometry.push(dt(l[r],l[r+1],e,o,a,s));else for(r=0;r<l.length;r++){var p=[];for(n=0;n<l[r].length;n+=2)p.push(dt(l[r][n],l[r][n+1],e,o,a,s));u.geometry.push(p)}}return t.transformed=!0,t}function dt(t,e,i,r,n,o){return[Math.round(i*(t*r-n)),Math.round(i*(e*r-o))]}function ft(t,e,i,r,n){for(var o=e===n.maxZoom?0:n.tolerance/((1<<e)*n.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,_t(a,t[s],o,n);var u=t[s].minX,l=t[s].minY,c=t[s].maxX,p=t[s].maxY;u<a.minX&&(a.minX=u),l<a.minY&&(a.minY=l),c>a.maxX&&(a.maxX=c),p>a.maxY&&(a.maxY=p)}return a}function _t(t,e,i,r){var n=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<n.length;s+=3)a.push(n[s]),a.push(n[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)gt(a,n,t,i,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<n.length;s++)gt(a,n[s],t,i,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var u=0;u<n.length;u++){var l=n[u];for(s=0;s<l.length;s++)gt(a,l[s],t,i,!0,0===s)}if(a.length){var c=e.tags||null;if("LineString"===o&&r.lineMetrics){for(var p in c={},e.tags)c[p]=e.tags[p];c.mapbox_clip_start=n.start/n.size,c.mapbox_clip_end=n.end/n.size}var h={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==e.id&&(h.id=e.id),t.features.push(h)}}function gt(t,e,i,r,n,o){var a=r*r;if(r>0&&e.size<(n?a:r))i.numPoints+=e.length/3;else{for(var s=[],u=0;u<e.length;u+=3)(0===r||e[u+2]>a)&&(i.numSimplified++,s.push(e[u]),s.push(e[u+1])),i.numPoints++;n&&function(t,e){for(var i=0,r=0,n=t.length,o=n-2;r<n;o=r,r+=2)i+=(t[r]-t[o])*(t[r+1]+t[o+1]);if(i>0===e)for(r=0,n=t.length;r<n/2;r+=2){var a=t[r],s=t[r+1];t[r]=t[n-2-r],t[r+1]=t[n-1-r],t[n-2-r]=a,t[n-1-r]=s}}(s,o),t.push(s)}}function mt(t,e){var i=(e=this.options=function(t,e){for(var i in e)t[i]=e[i];return t}(Object.create(this.options),e)).debug;if(i&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(t,e){var i=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)W(i,t.features[r],e,r);else W(i,"Feature"===t.type?t:{geometry:t},e);return i}(t,e);this.tiles={},this.tileCoords=[],i&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=function(t,e){var i=e.buffer/e.extent,r=t,n=it(t,1,-1-i,i,0,-1,2,e),o=it(t,1,1-i,2+i,0,-1,2,e);return(n||o)&&(r=it(t,1,-i,1+i,0,-1,2,e)||[],n&&(r=ct(n,1).concat(r)),o&&(r=r.concat(ct(o,-1)))),r}(r,e)).length&&this.splitTile(r,0,0,0),i&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function yt(t,e,i){return 32*((1<<t)*i+e)+t}function vt(t,e){var i=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var r=this._geoJSONIndex.getTile(i.z,i.x,i.y);if(!r)return e(null,null);var n=new _(r.features),o=b(n);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:n,rawData:o.buffer})}z.prototype.load=function(t){var e=this.options,i=e.log,r=e.minZoom,n=e.maxZoom,o=e.nodeSize;i&&console.time("total time");var a="prepare "+t.length+" points";i&&console.time(a),this.points=t;for(var s=[],u=0;u<t.length;u++)t[u].geometry&&s.push(B(t[u],u));this.trees[n+1]=new D(s,K,X,o,Float32Array),i&&console.timeEnd(a);for(var l=n;l>=r;l--){var c=+Date.now();s=this._cluster(s,l),this.trees[l]=new D(s,K,X,o,Float32Array),i&&console.log("z%d: %d clusters in %dms",l,s.length,+Date.now()-c)}return i&&console.timeEnd("total time"),this},z.prototype.getClusters=function(t,e){var i=((t[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,t[1])),n=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)i=-180,n=180;else if(i>n){var a=this.getClusters([i,r,180,o],e),s=this.getClusters([-180,r,n,o],e);return a.concat(s)}for(var u=this.trees[this._limitZoom(e)],l=[],c=0,p=u.range(V(i),G(o),V(n),G(r));c<p.length;c+=1){var h=u.points[p[c]];l.push(h.numPoints?q(h):this.points[h.index])}return l},z.prototype.getChildren=function(t){var e=this._getOriginId(t),i=this._getOriginZoom(t),r="No cluster with the specified id.",n=this.trees[i];if(!n)throw new Error(r);var o=n.points[e];if(!o)throw new Error(r);for(var a=this.options.radius/(this.options.extent*Math.pow(2,i-1)),s=[],u=0,l=n.within(o.x,o.y,a);u<l.length;u+=1){var c=n.points[l[u]];c.parentId===t&&s.push(c.numPoints?q(c):this.points[c.index])}if(0===s.length)throw new Error(r);return s},z.prototype.getLeaves=function(t,e,i){var r=[];return this._appendLeaves(r,t,e=e||10,i=i||0,0),r},z.prototype.getTile=function(t,e,i){var r=this.trees[this._limitZoom(t)],n=Math.pow(2,t),o=this.options,a=o.radius/o.extent,s=(i-a)/n,u=(i+1+a)/n,l={features:[]};return this._addTileFeatures(r.range((e-a)/n,s,(e+1+a)/n,u),r.points,e,i,n,l),0===e&&this._addTileFeatures(r.range(1-a/n,s,1,u),r.points,n,i,n,l),e===n-1&&this._addTileFeatures(r.range(0,s,a/n,u),r.points,-1,i,n,l),l.features.length?l:null},z.prototype.getClusterExpansionZoom=function(t){for(var e=this._getOriginZoom(t)-1;e<=this.options.maxZoom;){var i=this.getChildren(t);if(e++,1!==i.length)break;t=i[0].properties.cluster_id}return e},z.prototype._appendLeaves=function(t,e,i,r,n){for(var o=0,a=this.getChildren(e);o<a.length;o+=1){var s=a[o],u=s.properties;if(u&&u.cluster?n+u.point_count<=r?n+=u.point_count:n=this._appendLeaves(t,u.cluster_id,i,r,n):n<r?n++:t.push(s),t.length===i)break}return n},z.prototype._addTileFeatures=function(t,e,i,r,n,o){for(var a=0,s=t;a<s.length;a+=1){var u=e[s[a]],l=u.numPoints,c={type:1,geometry:[[Math.round(this.options.extent*(u.x*n-i)),Math.round(this.options.extent*(u.y*n-r))]],tags:l?U(u):this.points[u.index].properties},p=void 0;l?p=u.id:this.options.generateId?p=u.index:this.points[u.index].id&&(p=this.points[u.index].id),void 0!==p&&(c.id=p),o.features.push(c)}},z.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(+t,this.options.maxZoom+1))},z.prototype._cluster=function(t,e){for(var i=[],r=this.options,n=r.reduce,o=r.minPoints,a=r.radius/(r.extent*Math.pow(2,e)),s=0;s<t.length;s++){var u=t[s];if(!(u.zoom<=e)){u.zoom=e;for(var l=this.trees[e+1],c=l.within(u.x,u.y,a),p=u.numPoints||1,h=p,d=0,f=c;d<f.length;d+=1){var _=l.points[f[d]];_.zoom>e&&(h+=_.numPoints||1)}if(h>=o){for(var g=u.x*p,m=u.y*p,y=n&&p>1?this._map(u,!0):null,v=(s<<5)+(e+1)+this.points.length,b=0,x=c;b<x.length;b+=1){var w=l.points[x[b]];if(!(w.zoom<=e)){w.zoom=e;var E=w.numPoints||1;g+=w.x*E,m+=w.y*E,w.parentId=v,n&&(y||(y=this._map(u,!0)),n(y,this._map(w)))}}u.parentId=v,i.push(F(g/h,m/h,v,h,y))}else if(i.push(u),h>1)for(var S=0,I=c;S<I.length;S+=1){var A=l.points[I[S]];A.zoom<=e||(A.zoom=e,i.push(A))}}}return i},z.prototype._getOriginId=function(t){return t-this.points.length>>5},z.prototype._getOriginZoom=function(t){return(t-this.points.length)%32},z.prototype._map=function(t,e){if(t.numPoints)return e?j({},t.properties):t.properties;var i=this.points[t.index].properties,r=this.options.map(i);return e&&r===i?j({},r):r},mt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},mt.prototype.splitTile=function(t,e,i,r,n,o,a){for(var s=[t,e,i,r],u=this.options,l=u.debug;s.length;){r=s.pop(),i=s.pop(),e=s.pop(),t=s.pop();var c=1<<e,p=yt(e,i,r),h=this.tiles[p];if(!h&&(l>1&&console.time("creation"),h=this.tiles[p]=ft(t,e,i,r,u),this.tileCoords.push({z:e,x:i,y:r}),l)){l>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,i,r,h.numFeatures,h.numPoints,h.numSimplified),console.timeEnd("creation"));var d="z"+e;this.stats[d]=(this.stats[d]||0)+1,this.total++}if(h.source=t,n){if(e===u.maxZoom||e===n)continue;var f=1<<n-e;if(i!==Math.floor(o/f)||r!==Math.floor(a/f))continue}else if(e===u.indexMaxZoom||h.numPoints<=u.indexMaxPoints)continue;if(h.source=null,0!==t.length){l>1&&console.time("clipping");var _,g,m,y,v,b,x=.5*u.buffer/u.extent,w=.5-x,E=.5+x,S=1+x;_=g=m=y=null,v=it(t,c,i-x,i+E,0,h.minX,h.maxX,u),b=it(t,c,i+w,i+S,0,h.minX,h.maxX,u),t=null,v&&(_=it(v,c,r-x,r+E,1,h.minY,h.maxY,u),g=it(v,c,r+w,r+S,1,h.minY,h.maxY,u),v=null),b&&(m=it(b,c,r-x,r+E,1,h.minY,h.maxY,u),y=it(b,c,r+w,r+S,1,h.minY,h.maxY,u),b=null),l>1&&console.timeEnd("clipping"),s.push(_||[],e+1,2*i,2*r),s.push(g||[],e+1,2*i,2*r+1),s.push(m||[],e+1,2*i+1,2*r),s.push(y||[],e+1,2*i+1,2*r+1)}}},mt.prototype.getTile=function(t,e,i){var r=this.options,n=r.extent,o=r.debug;if(t<0||t>24)return null;var a=1<<t,s=yt(t,e=(e%a+a)%a,i);if(this.tiles[s])return ht(this.tiles[s],n);o>1&&console.log("drilling down to z%d-%d-%d",t,e,i);for(var u,l=t,c=e,p=i;!u&&l>0;)l--,c=Math.floor(c/2),p=Math.floor(p/2),u=this.tiles[yt(l,c,p)];return u&&u.source?(o>1&&console.log("found parent tile z%d-%d-%d",l,c,p),o>1&&console.time("drilling down"),this.splitTile(u.source,l,c,p,t,e,i),o>1&&console.timeEnd("drilling down"),this.tiles[s]?ht(this.tiles[s],n):null):null};var bt=function(e){function i(t,i,r,n){e.call(this,t,i,r,vt),n&&(this.loadGeoJSON=n)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.loadData=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},i.prototype._loadData=function(){var e=this;if(this._pendingCallback&&this._pendingLoadDataParams){var i=this._pendingCallback,r=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var n=!!(r&&r.request&&r.request.collectResourceTiming)&&new t.RequestPerformance(r.request);this.loadGeoJSON(r,(function(o,a){if(o||!a)return i(o);if("object"!=typeof a)return i(new Error("Input data given to '"+r.source+"' is not a valid GeoJSON object."));!function t(e,i){var r,n=e&&e.type;if("FeatureCollection"===n)for(r=0;r<e.features.length;r++)t(e.features[r],i);else if("GeometryCollection"===n)for(r=0;r<e.geometries.length;r++)t(e.geometries[r],i);else if("Feature"===n)t(e.geometry,i);else if("Polygon"===n)p(e.coordinates,i);else if("MultiPolygon"===n)for(r=0;r<e.coordinates.length;r++)p(e.coordinates[r],i);return e}(a,!0);try{if(r.filter){var s=t.createExpression(r.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===s.result)throw new Error(s.value.map((function(t){return t.key+": "+t.message})).join(", "));var u=a.features.filter((function(t){return s.value.evaluate({zoom:0},t)}));a={type:"FeatureCollection",features:u}}e._geoJSONIndex=r.cluster?new z(function(e){var i=e.superclusterOptions,r=e.clusterProperties;if(!r||!i)return i;for(var n={},o={},a={accumulated:null,zoom:0},s={properties:null},u=Object.keys(r),l=0,c=u;l<c.length;l+=1){var p=c[l],h=r[p],d=h[0],f=t.createExpression(h[1]),_=t.createExpression("string"==typeof d?[d,["accumulated"],["get",p]]:d);n[p]=f.value,o[p]=_.value}return i.map=function(t){s.properties=t;for(var e={},i=0,r=u;i<r.length;i+=1){var o=r[i];e[o]=n[o].evaluate(a,s)}return e},i.reduce=function(t,e){s.properties=e;for(var i=0,r=u;i<r.length;i+=1){var n=r[i];a.accumulated=t[n],t[n]=o[n].evaluate(a,s)}},i}(r)).load(a.features):function(t,e){return new mt(t,e)}(a,r.geojsonVtOptions)}catch(o){return i(o)}e.loaded={};var l={};if(n){var c=n.finish();c&&(l.resourceTiming={},l.resourceTiming[r.source]=JSON.parse(JSON.stringify(c)))}i(null,l)}))}},i.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},i.prototype.reloadTile=function(t,i){var r=this.loaded;return r&&r[t.uid]?e.prototype.reloadTile.call(this,t,i):this.loadTile(t,i)},i.prototype.loadGeoJSON=function(e,i){if(e.request)t.getJSON(e.request,i);else{if("string"!=typeof e.data)return i(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."));try{return i(null,JSON.parse(e.data))}catch(t){return i(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."))}}},i.prototype.removeSource=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},i.prototype.getClusterExpansionZoom=function(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}},i.prototype.getClusterChildren=function(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}},i.prototype.getClusterLeaves=function(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}},i}(u),xt=function(e){var i=this;this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:u,geojson:bt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(i.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');i.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(e){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}};return xt.prototype.setReferrer=function(t,e){this.referrer=e},xt.prototype.setImages=function(t,e,i){for(var r in this.availableImages[t]=e,this.workerSources[t]){var n=this.workerSources[t][r];for(var o in n)n[o].availableImages=e}i()},xt.prototype.setLayers=function(t,e,i){this.getLayerIndex(t).replace(e),i()},xt.prototype.updateLayers=function(t,e,i){this.getLayerIndex(t).update(e.layers,e.removedIds),i()},xt.prototype.loadTile=function(t,e,i){this.getWorkerSource(t,e.type,e.source).loadTile(e,i)},xt.prototype.loadDEMTile=function(t,e,i){this.getDEMWorkerSource(t,e.source).loadTile(e,i)},xt.prototype.reloadTile=function(t,e,i){this.getWorkerSource(t,e.type,e.source).reloadTile(e,i)},xt.prototype.abortTile=function(t,e,i){this.getWorkerSource(t,e.type,e.source).abortTile(e,i)},xt.prototype.removeTile=function(t,e,i){this.getWorkerSource(t,e.type,e.source).removeTile(e,i)},xt.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)},xt.prototype.removeSource=function(t,e,i){if(this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]){var r=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==r.removeSource?r.removeSource(e,i):i()}},xt.prototype.loadWorkerSource=function(t,e,i){try{this.self.importScripts(e.url),i()}catch(t){i(t.toString())}},xt.prototype.syncRTLPluginState=function(e,i,r){try{t.plugin.setState(i);var n=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=n){this.self.importScripts(n);var o=t.plugin.isParsed();r(o?void 0:new Error("RTL Text Plugin failed to import scripts from "+n),o)}}catch(t){r(t.toString())}},xt.prototype.getAvailableImages=function(t){var e=this.availableImages[t];return e||(e=[]),e},xt.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new r),e},xt.prototype.getWorkerSource=function(t,e,i){var r=this;return this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),this.workerSources[t][e][i]||(this.workerSources[t][e][i]=new this.workerSourceTypes[e]({send:function(e,i,n){r.actor.send(e,i,n,t)}},this.getLayerIndex(t),this.getAvailableImages(t))),this.workerSources[t][e][i]},xt.prototype.getDEMWorkerSource=function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new c),this.demWorkerSources[t][e]},xt.prototype.enforceCacheSizeLimit=function(e,i){t.enforceCacheSizeLimit(i)},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new xt(self)),xt})),r(["./shared"],(function(t){var e=t.createCommonjsModule((function(t){function e(t){return!i(t)}function i(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,i=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(i);try{e=new Worker(r),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(r),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var i=e.getImageData(0,0,1,1);return i&&i.width===t.width}()?(void 0===r[i=t&&t.failIfMajorPerformanceCaveat]&&(r[i]=function(t){var i=function(t){var i=document.createElement("canvas"),r=Object.create(e.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=t,i.probablySupportsContext?i.probablySupportsContext("webgl",r)||i.probablySupportsContext("experimental-webgl",r):i.supportsContext?i.supportsContext("webgl",r)||i.supportsContext("experimental-webgl",r):i.getContext("webgl",r)||i.getContext("experimental-webgl",r)}(t);if(!i)return!1;var r=i.createShader(i.VERTEX_SHADER);return!(!r||i.isContextLost())&&(i.shaderSource(r,"void main() {}"),i.compileShader(r),!0===i.getShaderParameter(r,i.COMPILE_STATUS))}(i)),r[i]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var i}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e,window.mapboxgl.notSupportedReason=i);var r={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}})),i={create:function(e,i,r){var n=t.window.document.createElement(e);return void 0!==i&&(n.className=i),r&&r.appendChild(n),n},createNS:function(e,i){return t.window.document.createElementNS(e,i)}},r=t.window.document&&t.window.document.documentElement.style;function n(t){if(!r)return t[0];for(var e=0;e<t.length;e++)if(t[e]in r)return t[e];return t[0]}var o,a=n(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);i.disableDrag=function(){r&&a&&(o=r[a],r[a]="none")},i.enableDrag=function(){r&&a&&(r[a]=o)};var s=n(["transform","WebkitTransform"]);i.setTransform=function(t,e){t.style[s]=e};var u=!1;try{var l=Object.defineProperty({},"passive",{get:function(){u=!0}});t.window.addEventListener("test",l,l),t.window.removeEventListener("test",l,l)}catch(t){u=!1}i.addEventListener=function(t,e,i,r){void 0===r&&(r={}),t.addEventListener(e,i,"passive"in r&&u?r:r.capture)},i.removeEventListener=function(t,e,i,r){void 0===r&&(r={}),t.removeEventListener(e,i,"passive"in r&&u?r:r.capture)};var c=function(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",c,!0)};function p(t){var e=t.userImage;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}i.suppressClick=function(){t.window.addEventListener("click",c,!0),t.window.setTimeout((function(){t.window.removeEventListener("click",c,!0)}),0)},i.mousePos=function(e,i){var r=e.getBoundingClientRect();return new t.Point(i.clientX-r.left-e.clientLeft,i.clientY-r.top-e.clientTop)},i.touchPos=function(e,i){for(var r=e.getBoundingClientRect(),n=[],o=0;o<i.length;o++)n.push(new t.Point(i[o].clientX-r.left-e.clientLeft,i[o].clientY-r.top-e.clientTop));return n},i.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},i.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var h=function(e){function i(){e.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.isLoaded=function(){return this.loaded},i.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,i=this.requestors;e<i.length;e+=1){var r=i[e];this._notify(r.ids,r.callback)}this.requestors=[]}},i.prototype.getImage=function(t){return this.images[t]},i.prototype.addImage=function(t,e){this._validate(t,e)&&(this.images[t]=e)},i.prototype._validate=function(e,i){var r=!0;return this._validateStretch(i.stretchX,i.data&&i.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchX" value'))),r=!1),this._validateStretch(i.stretchY,i.data&&i.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchY" value'))),r=!1),this._validateContent(i.content,i)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "content" value'))),r=!1),r},i.prototype._validateStretch=function(t,e){if(!t)return!0;for(var i=0,r=0,n=t;r<n.length;r+=1){var o=n[r];if(o[0]<i||o[1]<o[0]||e<o[1])return!1;i=o[1]}return!0},i.prototype._validateContent=function(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))},i.prototype.updateImage=function(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0},i.prototype.removeImage=function(t){var e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()},i.prototype.listImages=function(){return Object.keys(this.images)},i.prototype.getImages=function(t,e){var i=!0;if(!this.isLoaded())for(var r=0,n=t;r<n.length;r+=1)this.images[n[r]]||(i=!1);this.isLoaded()||i?this._notify(t,e):this.requestors.push({ids:t,callback:e})},i.prototype._notify=function(e,i){for(var r={},n=0,o=e;n<o.length;n+=1){var a=o[n];this.images[a]||this.fire(new t.Event("styleimagemissing",{id:a}));var s=this.images[a];s?r[a]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:t.warnOnce('Image "'+a+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}i(null,r)},i.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},i.prototype.getPattern=function(e){var i=this.patterns[e],r=this.getImage(e);if(!r)return null;if(i&&i.position.version===r.version)return i.position;if(i)i.position.version=r.version;else{var n={w:r.data.width+2,h:r.data.height+2,x:0,y:0},o=new t.ImagePosition(n,r);this.patterns[e]={bin:n,position:o}}return this._updatePatternAtlas(),this.patterns[e].position},i.prototype.bind=function(e){var i=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,i.RGBA),this.atlasTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)},i.prototype._updatePatternAtlas=function(){var e=[];for(var i in this.patterns)e.push(this.patterns[i].bin);var r=t.potpack(e),n=r.w,o=r.h,a=this.atlasImage;for(var s in a.resize({width:n||1,height:o||1}),this.patterns){var u=this.patterns[s].bin,l=u.x+1,c=u.y+1,p=this.images[s].data,h=p.width,d=p.height;t.RGBAImage.copy(p,a,{x:0,y:0},{x:l,y:c},{width:h,height:d}),t.RGBAImage.copy(p,a,{x:0,y:d-1},{x:l,y:c-1},{width:h,height:1}),t.RGBAImage.copy(p,a,{x:0,y:0},{x:l,y:c+d},{width:h,height:1}),t.RGBAImage.copy(p,a,{x:h-1,y:0},{x:l-1,y:c},{width:1,height:d}),t.RGBAImage.copy(p,a,{x:0,y:0},{x:l+h,y:c},{width:1,height:d})}this.dirty=!0},i.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},i.prototype.dispatchRenderCallbacks=function(t){for(var e=0,i=t;e<i.length;e+=1){var r=i[e];if(!this.callbackDispatchedThisFrame[r]){this.callbackDispatchedThisFrame[r]=!0;var n=this.images[r];p(n)&&this.updateImage(r,n)}}},i}(t.Evented),d=g,f=g,_=1e20;function g(t,e,i,r,n,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=r||.25,this.fontFamily=n||"sans-serif",this.fontWeight=o||"normal",this.radius=i||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function m(t,e,i,r,n,o,a){for(var s=0;s<e;s++){for(var u=0;u<i;u++)r[u]=t[u*e+s];for(y(r,n,o,a,i),u=0;u<i;u++)t[u*e+s]=n[u]}for(u=0;u<i;u++){for(s=0;s<e;s++)r[s]=t[u*e+s];for(y(r,n,o,a,e),s=0;s<e;s++)t[u*e+s]=Math.sqrt(n[s])}}function y(t,e,i,r,n){i[0]=0,r[0]=-_,r[1]=+_;for(var o=1,a=0;o<n;o++){for(var s=(t[o]+o*o-(t[i[a]]+i[a]*i[a]))/(2*o-2*i[a]);s<=r[a];)a--,s=(t[o]+o*o-(t[i[a]]+i[a]*i[a]))/(2*o-2*i[a]);i[++a]=o,r[a]=s,r[a+1]=+_}for(o=0,a=0;o<n;o++){for(;r[a+1]<o;)a++;e[o]=(o-i[a])*(o-i[a])+t[i[a]]}}g.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),i=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var n=e.data[4*r+3]/255;this.gridOuter[r]=1===n?0:0===n?_:Math.pow(Math.max(0,.5-n),2),this.gridInner[r]=1===n?_:0===n?0:Math.pow(Math.max(0,n-.5),2)}for(m(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),m(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++)i[r]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[r]-this.gridInner[r])/this.radius+this.cutoff))));return i},d.default=f;var v=function(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}};v.prototype.setURL=function(t){this.url=t},v.prototype.getGlyphs=function(e,i){var r=this,n=[];for(var o in e)for(var a=0,s=e[o];a<s.length;a+=1)n.push({stack:o,id:s[a]});t.asyncAll(n,(function(t,e){var i=t.stack,n=t.id,o=r.entries[i];o||(o=r.entries[i]={glyphs:{},requests:{},ranges:{}});var a=o.glyphs[n];if(void 0===a){if(a=r._tinySDF(o,i,n))return o.glyphs[n]=a,void e(null,{stack:i,id:n,glyph:a});var s=Math.floor(n/256);if(256*s>65535)e(new Error("glyphs > 65535 not supported"));else if(o.ranges[s])e(null,{stack:i,id:n,glyph:a});else{var u=o.requests[s];u||(u=o.requests[s]=[],v.loadGlyphRange(i,s,r.url,r.requestManager,(function(t,e){if(e){for(var i in e)r._doesCharSupportLocalGlyph(+i)||(o.glyphs[+i]=e[+i]);o.ranges[s]=!0}for(var n=0,a=u;n<a.length;n+=1)(0,a[n])(t,e);delete o.requests[s]}))),u.push((function(t,r){t?e(t):r&&e(null,{stack:i,id:n,glyph:r[n]||null})}))}}else e(null,{stack:i,id:n,glyph:a})}),(function(t,e){if(t)i(t);else if(e){for(var r={},n=0,o=e;n<o.length;n+=1){var a=o[n],s=a.stack,u=a.id,l=a.glyph;(r[s]||(r[s]={}))[u]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics}}i(null,r)}}))},v.prototype._doesCharSupportLocalGlyph=function(e){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](e)||t.isChar["Hangul Syllables"](e)||t.isChar.Hiragana(e)||t.isChar.Katakana(e))},v.prototype._tinySDF=function(e,i,r){var n=this.localIdeographFontFamily;if(n&&this._doesCharSupportLocalGlyph(r)){var o=e.tinySDF;if(!o){var a="400";/bold/i.test(i)?a="900":/medium/i.test(i)?a="500":/light/i.test(i)&&(a="200"),o=e.tinySDF=new v.TinySDF(24,3,8,.25,n,a)}return{id:r,bitmap:new t.AlphaImage({width:30,height:30},o.draw(String.fromCharCode(r))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},v.loadGlyphRange=function(e,i,r,n,o){var a=256*i,s=a+255,u=n.transformRequest(n.normalizeGlyphsURL(r).replace("{fontstack}",e).replace("{range}",a+"-"+s),t.ResourceType.Glyphs);t.getArrayBuffer(u,(function(e,i){if(e)o(e);else if(i){for(var r={},n=0,a=t.parseGlyphPBF(i);n<a.length;n+=1){var s=a[n];r[s.id]=s}o(null,r)}}))},v.TinySDF=d;var b=function(){this.specification=t.styleSpec.light.position};b.prototype.possiblyEvaluate=function(e,i){return t.sphericalToCartesian(e.expression.evaluate(i))},b.prototype.interpolate=function(e,i,r){return{x:t.number(e.x,i.x,r),y:t.number(e.y,i.y,r),z:t.number(e.z,i.z,r)}};var x=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new b,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),w=function(e){function i(i){e.call(this),this._transitionable=new t.Transitionable(x),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.getLight=function(){return this._transitionable.serialize()},i.prototype.setLight=function(e,i){if(void 0===i&&(i={}),!this._validate(t.validateLight,e,i))for(var r in e){var n=e[r];t.endsWith(r,"-transition")?this._transitionable.setTransition(r.slice(0,-"-transition".length),n):this._transitionable.setValue(r,n)}},i.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},i.prototype.hasTransition=function(){return this._transitioning.hasTransition()},i.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},i.prototype._validate=function(e,i,r){return(!r||!1!==r.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},i}(t.Evented),E=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};E.prototype.getDash=function(t,e){var i=t.join(",")+String(e);return this.dashEntry[i]||(this.dashEntry[i]=this.addDash(t,e)),this.dashEntry[i]},E.prototype.getDashRanges=function(t,e,i){var r=[],n=t.length%2==1?-t[t.length-1]*i:0,o=t[0]*i,a=!0;r.push({left:n,right:o,isDash:a,zeroLength:0===t[0]});for(var s=t[0],u=1;u<t.length;u++){var l=t[u];r.push({left:n=s*i,right:o=(s+=l)*i,isDash:a=!a,zeroLength:0===l})}return r},E.prototype.addRoundDash=function(t,e,i){for(var r=e/2,n=-i;n<=i;n++)for(var o=this.width*(this.nextRow+i+n),a=0,s=t[a],u=0;u<this.width;u++){u/s.right>1&&(s=t[++a]);var l=Math.abs(u-s.left),c=Math.abs(u-s.right),p=Math.min(l,c),h=void 0,d=n/i*(r+1);if(s.isDash){var f=r-Math.abs(d);h=Math.sqrt(p*p+f*f)}else h=r-Math.sqrt(p*p+d*d);this.data[o+u]=Math.max(0,Math.min(255,h+128))}},E.prototype.addRegularDash=function(t){for(var e=t.length-1;e>=0;--e){var i=t[e],r=t[e+1];i.zeroLength?t.splice(e,1):r&&r.isDash===i.isDash&&(r.left=i.left,t.splice(e,1))}var n=t[0],o=t[t.length-1];n.isDash===o.isDash&&(n.left=o.left-this.width,o.right=n.right+this.width);for(var a=this.width*this.nextRow,s=0,u=t[s],l=0;l<this.width;l++){l/u.right>1&&(u=t[++s]);var c=Math.abs(l-u.left),p=Math.abs(l-u.right),h=Math.min(c,p);this.data[a+l]=Math.max(0,Math.min(255,(u.isDash?h:-h)+128))}},E.prototype.addDash=function(e,i){var r=i?7:0,n=2*r+1;if(this.nextRow+n>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var o=0,a=0;a<e.length;a++)o+=e[a];if(0!==o){var s=this.width/o,u=this.getDashRanges(e,this.width,s);i?this.addRoundDash(u,s,r):this.addRegularDash(u)}var l={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:o};return this.nextRow+=n,this.dirty=!0,l},E.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))};var S=function e(i,r){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var n=this.workerPool.acquire(this.id),o=0;o<n.length;o++){var a=new e.Actor(n[o],r,this.id);a.name="Worker "+o,this.actors.push(a)}};function I(e,i,r){var n=function(n,o){if(n)return r(n);if(o){var a=t.pick(t.extend(o,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);o.vector_layers&&(a.vectorLayers=o.vector_layers,a.vectorLayerIds=a.vectorLayers.map((function(t){return t.id}))),a.tiles=i.canonicalizeTileset(a,e.url),r(null,a)}};return e.url?t.getJSON(i.transformRequest(i.normalizeSourceURL(e.url),t.ResourceType.Source),n):t.browser.frame((function(){return n(null,e)}))}S.prototype.broadcast=function(e,i,r){t.asyncAll(this.actors,(function(t,r){t.send(e,i,r)}),r=r||function(){})},S.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},S.prototype.remove=function(){this.actors.forEach((function(t){t.remove()})),this.actors=[],this.workerPool.release(this.id)},S.Actor=t.Actor;var A=function(e,i,r){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=i||0,this.maxzoom=r||24};A.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},A.prototype.contains=function(e){var i=Math.pow(2,e.z),r=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*i),n=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*i),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*i),a=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*i);return e.x>=r&&e.x<o&&e.y>=n&&e.y<a};var C=function(e){function i(i,r,n,o){if(e.call(this),this.id=i,this.dispatcher=n,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(r,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=I(this._options,this.map._requestManager,(function(i,r){e._tileJSONRequest=null,e._loaded=!0,i?e.fire(new t.ErrorEvent(i)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new A(r.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(r.tiles,e.map._requestManager._customAccessToken),t.postMapLoadEvent(r.tiles,e.map._getMapId(),e.map._requestManager._skuToken,e.map._requestManager._customAccessToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))},i.prototype.loaded=function(){return this._loaded},i.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},i.prototype.onAdd=function(t){this.map=t,this.load()},i.prototype.setSourceProperty=function(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},i.prototype.setTiles=function(t){var e=this;return this.setSourceProperty((function(){e._options.tiles=t})),this},i.prototype.setUrl=function(t){var e=this;return this.setSourceProperty((function(){e.url=t,e._options.url=t})),this},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i.prototype.serialize=function(){return t.extend({},this._options)},i.prototype.loadTile=function(e,i){var r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme)),n={request:this.map._requestManager.transformRequest(r,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function o(r,n){return delete e.request,e.aborted?i(null):r&&404!==r.status?i(r):(n&&n.resourceTiming&&(e.resourceTiming=n.resourceTiming),this.map._refreshExpiredTiles&&n&&e.setExpiryData(n),e.loadVectorData(n,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}n.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state?"loading"===e.state?e.reloadCallback=i:e.request=e.actor.send("reloadTile",n,o.bind(this)):(e.actor=this.dispatcher.getActor(),e.request=e.actor.send("loadTile",n,o.bind(this)))},i.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)},i.prototype.unloadTile=function(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)},i.prototype.hasTransition=function(){return!1},i}(t.Evented),P=function(e){function i(i,r,n,o){e.call(this),this.id=i,this.dispatcher=n,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},r),t.extend(this,t.pick(r,["url","scheme","tileSize"]))}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=I(this._options,this.map._requestManager,(function(i,r){e._tileJSONRequest=null,e._loaded=!0,i?e.fire(new t.ErrorEvent(i)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new A(r.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(r.tiles),t.postMapLoadEvent(r.tiles,e.map._getMapId(),e.map._requestManager._skuToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))},i.prototype.loaded=function(){return this._loaded},i.prototype.onAdd=function(t){this.map=t,this.load()},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i.prototype.serialize=function(){return t.extend({},this._options)},i.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},i.prototype.loadTile=function(e,i){var r=this,n=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(n,t.ResourceType.Tile),(function(n,o){if(delete e.request,e.aborted)e.state="unloaded",i(null);else if(n)e.state="errored",i(n);else if(o){r.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=r.map.painter.context,s=a.gl;e.texture=r.map.painter.getTileTexture(o.width),e.texture?e.texture.update(o,{useMipmap:!0}):(e.texture=new t.Texture(a,o,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(r.dispatcher),i(null)}}))},i.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},i.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},i.prototype.hasTransition=function(){return!1},i}(t.Evented),T=function(e){function i(i,r,n,o){e.call(this,i,r,n,o),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},r),this.encoding=r.encoding||"mapbox"}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},i.prototype.loadTile=function(e,i){var r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function n(t,r){t&&(e.state="errored",i(t)),r&&(e.dem=r,e.needsHillshadePrepare=!0,e.state="loaded",i(null))}e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),function(r,o){if(delete e.request,e.aborted)e.state="unloaded",i(null);else if(r)e.state="errored",i(r);else if(o){this.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=t.window.ImageBitmap&&o instanceof t.window.ImageBitmap&&t.offscreenCanvasSupported()?o:t.browser.getImageData(o,1),s={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:a,encoding:this.encoding};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",s,n.bind(this)))}}.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},i.prototype._getNeighboringTiles=function(e){var i=e.canonical,r=Math.pow(2,i.z),n=(i.x-1+r)%r,o=0===i.x?e.wrap-1:e.wrap,a=(i.x+1+r)%r,s=i.x+1===r?e.wrap+1:e.wrap,u={};return u[new t.OverscaledTileID(e.overscaledZ,o,i.z,n,i.y).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,i.z,a,i.y).key]={backfilled:!1},i.y>0&&(u[new t.OverscaledTileID(e.overscaledZ,o,i.z,n,i.y-1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,i.z,a,i.y-1).key]={backfilled:!1}),i.y+1<r&&(u[new t.OverscaledTileID(e.overscaledZ,o,i.z,n,i.y+1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,i.z,a,i.y+1).key]={backfilled:!1}),u},i.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})},i}(P),L=function(e){function i(i,r,n,o){e.call(this),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=n.getActor(),this.setEventedParent(o),this._data=r.data,this._options=t.extend({},r),this._collectResourceTiming=r.collectResourceTiming,this._resourceTiming=[],void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution),this.promoteId=r.promoteId;var a=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*a,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*a,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?Math.min(r.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,r.clusterMinPoints||2),extent:t.EXTENT,radius:(r.clusterRadius||50)*a,log:!1,generateId:r.generateId||!1},clusterProperties:r.clusterProperties,filter:r.filter},r.workerOptions)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(i){if(i)e.fire(new t.ErrorEvent(i));else{var r={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(r.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",r))}}))},i.prototype.onAdd=function(t){this.map=t,this.load()},i.prototype.setData=function(e){var i=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(e){if(e)i.fire(new t.ErrorEvent(e));else{var r={dataType:"source",sourceDataType:"content"};i._collectResourceTiming&&i._resourceTiming&&i._resourceTiming.length>0&&(r.resourceTiming=i._resourceTiming,i._resourceTiming=[]),i.fire(new t.Event("data",r))}})),this},i.prototype.getClusterExpansionZoom=function(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this},i.prototype.getClusterChildren=function(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this},i.prototype.getClusterLeaves=function(t,e,i,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:i},r),this},i.prototype._updateWorkerData=function(e){var i=this;this._loaded=!1;var r=t.extend({},this.workerOptions),n=this._data;"string"==typeof n?(r.request=this.map._requestManager.transformRequest(t.browser.resolveURL(n),t.ResourceType.Source),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(n),this.actor.send(this.type+".loadData",r,(function(t,n){i._removed||n&&n.abandoned||(i._loaded=!0,n&&n.resourceTiming&&n.resourceTiming[i.id]&&(i._resourceTiming=n.resourceTiming[i.id].slice(0)),i.actor.send(i.type+".coalesce",{source:r.source},null),e(t))}))},i.prototype.loaded=function(){return this._loaded},i.prototype.loadTile=function(e,i){var r=this,n=e.actor?"reloadTile":"loadTile";e.actor=this.actor,e.request=this.actor.send(n,{type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(t,o){return delete e.request,e.unloadVectorData(),e.aborted?i(null):t?i(t):(e.loadVectorData(o,r.map.painter,"reloadTile"===n),i(null))}))},i.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0},i.prototype.unloadTile=function(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})},i.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},i.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},i.prototype.hasTransition=function(){return!1},i}(t.Evented),M=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),k=function(e){function i(t,i,r,n){e.call(this),this.id=t,this.dispatcher=r,this.coordinates=i.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(n),this.options=i}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.load=function(e,i){var r=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),(function(n,o){r._loaded=!0,n?r.fire(new t.ErrorEvent(n)):o&&(r.image=o,e&&(r.coordinates=e),i&&i(),r._finishLoading())}))},i.prototype.loaded=function(){return this._loaded},i.prototype.updateImage=function(t){var e=this;return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,(function(){e.texture=null})),this):this},i.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},i.prototype.onAdd=function(t){this.map=t,this.load()},i.prototype.setCoordinates=function(e){var i=this;this.coordinates=e;var r=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){for(var i=1/0,r=1/0,n=-1/0,o=-1/0,a=0,s=e;a<s.length;a+=1){var u=s[a];i=Math.min(i,u.x),r=Math.min(r,u.y),n=Math.max(n,u.x),o=Math.max(o,u.y)}var l=Math.max(n-i,o-r),c=Math.max(0,Math.floor(-Math.log(l)/Math.LN2)),p=Math.pow(2,c);return new t.CanonicalTileID(c,Math.floor((i+n)/2*p),Math.floor((r+o)/2*p))}(r),this.minzoom=this.maxzoom=this.tileID.z;var n=r.map((function(t){return i.tileID.getTilePoint(t)._round()}));return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(n[0].x,n[0].y,0,0),this._boundsArray.emplaceBack(n[1].x,n[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(n[3].x,n[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(n[2].x,n[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},i.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,i=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,M.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var n=this.tiles[r];"loaded"!==n.state&&(n.state="loaded",n.texture=this.texture)}}},i.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},i.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return!1},i}(t.Evented),R=function(e){function i(t,i,r,n){e.call(this,t,i,r,n),this.roundZoom=!0,this.type="video",this.options=i}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.load=function(){var e=this;this._loaded=!1;var i=this.options;this.urls=[];for(var r=0,n=i.urls;r<n.length;r+=1)this.urls.push(this.map._requestManager.transformRequest(n[r],t.ResourceType.Source).url);t.getVideo(this.urls,(function(i,r){e._loaded=!0,i?e.fire(new t.ErrorEvent(i)):r&&(e.video=r,e.video.loop=!0,e.video.addEventListener("playing",(function(){e.map.triggerRepaint()})),e.map&&e.video.play(),e._finishLoading())}))},i.prototype.pause=function(){this.video&&this.video.pause()},i.prototype.play=function(){this.video&&this.video.play()},i.prototype.seek=function(e){if(this.video){var i=this.video.seekable;e<i.start(0)||e>i.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+i.start(0)+" and "+i.end(0)+"-second mark."))):this.video.currentTime=e}},i.prototype.getVideo=function(){return this.video},i.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},i.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,i=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,M.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var n=this.tiles[r];"loaded"!==n.state&&(n.state="loaded",n.texture=this.texture)}}},i.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this.video&&!this.video.paused},i}(k),N=function(e){function i(i,r,n,o){e.call(this,i,r,n,o),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some((function(t){return!Array.isArray(t)||2!==t.length||t.some((function(t){return"number"!=typeof t}))}))||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},i.prototype.getCanvas=function(){return this.canvas},i.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},i.prototype.onRemove=function(){this.pause()},i.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var i=this.map.painter.context,r=i.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,M.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(i,this.canvas,r.RGBA,{premultiply:!0}),this.tiles){var o=this.tiles[n];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}},i.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this._playing},i.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var i=e[t];if(isNaN(i)||i<=0)return!0}return!1},i}(k),D={vector:C,raster:P,"raster-dem":T,geojson:L,video:R,image:k,canvas:N};function O(e,i){var r=t.identity([]);return t.translate(r,r,[1,1,0]),t.scale(r,r,[.5*e.width,.5*e.height,1]),t.multiply(r,r,e.calculatePosMatrix(i.toUnwrapped()))}function z(t,e,i,r,n,o){var a=function(t,e,i){if(t)for(var r=0,n=t;r<n.length;r+=1){var o=e[n[r]];if(o&&o.source===i&&"fill-extrusion"===o.type)return!0}else for(var a in e){var s=e[a];if(s.source===i&&"fill-extrusion"===s.type)return!0}return!1}(n&&n.layers,e,t.id),s=o.maxPitchScaleFactor(),u=t.tilesIn(r,s,a);u.sort(F);for(var l=[],c=0,p=u;c<p.length;c+=1){var h=p[c];l.push({wrappedTileID:h.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(e,i,t._state,h.queryGeometry,h.cameraQueryGeometry,h.scale,n,o,s,O(t.transform,h.tileID))})}var d=function(t){for(var e={},i={},r=0,n=t;r<n.length;r+=1){var o=n[r],a=o.queryResults,s=o.wrappedTileID,u=i[s]=i[s]||{};for(var l in a)for(var c=a[l],p=u[l]=u[l]||{},h=e[l]=e[l]||[],d=0,f=c;d<f.length;d+=1){var _=f[d];p[_.featureIndex]||(p[_.featureIndex]=!0,h.push(_))}}return e}(l);for(var f in d)d[f].forEach((function(e){var i=e.feature,r=t.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=r}));return d}function F(t,e){var i=t.tileID,r=e.tileID;return i.overscaledZ-r.overscaledZ||i.canonical.y-r.canonical.y||i.wrap-r.wrap||i.canonical.x-r.canonical.x}var B=function(t,e){this.max=t,this.onRemove=e,this.reset()};B.prototype.reset=function(){for(var t in this.data)for(var e=0,i=this.data[t];e<i.length;e+=1){var r=i[e];r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}return this.data={},this.order=[],this},B.prototype.add=function(t,e,i){var r=this,n=t.wrapped().key;void 0===this.data[n]&&(this.data[n]=[]);var o={value:e,timeout:void 0};if(void 0!==i&&(o.timeout=setTimeout((function(){r.remove(t,o)}),i)),this.data[n].push(o),this.order.push(n),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},B.prototype.has=function(t){return t.wrapped().key in this.data},B.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},B.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},B.prototype.getByKey=function(t){var e=this.data[t];return e?e[0].value:null},B.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},B.prototype.remove=function(t,e){if(!this.has(t))return this;var i=t.wrapped().key,r=void 0===e?0:this.data[i].indexOf(e),n=this.data[i][r];return this.data[i].splice(r,1),n.timeout&&clearTimeout(n.timeout),0===this.data[i].length&&delete this.data[i],this.onRemove(n.value),this.order.splice(this.order.indexOf(i),1),this},B.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this},B.prototype.filter=function(t){var e=[];for(var i in this.data)for(var r=0,n=this.data[i];r<n.length;r+=1){var o=n[r];t(o.value)||e.push(o)}for(var a=0,s=e;a<s.length;a+=1){var u=s[a];this.remove(u.value.tileID,u)}};var q=function(t,e,i){this.context=t;var r=t.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(i),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};q.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},q.prototype.updateData=function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},q.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var U={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},V=function(t,e,i,r){this.length=e.length,this.attributes=i,this.itemSize=e.bytesPerElement,this.dynamicDraw=r,this.context=t;var n=t.gl;this.buffer=n.createBuffer(),t.bindVertexBuffer.set(this.buffer),n.bufferData(n.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};V.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},V.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},V.prototype.enableAttributes=function(t,e){for(var i=0;i<this.attributes.length;i++){var r=e.attributes[this.attributes[i].name];void 0!==r&&t.enableVertexAttribArray(r)}},V.prototype.setVertexAttribPointers=function(t,e,i){for(var r=0;r<this.attributes.length;r++){var n=this.attributes[r],o=e.attributes[n.name];void 0!==o&&t.vertexAttribPointer(o,n.components,t[U[n.type]],!1,this.itemSize,n.offset+this.itemSize*(i||0))}},V.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var G=function(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};G.prototype.get=function(){return this.current},G.prototype.set=function(t){},G.prototype.getDefault=function(){return this.default},G.prototype.setDefault=function(){this.set(this.default)};var j=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.getDefault=function(){return t.Color.transparent},i.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},i}(G),K=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 1},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)},e}(G),X=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)},e}(G),Z=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[!0,!0,!0,!0]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(G),Y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)},e}(G),H=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 255},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)},e}(G),W=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e.prototype.set=function(t){var e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)},e}(G),Q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)},e}(G),J=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}},e}(G),$=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[0,1]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)},e}(G),tt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}},e}(G),et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)},e}(G),it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}},e}(G),rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.ONE,t.ZERO]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)},e}(G),nt=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.getDefault=function(){return t.Color.transparent},i.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},i}(G),ot=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.FUNC_ADD},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)},e}(G),at=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}},e}(G),st=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)},e}(G),ut=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)},e}(G),lt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)},e}(G),ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)},e}(G),pt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(G),ht=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}},e}(G),dt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(G),ft=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}},e}(G),_t=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}},e}(G),gt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1},e}(G),mt=function(t){function e(e){t.call(this,e),this.vao=e.extVertexArrayObject}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)},e}(G),yt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 4},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}},e}(G),vt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}},e}(G),bt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}},e}(G),xt=function(t){function e(e,i){t.call(this,e),this.context=e,this.parent=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e}(G),wt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.setDirty=function(){this.dirty=!0},e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e}(xt),Et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(xt),St=function(t,e,i,r){this.context=t,this.width=e,this.height=i;var n=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new wt(t,n),r&&(this.depthAttachment=new Et(t,n))};St.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){var i=this.depthAttachment.get();i&&t.deleteRenderbuffer(i)}t.deleteFramebuffer(this.framebuffer)};var It=function(t,e,i){this.func=t,this.mask=e,this.range=i};It.ReadOnly=!1,It.ReadWrite=!0,It.disabled=new It(519,It.ReadOnly,[0,1]);var At=function(t,e,i,r,n,o){this.test=t,this.ref=e,this.mask=i,this.fail=r,this.depthFail=n,this.pass=o};At.disabled=new At({func:519,mask:0},0,0,7680,7680,7680);var Ct=function(t,e,i){this.blendFunction=t,this.blendColor=e,this.mask=i};Ct.disabled=new Ct(Ct.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),Ct.unblended=new Ct(Ct.Replace,t.Color.transparent,[!0,!0,!0,!0]),Ct.alphaBlended=new Ct([1,771],t.Color.transparent,[!0,!0,!0,!0]);var Pt=function(t,e,i){this.enable=t,this.mode=e,this.frontFace=i};Pt.disabled=new Pt(!1,1029,2305),Pt.backCCW=new Pt(!0,1029,2305);var Tt=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new j(this),this.clearDepth=new K(this),this.clearStencil=new X(this),this.colorMask=new Z(this),this.depthMask=new Y(this),this.stencilMask=new H(this),this.stencilFunc=new W(this),this.stencilOp=new Q(this),this.stencilTest=new J(this),this.depthRange=new $(this),this.depthTest=new tt(this),this.depthFunc=new et(this),this.blend=new it(this),this.blendFunc=new rt(this),this.blendColor=new nt(this),this.blendEquation=new ot(this),this.cullFace=new at(this),this.cullFaceSide=new st(this),this.frontFace=new ut(this),this.program=new lt(this),this.activeTexture=new ct(this),this.viewport=new pt(this),this.bindFramebuffer=new ht(this),this.bindRenderbuffer=new dt(this),this.bindTexture=new ft(this),this.bindVertexBuffer=new _t(this),this.bindElementBuffer=new gt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new mt(this),this.pixelStoreUnpack=new yt(this),this.pixelStoreUnpackPremultiplyAlpha=new vt(this),this.pixelStoreUnpackFlipY=new bt(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)};Tt.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Tt.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Tt.prototype.createIndexBuffer=function(t,e){return new q(this,t,e)},Tt.prototype.createVertexBuffer=function(t,e,i){return new V(this,t,e,i)},Tt.prototype.createRenderbuffer=function(t,e,i){var r=this.gl,n=r.createRenderbuffer();return this.bindRenderbuffer.set(n),r.renderbufferStorage(r.RENDERBUFFER,t,e,i),this.bindRenderbuffer.set(null),n},Tt.prototype.createFramebuffer=function(t,e,i){return new St(this,t,e,i)},Tt.prototype.clear=function(t){var e=t.color,i=t.depth,r=this.gl,n=0;e&&(n|=r.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==i&&(n|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(i),this.depthMask.set(!0)),r.clear(n)},Tt.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))},Tt.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},Tt.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},Tt.prototype.setColorMode=function(e){t.deepEqual(e.blendFunction,Ct.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},Tt.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Lt=function(e){function i(i,r,n){var o=this;e.call(this),this.id=i,this.dispatcher=n,this.on("data",(function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))})),this.on("error",(function(){o._sourceErrored=!0})),this._source=function(e,i,r,n){var o=new D[i.type](e,i,r,n);if(o.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+o.id);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o}(i,r,n,this),this._tiles={},this._cache=new B(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new t.SourceFeatureState}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},i.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},i.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},i.prototype.getSource=function(){return this._source},i.prototype.pause=function(){this._paused=!0},i.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},i.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},i.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,(function(){}))},i.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,(function(){}))},i.prototype.serialize=function(){return this._source.serialize()},i.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var i=this._tiles[e];i.upload(t),i.prepare(this.map.style.imageManager)}},i.prototype.getIds=function(){return t.values(this._tiles).map((function(t){return t.tileID})).sort(Mt).map((function(t){return t.key}))},i.prototype.getRenderableIds=function(e){var i=this,r=[];for(var n in this._tiles)this._isIdRenderable(n,e)&&r.push(this._tiles[n]);return e?r.sort((function(e,r){var n=e.tileID,o=r.tileID,a=new t.Point(n.canonical.x,n.canonical.y)._rotate(i.transform.angle),s=new t.Point(o.canonical.x,o.canonical.y)._rotate(i.transform.angle);return n.overscaledZ-o.overscaledZ||s.y-a.y||s.x-a.x})).map((function(t){return t.tileID.key})):r.map((function(t){return t.tileID})).sort(Mt).map((function(t){return t.key}))},i.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},i.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},i.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},i.prototype._reloadTile=function(t,e){var i=this._tiles[t];i&&("loading"!==i.state&&(i.state=e),this._loadTile(i,this._tileLoaded.bind(this,i,t,e)))},i.prototype._tileLoaded=function(e,i,r,n){if(n)return e.state="errored",void(404!==n.status?this._source.fire(new t.ErrorEvent(n,{tile:e})):this.update(this.transform));e.timeAdded=t.browser.now(),"expired"===r&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(i,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},i.prototype._backfillDEM=function(t){for(var e=this.getRenderableIds(),i=0;i<e.length;i++){var r=e[i];if(t.neighboringTiles&&t.neighboringTiles[r]){var n=this.getTileByID(r);o(t,n),o(n,t)}}function o(t,e){t.needsHillshadePrepare=!0;var i=e.tileID.canonical.x-t.tileID.canonical.x,r=e.tileID.canonical.y-t.tileID.canonical.y,n=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===i&&0===r||Math.abs(r)>1||(Math.abs(i)>1&&(1===Math.abs(i+n)?i+=n:1===Math.abs(i-n)&&(i-=n)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,i,r),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}},i.prototype.getTile=function(t){return this.getTileByID(t.key)},i.prototype.getTileByID=function(t){return this._tiles[t]},i.prototype._retainLoadedChildren=function(t,e,i,r){for(var n in this._tiles){var o=this._tiles[n];if(!(r[n]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>i)){for(var a=o.tileID;o&&o.tileID.overscaledZ>e+1;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[s.key])&&o.hasData()&&(a=s)}for(var u=a;u.overscaledZ>e;)if(t[(u=u.scaledTo(u.overscaledZ-1)).key]){r[a.key]=a;break}}}},i.prototype.findLoadedParent=function(t,e){if(t.key in this._loadedParentTiles){var i=this._loadedParentTiles[t.key];return i&&i.tileID.overscaledZ>=e?i:null}for(var r=t.overscaledZ-1;r>=e;r--){var n=t.scaledTo(r),o=this._getLoadedTile(n);if(o)return o}},i.prototype._getLoadedTile=function(t){var e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(t.wrapped().key)},i.prototype.updateCacheSize=function(t){var e=Math.ceil(t.width/this._source.tileSize)+1,i=Math.ceil(t.height/this._source.tileSize)+1,r=Math.floor(e*i*5),n="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(n)},i.prototype.handleWrapJump=function(t){var e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){var i={};for(var r in this._tiles){var n=this._tiles[r];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+e),i[n.tileID.key]=n}for(var o in this._tiles=i,this._timers)clearTimeout(this._timers[o]),delete this._timers[o];for(var a in this._tiles)this._setTileReloadTimer(a,this._tiles[a])}},i.prototype.update=function(e){var r=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var n;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?n=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)})):(n=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(n=n.filter((function(t){return r._source.hasTile(t)})))):n=[];var o=e.coveringZoomLevel(this._source),a=Math.max(o-i.maxOverzooming,this._source.minzoom),s=Math.max(o+i.maxUnderzooming,this._source.minzoom),u=this._updateRetainedTiles(n,o);if(kt(this._source.type)){for(var l={},c={},p=0,h=Object.keys(u);p<h.length;p+=1){var d=h[p],f=u[d],_=this._tiles[d];if(_&&!(_.fadeEndTime&&_.fadeEndTime<=t.browser.now())){var g=this.findLoadedParent(f,a);g&&(this._addTile(g.tileID),l[g.tileID.key]=g.tileID),c[d]=f}}for(var m in this._retainLoadedChildren(c,o,s,u),l)u[m]||(this._coveredTiles[m]=!0,u[m]=l[m])}for(var y in u)this._tiles[y].clearFadeHold();for(var v=0,b=t.keysDifference(this._tiles,u);v<b.length;v+=1){var x=b[v],w=this._tiles[x];w.hasSymbolBuckets&&!w.holdingForFade()?w.setHoldDuration(this.map._fadeDuration):w.hasSymbolBuckets&&!w.symbolFadeFinished()||this._removeTile(x)}this._updateLoadedParentTileCache()}},i.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},i.prototype._updateRetainedTiles=function(t,e){for(var r={},n={},o=Math.max(e-i.maxOverzooming,this._source.minzoom),a=Math.max(e+i.maxUnderzooming,this._source.minzoom),s={},u=0,l=t;u<l.length;u+=1){var c=l[u],p=this._addTile(c);r[c.key]=c,p.hasData()||e<this._source.maxzoom&&(s[c.key]=c)}this._retainLoadedChildren(s,e,a,r);for(var h=0,d=t;h<d.length;h+=1){var f=d[h],_=this._tiles[f.key];if(!_.hasData()){if(e+1>this._source.maxzoom){var g=f.children(this._source.maxzoom)[0],m=this.getTile(g);if(m&&m.hasData()){r[g.key]=g;continue}}else{var y=f.children(this._source.maxzoom);if(r[y[0].key]&&r[y[1].key]&&r[y[2].key]&&r[y[3].key])continue}for(var v=_.wasRequested(),b=f.overscaledZ-1;b>=o;--b){var x=f.scaledTo(b);if(n[x.key])break;if(n[x.key]=!0,!(_=this.getTile(x))&&v&&(_=this._addTile(x)),_&&(r[x.key]=x,v=_.wasRequested(),_.hasData()))break}}}return r},i.prototype._updateLoadedParentTileCache=function(){for(var t in this._loadedParentTiles={},this._tiles){for(var e=[],i=void 0,r=this._tiles[t].tileID;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){i=this._loadedParentTiles[r.key];break}e.push(r.key);var n=r.scaledTo(r.overscaledZ-1);if(i=this._getLoadedTile(n))break;r=n}for(var o=0,a=e;o<a.length;o+=1)this._loadedParentTiles[a[o]]=i}},i.prototype._addTile=function(e){var i=this._tiles[e.key];if(i)return i;(i=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,i),i.tileID=e,this._state.initializeTileState(i,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,i)));var r=Boolean(i);return r||(i=new t.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(i,this._tileLoaded.bind(this,i,e.key,i.state))),i?(i.uses++,this._tiles[e.key]=i,r||this._source.fire(new t.Event("dataloading",{tile:i,coord:i.tileID,dataType:"source"})),i):null},i.prototype._setTileReloadTimer=function(t,e){var i=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var r=e.getExpiryTimeout();r&&(this._timers[t]=setTimeout((function(){i._reloadTile(t,"expired"),delete i._timers[t]}),r))},i.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},i.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},i.prototype.tilesIn=function(e,i,r){var n=this,o=[],a=this.transform;if(!a)return o;for(var s=r?a.getCameraQueryGeometry(e):e,u=e.map((function(t){return a.pointCoordinate(t)})),l=s.map((function(t){return a.pointCoordinate(t)})),c=this.getIds(),p=1/0,h=1/0,d=-1/0,f=-1/0,_=0,g=l;_<g.length;_+=1){var m=g[_];p=Math.min(p,m.x),h=Math.min(h,m.y),d=Math.max(d,m.x),f=Math.max(f,m.y)}for(var y=function(e){var r=n._tiles[c[e]];if(!r.holdingForFade()){var s=r.tileID,_=Math.pow(2,a.zoom-r.tileID.overscaledZ),g=i*r.queryPadding*t.EXTENT/r.tileSize/_,m=[s.getTilePoint(new t.MercatorCoordinate(p,h)),s.getTilePoint(new t.MercatorCoordinate(d,f))];if(m[0].x-g<t.EXTENT&&m[0].y-g<t.EXTENT&&m[1].x+g>=0&&m[1].y+g>=0){var y=u.map((function(t){return s.getTilePoint(t)})),v=l.map((function(t){return s.getTilePoint(t)}));o.push({tile:r,tileID:s,queryGeometry:y,cameraQueryGeometry:v,scale:_})}}},v=0;v<c.length;v++)y(v);return o},i.prototype.getVisibleCoordinates=function(t){for(var e=this,i=this.getRenderableIds(t).map((function(t){return e._tiles[t].tileID})),r=0,n=i;r<n.length;r+=1){var o=n[r];o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped())}return i},i.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(kt(this._source.type))for(var e in this._tiles){var i=this._tiles[e];if(void 0!==i.fadeEndTime&&i.fadeEndTime>=t.browser.now())return!0}return!1},i.prototype.setFeatureState=function(t,e,i){this._state.updateState(t=t||"_geojsonTileLayer",e,i)},i.prototype.removeFeatureState=function(t,e,i){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,i)},i.prototype.getFeatureState=function(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)},i.prototype.setDependencies=function(t,e,i){var r=this._tiles[t];r&&r.setDependencies(e,i)},i.prototype.reloadTilesForDependencies=function(t,e){for(var i in this._tiles)this._tiles[i].hasDependency(t,e)&&this._reloadTile(i,"reloading");this._cache.filter((function(i){return!i.hasDependency(t,e)}))},i}(t.Evented);function Mt(t,e){var i=Math.abs(2*t.wrap)-+(t.wrap<0),r=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||r-i||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function kt(t){return"raster"===t||"image"===t||"video"===t}function Rt(){return new t.window.Worker(Yn.workerUrl)}Lt.maxOverzooming=10,Lt.maxUnderzooming=3;var Nt="mapboxgl_preloaded_worker_pool",Dt=function(){this.active={}};Dt.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<Dt.workerCount;)this.workers.push(new Rt);return this.active[t]=!0,this.workers.slice()},Dt.prototype.release=function(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((function(t){t.terminate()})),this.workers=null)},Dt.prototype.isPreloaded=function(){return!!this.active[Nt]},Dt.prototype.numActive=function(){return Object.keys(this.active).length};var Ot,zt=Math.floor(t.browser.hardwareConcurrency/2);function Ft(){return Ot||(Ot=new Dt),Ot}function Bt(e,i){var r={};for(var n in e)"ref"!==n&&(r[n]=e[n]);return t.refProperties.forEach((function(t){t in i&&(r[t]=i[t])})),r}function qt(t){t=t.slice();for(var e=Object.create(null),i=0;i<t.length;i++)e[t[i].id]=t[i];for(var r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=Bt(t[r],e[t[r].ref]));return t}Dt.workerCount=Math.max(Math.min(zt,6),1);var Ut={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Vt(t,e,i){i.push({command:Ut.addSource,args:[t,e[t]]})}function Gt(t,e,i){e.push({command:Ut.removeSource,args:[t]}),i[t]=!0}function jt(t,e,i,r){Gt(t,i,r),Vt(t,e,i)}function Kt(e,i,r){var n;for(n in e[r])if(e[r].hasOwnProperty(n)&&"data"!==n&&!t.deepEqual(e[r][n],i[r][n]))return!1;for(n in i[r])if(i[r].hasOwnProperty(n)&&"data"!==n&&!t.deepEqual(e[r][n],i[r][n]))return!1;return!0}function Xt(e,i,r,n,o,a){var s;for(s in i=i||{},e=e||{})e.hasOwnProperty(s)&&(t.deepEqual(e[s],i[s])||r.push({command:a,args:[n,s,i[s],o]}));for(s in i)i.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.deepEqual(e[s],i[s])||r.push({command:a,args:[n,s,i[s],o]}))}function Zt(t){return t.id}function Yt(t,e){return t[e.id]=e,t}var Ht=function(t,e){this.reset(t,e)};Ht.prototype.reset=function(t,e){this.points=t||[],this._distances=[0];for(var i=1;i<this.points.length;i++)this._distances[i]=this._distances[i-1]+this.points[i].dist(this.points[i-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Ht.prototype.lerp=function(e){if(1===this.points.length)return this.points[0];e=t.clamp(e,0,1);for(var i=1,r=this._distances[i],n=e*this.paddedLength+this.padding;r<n&&i<this._distances.length;)r=this._distances[++i];var o=i-1,a=this._distances[o],s=r-a,u=s>0?(n-a)/s:0;return this.points[o].mult(1-u).add(this.points[i].mult(u))};var Wt=function(t,e,i){var r=this.boxCells=[],n=this.circleCells=[];this.xCellCount=Math.ceil(t/i),this.yCellCount=Math.ceil(e/i);for(var o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),n.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};function Qt(e,i,r,n,o){var a=t.create();return i?(t.scale(a,a,[1/o,1/o,1]),r||t.rotateZ(a,a,n.angle)):t.multiply(a,n.labelPlaneMatrix,e),a}function Jt(e,i,r,n,o){if(i){var a=t.clone(e);return t.scale(a,a,[o,o,1]),r||t.rotateZ(a,a,-n.angle),a}return n.glCoordMatrix}function $t(e,i){var r=[e.x,e.y,0,1];ce(r,r,i);var n=r[3];return{point:new t.Point(r[0]/n,r[1]/n),signedDistanceFromCamera:n}}function te(t,e){return.5+t/e*.5}function ee(t,e){var i=t[0]/t[3],r=t[1]/t[3];return i>=-e[0]&&i<=e[0]&&r>=-e[1]&&r<=e[1]}function ie(e,i,r,n,o,a,s,u){var l=n?e.textSizeData:e.iconSizeData,c=t.evaluateSizeForZoom(l,r.transform.zoom),p=[256/r.width*2+1,256/r.height*2+1],h=n?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;h.clear();for(var d=e.lineVertexArray,f=n?e.text.placedSymbolArray:e.icon.placedSymbolArray,_=r.transform.width/r.transform.height,g=!1,m=0;m<f.length;m++){var y=f.get(m);if(y.hidden||y.writingMode===t.WritingMode.vertical&&!g)le(y.numGlyphs,h);else{g=!1;var v=[y.anchorX,y.anchorY,0,1];if(t.transformMat4(v,v,i),ee(v,p)){var b=te(r.transform.cameraToCenterDistance,v[3]),x=t.evaluateSizeForFeature(l,c,y),w=s?x/b:x*b,E=new t.Point(y.anchorX,y.anchorY),S=$t(E,o).point,I={},A=oe(y,w,!1,u,i,o,a,e.glyphOffsetArray,d,h,S,E,I,_);g=A.useVertical,(A.notEnoughRoom||g||A.needsFlipping&&oe(y,w,!0,u,i,o,a,e.glyphOffsetArray,d,h,S,E,I,_).notEnoughRoom)&&le(y.numGlyphs,h)}else le(y.numGlyphs,h)}}n?e.text.dynamicLayoutVertexBuffer.updateData(h):e.icon.dynamicLayoutVertexBuffer.updateData(h)}function re(t,e,i,r,n,o,a,s,u,l,c){var p=s.glyphStartIndex+s.numGlyphs,h=s.lineStartIndex,d=s.lineStartIndex+s.lineLength,f=e.getoffsetX(s.glyphStartIndex),_=e.getoffsetX(p-1),g=se(t*f,i,r,n,o,a,s.segment,h,d,u,l,c);if(!g)return null;var m=se(t*_,i,r,n,o,a,s.segment,h,d,u,l,c);return m?{first:g,last:m}:null}function ne(e,i,r,n){return e===t.WritingMode.horizontal&&Math.abs(r.y-i.y)>Math.abs(r.x-i.x)*n?{useVertical:!0}:(e===t.WritingMode.vertical?i.y<r.y:i.x>r.x)?{needsFlipping:!0}:null}function oe(e,i,r,n,o,a,s,u,l,c,p,h,d,f){var _,g=i/24,m=e.lineOffsetX*g,y=e.lineOffsetY*g;if(e.numGlyphs>1){var v=e.glyphStartIndex+e.numGlyphs,b=e.lineStartIndex,x=e.lineStartIndex+e.lineLength,w=re(g,u,m,y,r,p,h,e,l,a,d);if(!w)return{notEnoughRoom:!0};var E=$t(w.first.point,s).point,S=$t(w.last.point,s).point;if(n&&!r){var I=ne(e.writingMode,E,S,f);if(I)return I}_=[w.first];for(var A=e.glyphStartIndex+1;A<v-1;A++)_.push(se(g*u.getoffsetX(A),m,y,r,p,h,e.segment,b,x,l,a,d));_.push(w.last)}else{if(n&&!r){var C=$t(h,o).point,P=e.lineStartIndex+e.segment+1,T=new t.Point(l.getx(P),l.gety(P)),L=$t(T,o),M=L.signedDistanceFromCamera>0?L.point:ae(h,T,C,1,o),k=ne(e.writingMode,C,M,f);if(k)return k}var R=se(g*u.getoffsetX(e.glyphStartIndex),m,y,r,p,h,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,l,a,d);if(!R)return{notEnoughRoom:!0};_=[R]}for(var N=0,D=_;N<D.length;N+=1){var O=D[N];t.addDynamicAttributes(c,O.point,O.angle)}return{}}function ae(t,e,i,r,n){var o=$t(t.add(t.sub(e)._unit()),n).point,a=i.sub(o);return i.add(a._mult(r/a.mag()))}function se(e,i,r,n,o,a,s,u,l,c,p,h){var d=n?e-i:e+i,f=d>0?1:-1,_=0;n&&(f*=-1,_=Math.PI),f<0&&(_+=Math.PI);for(var g=f>0?u+s:u+s+1,m=o,y=o,v=0,b=0,x=Math.abs(d),w=[];v+b<=x;){if((g+=f)<u||g>=l)return null;if(y=m,w.push(m),void 0===(m=h[g])){var E=new t.Point(c.getx(g),c.gety(g)),S=$t(E,p);if(S.signedDistanceFromCamera>0)m=h[g]=S.point;else{var I=g-f;m=ae(0===v?a:new t.Point(c.getx(I),c.gety(I)),E,y,x-v+1,p)}}v+=b,b=y.dist(m)}var A=(x-v)/b,C=m.sub(y),P=C.mult(A)._add(y);P._add(C._unit()._perp()._mult(r*f));var T=_+Math.atan2(m.y-y.y,m.x-y.x);return w.push(P),{point:P,angle:T,path:w}}Wt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Wt.prototype.insert=function(t,e,i,r,n){this._forEachCell(e,i,r,n,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(r),this.bboxes.push(n)},Wt.prototype.insertCircle=function(t,e,i,r){this._forEachCell(e-r,i-r,e+r,i+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(i),this.circles.push(r)},Wt.prototype._insertBoxCell=function(t,e,i,r,n,o){this.boxCells[n].push(o)},Wt.prototype._insertCircleCell=function(t,e,i,r,n,o){this.circleCells[n].push(o)},Wt.prototype._query=function(t,e,i,r,n,o){if(i<0||t>this.width||r<0||e>this.height)return!n&&[];var a=[];if(t<=0&&e<=0&&this.width<=i&&this.height<=r){if(n)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var u=0;u<this.circleKeys.length;u++){var l=this.circles[3*u],c=this.circles[3*u+1],p=this.circles[3*u+2];a.push({key:this.circleKeys[u],x1:l-p,y1:c-p,x2:l+p,y2:c+p})}return o?a.filter(o):a}return this._forEachCell(t,e,i,r,this._queryCell,a,{hitTest:n,seenUids:{box:{},circle:{}}},o),n?a.length>0:a},Wt.prototype._queryCircle=function(t,e,i,r,n){var o=t-i,a=t+i,s=e-i,u=e+i;if(a<0||o>this.width||u<0||s>this.height)return!r&&[];var l=[];return this._forEachCell(o,s,a,u,this._queryCellCircle,l,{hitTest:r,circle:{x:t,y:e,radius:i},seenUids:{box:{},circle:{}}},n),r?l.length>0:l},Wt.prototype.query=function(t,e,i,r,n){return this._query(t,e,i,r,!1,n)},Wt.prototype.hitTest=function(t,e,i,r,n){return this._query(t,e,i,r,!0,n)},Wt.prototype.hitTestCircle=function(t,e,i,r){return this._queryCircle(t,e,i,!0,r)},Wt.prototype._queryCell=function(t,e,i,r,n,o,a,s){var u=a.seenUids,l=this.boxCells[n];if(null!==l)for(var c=this.bboxes,p=0,h=l;p<h.length;p+=1){var d=h[p];if(!u.box[d]){u.box[d]=!0;var f=4*d;if(t<=c[f+2]&&e<=c[f+3]&&i>=c[f+0]&&r>=c[f+1]&&(!s||s(this.boxKeys[d]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[d],x1:c[f],y1:c[f+1],x2:c[f+2],y2:c[f+3]})}}}var _=this.circleCells[n];if(null!==_)for(var g=this.circles,m=0,y=_;m<y.length;m+=1){var v=y[m];if(!u.circle[v]){u.circle[v]=!0;var b=3*v;if(this._circleAndRectCollide(g[b],g[b+1],g[b+2],t,e,i,r)&&(!s||s(this.circleKeys[v]))){if(a.hitTest)return o.push(!0),!0;var x=g[b],w=g[b+1],E=g[b+2];o.push({key:this.circleKeys[v],x1:x-E,y1:w-E,x2:x+E,y2:w+E})}}}},Wt.prototype._queryCellCircle=function(t,e,i,r,n,o,a,s){var u=a.circle,l=a.seenUids,c=this.boxCells[n];if(null!==c)for(var p=this.bboxes,h=0,d=c;h<d.length;h+=1){var f=d[h];if(!l.box[f]){l.box[f]=!0;var _=4*f;if(this._circleAndRectCollide(u.x,u.y,u.radius,p[_+0],p[_+1],p[_+2],p[_+3])&&(!s||s(this.boxKeys[f])))return o.push(!0),!0}}var g=this.circleCells[n];if(null!==g)for(var m=this.circles,y=0,v=g;y<v.length;y+=1){var b=v[y];if(!l.circle[b]){l.circle[b]=!0;var x=3*b;if(this._circlesCollide(m[x],m[x+1],m[x+2],u.x,u.y,u.radius)&&(!s||s(this.circleKeys[b])))return o.push(!0),!0}}},Wt.prototype._forEachCell=function(t,e,i,r,n,o,a,s){for(var u=this._convertToXCellCoord(t),l=this._convertToYCellCoord(e),c=this._convertToXCellCoord(i),p=this._convertToYCellCoord(r),h=u;h<=c;h++)for(var d=l;d<=p;d++)if(n.call(this,t,e,i,r,this.xCellCount*d+h,o,a,s))return},Wt.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},Wt.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},Wt.prototype._circlesCollide=function(t,e,i,r,n,o){var a=r-t,s=n-e,u=i+o;return u*u>a*a+s*s},Wt.prototype._circleAndRectCollide=function(t,e,i,r,n,o,a){var s=(o-r)/2,u=Math.abs(t-(r+s));if(u>s+i)return!1;var l=(a-n)/2,c=Math.abs(e-(n+l));if(c>l+i)return!1;if(u<=s||c<=l)return!0;var p=u-s,h=c-l;return p*p+h*h<=i*i};var ue=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function le(t,e){for(var i=0;i<t;i++){var r=e.length;e.resize(r+4),e.float32.set(ue,3*r)}}function ce(t,e,i){var r=e[0],n=e[1];return t[0]=i[0]*r+i[4]*n+i[12],t[1]=i[1]*r+i[5]*n+i[13],t[3]=i[3]*r+i[7]*n+i[15],t}var pe=function(t,e,i){void 0===e&&(e=new Wt(t.width+200,t.height+200,25)),void 0===i&&(i=new Wt(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=i,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};function he(e,i,r){return i*(t.EXTENT/(e.tileSize*Math.pow(2,r-e.tileID.overscaledZ)))}pe.prototype.placeCollisionBox=function(t,e,i,r,n){var o=this.projectAndGetPerspectiveRatio(r,t.anchorPointX,t.anchorPointY),a=i*o.perspectiveRatio,s=t.x1*a+o.point.x,u=t.y1*a+o.point.y,l=t.x2*a+o.point.x,c=t.y2*a+o.point.y;return!this.isInsideGrid(s,u,l,c)||!e&&this.grid.hitTest(s,u,l,c,n)?{box:[],offscreen:!1}:{box:[s,u,l,c],offscreen:this.isOffscreen(s,u,l,c)}},pe.prototype.placeCollisionCircles=function(e,i,r,n,o,a,s,u,l,c,p,h,d){var f=[],_=new t.Point(i.anchorX,i.anchorY),g=$t(_,a),m=te(this.transform.cameraToCenterDistance,g.signedDistanceFromCamera),y=(c?o/m:o*m)/t.ONE_EM,v=$t(_,s).point,b=re(y,n,i.lineOffsetX*y,i.lineOffsetY*y,!1,v,_,i,r,s,{}),x=!1,w=!1,E=!0;if(b){for(var S=.5*h*m+d,I=new t.Point(-100,-100),A=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),C=new Ht,P=b.first,T=b.last,L=[],M=P.path.length-1;M>=1;M--)L.push(P.path[M]);for(var k=1;k<T.path.length;k++)L.push(T.path[k]);var R=2.5*S;if(u){var N=L.map((function(t){return $t(t,u)}));L=N.some((function(t){return t.signedDistanceFromCamera<=0}))?[]:N.map((function(t){return t.point}))}var D=[];if(L.length>0){for(var O=L[0].clone(),z=L[0].clone(),F=1;F<L.length;F++)O.x=Math.min(O.x,L[F].x),O.y=Math.min(O.y,L[F].y),z.x=Math.max(z.x,L[F].x),z.y=Math.max(z.y,L[F].y);D=O.x>=I.x&&z.x<=A.x&&O.y>=I.y&&z.y<=A.y?[L]:z.x<I.x||O.x>A.x||z.y<I.y||O.y>A.y?[]:t.clipLine([L],I.x,I.y,A.x,A.y)}for(var B=0,q=D;B<q.length;B+=1){var U;C.reset(q[B],.25*S),U=C.length<=.5*S?1:Math.ceil(C.paddedLength/R)+1;for(var V=0;V<U;V++){var G=V/Math.max(U-1,1),j=C.lerp(G),K=j.x+100,X=j.y+100;f.push(K,X,S,0);var Z=K-S,Y=X-S,H=K+S,W=X+S;if(E=E&&this.isOffscreen(Z,Y,H,W),w=w||this.isInsideGrid(Z,Y,H,W),!e&&this.grid.hitTestCircle(K,X,S,p)&&(x=!0,!l))return{circles:[],offscreen:!1,collisionDetected:x}}}}return{circles:!l&&x||!w?[]:f,offscreen:E,collisionDetected:x}},pe.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var i=[],r=1/0,n=1/0,o=-1/0,a=-1/0,s=0,u=e;s<u.length;s+=1){var l=u[s],c=new t.Point(l.x+100,l.y+100);r=Math.min(r,c.x),n=Math.min(n,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y),i.push(c)}for(var p={},h={},d=0,f=this.grid.query(r,n,o,a).concat(this.ignoredGrid.query(r,n,o,a));d<f.length;d+=1){var _=f[d],g=_.key;if(void 0===p[g.bucketInstanceId]&&(p[g.bucketInstanceId]={}),!p[g.bucketInstanceId][g.featureIndex]){var m=[new t.Point(_.x1,_.y1),new t.Point(_.x2,_.y1),new t.Point(_.x2,_.y2),new t.Point(_.x1,_.y2)];t.polygonIntersectsPolygon(i,m)&&(p[g.bucketInstanceId][g.featureIndex]=!0,void 0===h[g.bucketInstanceId]&&(h[g.bucketInstanceId]=[]),h[g.bucketInstanceId].push(g.featureIndex))}}return h},pe.prototype.insertCollisionBox=function(t,e,i,r,n){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:i,featureIndex:r,collisionGroupID:n},t[0],t[1],t[2],t[3])},pe.prototype.insertCollisionCircles=function(t,e,i,r,n){for(var o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:i,featureIndex:r,collisionGroupID:n},s=0;s<t.length;s+=4)o.insertCircle(a,t[s],t[s+1],t[s+2])},pe.prototype.projectAndGetPerspectiveRatio=function(e,i,r){var n=[i,r,0,1];return ce(n,n,e),{point:new t.Point((n[0]/n[3]+1)/2*this.transform.width+100,(-n[1]/n[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/n[3]*.5}},pe.prototype.isOffscreen=function(t,e,i,r){return i<100||t>=this.screenRightBoundary||r<100||e>this.screenBottomBoundary},pe.prototype.isInsideGrid=function(t,e,i,r){return i>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary},pe.prototype.getViewportMatrix=function(){var e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e};var de=function(t,e,i,r){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):r&&i?1:0,this.placed=i};de.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var fe=function(t,e,i,r,n){this.text=new de(t?t.text:null,e,i,n),this.icon=new de(t?t.icon:null,e,r,n)};fe.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var _e=function(t,e,i){this.text=t,this.icon=e,this.skipFade=i},ge=function(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]},me=function(t,e,i,r,n){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=i,this.bucketIndex=r,this.tileID=n},ye=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};function ve(e,i,r,n,o){var a=t.getAnchorAlignment(e),s=-(a.horizontalAlign-.5)*i,u=-(a.verticalAlign-.5)*r,l=t.evaluateVariableOffset(e,n);return new t.Point(s+l[0]*o,u+l[1]*o)}function be(e,i,r,n,o,a){var s=e.x1,u=e.x2,l=e.y1,c=e.y2,p=e.anchorPointX,h=e.anchorPointY,d=new t.Point(i,r);return n&&d._rotate(o?a:-a),{x1:s+d.x,y1:l+d.y,x2:u+d.x,y2:c+d.y,anchorPointX:p,anchorPointY:h}}ye.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var xe=function(t,e,i,r){this.transform=t.clone(),this.collisionIndex=new pe(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new ye(i),this.collisionCircleArrays={},this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}};function we(t,e,i,r,n){t.emplaceBack(e?1:0,i?1:0,r||0,n||0),t.emplaceBack(e?1:0,i?1:0,r||0,n||0),t.emplaceBack(e?1:0,i?1:0,r||0,n||0),t.emplaceBack(e?1:0,i?1:0,r||0,n||0)}xe.prototype.getBucketParts=function(e,i,r,n){var o=r.getBucket(i),a=r.latestFeatureIndex;if(o&&a&&i.id===o.layerIds[0]){var s=r.collisionBoxArray,u=o.layers[0].layout,l=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),c=r.tileSize/t.EXTENT,p=this.transform.calculatePosMatrix(r.tileID.toUnwrapped()),h="map"===u.get("text-pitch-alignment"),d="map"===u.get("text-rotation-alignment"),f=he(r,1,this.transform.zoom),_=Qt(p,h,d,this.transform,f),g=null;if(h){var m=Jt(p,h,d,this.transform,f);g=t.multiply([],this.transform.labelPlaneMatrix,m)}this.retainedQueryData[o.bucketInstanceId]=new me(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,r.tileID);var y={bucket:o,layout:u,posMatrix:p,textLabelPlaneMatrix:_,labelToScreenMatrix:g,scale:l,textPixelRatio:c,holdingForFade:r.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(n)for(var v=0,b=o.sortKeyRanges;v<b.length;v+=1){var x=b[v];e.push({sortKey:x.sortKey,symbolInstanceStart:x.symbolInstanceStart,symbolInstanceEnd:x.symbolInstanceEnd,parameters:y})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:y})}},xe.prototype.attemptAnchorPlacement=function(t,e,i,r,n,o,a,s,u,l,c,p,h,d,f){var _,g=[p.textOffset0,p.textOffset1],m=ve(t,i,r,g,n),y=this.collisionIndex.placeCollisionBox(be(e,m.x,m.y,o,a,this.transform.angle),c,s,u,l.predicate);if(!f||0!==this.collisionIndex.placeCollisionBox(be(f,m.x,m.y,o,a,this.transform.angle),c,s,u,l.predicate).box.length)return y.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID].text&&(_=this.prevPlacement.variableOffsets[p.crossTileID].anchor),this.variableOffsets[p.crossTileID]={textOffset:g,width:i,height:r,anchor:t,textBoxScale:n,prevAnchor:_},this.markUsedJustification(h,t,p,d),h.allowVerticalPlacement&&(this.markUsedOrientation(h,d,p),this.placedOrientations[p.crossTileID]=d),{shift:m,placedGlyphBoxes:y}):void 0},xe.prototype.placeLayerBucketPart=function(e,i,r){var n=this,o=e.parameters,a=o.bucket,s=o.layout,u=o.posMatrix,l=o.textLabelPlaneMatrix,c=o.labelToScreenMatrix,p=o.textPixelRatio,h=o.holdingForFade,d=o.collisionBoxArray,f=o.partiallyEvaluatedTextSize,_=o.collisionGroup,g=s.get("text-optional"),m=s.get("icon-optional"),y=s.get("text-allow-overlap"),v=s.get("icon-allow-overlap"),b="map"===s.get("text-rotation-alignment"),x="map"===s.get("text-pitch-alignment"),w="none"!==s.get("icon-text-fit"),E="viewport-y"===s.get("symbol-z-order"),S=y&&(v||!a.hasIconData()||m),I=v&&(y||!a.hasTextData()||g);!a.collisionArrays&&d&&a.deserializeCollisionBoxes(d);var A=function(e,o){if(!i[e.crossTileID])if(h)n.placements[e.crossTileID]=new _e(!1,!1,!1);else{var d,E=!1,A=!1,C=!0,P=null,T={box:null,offscreen:null},L={box:null,offscreen:null},M=null,k=null,R=0,N=0,D=0;o.textFeatureIndex?R=o.textFeatureIndex:e.useRuntimeCollisionCircles&&(R=e.featureIndex),o.verticalTextFeatureIndex&&(N=o.verticalTextFeatureIndex);var O=o.textBox;if(O){var z=function(i){var r=t.WritingMode.horizontal;if(a.allowVerticalPlacement&&!i&&n.prevPlacement){var o=n.prevPlacement.placedOrientations[e.crossTileID];o&&(n.placedOrientations[e.crossTileID]=o,n.markUsedOrientation(a,r=o,e))}return r},F=function(i,r){if(a.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&o.verticalTextBox)for(var n=0,s=a.writingModes;n<s.length&&(s[n]===t.WritingMode.vertical?(T=r(),L=T):T=i(),!(T&&T.box&&T.box.length));n+=1);else T=i()};if(s.get("text-variable-anchor")){var B=s.get("text-variable-anchor");if(n.prevPlacement&&n.prevPlacement.variableOffsets[e.crossTileID]){var q=n.prevPlacement.variableOffsets[e.crossTileID];B.indexOf(q.anchor)>0&&(B=B.filter((function(t){return t!==q.anchor}))).unshift(q.anchor)}var U=function(t,i,r){for(var o=t.x2-t.x1,s=t.y2-t.y1,l=e.textBoxScale,c=w&&!v?i:null,h={box:[],offscreen:!1},d=y?2*B.length:B.length,f=0;f<d;++f){var g=n.attemptAnchorPlacement(B[f%B.length],t,o,s,l,b,x,p,u,_,f>=B.length,e,a,r,c);if(g&&(h=g.placedGlyphBoxes)&&h.box&&h.box.length){E=!0,P=g.shift;break}}return h};F((function(){return U(O,o.iconBox,t.WritingMode.horizontal)}),(function(){var i=o.verticalTextBox;return a.allowVerticalPlacement&&!(T&&T.box&&T.box.length)&&e.numVerticalGlyphVertices>0&&i?U(i,o.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}})),T&&(E=T.box,C=T.offscreen);var V=z(T&&T.box);if(!E&&n.prevPlacement){var G=n.prevPlacement.variableOffsets[e.crossTileID];G&&(n.variableOffsets[e.crossTileID]=G,n.markUsedJustification(a,G.anchor,e,V))}}else{var j=function(t,i){var r=n.collisionIndex.placeCollisionBox(t,y,p,u,_.predicate);return r&&r.box&&r.box.length&&(n.markUsedOrientation(a,i,e),n.placedOrientations[e.crossTileID]=i),r};F((function(){return j(O,t.WritingMode.horizontal)}),(function(){var i=o.verticalTextBox;return a.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&i?j(i,t.WritingMode.vertical):{box:null,offscreen:null}})),z(T&&T.box&&T.box.length)}}if(E=(d=T)&&d.box&&d.box.length>0,C=d&&d.offscreen,e.useRuntimeCollisionCircles){var K=a.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),X=t.evaluateSizeForFeature(a.textSizeData,f,K),Z=s.get("text-padding");M=n.collisionIndex.placeCollisionCircles(y,K,a.lineVertexArray,a.glyphOffsetArray,X,u,l,c,r,x,_.predicate,e.collisionCircleDiameter,Z),E=y||M.circles.length>0&&!M.collisionDetected,C=C&&M.offscreen}if(o.iconFeatureIndex&&(D=o.iconFeatureIndex),o.iconBox){var Y=function(t){var e=w&&P?be(t,P.x,P.y,b,x,n.transform.angle):t;return n.collisionIndex.placeCollisionBox(e,v,p,u,_.predicate)};A=L&&L.box&&L.box.length&&o.verticalIconBox?(k=Y(o.verticalIconBox)).box.length>0:(k=Y(o.iconBox)).box.length>0,C=C&&k.offscreen}var H=g||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,W=m||0===e.numIconVertices;if(H||W?W?H||(A=A&&E):E=A&&E:A=E=A&&E,E&&d&&d.box&&n.collisionIndex.insertCollisionBox(d.box,s.get("text-ignore-placement"),a.bucketInstanceId,L&&L.box&&N?N:R,_.ID),A&&k&&n.collisionIndex.insertCollisionBox(k.box,s.get("icon-ignore-placement"),a.bucketInstanceId,D,_.ID),M&&(E&&n.collisionIndex.insertCollisionCircles(M.circles,s.get("text-ignore-placement"),a.bucketInstanceId,R,_.ID),r)){var Q=a.bucketInstanceId,J=n.collisionCircleArrays[Q];void 0===J&&(J=n.collisionCircleArrays[Q]=new ge);for(var $=0;$<M.circles.length;$+=4)J.circles.push(M.circles[$+0]),J.circles.push(M.circles[$+1]),J.circles.push(M.circles[$+2]),J.circles.push(M.collisionDetected?1:0)}n.placements[e.crossTileID]=new _e(E||S,A||I,C||a.justReloaded),i[e.crossTileID]=!0}};if(E)for(var C=a.getSortedSymbolIndexes(this.transform.angle),P=C.length-1;P>=0;--P){var T=C[P];A(a.symbolInstances.get(T),a.collisionArrays[T])}else for(var L=e.symbolInstanceStart;L<e.symbolInstanceEnd;L++)A(a.symbolInstances.get(L),a.collisionArrays[L]);if(r&&a.bucketInstanceId in this.collisionCircleArrays){var M=this.collisionCircleArrays[a.bucketInstanceId];t.invert(M.invProjMatrix,u),M.viewportMatrix=this.collisionIndex.getViewportMatrix()}a.justReloaded=!1},xe.prototype.markUsedJustification=function(e,i,r,n){var o;o=n===t.WritingMode.vertical?r.verticalPlacedTextSymbolIndex:{left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(i)];for(var a=0,s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];a<s.length;a+=1){var u=s[a];u>=0&&(e.text.placedSymbolArray.get(u).crossTileID=o>=0&&u!==o?0:r.crossTileID)}},xe.prototype.markUsedOrientation=function(e,i,r){for(var n=i===t.WritingMode.horizontal||i===t.WritingMode.horizontalOnly?i:0,o=i===t.WritingMode.vertical?i:0,a=0,s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];a<s.length;a+=1)e.text.placedSymbolArray.get(s[a]).placedOrientation=n;r.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=o)},xe.prototype.commit=function(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;var e=this.prevPlacement,i=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;var r=e?e.symbolFadeChange(t):1,n=e?e.opacities:{},o=e?e.variableOffsets:{},a=e?e.placedOrientations:{};for(var s in this.placements){var u=this.placements[s],l=n[s];l?(this.opacities[s]=new fe(l,r,u.text,u.icon),i=i||u.text!==l.text.placed||u.icon!==l.icon.placed):(this.opacities[s]=new fe(null,r,u.text,u.icon,u.skipFade),i=i||u.text||u.icon)}for(var c in n){var p=n[c];if(!this.opacities[c]){var h=new fe(p,r,!1,!1);h.isHidden()||(this.opacities[c]=h,i=i||p.text.placed||p.icon.placed)}}for(var d in o)this.variableOffsets[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.variableOffsets[d]=o[d]);for(var f in a)this.placedOrientations[f]||!this.opacities[f]||this.opacities[f].isHidden()||(this.placedOrientations[f]=a[f]);i?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},xe.prototype.updateLayerOpacities=function(t,e){for(var i={},r=0,n=e;r<n.length;r+=1){var o=n[r],a=o.getBucket(t);a&&o.latestFeatureIndex&&t.id===a.layerIds[0]&&this.updateBucketOpacities(a,i,o.collisionBoxArray)}},xe.prototype.updateBucketOpacities=function(e,i,r){var n=this;e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();var o=e.layers[0].layout,a=new fe(null,0,!1,!1,!0),s=o.get("text-allow-overlap"),u=o.get("icon-allow-overlap"),l=o.get("text-variable-anchor"),c="map"===o.get("text-rotation-alignment"),p="map"===o.get("text-pitch-alignment"),h="none"!==o.get("icon-text-fit"),d=new fe(null,0,s&&(u||!e.hasIconData()||o.get("icon-optional")),u&&(s||!e.hasTextData()||o.get("text-optional")),!0);!e.collisionArrays&&r&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(r);for(var f=function(t,e,i){for(var r=0;r<e/4;r++)t.opacityVertexArray.emplaceBack(i)},_=function(r){var o=e.symbolInstances.get(r),s=o.numHorizontalGlyphVertices,u=o.numVerticalGlyphVertices,_=o.crossTileID,g=n.opacities[_];i[_]?g=a:g||(n.opacities[_]=g=d),i[_]=!0;var m=o.numIconVertices>0,y=n.placedOrientations[o.crossTileID],v=y===t.WritingMode.vertical,b=y===t.WritingMode.horizontal||y===t.WritingMode.horizontalOnly;if(s>0||u>0){var x=Le(g.text);f(e.text,s,v?Me:x),f(e.text,u,b?Me:x);var w=g.text.isHidden();[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach((function(t){t>=0&&(e.text.placedSymbolArray.get(t).hidden=w||v?1:0)})),o.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).hidden=w||b?1:0);var E=n.variableOffsets[o.crossTileID];E&&n.markUsedJustification(e,E.anchor,o,y);var S=n.placedOrientations[o.crossTileID];S&&(n.markUsedJustification(e,"left",o,S),n.markUsedOrientation(e,S,o))}if(m){var I=Le(g.icon),A=!(h&&o.verticalPlacedIconSymbolIndex&&v);o.placedIconSymbolIndex>=0&&(f(e.icon,o.numIconVertices,A?I:Me),e.icon.placedSymbolArray.get(o.placedIconSymbolIndex).hidden=g.icon.isHidden()),o.verticalPlacedIconSymbolIndex>=0&&(f(e.icon,o.numVerticalIconVertices,A?Me:I),e.icon.placedSymbolArray.get(o.verticalPlacedIconSymbolIndex).hidden=g.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){var C=e.collisionArrays[r];if(C){var P=new t.Point(0,0);if(C.textBox||C.verticalTextBox){var T=!0;if(l){var L=n.variableOffsets[_];L?(P=ve(L.anchor,L.width,L.height,L.textOffset,L.textBoxScale),c&&P._rotate(p?n.transform.angle:-n.transform.angle)):T=!1}C.textBox&&we(e.textCollisionBox.collisionVertexArray,g.text.placed,!T||v,P.x,P.y),C.verticalTextBox&&we(e.textCollisionBox.collisionVertexArray,g.text.placed,!T||b,P.x,P.y)}var M=Boolean(!b&&C.verticalIconBox);C.iconBox&&we(e.iconCollisionBox.collisionVertexArray,g.icon.placed,M,h?P.x:0,h?P.y:0),C.verticalIconBox&&we(e.iconCollisionBox.collisionVertexArray,g.icon.placed,!M,h?P.x:0,h?P.y:0)}}},g=0;g<e.symbolInstances.length;g++)_(g);if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.bucketInstanceId in this.collisionCircleArrays){var m=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=m.invProjMatrix,e.placementViewportMatrix=m.viewportMatrix,e.collisionCircleArray=m.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}},xe.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},xe.prototype.zoomAdjustment=function(t){return Math.max(0,(this.transform.zoom-t)/1.5)},xe.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},xe.prototype.stillRecent=function(t,e){var i=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*i>t},xe.prototype.setStale=function(){this.stale=!0};var Ee=Math.pow(2,25),Se=Math.pow(2,24),Ie=Math.pow(2,17),Ae=Math.pow(2,16),Ce=Math.pow(2,9),Pe=Math.pow(2,8),Te=Math.pow(2,1);function Le(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,i=Math.floor(127*t.opacity);return i*Ee+e*Se+i*Ie+e*Ae+i*Ce+e*Pe+i*Te+e}var Me=0,ke=function(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};ke.prototype.continuePlacement=function(t,e,i,r,n){for(var o=this._bucketParts;this._currentTileIndex<t.length;)if(e.getBucketParts(o,r,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,n())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort((function(t,e){return t.sortKey-e.sortKey})));this._currentPartIndex<o.length;)if(e.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,i),this._currentPartIndex++,n())return!0;return!1};var Re=function(t,e,i,r,n,o,a){this.placement=new xe(t,n,o,a),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=r,this._done=!1};Re.prototype.isDone=function(){return this._done},Re.prototype.continuePlacement=function(e,i,r){for(var n=this,o=t.browser.now(),a=function(){var e=t.browser.now()-o;return!n._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var s=i[e[this._currentPlacementIndex]],u=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=u)&&(!s.maxzoom||s.maxzoom>u)){if(this._inProgressLayer||(this._inProgressLayer=new ke(s)),this._inProgressLayer.continuePlacement(r[s.source],this.placement,this._showCollisionBoxes,s,a))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Re.prototype.commit=function(t){return this.placement.commit(t),this.placement};var Ne=512/t.EXTENT/2,De=function(t,e,i){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=i;for(var r=0;r<e.length;r++){var n=e.get(r),o=n.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:n.crossTileID,coord:this.getScaledCoordinates(n,t)})}};De.prototype.getScaledCoordinates=function(e,i){var r=Ne/Math.pow(2,i.canonical.z-this.tileID.canonical.z);return{x:Math.floor((i.canonical.x*t.EXTENT+e.anchorX)*r),y:Math.floor((i.canonical.y*t.EXTENT+e.anchorY)*r)}},De.prototype.findMatches=function(t,e,i){for(var r=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),n=0;n<t.length;n++){var o=t.get(n);if(!o.crossTileID){var a=this.indexedSymbolInstances[o.key];if(a)for(var s=this.getScaledCoordinates(o,e),u=0,l=a;u<l.length;u+=1){var c=l[u];if(Math.abs(c.coord.x-s.x)<=r&&Math.abs(c.coord.y-s.y)<=r&&!i[c.crossTileID]){i[c.crossTileID]=!0,o.crossTileID=c.crossTileID;break}}}}};var Oe=function(){this.maxCrossTileID=0};Oe.prototype.generate=function(){return++this.maxCrossTileID};var ze=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};ze.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var i in this.indexes){var r=this.indexes[i],n={};for(var o in r){var a=r[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),n[a.tileID.key]=a}this.indexes[i]=n}this.lng=t},ze.prototype.addBucket=function(t,e,i){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var r=0;r<e.symbolInstances.length;r++)e.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var n=this.usedCrossTileIDs[t.overscaledZ];for(var o in this.indexes){var a=this.indexes[o];if(Number(o)>t.overscaledZ)for(var s in a){var u=a[s];u.tileID.isChildOf(t)&&u.findMatches(e.symbolInstances,t,n)}else{var l=a[t.scaledTo(Number(o)).key];l&&l.findMatches(e.symbolInstances,t,n)}}for(var c=0;c<e.symbolInstances.length;c++){var p=e.symbolInstances.get(c);p.crossTileID||(p.crossTileID=i.generate(),n[p.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new De(t,e.symbolInstances,e.bucketInstanceId),!0},ze.prototype.removeBucketCrossTileIDs=function(t,e){for(var i in e.indexedSymbolInstances)for(var r=0,n=e.indexedSymbolInstances[i];r<n.length;r+=1)delete this.usedCrossTileIDs[t][n[r].crossTileID]},ze.prototype.removeStaleBuckets=function(t){var e=!1;for(var i in this.indexes){var r=this.indexes[i];for(var n in r)t[r[n].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,r[n]),delete r[n],e=!0)}return e};var Fe=function(){this.layerIndexes={},this.crossTileIDs=new Oe,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Fe.prototype.addLayer=function(t,e,i){var r=this.layerIndexes[t.id];void 0===r&&(r=this.layerIndexes[t.id]=new ze);var n=!1,o={};r.handleWrapJump(i);for(var a=0,s=e;a<s.length;a+=1){var u=s[a],l=u.getBucket(t);l&&t.id===l.layerIds[0]&&(l.bucketInstanceId||(l.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(u.tileID,l,this.crossTileIDs)&&(n=!0),o[l.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(n=!0),n},Fe.prototype.pruneUnusedLayers=function(t){var e={};for(var i in t.forEach((function(t){e[t]=!0})),this.layerIndexes)e[i]||delete this.layerIndexes[i]};var Be=function(e,i){return t.emitValidationErrors(e,i&&i.filter((function(t){return"source.canvas"!==t.identifier})))},qe=t.pick(Ut,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ue=t.pick(Ut,["setCenter","setZoom","setBearing","setPitch"]),Ve=function(){var e={},i=t.styleSpec.$version;for(var r in t.styleSpec.$root){var n,o=t.styleSpec.$root[r];o.required&&null!=(n="version"===r?i:"array"===o.type?[]:{})&&(e[r]=n)}return e}(),Ge=function(e){function i(r,n){var o=this;void 0===n&&(n={}),e.call(this),this.map=r,this.dispatcher=new S(Ft(),this),this.imageManager=new h,this.imageManager.setEventedParent(this),this.glyphManager=new v(r._requestManager,n.localIdeographFontFamily),this.lineAtlas=new E(256,512),this.crossTileSymbolIndex=new Fe,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var a=this;this._rtlTextPluginCallback=i.registerForPluginStateChange((function(e){a.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},(function(e,i){if(t.triggerPluginCompletionEvent(e),i&&i.every((function(t){return t})))for(var r in a.sourceCaches)a.sourceCaches[r].reload()}))})),this.on("data",(function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=o.sourceCaches[t.sourceId];if(e){var i=e.getSource();if(i&&i.vectorLayerIds)for(var r in o._layers){var n=o._layers[r];n.source===i.id&&o._validateLayer(n)}}}}))}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.loadURL=function(e,i){var r=this;void 0===i&&(i={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var n="boolean"==typeof i.validate?i.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,i.accessToken);var o=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(o,(function(e,i){r._request=null,e?r.fire(new t.ErrorEvent(e)):i&&r._load(i,n)}))},i.prototype.loadJSON=function(e,i){var r=this;void 0===i&&(i={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame((function(){r._request=null,r._load(e,!1!==i.validate)}))},i.prototype.loadEmpty=function(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(Ve,!1)},i.prototype._load=function(e,i){if(!i||!Be(this,t.validateStyle(e))){for(var r in this._loaded=!0,this.stylesheet=e,e.sources)this.addSource(r,e.sources[r],{validate:!1});e.sprite?this._loadSprite(e.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var n=qt(this.stylesheet.layers);this._order=n.map((function(t){return t.id})),this._layers={},this._serializedLayers={};for(var o=0,a=n;o<a.length;o+=1){var s=a[o];(s=t.createStyleLayer(s)).setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=s,this._serializedLayers[s.id]=s.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},i.prototype._loadSprite=function(e){var i=this;this._spriteRequest=function(e,i,r){var n,o,a,s=t.browser.devicePixelRatio>1?"@2x":"",u=t.getJSON(i.transformRequest(i.normalizeSpriteURL(e,s,".json"),t.ResourceType.SpriteJSON),(function(t,e){u=null,a||(a=t,n=e,c())})),l=t.getImage(i.transformRequest(i.normalizeSpriteURL(e,s,".png"),t.ResourceType.SpriteImage),(function(t,e){l=null,a||(a=t,o=e,c())}));function c(){if(a)r(a);else if(n&&o){var e=t.browser.getImageData(o),i={};for(var s in n){var u=n[s],l=u.width,c=u.height,p=u.x,h=u.y,d=u.sdf,f=u.pixelRatio,_=u.stretchX,g=u.stretchY,m=u.content,y=new t.RGBAImage({width:l,height:c});t.RGBAImage.copy(e,y,{x:p,y:h},{x:0,y:0},{width:l,height:c}),i[s]={data:y,pixelRatio:f,sdf:d,stretchX:_,stretchY:g,content:m}}r(null,i)}}return{cancel:function(){u&&(u.cancel(),u=null),l&&(l.cancel(),l=null)}}}(e,this.map._requestManager,(function(e,r){if(i._spriteRequest=null,e)i.fire(new t.ErrorEvent(e));else if(r)for(var n in r)i.imageManager.addImage(n,r[n]);i.imageManager.setLoaded(!0),i._availableImages=i.imageManager.listImages(),i.dispatcher.broadcast("setImages",i._availableImages),i.fire(new t.Event("data",{dataType:"style"}))}))},i.prototype._validateLayer=function(e){var i=this.sourceCaches[e.source];if(i){var r=e.sourceLayer;if(r){var n=i.getSource();("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(r))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+r+'" does not exist on source "'+n.id+'" as specified by style layer "'+e.id+'"')))}}},i.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},i.prototype._serializeLayers=function(t){for(var e=[],i=0,r=t;i<r.length;i+=1){var n=this._layers[r[i]];"custom"!==n.type&&e.push(n.serialize())}return e},i.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},i.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},i.prototype.update=function(e){if(this._loaded){var i=this._changed;if(this._changed){var r=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);for(var o in(r.length||n.length)&&this._updateWorkerLayers(r,n),this._updatedSources){var a=this._updatedSources[o];"reload"===a?this._reloadSource(o):"clear"===a&&this._clearSource(o)}for(var s in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[s].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}for(var u in this.sourceCaches)this.sourceCaches[u].used=!1;for(var l=0,c=this._order;l<c.length;l+=1){var p=this._layers[c[l]];p.recalculate(e,this._availableImages),!p.isHidden(e.zoom)&&p.source&&(this.sourceCaches[p.source].used=!0)}this.light.recalculate(e),this.z=e.zoom,i&&this.fire(new t.Event("data",{dataType:"style"}))}},i.prototype._updateTilesForChangedImages=function(){var t=Object.keys(this._changedImages);if(t.length){for(var e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}},i.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},i.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},i.prototype.setState=function(e){var i=this;if(this._checkLoaded(),Be(this,t.validateStyle(e)))return!1;(e=t.clone$1(e)).layers=qt(e.layers);var r=function(e,i){if(!e)return[{command:Ut.setStyle,args:[i]}];var r=[];try{if(!t.deepEqual(e.version,i.version))return[{command:Ut.setStyle,args:[i]}];t.deepEqual(e.center,i.center)||r.push({command:Ut.setCenter,args:[i.center]}),t.deepEqual(e.zoom,i.zoom)||r.push({command:Ut.setZoom,args:[i.zoom]}),t.deepEqual(e.bearing,i.bearing)||r.push({command:Ut.setBearing,args:[i.bearing]}),t.deepEqual(e.pitch,i.pitch)||r.push({command:Ut.setPitch,args:[i.pitch]}),t.deepEqual(e.sprite,i.sprite)||r.push({command:Ut.setSprite,args:[i.sprite]}),t.deepEqual(e.glyphs,i.glyphs)||r.push({command:Ut.setGlyphs,args:[i.glyphs]}),t.deepEqual(e.transition,i.transition)||r.push({command:Ut.setTransition,args:[i.transition]}),t.deepEqual(e.light,i.light)||r.push({command:Ut.setLight,args:[i.light]});var n={},o=[];!function(e,i,r,n){var o;for(o in i=i||{},e=e||{})e.hasOwnProperty(o)&&(i.hasOwnProperty(o)||Gt(o,r,n));for(o in i)i.hasOwnProperty(o)&&(e.hasOwnProperty(o)?t.deepEqual(e[o],i[o])||("geojson"===e[o].type&&"geojson"===i[o].type&&Kt(e,i,o)?r.push({command:Ut.setGeoJSONSourceData,args:[o,i[o].data]}):jt(o,i,r,n)):Vt(o,i,r))}(e.sources,i.sources,o,n);var a=[];e.layers&&e.layers.forEach((function(t){n[t.source]?r.push({command:Ut.removeLayer,args:[t.id]}):a.push(t)})),r=r.concat(o),function(e,i,r){i=i||[];var n,o,a,s,u,l,c,p=(e=e||[]).map(Zt),h=i.map(Zt),d=e.reduce(Yt,{}),f=i.reduce(Yt,{}),_=p.slice(),g=Object.create(null);for(n=0,o=0;n<p.length;n++)f.hasOwnProperty(a=p[n])?o++:(r.push({command:Ut.removeLayer,args:[a]}),_.splice(_.indexOf(a,o),1));for(n=0,o=0;n<h.length;n++)_[_.length-1-n]!==(a=h[h.length-1-n])&&(d.hasOwnProperty(a)?(r.push({command:Ut.removeLayer,args:[a]}),_.splice(_.lastIndexOf(a,_.length-o),1)):o++,r.push({command:Ut.addLayer,args:[f[a],l=_[_.length-n]]}),_.splice(_.length-n,0,a),g[a]=!0);for(n=0;n<h.length;n++)if(s=d[a=h[n]],u=f[a],!g[a]&&!t.deepEqual(s,u))if(t.deepEqual(s.source,u.source)&&t.deepEqual(s["source-layer"],u["source-layer"])&&t.deepEqual(s.type,u.type)){for(c in Xt(s.layout,u.layout,r,a,null,Ut.setLayoutProperty),Xt(s.paint,u.paint,r,a,null,Ut.setPaintProperty),t.deepEqual(s.filter,u.filter)||r.push({command:Ut.setFilter,args:[a,u.filter]}),t.deepEqual(s.minzoom,u.minzoom)&&t.deepEqual(s.maxzoom,u.maxzoom)||r.push({command:Ut.setLayerZoomRange,args:[a,u.minzoom,u.maxzoom]}),s)s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Xt(s[c],u[c],r,a,c.slice(6),Ut.setPaintProperty):t.deepEqual(s[c],u[c])||r.push({command:Ut.setLayerProperty,args:[a,c,u[c]]}));for(c in u)u.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Xt(s[c],u[c],r,a,c.slice(6),Ut.setPaintProperty):t.deepEqual(s[c],u[c])||r.push({command:Ut.setLayerProperty,args:[a,c,u[c]]}))}else r.push({command:Ut.removeLayer,args:[a]}),l=_[_.lastIndexOf(a)+1],r.push({command:Ut.addLayer,args:[u,l]})}(a,i.layers,r)}catch(t){console.warn("Unable to compute style diff:",t),r=[{command:Ut.setStyle,args:[i]}]}return r}(this.serialize(),e).filter((function(t){return!(t.command in Ue)}));if(0===r.length)return!1;var n=r.filter((function(t){return!(t.command in qe)}));if(n.length>0)throw new Error("Unimplemented: "+n.map((function(t){return t.command})).join(", ")+".");return r.forEach((function(t){"setTransition"!==t.command&&i[t.command].apply(i,t.args)})),this.stylesheet=e,!0},i.prototype.addImage=function(e,i){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,i),this._afterImageUpdated(e)},i.prototype.updateImage=function(t,e){this.imageManager.updateImage(t,e)},i.prototype.getImage=function(t){return this.imageManager.getImage(t)},i.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this._afterImageUpdated(e)},i.prototype._afterImageUpdated=function(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))},i.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},i.prototype.addSource=function(e,i,r){var n=this;if(void 0===r&&(r={}),this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!i.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(i).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(i.type)>=0&&this._validate(t.validateStyle.source,"sources."+e,i,null,r))){this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);var o=this.sourceCaches[e]=new Lt(e,i,this.dispatcher);o.style=this,o.setEventedParent(this,(function(){return{isSourceLoaded:n.loaded(),source:o.serialize(),sourceId:e}})),o.onAdd(this.map),this._changed=!0}},i.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var i in this._layers)if(this._layers[i].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+i+'" is using it.')));var r=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],r.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),r.setEventedParent(null),r.clearTiles(),r.onRemove&&r.onRemove(this.map),this._changed=!0},i.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},i.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},i.prototype.addLayer=function(e,i,r){void 0===r&&(r={}),this._checkLoaded();var n=e.id;if(this.getLayer(n))this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" already exists on this map')));else{var o;if("custom"===e.type){if(Be(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(n,e.source),e=t.clone$1(e),e=t.extend(e,{source:n})),this._validate(t.validateStyle.layer,"layers."+n,e,{arrayIndex:-1},r))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:n}}),this._serializedLayers[o.id]=o.serialize()}var a=i?this._order.indexOf(i):this._order.length;if(i&&-1===a)this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" does not exist on this map.')));else{if(this._order.splice(a,0,n),this._layerOrderChanged=!0,this._layers[n]=o,this._removedLayers[n]&&o.source&&"custom"!==o.type){var s=this._removedLayers[n];delete this._removedLayers[n],s.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}},i.prototype.moveLayer=function(e,i){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==i){var r=this._order.indexOf(e);this._order.splice(r,1);var n=i?this._order.indexOf(i):this._order.length;i&&-1===n?this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" does not exist on this map.'))):(this._order.splice(n,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},i.prototype.removeLayer=function(e){this._checkLoaded();var i=this._layers[e];if(i){i.setEventedParent(null);var r=this._order.indexOf(e);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=i,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],i.onRemove&&i.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},i.prototype.getLayer=function(t){return this._layers[t]},i.prototype.hasLayer=function(t){return t in this._layers},i.prototype.setLayerZoomRange=function(e,i,r){this._checkLoaded();var n=this.getLayer(e);n?n.minzoom===i&&n.maxzoom===r||(null!=i&&(n.minzoom=i),null!=r&&(n.maxzoom=r),this._updateLayer(n)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},i.prototype.setFilter=function(e,i,r){void 0===r&&(r={}),this._checkLoaded();var n=this.getLayer(e);if(n){if(!t.deepEqual(n.filter,i))return null==i?(n.filter=void 0,void this._updateLayer(n)):void(this._validate(t.validateStyle.filter,"layers."+n.id+".filter",i,null,r)||(n.filter=t.clone$1(i),this._updateLayer(n)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},i.prototype.getFilter=function(e){return t.clone$1(this.getLayer(e).filter)},i.prototype.setLayoutProperty=function(e,i,r,n){void 0===n&&(n={}),this._checkLoaded();var o=this.getLayer(e);o?t.deepEqual(o.getLayoutProperty(i),r)||(o.setLayoutProperty(i,r,n),this._updateLayer(o)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getLayoutProperty=function(e,i){var r=this.getLayer(e);if(r)return r.getLayoutProperty(i);this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style.")))},i.prototype.setPaintProperty=function(e,i,r,n){void 0===n&&(n={}),this._checkLoaded();var o=this.getLayer(e);o?t.deepEqual(o.getPaintProperty(i),r)||(o.setPaintProperty(i,r,n)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},i.prototype.setFeatureState=function(e,i){this._checkLoaded();var r=e.source,n=e.sourceLayer,o=this.sourceCaches[r];if(void 0!==o){var a=o.getSource().type;"geojson"===a&&n?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==a||n?(void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),o.setFeatureState(n,e.id,i)):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},i.prototype.removeFeatureState=function(e,i){this._checkLoaded();var r=e.source,n=this.sourceCaches[r];if(void 0!==n){var o=n.getSource().type,a="vector"===o?e.sourceLayer:void 0;"vector"!==o||a?i&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):n.removeFeatureState(a,e.id,i):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},i.prototype.getFeatureState=function(e){this._checkLoaded();var i=e.source,r=e.sourceLayer,n=this.sourceCaches[i];if(void 0!==n){if("vector"!==n.getSource().type||r)return void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),n.getFeatureState(r,e.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+i+"' does not exist in the map's style.")))},i.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},i.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,(function(t){return t.serialize()})),layers:this._serializeLayers(this._order)},(function(t){return void 0!==t}))},i.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},i.prototype._flattenAndSortRenderedFeatures=function(t){for(var e=this,i=function(t){return"fill-extrusion"===e._layers[t].type},r={},n=[],o=this._order.length-1;o>=0;o--){var a=this._order[o];if(i(a)){r[a]=o;for(var s=0,u=t;s<u.length;s+=1){var l=u[s][a];if(l)for(var c=0,p=l;c<p.length;c+=1)n.push(p[c])}}}n.sort((function(t,e){return e.intersectionZ-t.intersectionZ}));for(var h=[],d=this._order.length-1;d>=0;d--){var f=this._order[d];if(i(f))for(var _=n.length-1;_>=0;_--){var g=n[_].feature;if(r[g.layer.id]<d)break;h.push(g),n.pop()}else for(var m=0,y=t;m<y.length;m+=1){var v=y[m][f];if(v)for(var b=0,x=v;b<x.length;b+=1)h.push(x[b].feature)}}return h},i.prototype.queryRenderedFeatures=function(e,i,r){i&&i.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",i.filter,null,i);var n={};if(i&&i.layers){if(!Array.isArray(i.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var o=0,a=i.layers;o<a.length;o+=1){var s=a[o],u=this._layers[s];if(!u)return this.fire(new t.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];n[u.source]=!0}}var l=[];for(var c in i.availableImages=this._availableImages,this.sourceCaches)i.layers&&!n[c]||l.push(z(this.sourceCaches[c],this._layers,this._serializedLayers,e,i,r));return this.placement&&l.push(function(t,e,i,r,n,o,a){for(var s={},u=o.queryRenderedSymbols(r),l=[],c=0,p=Object.keys(u).map(Number);c<p.length;c+=1)l.push(a[p[c]]);l.sort(F);for(var h=function(){var i=f[d],r=i.featureIndex.lookupSymbolFeatures(u[i.bucketInstanceId],e,i.bucketIndex,i.sourceLayerIndex,n.filter,n.layers,n.availableImages,t);for(var o in r){var a=s[o]=s[o]||[],l=r[o];l.sort((function(t,e){var r=i.featureSortOrder;if(r){var n=r.indexOf(t.featureIndex);return r.indexOf(e.featureIndex)-n}return e.featureIndex-t.featureIndex}));for(var c=0,p=l;c<p.length;c+=1)a.push(p[c])}},d=0,f=l;d<f.length;d+=1)h();var _=function(e){s[e].forEach((function(r){var n=r.feature,o=i[t[e].source].getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=o}))};for(var g in s)_(g);return s}(this._layers,this._serializedLayers,this.sourceCaches,e,i,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(l)},i.prototype.querySourceFeatures=function(e,i){i&&i.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",i.filter,null,i);var r=this.sourceCaches[e];return r?function(t,e){for(var i=t.getRenderableIds().map((function(e){return t.getTileByID(e)})),r=[],n={},o=0;o<i.length;o++){var a=i[o],s=a.tileID.canonical.key;n[s]||(n[s]=!0,a.querySourceFeatures(r,e))}return r}(r,i):[]},i.prototype.addSourceType=function(t,e,r){return i.getSourceType(t)?r(new Error('A source type called "'+t+'" already exists.')):(i.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},r):r(null,null))},i.prototype.getLight=function(){return this.light.getLight()},i.prototype.setLight=function(e,i){void 0===i&&(i={}),this._checkLoaded();var r=this.light.getLight(),n=!1;for(var o in e)if(!t.deepEqual(e[o],r[o])){n=!0;break}if(n){var a={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,i),this.light.updateTransitions(a)}},i.prototype._validate=function(e,i,r,n,o){return void 0===o&&(o={}),(!o||!1!==o.validate)&&Be(this,e.call(t.validateStyle,t.extend({key:i,style:this.serialize(),value:r,styleSpec:t.styleSpec},n)))},i.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[e].setEventedParent(null);for(var i in this.sourceCaches)this.sourceCaches[i].clearTiles(),this.sourceCaches[i].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},i.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},i.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},i.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},i.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},i.prototype._updatePlacement=function(e,i,r,n,o){void 0===o&&(o=!1);for(var a=!1,s=!1,u={},l=0,c=this._order;l<c.length;l+=1){var p=this._layers[c[l]];if("symbol"===p.type){if(!u[p.source]){var h=this.sourceCaches[p.source];u[p.source]=h.getRenderableIds(!0).map((function(t){return h.getTileByID(t)})).sort((function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)}))}var d=this.crossTileSymbolIndex.addLayer(p,u[p.source],e.center.lng);a=a||d}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((o=o||this._layerOrderChanged||0===r)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),e.zoom))&&(this.pauseablePlacement=new Re(e,this._order,o,i,r,n,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,u),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(var f=0,_=this._order;f<_.length;f+=1){var g=this._layers[_[f]];"symbol"===g.type&&this.placement.updateLayerOpacities(g,u[g.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},i.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},i.prototype.getImages=function(t,e,i){this.imageManager.getImages(e.icons,i),this._updateTilesForChangedImages();var r=this.sourceCaches[e.source];r&&r.setDependencies(e.tileID.key,e.type,e.icons)},i.prototype.getGlyphs=function(t,e,i){this.glyphManager.getGlyphs(e.stacks,i)},i.prototype.getResource=function(e,i,r){return t.makeRequest(i,r)},i}(t.Evented);Ge.getSourceType=function(t){return D[t]},Ge.setSourceType=function(t,e){D[t]=e},Ge.registerForPluginStateChange=t.registerForPluginStateChange;var je=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ke=mi("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Xe=mi("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ze=mi("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Ye=mi("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),He=mi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),We=mi("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Qe=mi("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Je=mi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),$e=mi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),ti=mi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),ei=mi("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),ii=mi("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),ri=mi("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),ni=mi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),oi=mi("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),ai=mi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),si=mi("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),ui=mi("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),li=mi("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),ci=mi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),pi=mi("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),hi=mi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),di=mi("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),fi=mi("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),_i=mi("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),gi=mi("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function mi(t,e){var i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=e.match(/attribute ([\w]+) ([\w]+)/g),n=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=o?o.concat(n):n,s={};return{fragmentSource:t=t.replace(i,(function(t,e,i,r,n){return s[n]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+n+"\nvarying "+i+" "+r+" "+n+";\n#else\nuniform "+i+" "+r+" u_"+n+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+n+"\n    "+i+" "+r+" "+n+" = u_"+n+";\n#endif\n"})),vertexSource:e=e.replace(i,(function(t,e,i,r,n){var o="float"===r?"vec2":"vec4",a=n.match(/color/)?"color":o;return s[n]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+n+"\nuniform lowp float u_"+n+"_t;\nattribute "+i+" "+o+" a_"+n+";\nvarying "+i+" "+r+" "+n+";\n#else\nuniform "+i+" "+r+" u_"+n+";\n#endif\n":"vec4"===a?"\n#ifndef HAS_UNIFORM_u_"+n+"\n    "+n+" = a_"+n+";\n#else\n    "+i+" "+r+" "+n+" = u_"+n+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+n+"\n    "+n+" = unpack_mix_"+a+"(a_"+n+", u_"+n+"_t);\n#else\n    "+i+" "+r+" "+n+" = u_"+n+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+n+"\nuniform lowp float u_"+n+"_t;\nattribute "+i+" "+o+" a_"+n+";\n#else\nuniform "+i+" "+r+" u_"+n+";\n#endif\n":"vec4"===a?"\n#ifndef HAS_UNIFORM_u_"+n+"\n    "+i+" "+r+" "+n+" = a_"+n+";\n#else\n    "+i+" "+r+" "+n+" = u_"+n+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+n+"\n    "+i+" "+r+" "+n+" = unpack_mix_"+a+"(a_"+n+", u_"+n+"_t);\n#else\n    "+i+" "+r+" "+n+" = u_"+n+";\n#endif\n"})),staticAttributes:r,staticUniforms:a}}var yi=Object.freeze({__proto__:null,prelude:Ke,background:Xe,backgroundPattern:Ze,circle:Ye,clippingMask:He,heatmap:We,heatmapTexture:Qe,collisionBox:Je,collisionCircle:$e,debug:ti,fill:ei,fillOutline:ii,fillOutlinePattern:ri,fillPattern:ni,fillExtrusion:oi,fillExtrusionPattern:ai,hillshadePrepare:si,hillshade:ui,line:li,lineGradient:ci,linePattern:pi,lineSDF:hi,raster:di,symbolIcon:fi,symbolSDF:_i,symbolTextAndIcon:gi}),vi=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function bi(t){for(var e=[],i=0;i<t.length;i++)if(null!==t[i]){var r=t[i].split(" ");e.push(r.pop())}return e}vi.prototype.bind=function(t,e,i,r,n,o,a,s){this.context=t;for(var u=this.boundPaintVertexBuffers.length!==r.length,l=0;!u&&l<r.length;l++)this.boundPaintVertexBuffers[l]!==r[l]&&(u=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===i&&!u&&this.boundIndexBuffer===n&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s?(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),n&&n.dynamicDraw&&n.bind(),s&&s.bind()):this.freshBind(e,i,r,n,o,a,s)},vi.prototype.freshBind=function(t,e,i,r,n,o,a){var s,u=t.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=r,this.boundVertexOffset=n,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=l.currentNumAttributes||0;for(var p=u;p<s;p++)c.disableVertexAttribArray(p)}e.enableAttributes(c,t);for(var h=0,d=i;h<d.length;h+=1)d[h].enableAttributes(c,t);o&&o.enableAttributes(c,t),a&&a.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,n);for(var f=0,_=i;f<_.length;f+=1){var g=_[f];g.bind(),g.setVertexAttribPointers(c,t,n)}o&&(o.bind(),o.setVertexAttribPointers(c,t,n)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,t,n)),l.currentNumAttributes=u},vi.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var xi=function(t,e,i,r,n,o){var a=t.gl;this.program=a.createProgram();for(var s=bi(i.staticAttributes),u=r?r.getBinderAttributes():[],l=s.concat(u),c=i.staticUniforms?bi(i.staticUniforms):[],p=r?r.getBinderUniforms():[],h=[],d=0,f=c.concat(p);d<f.length;d+=1){var _=f[d];h.indexOf(_)<0&&h.push(_)}var g=r?r.defines():[];o&&g.push("#define OVERDRAW_INSPECTOR;");var m=g.concat(Ke.fragmentSource,i.fragmentSource).join("\n"),y=g.concat(Ke.vertexSource,i.vertexSource).join("\n"),v=a.createShader(a.FRAGMENT_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(v,m),a.compileShader(v),a.attachShader(this.program,v);var b=a.createShader(a.VERTEX_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(b,y),a.compileShader(b),a.attachShader(this.program,b),this.attributes={};var x={};this.numAttributes=l.length;for(var w=0;w<this.numAttributes;w++)l[w]&&(a.bindAttribLocation(this.program,w,l[w]),this.attributes[l[w]]=w);a.linkProgram(this.program),a.deleteShader(b),a.deleteShader(v);for(var E=0;E<h.length;E++){var S=h[E];if(S&&!x[S]){var I=a.getUniformLocation(this.program,S);I&&(x[S]=I)}}this.fixedUniforms=n(t,x),this.binderUniforms=r?r.getUniforms(t,x):[]}}};function wi(t,e,i){var r=1/he(i,1,e.transform.tileZoom),n=Math.pow(2,i.tileID.overscaledZ),o=i.tileSize*Math.pow(2,e.transform.tileZoom)/n,a=o*(i.tileID.canonical.x+i.tileID.wrap*n),s=o*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[r,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}xi.prototype.draw=function(t,e,i,r,n,o,a,s,u,l,c,p,h,d,f,_){var g,m=t.gl;if(!this.failedToCreate){for(var y in t.program.set(this.program),t.setDepthMode(i),t.setStencilMode(r),t.setColorMode(n),t.setCullFace(o),this.fixedUniforms)this.fixedUniforms[y].set(a[y]);d&&d.setUniforms(t,this.binderUniforms,p,{zoom:h});for(var v=(g={},g[m.LINES]=2,g[m.TRIANGLES]=3,g[m.LINE_STRIP]=1,g)[e],b=0,x=c.get();b<x.length;b+=1){var w=x[b],E=w.vaos||(w.vaos={});(E[s]||(E[s]=new vi)).bind(t,this,u,d?d.getPaintVertexBuffers():[],l,w.vertexOffset,f,_),m.drawElements(e,w.primitiveLength*v,m.UNSIGNED_SHORT,w.primitiveOffset*v*2)}}};var Ei=function(e,i,r,n){var o=i.style.light,a=o.properties.get("position"),s=[a.x,a.y,a.z],u=t.create$1();"viewport"===o.properties.get("anchor")&&t.fromRotation(u,-i.transform.angle),t.transformMat3(s,s,u);var l=o.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[l.r,l.g,l.b],u_vertical_gradient:+r,u_opacity:n}},Si=function(e,i,r,n,o,a,s){return t.extend(Ei(e,i,r,n),wi(a,i,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8})},Ii=function(t){return{u_matrix:t}},Ai=function(e,i,r,n){return t.extend(Ii(e),wi(r,i,n))},Ci=function(t,e){return{u_matrix:t,u_world:e}},Pi=function(e,i,r,n,o){return t.extend(Ai(e,i,r,n),{u_world:o})},Ti=function(e,i,r,n){var o,a,s=e.transform;if("map"===n.paint.get("circle-pitch-alignment")){var u=he(r,1,s.zoom);o=!0,a=[u,u]}else o=!1,a=s.pixelsToGLUnits;return{u_camera_to_center_distance:s.cameraToCenterDistance,u_scale_with_map:+("map"===n.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(i.posMatrix,r,n.paint.get("circle-translate"),n.paint.get("circle-translate-anchor")),u_pitch_with_map:+o,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:a}},Li=function(t,e,i){var r=he(i,1,e.zoom),n=Math.pow(2,e.zoom-i.tileID.overscaledZ),o=i.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:r,u_extrude_scale:[e.pixelsToGLUnits[0]/(r*n),e.pixelsToGLUnits[1]/(r*n)],u_overscale_factor:o}},Mi=function(t,e,i){return{u_matrix:t,u_inv_matrix:e,u_camera_to_center_distance:i.cameraToCenterDistance,u_viewport_size:[i.width,i.height]}},ki=function(t,e,i){return void 0===i&&(i=1),{u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:i}},Ri=function(t){return{u_matrix:t}},Ni=function(t,e,i,r){return{u_matrix:t,u_extrude_scale:he(e,1,i),u_intensity:r}},Di=function(e,i,r){var n=e.transform;return{u_matrix:qi(e,i,r),u_ratio:1/he(i,1,n.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/n.pixelsToGLUnits[0],1/n.pixelsToGLUnits[1]]}},Oi=function(e,i,r,n){return t.extend(Di(e,i,r),{u_image:0,u_image_height:n})},zi=function(e,i,r,n){var o=e.transform,a=Bi(i,o);return{u_matrix:qi(e,i,r),u_texsize:i.imageAtlasTexture.size,u_ratio:1/he(i,1,o.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[a,n.fromScale,n.toScale],u_fade:n.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},Fi=function(e,i,r,n,o){var a=e.lineAtlas,s=Bi(i,e.transform),u="round"===r.layout.get("line-cap"),l=a.getDash(n.from,u),c=a.getDash(n.to,u),p=l.width*o.fromScale,h=c.width*o.toScale;return t.extend(Di(e,i,r),{u_patternscale_a:[s/p,-l.height/2],u_patternscale_b:[s/h,-c.height/2],u_sdfgamma:a.width/(256*Math.min(p,h)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:l.y,u_tex_y_b:c.y,u_mix:o.t})};function Bi(t,e){return 1/he(t,1,e.tileZoom)}function qi(t,e,i){return t.translatePosMatrix(e.tileID.posMatrix,e,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}var Ui=function(t,e,i,r,n){return{u_matrix:t,u_tl_parent:e,u_scale_parent:i,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*n.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:n.paint.get("raster-brightness-min"),u_brightness_high:n.paint.get("raster-brightness-max"),u_saturation_factor:(a=n.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=n.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:Vi(n.paint.get("raster-hue-rotate"))};var o,a};function Vi(t){t*=Math.PI/180;var e=Math.sin(t),i=Math.cos(t);return[(2*i+1)/3,(-Math.sqrt(3)*e-i+1)/3,(Math.sqrt(3)*e-i+1)/3]}var Gi,ji=function(t,e,i,r,n,o,a,s,u,l){var c=n.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:c.width/c.height,u_fade_change:n.options.fadeDuration?n.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+u,u_pitch_with_map:+r,u_texsize:l,u_texture:0}},Ki=function(e,i,r,n,o,a,s,u,l,c,p){var h=o.transform;return t.extend(ji(e,i,r,n,o,a,s,u,l,c),{u_gamma_scale:n?Math.cos(h._pitch)*h.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+p})},Xi=function(e,i,r,n,o,a,s,u,l,c){return t.extend(Ki(e,i,r,n,o,a,s,u,!0,l,!0),{u_texsize_icon:c,u_texture_icon:1})},Zi=function(t,e,i){return{u_matrix:t,u_opacity:e,u_color:i}},Yi=function(e,i,r,n,o,a){return t.extend(function(t,e,i,r){var n=i.imageManager.getPattern(t.from.toString()),o=i.imageManager.getPattern(t.to.toString()),a=i.imageManager.getPixelSize(),s=a.width,u=a.height,l=Math.pow(2,r.tileID.overscaledZ),c=r.tileSize*Math.pow(2,i.transform.tileZoom)/l,p=c*(r.tileID.canonical.x+r.tileID.wrap*l),h=c*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:n.tl,u_pattern_br_a:n.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[s,u],u_mix:e.t,u_pattern_size_a:n.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/he(r,1,i.transform.tileZoom),u_pixel_coord_upper:[p>>16,h>>16],u_pixel_coord_lower:[65535&p,65535&h]}}(n,a,r,o),{u_matrix:e,u_opacity:i})},Hi={fillExtrusion:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_lightpos:new t.Uniform3f(e,i.u_lightpos),u_lightintensity:new t.Uniform1f(e,i.u_lightintensity),u_lightcolor:new t.Uniform3f(e,i.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,i.u_vertical_gradient),u_opacity:new t.Uniform1f(e,i.u_opacity)}},fillExtrusionPattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_lightpos:new t.Uniform3f(e,i.u_lightpos),u_lightintensity:new t.Uniform1f(e,i.u_lightintensity),u_lightcolor:new t.Uniform3f(e,i.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,i.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,i.u_height_factor),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade),u_opacity:new t.Uniform1f(e,i.u_opacity)}},fill:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},fillPattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}},fillOutline:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world)}},fillOutlinePattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}},circle:function(e,i){return{u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,i.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,i.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},collisionBox:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,i.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,i.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,i.u_overscale_factor)}},collisionCircle:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_inv_matrix:new t.UniformMatrix4f(e,i.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(e,i.u_viewport_size)}},debug:function(e,i){return{u_color:new t.UniformColor(e,i.u_color),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_overlay:new t.Uniform1i(e,i.u_overlay),u_overlay_scale:new t.Uniform1f(e,i.u_overlay_scale)}},clippingMask:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},heatmap:function(e,i){return{u_extrude_scale:new t.Uniform1f(e,i.u_extrude_scale),u_intensity:new t.Uniform1f(e,i.u_intensity),u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},heatmapTexture:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world),u_image:new t.Uniform1i(e,i.u_image),u_color_ramp:new t.Uniform1i(e,i.u_color_ramp),u_opacity:new t.Uniform1f(e,i.u_opacity)}},hillshade:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_latrange:new t.Uniform2f(e,i.u_latrange),u_light:new t.Uniform2f(e,i.u_light),u_shadow:new t.UniformColor(e,i.u_shadow),u_highlight:new t.UniformColor(e,i.u_highlight),u_accent:new t.UniformColor(e,i.u_accent)}},hillshadePrepare:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_dimension:new t.Uniform2f(e,i.u_dimension),u_zoom:new t.Uniform1f(e,i.u_zoom),u_unpack:new t.Uniform4f(e,i.u_unpack)}},line:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels)}},lineGradient:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_image:new t.Uniform1i(e,i.u_image),u_image_height:new t.Uniform1f(e,i.u_image_height)}},linePattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_texsize:new t.Uniform2f(e,i.u_texsize),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_image:new t.Uniform1i(e,i.u_image),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}},lineSDF:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,i.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,i.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,i.u_sdfgamma),u_image:new t.Uniform1i(e,i.u_image),u_tex_y_a:new t.Uniform1f(e,i.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,i.u_tex_y_b),u_mix:new t.Uniform1f(e,i.u_mix)}},raster:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_tl_parent:new t.Uniform2f(e,i.u_tl_parent),u_scale_parent:new t.Uniform1f(e,i.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,i.u_buffer_scale),u_fade_t:new t.Uniform1f(e,i.u_fade_t),u_opacity:new t.Uniform1f(e,i.u_opacity),u_image0:new t.Uniform1i(e,i.u_image0),u_image1:new t.Uniform1i(e,i.u_image1),u_brightness_low:new t.Uniform1f(e,i.u_brightness_low),u_brightness_high:new t.Uniform1f(e,i.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,i.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,i.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,i.u_spin_weights)}},symbolIcon:function(e,i){return{u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texture:new t.Uniform1i(e,i.u_texture)}},symbolSDF:function(e,i){return{u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texture:new t.Uniform1i(e,i.u_texture),u_gamma_scale:new t.Uniform1f(e,i.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,i.u_is_halo)}},symbolTextAndIcon:function(e,i){return{u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texsize_icon:new t.Uniform2f(e,i.u_texsize_icon),u_texture:new t.Uniform1i(e,i.u_texture),u_texture_icon:new t.Uniform1i(e,i.u_texture_icon),u_gamma_scale:new t.Uniform1f(e,i.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,i.u_is_halo)}},background:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_opacity:new t.Uniform1f(e,i.u_opacity),u_color:new t.UniformColor(e,i.u_color)}},backgroundPattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_opacity:new t.Uniform1f(e,i.u_opacity),u_image:new t.Uniform1i(e,i.u_image),u_pattern_tl_a:new t.Uniform2f(e,i.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,i.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,i.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,i.u_pattern_br_b),u_texsize:new t.Uniform2f(e,i.u_texsize),u_mix:new t.Uniform1f(e,i.u_mix),u_pattern_size_a:new t.Uniform2f(e,i.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,i.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,i.u_scale_a),u_scale_b:new t.Uniform1f(e,i.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,i.u_tile_units_to_pixels)}}};function Wi(e,i,r,n,o,a,s){for(var u=e.context,l=u.gl,c=e.useProgram("collisionBox"),p=[],h=0,d=0,f=0;f<n.length;f++){var _=n[f],g=i.getTile(_),m=g.getBucket(r);if(m){var y=_.posMatrix;0===o[0]&&0===o[1]||(y=e.translatePosMatrix(_.posMatrix,g,o,a));var v=s?m.textCollisionBox:m.iconCollisionBox,b=m.collisionCircleArray;if(b.length>0){var x=t.create(),w=y;t.mul(x,m.placementInvProjMatrix,e.transform.glCoordMatrix),t.mul(x,x,m.placementViewportMatrix),p.push({circleArray:b,circleOffset:d,transform:w,invTransform:x}),d=h+=b.length/4}v&&c.draw(u,l.LINES,It.disabled,At.disabled,e.colorModeForRenderPass(),Pt.disabled,Li(y,e.transform,g),r.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,null,e.transform.zoom,null,null,v.collisionVertexBuffer)}}if(s&&p.length){var E=e.useProgram("collisionCircle"),S=new t.StructArrayLayout2f1f2i16;S.resize(4*h),S._trim();for(var I=0,A=0,C=p;A<C.length;A+=1)for(var P=C[A],T=0;T<P.circleArray.length/4;T++){var L=4*T,M=P.circleArray[L+0],k=P.circleArray[L+1],R=P.circleArray[L+2],N=P.circleArray[L+3];S.emplace(I++,M,k,R,N,0),S.emplace(I++,M,k,R,N,1),S.emplace(I++,M,k,R,N,2),S.emplace(I++,M,k,R,N,3)}(!Gi||Gi.length<2*h)&&(Gi=function(e){var i=2*e,r=new t.StructArrayLayout3ui6;r.resize(i),r._trim();for(var n=0;n<i;n++){var o=6*n;r.uint16[o+0]=4*n+0,r.uint16[o+1]=4*n+1,r.uint16[o+2]=4*n+2,r.uint16[o+3]=4*n+2,r.uint16[o+4]=4*n+3,r.uint16[o+5]=4*n+0}return r}(h));for(var D=u.createIndexBuffer(Gi,!0),O=u.createVertexBuffer(S,t.collisionCircleLayout.members,!0),z=0,F=p;z<F.length;z+=1){var B=F[z],q=Mi(B.transform,B.invTransform,e.transform);E.draw(u,l.TRIANGLES,It.disabled,At.disabled,e.colorModeForRenderPass(),Pt.disabled,q,r.id,O,D,t.SegmentVector.simpleSegment(0,2*B.circleOffset,B.circleArray.length,B.circleArray.length/2),null,e.transform.zoom,null,null,null)}O.destroy(),D.destroy()}}var Qi=t.identity(new Float32Array(16));function Ji(e,i,r,n,o,a){var s=t.getAnchorAlignment(e),u=-(s.horizontalAlign-.5)*i,l=-(s.verticalAlign-.5)*r,c=t.evaluateVariableOffset(e,n);return new t.Point((u/o+c[0])*a,(l/o+c[1])*a)}function $i(e,i,r,n,o,a,s,u,l,c,p){var h=e.text.placedSymbolArray,d=e.text.dynamicLayoutVertexArray,f=e.icon.dynamicLayoutVertexArray,_={};d.clear();for(var g=0;g<h.length;g++){var m=h.get(g),y=m.hidden||!m.crossTileID||e.allowVerticalPlacement&&!m.placedOrientation?null:n[m.crossTileID];if(y){var v=new t.Point(m.anchorX,m.anchorY),b=$t(v,r?u:s),x=te(a.cameraToCenterDistance,b.signedDistanceFromCamera),w=o.evaluateSizeForFeature(e.textSizeData,c,m)*x/t.ONE_EM;r&&(w*=e.tilePixelRatio/l);for(var E=Ji(y.anchor,y.width,y.height,y.textOffset,y.textBoxScale,w),S=r?$t(v.add(E),s).point:b.point.add(i?E.rotate(-a.angle):E),I=e.allowVerticalPlacement&&m.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,A=0;A<m.numGlyphs;A++)t.addDynamicAttributes(d,S,I);p&&m.associatedIconIndex>=0&&(_[m.associatedIconIndex]={shiftedAnchor:S,angle:I})}else le(m.numGlyphs,d)}if(p){f.clear();for(var C=e.icon.placedSymbolArray,P=0;P<C.length;P++){var T=C.get(P);if(T.hidden)le(T.numGlyphs,f);else{var L=_[P];if(L)for(var M=0;M<T.numGlyphs;M++)t.addDynamicAttributes(f,L.shiftedAnchor,L.angle);else le(T.numGlyphs,f)}}e.icon.dynamicLayoutVertexBuffer.updateData(f)}e.text.dynamicLayoutVertexBuffer.updateData(d)}function tr(t,e,i){return i.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function er(e,i,r,n,o,a,s,u,l,c,p,h){for(var d=e.context,f=d.gl,_=e.transform,g="map"===u,m="map"===l,y=g&&"point"!==r.layout.get("symbol-placement"),v=g&&!m&&!y,b=void 0!==r.layout.get("symbol-sort-key").constantOr(1),x=e.depthModeForSublayer(0,It.ReadOnly),w=r.layout.get("text-variable-anchor"),E=[],S=0,I=n;S<I.length;S+=1){var A=I[S],C=i.getTile(A),P=C.getBucket(r);if(P){var T=o?P.text:P.icon;if(T&&T.segments.get().length){var L=T.programConfigurations.get(r.id),M=o||P.sdfIcons,k=o?P.textSizeData:P.iconSizeData,R=m||0!==_.pitch,N=e.useProgram(tr(M,o,P),L),D=t.evaluateSizeForZoom(k,_.zoom),O=void 0,z=[0,0],F=void 0,B=void 0,q=null,U=void 0;if(o)F=C.glyphAtlasTexture,B=f.LINEAR,O=C.glyphAtlasTexture.size,P.iconsInText&&(z=C.imageAtlasTexture.size,q=C.imageAtlasTexture,U=R||e.options.rotating||e.options.zooming||"composite"===k.kind||"camera"===k.kind?f.LINEAR:f.NEAREST);else{var V=1!==r.layout.get("icon-size").constantOr(0)||P.iconsNeedLinear;F=C.imageAtlasTexture,B=M||e.options.rotating||e.options.zooming||V||R?f.LINEAR:f.NEAREST,O=C.imageAtlasTexture.size}var G=he(C,1,e.transform.zoom),j=Qt(A.posMatrix,m,g,e.transform,G),K=Jt(A.posMatrix,m,g,e.transform,G),X=w&&P.hasTextData(),Z="none"!==r.layout.get("icon-text-fit")&&X&&P.hasIconData();y&&ie(P,A.posMatrix,e,o,j,K,m,c);var Y=e.translatePosMatrix(A.posMatrix,C,a,s),H=y||o&&w||Z?Qi:j,W=e.translatePosMatrix(K,C,a,s,!0),Q=M&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1),J={program:N,buffers:T,uniformValues:M?P.iconsInText?Xi(k.kind,D,v,m,e,Y,H,W,O,z):Ki(k.kind,D,v,m,e,Y,H,W,o,O,!0):ji(k.kind,D,v,m,e,Y,H,W,o,O),atlasTexture:F,atlasTextureIcon:q,atlasInterpolation:B,atlasInterpolationIcon:U,isSDF:M,hasHalo:Q};if(b)for(var $=0,tt=T.segments.get();$<tt.length;$+=1){var et=tt[$];E.push({segments:new t.SegmentVector([et]),sortKey:et.sortKey,state:J})}else E.push({segments:T.segments,sortKey:0,state:J})}}}b&&E.sort((function(t,e){return t.sortKey-e.sortKey}));for(var it=0,rt=E;it<rt.length;it+=1){var nt=rt[it],ot=nt.state;if(d.activeTexture.set(f.TEXTURE0),ot.atlasTexture.bind(ot.atlasInterpolation,f.CLAMP_TO_EDGE),ot.atlasTextureIcon&&(d.activeTexture.set(f.TEXTURE1),ot.atlasTextureIcon&&ot.atlasTextureIcon.bind(ot.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),ot.isSDF){var at=ot.uniformValues;ot.hasHalo&&(at.u_is_halo=1,ir(ot.buffers,nt.segments,r,e,ot.program,x,p,h,at)),at.u_is_halo=0}ir(ot.buffers,nt.segments,r,e,ot.program,x,p,h,ot.uniformValues)}}function ir(t,e,i,r,n,o,a,s,u){var l=r.context;n.draw(l,l.gl.TRIANGLES,o,a,s,Pt.disabled,u,i.id,t.layoutVertexBuffer,t.indexBuffer,e,i.paint,r.transform.zoom,t.programConfigurations.get(i.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function rr(t,e,i,r,n,o,a){var s,u,l,c,p,h=t.context.gl,d=i.paint.get("fill-pattern"),f=d&&d.constantOr(1),_=i.getCrossfadeParameters();a?(u=f&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=h.LINES):(u=f?"fillPattern":"fill",s=h.TRIANGLES);for(var g=0,m=r;g<m.length;g+=1){var y=m[g],v=e.getTile(y);if(!f||v.patternsLoaded()){var b=v.getBucket(i);if(b){var x=b.programConfigurations.get(i.id),w=t.useProgram(u,x);f&&(t.context.activeTexture.set(h.TEXTURE0),v.imageAtlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE),x.updatePaintBuffers(_));var E=d.constantOr(null);if(E&&v.imageAtlas){var S=v.imageAtlas,I=S.patternPositions[E.to.toString()],A=S.patternPositions[E.from.toString()];I&&A&&x.setConstantPatternPositions(I,A)}var C=t.translatePosMatrix(y.posMatrix,v,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"));if(a){c=b.indexBuffer2,p=b.segments2;var P=[h.drawingBufferWidth,h.drawingBufferHeight];l="fillOutlinePattern"===u&&f?Pi(C,t,_,v,P):Ci(C,P)}else c=b.indexBuffer,p=b.segments,l=f?Ai(C,t,_,v):Ii(C);w.draw(t.context,s,n,t.stencilModeForClipping(y),o,Pt.disabled,l,i.id,b.layoutVertexBuffer,c,p,i.paint,t.transform.zoom,x)}}}}function nr(t,e,i,r,n,o,a){for(var s=t.context,u=s.gl,l=i.paint.get("fill-extrusion-pattern"),c=l.constantOr(1),p=i.getCrossfadeParameters(),h=i.paint.get("fill-extrusion-opacity"),d=0,f=r;d<f.length;d+=1){var _=f[d],g=e.getTile(_),m=g.getBucket(i);if(m){var y=m.programConfigurations.get(i.id),v=t.useProgram(c?"fillExtrusionPattern":"fillExtrusion",y);c&&(t.context.activeTexture.set(u.TEXTURE0),g.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),y.updatePaintBuffers(p));var b=l.constantOr(null);if(b&&g.imageAtlas){var x=g.imageAtlas,w=x.patternPositions[b.to.toString()],E=x.patternPositions[b.from.toString()];w&&E&&y.setConstantPatternPositions(w,E)}var S=t.translatePosMatrix(_.posMatrix,g,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),I=i.paint.get("fill-extrusion-vertical-gradient"),A=c?Si(S,t,I,h,_,p,g):Ei(S,t,I,h);v.draw(s,s.gl.TRIANGLES,n,o,a,Pt.backCCW,A,i.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,i.paint,t.transform.zoom,y)}}}function or(e,i,r,n,o,a){var s=e.context,u=s.gl,l=i.fbo;if(l){var c=e.useProgram("hillshade");s.activeTexture.set(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,l.colorAttachment.get());var p=function(e,i,r){var n=r.paint.get("hillshade-shadow-color"),o=r.paint.get("hillshade-highlight-color"),a=r.paint.get("hillshade-accent-color"),s=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===r.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);var u,l,c,p=!e.options.moving;return{u_matrix:e.transform.calculatePosMatrix(i.tileID.toUnwrapped(),p),u_image:0,u_latrange:(u=i.tileID,l=Math.pow(2,u.canonical.z),c=u.canonical.y,[new t.MercatorCoordinate(0,c/l).toLngLat().lat,new t.MercatorCoordinate(0,(c+1)/l).toLngLat().lat]),u_light:[r.paint.get("hillshade-exaggeration"),s],u_shadow:n,u_highlight:o,u_accent:a}}(e,i,r);c.draw(s,u.TRIANGLES,n,o,a,Pt.disabled,p,r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}}function ar(e,i,r,n,o,a){var s=e.context,u=s.gl,l=i.dem;if(l&&l.data){var c=l.dim,p=l.stride,h=l.getPixels();if(s.activeTexture.set(u.TEXTURE1),s.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||e.getTileTexture(p),i.demTexture){var d=i.demTexture;d.update(h,{premultiply:!1}),d.bind(u.NEAREST,u.CLAMP_TO_EDGE)}else i.demTexture=new t.Texture(s,h,u.RGBA,{premultiply:!1}),i.demTexture.bind(u.NEAREST,u.CLAMP_TO_EDGE);s.activeTexture.set(u.TEXTURE0);var f=i.fbo;if(!f){var _=new t.Texture(s,{width:c,height:c,data:null},u.RGBA);_.bind(u.LINEAR,u.CLAMP_TO_EDGE),(f=i.fbo=s.createFramebuffer(c,c,!0)).colorAttachment.set(_.texture)}s.bindFramebuffer.set(f.framebuffer),s.viewport.set([0,0,c,c]),e.useProgram("hillshadePrepare").draw(s,u.TRIANGLES,n,o,a,Pt.disabled,function(e,i){var r=i.stride,n=t.create();return t.ortho(n,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(n,n,[0,-t.EXTENT,0]),{u_matrix:n,u_image:1,u_dimension:[r,r],u_zoom:e.overscaledZ,u_unpack:i.getUnpackVector()}}(i.tileID,l),r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function sr(e,i,r,n,o){var a=n.paint.get("raster-fade-duration");if(a>0){var s=t.browser.now(),u=(s-e.timeAdded)/a,l=i?(s-i.timeAdded)/a:-1,c=r.getSource(),p=o.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!i||Math.abs(i.tileID.overscaledZ-p)>Math.abs(e.tileID.overscaledZ-p),d=h&&e.refreshedUponExpiration?1:t.clamp(h?u:1-l,0,1);return e.refreshedUponExpiration&&u>=1&&(e.refreshedUponExpiration=!1),i?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}var ur=new t.Color(1,0,0,1),lr=new t.Color(0,1,0,1),cr=new t.Color(0,0,1,1),pr=new t.Color(1,0,1,1),hr=new t.Color(0,1,1,1);function dr(t,e,i,r){_r(t,0,e+i/2,t.transform.width,i,r)}function fr(t,e,i,r){_r(t,e-i/2,0,i,t.transform.height,r)}function _r(e,i,r,n,o,a){var s=e.context,u=s.gl;u.enable(u.SCISSOR_TEST),u.scissor(i*t.browser.devicePixelRatio,r*t.browser.devicePixelRatio,n*t.browser.devicePixelRatio,o*t.browser.devicePixelRatio),s.clear({color:a}),u.disable(u.SCISSOR_TEST)}function gr(e,i,r){var n=e.context,o=n.gl,a=r.posMatrix,s=e.useProgram("debug"),u=It.disabled,l=At.disabled,c=e.colorModeForRenderPass();n.activeTexture.set(o.TEXTURE0),e.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),s.draw(n,o.LINE_STRIP,u,l,c,Pt.disabled,ki(a,t.Color.red),"$debug",e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);var p=i.getTileByID(r.key).latestRawTileData,h=Math.floor((p&&p.byteLength||0)/1024),d=i.getTile(r).tileSize,f=512/Math.min(d,512)*(r.overscaledZ/e.transform.zoom)*.5,_=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(_+=" => "+r.overscaledZ),function(t,e){t.initDebugOverlayCanvas();var i=t.debugOverlayCanvas,r=t.context.gl,n=t.debugOverlayCanvas.getContext("2d");n.clearRect(0,0,i.width,i.height),n.shadowColor="white",n.shadowBlur=2,n.lineWidth=1.5,n.strokeStyle="white",n.textBaseline="top",n.font="bold 36px Open Sans, sans-serif",n.fillText(e,5,5),n.strokeText(e,5,5),t.debugOverlayTexture.update(i),t.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(e,_+" "+h+"kb"),s.draw(n,o.TRIANGLES,u,l,Ct.alphaBlended,Pt.disabled,ki(a,t.Color.transparent,f),"$debug",e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments)}var mr={symbol:function(e,i,r,n,o){if("translucent"===e.renderPass){var a=At.disabled,s=e.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(e,i,r,n,o,a,s){for(var u=i.transform,l="map"===o,c="map"===a,p=0,h=e;p<h.length;p+=1){var d=h[p],f=n.getTile(d),_=f.getBucket(r);if(_&&_.text&&_.text.segments.get().length){var g=t.evaluateSizeForZoom(_.textSizeData,u.zoom),m=he(f,1,i.transform.zoom),y=Qt(d.posMatrix,c,l,i.transform,m),v="none"!==r.layout.get("icon-text-fit")&&_.hasIconData();if(g){var b=Math.pow(2,u.zoom-f.tileID.overscaledZ);$i(_,l,c,s,t.symbolSize,u,y,d.posMatrix,b,g,v)}}}}(n,e,r,i,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),o),0!==r.paint.get("icon-opacity").constantOr(1)&&er(e,i,r,n,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),a,s),0!==r.paint.get("text-opacity").constantOr(1)&&er(e,i,r,n,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),a,s),i.map.showCollisionBoxes&&(Wi(e,i,r,n,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),Wi(e,i,r,n,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))}},circle:function(e,i,r,n){if("translucent"===e.renderPass){var o=r.paint.get("circle-opacity"),a=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),u=void 0!==r.layout.get("circle-sort-key").constantOr(1);if(0!==o.constantOr(1)||0!==a.constantOr(1)&&0!==s.constantOr(1)){for(var l=e.context,c=l.gl,p=e.depthModeForSublayer(0,It.ReadOnly),h=At.disabled,d=e.colorModeForRenderPass(),f=[],_=0;_<n.length;_++){var g=n[_],m=i.getTile(g),y=m.getBucket(r);if(y){var v=y.programConfigurations.get(r.id),b={programConfiguration:v,program:e.useProgram("circle",v),layoutVertexBuffer:y.layoutVertexBuffer,indexBuffer:y.indexBuffer,uniformValues:Ti(e,g,m,r)};if(u)for(var x=0,w=y.segments.get();x<w.length;x+=1){var E=w[x];f.push({segments:new t.SegmentVector([E]),sortKey:E.sortKey,state:b})}else f.push({segments:y.segments,sortKey:0,state:b})}}u&&f.sort((function(t,e){return t.sortKey-e.sortKey}));for(var S=0,I=f;S<I.length;S+=1){var A=I[S],C=A.state;C.program.draw(l,c.TRIANGLES,p,h,d,Pt.disabled,C.uniformValues,r.id,C.layoutVertexBuffer,C.indexBuffer,A.segments,r.paint,e.transform.zoom,C.programConfiguration)}}}},heatmap:function(e,i,r,n){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var o=e.context,a=o.gl,s=At.disabled,u=new Ct([a.ONE,a.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,i){var r=t.gl;t.activeTexture.set(r.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var n=i.heatmapFbo;if(n)r.bindTexture(r.TEXTURE_2D,n.colorAttachment.get()),t.bindFramebuffer.set(n.framebuffer);else{var o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),n=i.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1),function(t,e,i,r){var n=t.gl;n.texImage2D(n.TEXTURE_2D,0,n.RGBA,e.width/4,e.height/4,0,n.RGBA,t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:n.UNSIGNED_BYTE,null),r.colorAttachment.set(i)}(t,e,o,n)}}(o,e,r),o.clear({color:t.Color.transparent});for(var l=0;l<n.length;l++){var c=n[l];if(!i.hasRenderableParent(c)){var p=i.getTile(c),h=p.getBucket(r);if(h){var d=h.programConfigurations.get(r.id);e.useProgram("heatmap",d).draw(o,a.TRIANGLES,It.disabled,s,u,Pt.disabled,Ni(c.posMatrix,p,e.transform.zoom,r.paint.get("heatmap-intensity")),r.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,r.paint,e.transform.zoom,d)}}}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,i){var r=e.context,n=r.gl,o=i.heatmapFbo;if(o){r.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(n.TEXTURE1);var a=i.colorRampTexture;a||(a=i.colorRampTexture=new t.Texture(r,i.colorRamp,n.RGBA)),a.bind(n.LINEAR,n.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(r,n.TRIANGLES,It.disabled,At.disabled,e.colorModeForRenderPass(),Pt.disabled,function(e,i,r,n){var o=t.create();t.ortho(o,0,e.width,e.height,0,0,1);var a=e.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:i.paint.get("heatmap-opacity")}}(e,i),i.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,i.paint,e.transform.zoom)}}(e,r))},line:function(e,i,r,n){if("translucent"===e.renderPass){var o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0!==o.constantOr(1)&&0!==a.constantOr(1))for(var s=e.depthModeForSublayer(0,It.ReadOnly),u=e.colorModeForRenderPass(),l=r.paint.get("line-dasharray"),c=r.paint.get("line-pattern"),p=c.constantOr(1),h=r.paint.get("line-gradient"),d=r.getCrossfadeParameters(),f=p?"linePattern":l?"lineSDF":h?"lineGradient":"line",_=e.context,g=_.gl,m=!0,y=0,v=n;y<v.length;y+=1){var b=v[y],x=i.getTile(b);if(!p||x.patternsLoaded()){var w=x.getBucket(r);if(w){var E=w.programConfigurations.get(r.id),S=e.context.program.get(),I=e.useProgram(f,E),A=m||I.program!==S,C=c.constantOr(null);if(C&&x.imageAtlas){var P=x.imageAtlas,T=P.patternPositions[C.to.toString()],L=P.patternPositions[C.from.toString()];T&&L&&E.setConstantPatternPositions(T,L)}var M=p?zi(e,x,r,d):l?Fi(e,x,r,l,d):h?Oi(e,x,r,w.lineClipsArray.length):Di(e,x,r);if(p)_.activeTexture.set(g.TEXTURE0),x.imageAtlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),E.updatePaintBuffers(d);else if(l&&(A||e.lineAtlas.dirty))_.activeTexture.set(g.TEXTURE0),e.lineAtlas.bind(_);else if(h){var k=w.gradients[r.id],R=k.texture;if(r.gradientVersion!==k.version){var N=256;if(r.stepInterpolant){var D=i.getSource().maxzoom,O=b.canonical.z===D?Math.ceil(1<<e.transform.maxZoom-b.canonical.z):1;N=t.clamp(t.nextPowerOfTwo(w.maxLineLength/t.EXTENT*1024*O),256,_.maxTextureSize)}k.gradient=t.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:N,image:k.gradient||void 0,clips:w.lineClipsArray}),k.texture?k.texture.update(k.gradient):k.texture=new t.Texture(_,k.gradient,g.RGBA),k.version=r.gradientVersion,R=k.texture}_.activeTexture.set(g.TEXTURE0),R.bind(r.stepInterpolant?g.NEAREST:g.LINEAR,g.CLAMP_TO_EDGE)}I.draw(_,g.TRIANGLES,s,e.stencilModeForClipping(b),u,Pt.disabled,M,r.id,w.layoutVertexBuffer,w.indexBuffer,w.segments,r.paint,e.transform.zoom,E,w.layoutVertexBuffer2),m=!1}}}}},fill:function(e,i,r,n){var o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0!==a.constantOr(1)){var s=e.colorModeForRenderPass(),u=r.paint.get("fill-pattern"),l=e.opaquePassEnabledForLayer()&&!u.constantOr(1)&&1===o.constantOr(t.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(e.renderPass===l){var c=e.depthModeForSublayer(1,"opaque"===e.renderPass?It.ReadWrite:It.ReadOnly);rr(e,i,r,n,c,s,!1)}if("translucent"===e.renderPass&&r.paint.get("fill-antialias")){var p=e.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,It.ReadOnly);rr(e,i,r,n,p,s,!0)}}},"fill-extrusion":function(t,e,i,r){var n=i.paint.get("fill-extrusion-opacity");if(0!==n&&"translucent"===t.renderPass){var o=new It(t.context.gl.LEQUAL,It.ReadWrite,t.depthRangeFor3D);if(1!==n||i.paint.get("fill-extrusion-pattern").constantOr(1))nr(t,e,i,r,o,At.disabled,Ct.disabled),nr(t,e,i,r,o,t.stencilModeFor3D(),t.colorModeForRenderPass());else{var a=t.colorModeForRenderPass();nr(t,e,i,r,o,At.disabled,a)}}},hillshade:function(t,e,i,r){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var n=t.context,o=t.depthModeForSublayer(0,It.ReadOnly),a=t.colorModeForRenderPass(),s="translucent"===t.renderPass?t.stencilConfigForOverlap(r):[{},r],u=s[0],l=0,c=s[1];l<c.length;l+=1){var p=c[l],h=e.getTile(p);h.needsHillshadePrepare&&"offscreen"===t.renderPass?ar(t,h,i,o,At.disabled,a):"translucent"===t.renderPass&&or(t,h,i,o,u[p.overscaledZ],a)}n.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,i,r){if("translucent"===t.renderPass&&0!==i.paint.get("raster-opacity")&&r.length)for(var n=t.context,o=n.gl,a=e.getSource(),s=t.useProgram("raster"),u=t.colorModeForRenderPass(),l=a instanceof k?[{},r]:t.stencilConfigForOverlap(r),c=l[0],p=l[1],h=p[p.length-1].overscaledZ,d=!t.options.moving,f=0,_=p;f<_.length;f+=1){var g=_[f],m=t.depthModeForSublayer(g.overscaledZ-h,1===i.paint.get("raster-opacity")?It.ReadWrite:It.ReadOnly,o.LESS),y=e.getTile(g),v=t.transform.calculatePosMatrix(g.toUnwrapped(),d);y.registerFadeDuration(i.paint.get("raster-fade-duration"));var b=e.findLoadedParent(g,0),x=sr(y,b,e,i,t.transform),w=void 0,E=void 0,S="nearest"===i.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;n.activeTexture.set(o.TEXTURE0),y.texture.bind(S,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),n.activeTexture.set(o.TEXTURE1),b?(b.texture.bind(S,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),w=Math.pow(2,b.tileID.overscaledZ-y.tileID.overscaledZ),E=[y.tileID.canonical.x*w%1,y.tileID.canonical.y*w%1]):y.texture.bind(S,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);var I=Ui(v,E||[0,0],w||1,x,i);a instanceof k?s.draw(n,o.TRIANGLES,m,At.disabled,u,Pt.disabled,I,i.id,a.boundsBuffer,t.quadTriangleIndexBuffer,a.boundsSegments):s.draw(n,o.TRIANGLES,m,c[g.overscaledZ],u,Pt.disabled,I,i.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,i){var r=i.paint.get("background-color"),n=i.paint.get("background-opacity");if(0!==n){var o=t.context,a=o.gl,s=t.transform,u=s.tileSize,l=i.paint.get("background-pattern");if(!t.isPatternMissing(l)){var c=!l&&1===r.a&&1===n&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===c){var p=At.disabled,h=t.depthModeForSublayer(0,"opaque"===c?It.ReadWrite:It.ReadOnly),d=t.colorModeForRenderPass(),f=t.useProgram(l?"backgroundPattern":"background"),_=s.coveringTiles({tileSize:u});l&&(o.activeTexture.set(a.TEXTURE0),t.imageManager.bind(t.context));for(var g=i.getCrossfadeParameters(),m=0,y=_;m<y.length;m+=1){var v=y[m],b=t.transform.calculatePosMatrix(v.toUnwrapped()),x=l?Yi(b,n,t,l,{tileID:v,tileSize:u},g):Zi(b,n,r);f.draw(o,a.TRIANGLES,h,p,d,Pt.disabled,x,i.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,i){for(var r=0;r<i.length;r++)gr(t,e,i[r])},custom:function(t,e,i){var r=t.context,n=i.implementation;if("offscreen"===t.renderPass){var o=n.prerender;o&&(t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),o.call(n,r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),r.setStencilMode(At.disabled);var a="3d"===n.renderingMode?new It(t.context.gl.LEQUAL,It.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,It.ReadOnly);r.setDepthMode(a),n.render(r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState(),r.bindFramebuffer.set(null)}}},yr=function(t,e){this.context=new Tt(t),this.transform=e,this._tileTextures={},this.setup(),this.numSublayers=Lt.maxUnderzooming+Lt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Fe,this.gpuTimers={}};yr.prototype.resize=function(e,i){if(this.width=e*t.browser.devicePixelRatio,this.height=i*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var r=0,n=this.style._order;r<n.length;r+=1)this.style._layers[n[r]].resize()},yr.prototype.setup=function(){var e=this.context,i=new t.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(t.EXTENT,0),i.emplaceBack(0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(i,je.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var r=new t.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(t.EXTENT,0),r.emplaceBack(0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(r,je.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var n=new t.StructArrayLayout4i8;n.emplaceBack(0,0,0,0),n.emplaceBack(t.EXTENT,0,t.EXTENT,0),n.emplaceBack(0,t.EXTENT,0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(n,M.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var o=new t.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,je.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var a=new t.StructArrayLayout1ui2;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);var s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s),this.emptyTexture=new t.Texture(e,{width:1,height:1,data:new Uint8Array([0,0,0,0])},e.gl.RGBA);var u=this.context.gl;this.stencilClearMode=new At({func:u.ALWAYS,mask:0},0,255,u.ZERO,u.ZERO,u.ZERO)},yr.prototype.clearStencil=function(){var e=this.context,i=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var r=t.create();t.ortho(r,0,this.width,this.height,0,0,1),t.scale(r,r,[i.drawingBufferWidth,i.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,i.TRIANGLES,It.disabled,this.stencilClearMode,Ct.disabled,Pt.disabled,Ri(r),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},yr.prototype._renderTileClippingMasks=function(t,e){if(this.currentStencilSource!==t.source&&t.isTileClipped()&&e&&e.length){this.currentStencilSource=t.source;var i=this.context,r=i.gl;this.nextStencilID+e.length>256&&this.clearStencil(),i.setColorMode(Ct.disabled),i.setDepthMode(It.disabled);var n=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var o=0,a=e;o<a.length;o+=1){var s=a[o],u=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;n.draw(i,r.TRIANGLES,It.disabled,new At({func:r.ALWAYS,mask:0},u,255,r.KEEP,r.KEEP,r.REPLACE),Ct.disabled,Pt.disabled,Ri(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},yr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,e=this.context.gl;return new At({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)},yr.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new At({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},yr.prototype.stencilConfigForOverlap=function(t){var e,i=this.context.gl,r=t.sort((function(t,e){return e.overscaledZ-t.overscaledZ})),n=r[r.length-1].overscaledZ,o=r[0].overscaledZ-n+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();for(var a={},s=0;s<o;s++)a[s+n]=new At({func:i.GEQUAL,mask:255},s+this.nextStencilID,255,i.KEEP,i.KEEP,i.REPLACE);return this.nextStencilID+=o,[a,r]}return[(e={},e[n]=At.disabled,e),r]},yr.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new Ct([e.CONSTANT_COLOR,e.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Ct.unblended:Ct.alphaBlended},yr.prototype.depthModeForSublayer=function(t,e,i){if(!this.opaquePassEnabledForLayer())return It.disabled;var r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new It(i||this.context.gl.LEQUAL,e,[r,r])},yr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},yr.prototype.render=function(e,i){var r=this;this.style=e,this.options=i,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var n=this.style._order,o=this.style.sourceCaches;for(var a in o){var s=o[a];s.used&&s.prepare(this.context)}var u,l,c={},p={},h={};for(var d in o){var f=o[d];c[d]=f.getVisibleCoordinates(),p[d]=c[d].slice().reverse(),h[d]=f.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var _=0;_<n.length;_++)if(this.style._layers[n[_]].is3D()){this.opaquePassCutoff=_;break}this.renderPass="offscreen";for(var g=0,m=n;g<m.length;g+=1){var y=this.style._layers[m[g]];if(y.hasOffscreenPass()&&!y.isHidden(this.transform.zoom)){var v=p[y.source];("custom"===y.type||v.length)&&this.renderLayer(this,o[y.source],y,v)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:i.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=i.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=n.length-1;this.currentLayer>=0;this.currentLayer--){var b=this.style._layers[n[this.currentLayer]],x=o[b.source],w=c[b.source];this._renderTileClippingMasks(b,w),this.renderLayer(this,x,b,w)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<n.length;this.currentLayer++){var E=this.style._layers[n[this.currentLayer]],S=o[E.source],I=("symbol"===E.type?h:p)[E.source];this._renderTileClippingMasks(E,c[E.source]),this.renderLayer(this,S,E,I)}this.options.showTileBoundaries&&(t.values(this.style._layers).forEach((function(t){t.source&&!t.isHidden(r.transform.zoom)&&(t.source!==(l&&l.id)&&(l=r.style.sourceCaches[t.source]),(!u||u.getSource().maxzoom<l.getSource().maxzoom)&&(u=l))})),u&&mr.debug(this,u,u.getVisibleCoordinates())),this.options.showPadding&&function(t){var e=t.transform.padding;dr(t,t.transform.height-(e.top||0),3,ur),dr(t,e.bottom||0,3,lr),fr(t,e.left||0,3,cr),fr(t,t.transform.width-(e.right||0),3,pr);var i=t.transform.centerPoint;!function(t,e,i,r){_r(t,e-1,i-10,2,20,r),_r(t,e-10,i-1,20,2,r)}(t,i.x,t.transform.height-i.y,hr)}(this),this.context.setDefault()},yr.prototype.renderLayer=function(t,e,i,r){i.isHidden(this.transform.zoom)||("background"===i.type||"custom"===i.type||r.length)&&(this.id=i.id,this.gpuTimingStart(i),mr[i.type](t,e,i,r,this.style.placement.variableOffsets),this.gpuTimingEnd())},yr.prototype.gpuTimingStart=function(t){if(this.options.gpuTiming){var e=this.context.extTimerQuery,i=this.gpuTimers[t.id];i||(i=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),i.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,i.query)}},yr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}},yr.prototype.collectGpuTimers=function(){var t=this.gpuTimers;return this.gpuTimers={},t},yr.prototype.queryGpuTimers=function(t){var e={};for(var i in t){var r=t[i],n=this.context.extTimerQuery,o=n.getQueryObjectEXT(r.query,n.QUERY_RESULT_EXT)/1e6;n.deleteQueryEXT(r.query),e[i]=o}return e},yr.prototype.translatePosMatrix=function(e,i,r,n,o){if(!r[0]&&!r[1])return e;var a=o?"map"===n?this.transform.angle:0:"viewport"===n?-this.transform.angle:0;if(a){var s=Math.sin(a),u=Math.cos(a);r=[r[0]*u-r[1]*s,r[0]*s+r[1]*u]}var l=[o?r[0]:he(i,r[0],this.transform.zoom),o?r[1]:he(i,r[1],this.transform.zoom),0],c=new Float32Array(16);return t.translate(c,e,l),c},yr.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},yr.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},yr.prototype.isPatternMissing=function(t){if(!t)return!1;if(!t.from||!t.to)return!0;var e=this.imageManager.getPattern(t.from.toString()),i=this.imageManager.getPattern(t.to.toString());return!e||!i},yr.prototype.useProgram=function(t,e){this.cache=this.cache||{};var i=""+t+(e?e.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[i]||(this.cache[i]=new xi(this.context,t,yi[t],e,Hi[t],this._showOverdrawInspector)),this.cache[i]},yr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},yr.prototype.setBaseState=function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)},yr.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},yr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var vr=function(t,e){this.points=t,this.planes=e};vr.fromInvProjectionMatrix=function(e,i,r){var n=Math.pow(2,r),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(i){return t.transformMat4([],i,e)})).map((function(e){return t.scale$1([],e,1/e[3]/i*n)})),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(e){var i=t.sub([],o[e[0]],o[e[1]]),r=t.sub([],o[e[2]],o[e[1]]),n=t.normalize([],t.cross([],i,r)),a=-t.dot(n,o[e[1]]);return n.concat(a)}));return new vr(o,a)};var br=function(e,i){this.min=e,this.max=i,this.center=t.scale$2([],t.add([],this.min,this.max),.5)};br.prototype.quadrant=function(e){for(var i=[e%2==0,e<2],r=t.clone$2(this.min),n=t.clone$2(this.max),o=0;o<i.length;o++)r[o]=i[o]?this.min[o]:this.center[o],n[o]=i[o]?this.center[o]:this.max[o];return n[2]=this.max[2],new br(r,n)},br.prototype.distanceX=function(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]},br.prototype.distanceY=function(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]},br.prototype.intersects=function(e){for(var i=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],r=!0,n=0;n<e.planes.length;n++){for(var o=e.planes[n],a=0,s=0;s<i.length;s++)a+=t.dot$1(o,i[s])>=0;if(0===a)return 0;a!==i.length&&(r=!1)}if(r)return 2;for(var u=0;u<3;u++){for(var l=Number.MAX_VALUE,c=-Number.MAX_VALUE,p=0;p<e.points.length;p++){var h=e.points[p][u]-this.min[u];l=Math.min(l,h),c=Math.max(c,h)}if(c<0||l>this.max[u]-this.min[u])return 0}return 1};var xr=function(t,e,i,r){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),isNaN(t)||t<0||isNaN(e)||e<0||isNaN(i)||i<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=i,this.right=r};xr.prototype.interpolate=function(e,i,r){return null!=i.top&&null!=e.top&&(this.top=t.number(e.top,i.top,r)),null!=i.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,i.bottom,r)),null!=i.left&&null!=e.left&&(this.left=t.number(e.left,i.left,r)),null!=i.right&&null!=e.right&&(this.right=t.number(e.right,i.right,r)),this},xr.prototype.getCenter=function(e,i){var r=t.clamp((this.left+e-this.right)/2,0,e),n=t.clamp((this.top+i-this.bottom)/2,0,i);return new t.Point(r,n)},xr.prototype.equals=function(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right},xr.prototype.clone=function(){return new xr(this.top,this.bottom,this.left,this.right)},xr.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var wr=function(e,i,r,n,o){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===o||o,this._minZoom=e||0,this._maxZoom=i||22,this._minPitch=null==r?0:r,this._maxPitch=null==n?60:n,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new xr,this._posMatrixCache={},this._alignedPosMatrixCache={}},Er={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};wr.prototype.clone=function(){var t=new wr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._calcMatrices(),t},Er.minZoom.get=function(){return this._minZoom},Er.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},Er.maxZoom.get=function(){return this._maxZoom},Er.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},Er.minPitch.get=function(){return this._minPitch},Er.minPitch.set=function(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))},Er.maxPitch.get=function(){return this._maxPitch},Er.maxPitch.set=function(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))},Er.renderWorldCopies.get=function(){return this._renderWorldCopies},Er.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},Er.worldSize.get=function(){return this.tileSize*this.scale},Er.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Er.size.get=function(){return new t.Point(this.width,this.height)},Er.bearing.get=function(){return-this.angle/Math.PI*180},Er.bearing.set=function(e){var i=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==i&&(this._unmodified=!1,this.angle=i,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Er.pitch.get=function(){return this._pitch/Math.PI*180},Er.pitch.set=function(e){var i=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==i&&(this._unmodified=!1,this._pitch=i,this._calcMatrices())},Er.fov.get=function(){return this._fov/Math.PI*180},Er.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},Er.zoom.get=function(){return this._zoom},Er.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},Er.center.get=function(){return this._center},Er.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},Er.padding.get=function(){return this._edgeInsets.toJSON()},Er.padding.set=function(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())},Er.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},wr.prototype.isPaddingEqual=function(t){return this._edgeInsets.equals(t)},wr.prototype.interpolatePadding=function(t,e,i){this._unmodified=!1,this._edgeInsets.interpolate(t,e,i),this._constrain(),this._calcMatrices()},wr.prototype.coveringZoomLevel=function(t){var e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)},wr.prototype.getVisibleUnwrappedCoordinates=function(e){var i=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var r=this.pointCoordinate(new t.Point(0,0)),n=this.pointCoordinate(new t.Point(this.width,0)),o=this.pointCoordinate(new t.Point(this.width,this.height)),a=this.pointCoordinate(new t.Point(0,this.height)),s=Math.floor(Math.min(r.x,n.x,o.x,a.x)),u=Math.floor(Math.max(r.x,n.x,o.x,a.x)),l=s-1;l<=u+1;l++)0!==l&&i.push(new t.UnwrappedTileID(l,e));return i},wr.prototype.coveringTiles=function(e){var i=this.coveringZoomLevel(e),r=i;if(void 0!==e.minzoom&&i<e.minzoom)return[];void 0!==e.maxzoom&&i>e.maxzoom&&(i=e.maxzoom);var n=t.MercatorCoordinate.fromLngLat(this.center),o=Math.pow(2,i),a=[o*n.x,o*n.y,0],s=vr.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i),u=e.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(u=i);var l=function(t){return{aabb:new br([t*o,0,0],[(t+1)*o,o,0]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}},c=[],p=[],h=i,d=e.reparseOverscaled?r:i;if(this._renderWorldCopies)for(var f=1;f<=3;f++)c.push(l(-f)),c.push(l(f));for(c.push(l(0));c.length>0;){var _=c.pop(),g=_.x,m=_.y,y=_.fullyVisible;if(!y){var v=_.aabb.intersects(s);if(0===v)continue;y=2===v}var b=_.aabb.distanceX(a),x=_.aabb.distanceY(a),w=Math.max(Math.abs(b),Math.abs(x));if(_.zoom===h||w>3+(1<<h-_.zoom)-2&&_.zoom>=u)p.push({tileID:new t.OverscaledTileID(_.zoom===h?d:_.zoom,_.wrap,_.zoom,g,m),distanceSq:t.sqrLen([a[0]-.5-g,a[1]-.5-m])});else for(var E=0;E<4;E++){var S=(g<<1)+E%2,I=(m<<1)+(E>>1);c.push({aabb:_.aabb.quadrant(E),zoom:_.zoom+1,x:S,y:I,wrap:_.wrap,fullyVisible:y})}}return p.sort((function(t,e){return t.distanceSq-e.distanceSq})).map((function(t){return t.tileID}))},wr.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},Er.unmodified.get=function(){return this._unmodified},wr.prototype.zoomScale=function(t){return Math.pow(2,t)},wr.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},wr.prototype.project=function(e){var i=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(i)*this.worldSize)},wr.prototype.unproject=function(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()},Er.point.get=function(){return this.project(this.center)},wr.prototype.setLocationAtPoint=function(e,i){var r=this.pointCoordinate(i),n=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e),a=new t.MercatorCoordinate(o.x-(r.x-n.x),o.y-(r.y-n.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())},wr.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},wr.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},wr.prototype.locationCoordinate=function(e){return t.MercatorCoordinate.fromLngLat(e)},wr.prototype.coordinateLocation=function(t){return t.toLngLat()},wr.prototype.pointCoordinate=function(e){var i=[e.x,e.y,0,1],r=[e.x,e.y,1,1];t.transformMat4(i,i,this.pixelMatrixInverse),t.transformMat4(r,r,this.pixelMatrixInverse);var n=i[3],o=r[3],a=i[1]/n,s=r[1]/o,u=i[2]/n,l=r[2]/o,c=u===l?0:(0-u)/(l-u);return new t.MercatorCoordinate(t.number(i[0]/n,r[0]/o,c)/this.worldSize,t.number(a,s,c)/this.worldSize)},wr.prototype.coordinatePoint=function(e){var i=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(i,i,this.pixelMatrix),new t.Point(i[0]/i[3],i[1]/i[3])},wr.prototype.getBounds=function(){return(new t.LngLatBounds).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},wr.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},wr.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},wr.prototype.calculatePosMatrix=function(e,i){void 0===i&&(i=!1);var r=e.key,n=i?this._alignedPosMatrixCache:this._posMatrixCache;if(n[r])return n[r];var o=e.canonical,a=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*e.wrap,u=t.identity(new Float64Array(16));return t.translate(u,u,[s*a,o.y*a,0]),t.scale(u,u,[a/t.EXTENT,a/t.EXTENT,1]),t.multiply(u,i?this.alignedProjMatrix:this.projMatrix,u),n[r]=new Float32Array(u),n[r]},wr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},wr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,i,r,n,o=-90,a=90,s=-180,u=180,l=this.size,c=this._unmodified;if(this.latRange){var p=this.latRange;o=t.mercatorYfromLat(p[1])*this.worldSize,e=(a=t.mercatorYfromLat(p[0])*this.worldSize)-o<l.y?l.y/(a-o):0}if(this.lngRange){var h=this.lngRange;s=t.mercatorXfromLng(h[0])*this.worldSize,i=(u=t.mercatorXfromLng(h[1])*this.worldSize)-s<l.x?l.x/(u-s):0}var d=this.point,f=Math.max(i||0,e||0);if(f)return this.center=this.unproject(new t.Point(i?(u+s)/2:d.x,e?(a+o)/2:d.y)),this.zoom+=this.scaleZoom(f),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var _=d.y,g=l.y/2;_-g<o&&(n=o+g),_+g>a&&(n=a-g)}if(this.lngRange){var m=d.x,y=l.x/2;m-y<s&&(r=s+y),m+y>u&&(r=u-y)}void 0===r&&void 0===n||(this.center=this.unproject(new t.Point(void 0!==r?r:d.x,void 0!==n?n:d.y))),this._unmodified=c,this._constraining=!1}},wr.prototype._calcMatrices=function(){if(this.height){var e=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var i=Math.PI/2+this._pitch,r=this._fov*(.5+e.y/this.height),n=Math.sin(r)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-i-r,.01,Math.PI-.01)),o=this.point,a=o.x,s=o.y,u=1.01*(Math.cos(Math.PI/2-this._pitch)*n+this.cameraToCenterDistance),l=this.height/50,c=new Float64Array(16);t.perspective(c,this._fov,this.width/this.height,l,u),c[8]=2*-e.x/this.width,c[9]=2*e.y/this.height,t.scale(c,c,[1,-1,1]),t.translate(c,c,[0,0,-this.cameraToCenterDistance]),t.rotateX(c,c,this._pitch),t.rotateZ(c,c,this.angle),t.translate(c,c,[-a,-s,0]),this.mercatorMatrix=t.scale([],c,[this.worldSize,this.worldSize,this.worldSize]),t.scale(c,c,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=c,this.invProjMatrix=t.invert([],this.projMatrix);var p=this.width%2/2,h=this.height%2/2,d=Math.cos(this.angle),f=Math.sin(this.angle),_=a-Math.round(a)+d*p+f*h,g=s-Math.round(s)+d*h+f*p,m=new Float64Array(c);if(t.translate(m,m,[_>.5?_-1:_,g>.5?g-1:g,0]),this.alignedProjMatrix=m,c=t.create(),t.scale(c,c,[this.width/2,-this.height/2,1]),t.translate(c,c,[1,-1,0]),this.labelPlaneMatrix=c,c=t.create(),t.scale(c,c,[1,-1,1]),t.translate(c,c,[-1,-1,0]),t.scale(c,c,[2/this.width,2/this.height,1]),this.glCoordMatrix=c,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(c=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=c,this._posMatrixCache={},this._alignedPosMatrixCache={}}},wr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.Point(0,0)),i=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(i,i,this.pixelMatrix)[3]/this.cameraToCenterDistance},wr.prototype.getCameraPoint=function(){var e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,e))},wr.prototype.getCameraQueryGeometry=function(e){var i=this.getCameraPoint();if(1===e.length)return[e[0],i];for(var r=i.x,n=i.y,o=i.x,a=i.y,s=0,u=e;s<u.length;s+=1){var l=u[s];r=Math.min(r,l.x),n=Math.min(n,l.y),o=Math.max(o,l.x),a=Math.max(a,l.y)}return[new t.Point(r,n),new t.Point(o,n),new t.Point(o,a),new t.Point(r,a),new t.Point(r,n)]},Object.defineProperties(wr.prototype,Er);var Sr=function(e){var i,r,n,o;this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(i=this._updateHashUnthrottled.bind(this),r=!1,n=null,o=function(){n=null,r&&(i(),n=setTimeout(o,300),r=!1)},function(){return r=!0,n||o(),n})};Sr.prototype.addTo=function(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Sr.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Sr.prototype.getHashString=function(e){var i=this._map.getCenter(),r=Math.round(100*this._map.getZoom())/100,n=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,n),a=Math.round(i.lng*o)/o,s=Math.round(i.lat*o)/o,u=this._map.getBearing(),l=this._map.getPitch(),c="";if(c+=e?"/"+a+"/"+s+"/"+r:r+"/"+s+"/"+a,(u||l)&&(c+="/"+Math.round(10*u)/10),l&&(c+="/"+Math.round(l)),this._hashName){var p=this._hashName,h=!1,d=t.window.location.hash.slice(1).split("&").map((function(t){var e=t.split("=")[0];return e===p?(h=!0,e+"="+c):t})).filter((function(t){return t}));return h||d.push(p+"="+c),"#"+d.join("&")}return"#"+c},Sr.prototype._getCurrentHash=function(){var e,i=this,r=t.window.location.hash.replace("#","");return this._hashName?(r.split("&").map((function(t){return t.split("=")})).forEach((function(t){t[0]===i._hashName&&(e=t)})),(e&&e[1]||"").split("/")):r.split("/")},Sr.prototype._onHashChange=function(){var t=this._getCurrentHash();if(t.length>=3&&!t.some((function(t){return isNaN(t)}))){var e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1},Sr.prototype._updateHashUnthrottled=function(){var e=this.getHashString();try{t.window.history.replaceState(t.window.history.state,"",e)}catch(t){}};var Ir={linearity:.3,easing:t.bezier(0,0,.3,1)},Ar=t.extend({deceleration:2500,maxSpeed:1400},Ir),Cr=t.extend({deceleration:20,maxSpeed:1400},Ir),Pr=t.extend({deceleration:1e3,maxSpeed:360},Ir),Tr=t.extend({deceleration:1e3,maxSpeed:90},Ir),Lr=function(t){this._map=t,this.clear()};function Mr(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function kr(e,i,r){var n=r.maxSpeed,o=r.linearity,a=r.deceleration,s=t.clamp(e*o/(i/1e3),-n,n),u=Math.abs(s)/(a*o);return{easing:r.easing,duration:1e3*u,amount:s*(u/2)}}Lr.prototype.clear=function(){this._inertiaBuffer=[]},Lr.prototype.record=function(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.browser.now(),settings:e})},Lr.prototype._drainInertiaBuffer=function(){for(var e=this._inertiaBuffer,i=t.browser.now();e.length>0&&i-e[0].time>160;)e.shift()},Lr.prototype._onMoveEnd=function(e){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var i={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0},r=0,n=this._inertiaBuffer;r<n.length;r+=1){var o=n[r].settings;i.zoom+=o.zoomDelta||0,i.bearing+=o.bearingDelta||0,i.pitch+=o.pitchDelta||0,o.panDelta&&i.pan._add(o.panDelta),o.around&&(i.around=o.around),o.pinchAround&&(i.pinchAround=o.pinchAround)}var a=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,s={};if(i.pan.mag()){var u=kr(i.pan.mag(),a,t.extend({},Ar,e||{}));s.offset=i.pan.mult(u.amount/i.pan.mag()),s.center=this._map.transform.center,Mr(s,u)}if(i.zoom){var l=kr(i.zoom,a,Cr);s.zoom=this._map.transform.zoom+l.amount,Mr(s,l)}if(i.bearing){var c=kr(i.bearing,a,Pr);s.bearing=this._map.transform.bearing+t.clamp(c.amount,-179,179),Mr(s,c)}if(i.pitch){var p=kr(i.pitch,a,Tr);s.pitch=this._map.transform.pitch+p.amount,Mr(s,p)}if(s.zoom||s.bearing){var h=void 0===i.pinchAround?i.around:i.pinchAround;s.around=h?this._map.unproject(h):this._map.getCenter()}return this.clear(),t.extend(s,{noMoveStart:!0})}};var Rr=function(e){function r(r,n,o,a){void 0===a&&(a={});var s=i.mousePos(n.getCanvasContainer(),o),u=n.unproject(s);e.call(this,r,t.extend({point:s,lngLat:u,originalEvent:o},a)),this._defaultPrevented=!1,this.target=n}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var n={defaultPrevented:{configurable:!0}};return r.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,n),r}(t.Event),Nr=function(e){function r(r,n,o){var a="touchend"===r?o.changedTouches:o.touches,s=i.touchPos(n.getCanvasContainer(),a),u=s.map((function(t){return n.unproject(t)})),l=s.reduce((function(t,e,i,r){return t.add(e.div(r.length))}),new t.Point(0,0)),c=n.unproject(l);e.call(this,r,{points:s,point:l,lngLats:u,lngLat:c,originalEvent:o}),this._defaultPrevented=!1}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var n={defaultPrevented:{configurable:!0}};return r.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,n),r}(t.Event),Dr=function(t){function e(e,i,r){t.call(this,e,{originalEvent:r}),this._defaultPrevented=!1}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,i),e}(t.Event),Or=function(t,e){this._map=t,this._clickTolerance=e.clickTolerance};Or.prototype.reset=function(){delete this._mousedownPos},Or.prototype.wheel=function(t){return this._firePreventable(new Dr(t.type,this._map,t))},Or.prototype.mousedown=function(t,e){return this._mousedownPos=e,this._firePreventable(new Rr(t.type,this._map,t))},Or.prototype.mouseup=function(t){this._map.fire(new Rr(t.type,this._map,t))},Or.prototype.click=function(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new Rr(t.type,this._map,t))},Or.prototype.dblclick=function(t){return this._firePreventable(new Rr(t.type,this._map,t))},Or.prototype.mouseover=function(t){this._map.fire(new Rr(t.type,this._map,t))},Or.prototype.mouseout=function(t){this._map.fire(new Rr(t.type,this._map,t))},Or.prototype.touchstart=function(t){return this._firePreventable(new Nr(t.type,this._map,t))},Or.prototype.touchmove=function(t){this._map.fire(new Nr(t.type,this._map,t))},Or.prototype.touchend=function(t){this._map.fire(new Nr(t.type,this._map,t))},Or.prototype.touchcancel=function(t){this._map.fire(new Nr(t.type,this._map,t))},Or.prototype._firePreventable=function(t){if(this._map.fire(t),t.defaultPrevented)return{}},Or.prototype.isEnabled=function(){return!0},Or.prototype.isActive=function(){return!1},Or.prototype.enable=function(){},Or.prototype.disable=function(){};var zr=function(t){this._map=t};zr.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},zr.prototype.mousemove=function(t){this._map.fire(new Rr(t.type,this._map,t))},zr.prototype.mousedown=function(){this._delayContextMenu=!0},zr.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Rr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},zr.prototype.contextmenu=function(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new Rr(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()},zr.prototype.isEnabled=function(){return!0},zr.prototype.isActive=function(){return!1},zr.prototype.enable=function(){},zr.prototype.disable=function(){};var Fr=function(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1};function Br(t,e){for(var i={},r=0;r<t.length;r++)i[t[r].identifier]=e[r];return i}Fr.prototype.isEnabled=function(){return!!this._enabled},Fr.prototype.isActive=function(){return!!this._active},Fr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Fr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Fr.prototype.mousedown=function(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(i.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)},Fr.prototype.mousemoveWindow=function(t,e){if(this._active){var r=e;if(!(this._lastPos.equals(r)||!this._box&&r.dist(this._startPos)<this._clickTolerance)){var n=this._startPos;this._lastPos=r,this._box||(this._box=i.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var o=Math.min(n.x,r.x),a=Math.max(n.x,r.x),s=Math.min(n.y,r.y),u=Math.max(n.y,r.y);i.setTransform(this._box,"translate("+o+"px,"+s+"px)"),this._box.style.width=a-o+"px",this._box.style.height=u-s+"px"}}},Fr.prototype.mouseupWindow=function(e,r){var n=this;if(this._active&&0===e.button){var o=this._startPos,a=r;if(this.reset(),i.suppressClick(),o.x!==a.x||o.y!==a.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:function(t){return t.fitScreenCoordinates(o,a,n._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",e)}},Fr.prototype.keydown=function(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))},Fr.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(i.remove(this._box),this._box=null),i.enableDrag(),delete this._startPos,delete this._lastPos},Fr.prototype._fireEvent=function(e,i){return this._map.fire(new t.Event(e,{originalEvent:i}))};var qr=function(t){this.reset(),this.numTouches=t.numTouches};qr.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},qr.prototype.touchstart=function(e,i,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),r.length===this.numTouches&&(this.centroid=function(e){for(var i=new t.Point(0,0),r=0,n=e;r<n.length;r+=1)i._add(n[r]);return i.div(e.length)}(i),this.touches=Br(r,i)))},qr.prototype.touchmove=function(t,e,i){if(!this.aborted&&this.centroid){var r=Br(i,e);for(var n in this.touches){var o=r[n];(!o||o.dist(this.touches[n])>30)&&(this.aborted=!0)}}},qr.prototype.touchend=function(t,e,i){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===i.length){var r=!this.aborted&&this.centroid;if(this.reset(),r)return r}};var Ur=function(t){this.singleTap=new qr(t),this.numTaps=t.numTaps,this.reset()};Ur.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Ur.prototype.touchstart=function(t,e,i){this.singleTap.touchstart(t,e,i)},Ur.prototype.touchmove=function(t,e,i){this.singleTap.touchmove(t,e,i)},Ur.prototype.touchend=function(t,e,i){var r=this.singleTap.touchend(t,e,i);if(r){var n=t.timeStamp-this.lastTime<500,o=!this.lastTap||this.lastTap.dist(r)<30;if(n&&o||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}};var Vr=function(){this._zoomIn=new Ur({numTouches:1,numTaps:2}),this._zoomOut=new Ur({numTouches:2,numTaps:1}),this.reset()};Vr.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Vr.prototype.touchstart=function(t,e,i){this._zoomIn.touchstart(t,e,i),this._zoomOut.touchstart(t,e,i)},Vr.prototype.touchmove=function(t,e,i){this._zoomIn.touchmove(t,e,i),this._zoomOut.touchmove(t,e,i)},Vr.prototype.touchend=function(t,e,i){var r=this,n=this._zoomIn.touchend(t,e,i),o=this._zoomOut.touchend(t,e,i);return n?(this._active=!0,t.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(n)},{originalEvent:t})}}):o?(this._active=!0,t.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(o)},{originalEvent:t})}}):void 0},Vr.prototype.touchcancel=function(){this.reset()},Vr.prototype.enable=function(){this._enabled=!0},Vr.prototype.disable=function(){this._enabled=!1,this.reset()},Vr.prototype.isEnabled=function(){return this._enabled},Vr.prototype.isActive=function(){return this._active};var Gr={0:1,2:2},jr=function(t){this.reset(),this._clickTolerance=t.clickTolerance||1};jr.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},jr.prototype._correctButton=function(t,e){return!1},jr.prototype._move=function(t,e){return{}},jr.prototype.mousedown=function(t,e){if(!this._lastPoint){var r=i.mouseButton(t);this._correctButton(t,r)&&(this._lastPoint=e,this._eventButton=r)}},jr.prototype.mousemoveWindow=function(t,e){var i=this._lastPoint;if(i)if(t.preventDefault(),function(t,e){var i=Gr[e];return void 0===t.buttons||(t.buttons&i)!==i}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(i)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(i,e)},jr.prototype.mouseupWindow=function(t){this._lastPoint&&i.mouseButton(t)===this._eventButton&&(this._moved&&i.suppressClick(),this.reset())},jr.prototype.enable=function(){this._enabled=!0},jr.prototype.disable=function(){this._enabled=!1,this.reset()},jr.prototype.isEnabled=function(){return this._enabled},jr.prototype.isActive=function(){return this._active};var Kr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.mousedown=function(e,i){t.prototype.mousedown.call(this,e,i),this._lastPoint&&(this._active=!0)},e.prototype._correctButton=function(t,e){return 0===e&&!t.ctrlKey},e.prototype._move=function(t,e){return{around:e,panDelta:e.sub(t)}},e}(jr),Xr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e.prototype._move=function(t,e){var i=.8*(e.x-t.x);if(i)return this._active=!0,{bearingDelta:i}},e.prototype.contextmenu=function(t){t.preventDefault()},e}(jr),Zr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e.prototype._move=function(t,e){var i=-.5*(e.y-t.y);if(i)return this._active=!0,{pitchDelta:i}},e.prototype.contextmenu=function(t){t.preventDefault()},e}(jr),Yr=function(t){this._minTouches=1,this._clickTolerance=t.clickTolerance||1,this.reset()};Yr.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)},Yr.prototype.touchstart=function(t,e,i){return this._calculateTransform(t,e,i)},Yr.prototype.touchmove=function(t,e,i){if(this._active&&!(i.length<this._minTouches))return t.preventDefault(),this._calculateTransform(t,e,i)},Yr.prototype.touchend=function(t,e,i){this._calculateTransform(t,e,i),this._active&&i.length<this._minTouches&&this.reset()},Yr.prototype.touchcancel=function(){this.reset()},Yr.prototype._calculateTransform=function(e,i,r){r.length>0&&(this._active=!0);var n=Br(r,i),o=new t.Point(0,0),a=new t.Point(0,0),s=0;for(var u in n){var l=n[u],c=this._touches[u];c&&(o._add(l),a._add(l.sub(c)),s++,n[u]=l)}if(this._touches=n,!(s<this._minTouches)&&a.mag()){var p=a.div(s);if(this._sum._add(p),!(this._sum.mag()<this._clickTolerance))return{around:o.div(s),panDelta:p}}},Yr.prototype.enable=function(){this._enabled=!0},Yr.prototype.disable=function(){this._enabled=!1,this.reset()},Yr.prototype.isEnabled=function(){return this._enabled},Yr.prototype.isActive=function(){return this._active};var Hr=function(){this.reset()};function Wr(t,e,i){for(var r=0;r<t.length;r++)if(t[r].identifier===i)return e[r]}function Qr(t,e){return Math.log(t/e)/Math.LN2}Hr.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Hr.prototype._start=function(t){},Hr.prototype._move=function(t,e,i){return{}},Hr.prototype.touchstart=function(t,e,i){this._firstTwoTouches||i.length<2||(this._firstTwoTouches=[i[0].identifier,i[1].identifier],this._start([e[0],e[1]]))},Hr.prototype.touchmove=function(t,e,i){if(this._firstTwoTouches){t.preventDefault();var r=this._firstTwoTouches,n=r[1],o=Wr(i,e,r[0]),a=Wr(i,e,n);if(o&&a){var s=this._aroundCenter?null:o.add(a).div(2);return this._move([o,a],s,t)}}},Hr.prototype.touchend=function(t,e,r){if(this._firstTwoTouches){var n=this._firstTwoTouches,o=n[1],a=Wr(r,e,n[0]),s=Wr(r,e,o);a&&s||(this._active&&i.suppressClick(),this.reset())}},Hr.prototype.touchcancel=function(){this.reset()},Hr.prototype.enable=function(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around},Hr.prototype.disable=function(){this._enabled=!1,this.reset()},Hr.prototype.isEnabled=function(){return this._enabled},Hr.prototype.isActive=function(){return this._active};var Jr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),delete this._distance,delete this._startDistance},e.prototype._start=function(t){this._startDistance=this._distance=t[0].dist(t[1])},e.prototype._move=function(t,e){var i=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Qr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Qr(this._distance,i),pinchAround:e}},e}(Hr);function $r(t,e){return 180*t.angleWith(e)/Math.PI}var tn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},e.prototype._start=function(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])},e.prototype._move=function(t,e){var i=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:$r(this._vector,i),pinchAround:e}},e.prototype._isBelowThreshold=function(t){this._minDiameter=Math.min(this._minDiameter,t.mag());var e=25/(Math.PI*this._minDiameter)*360,i=$r(t,this._startVector);return Math.abs(i)<e},e}(Hr);function en(t){return Math.abs(t.y)>Math.abs(t.x)}var rn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},e.prototype._start=function(t){this._lastPoints=t,en(t[0].sub(t[1]))&&(this._valid=!1)},e.prototype._move=function(t,e,i){var r=t[0].sub(this._lastPoints[0]),n=t[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(r,n,i.timeStamp),this._valid)return this._lastPoints=t,this._active=!0,{pitchDelta:(r.y+n.y)/2*-.5}},e.prototype.gestureBeginsVertically=function(t,e,i){if(void 0!==this._valid)return this._valid;var r=t.mag()>=2,n=e.mag()>=2;if(r||n){if(!r||!n)return void 0===this._firstMove&&(this._firstMove=i),i-this._firstMove<100&&void 0;var o=t.y>0==e.y>0;return en(t)&&en(e)&&o}},e}(Hr),nn={panStep:100,bearingStep:15,pitchStep:10},on=function(){var t=nn;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep};function an(t){return t*(2-t)}on.prototype.reset=function(){this._active=!1},on.prototype.keydown=function(t){var e=this;if(!(t.altKey||t.ctrlKey||t.metaKey)){var i=0,r=0,n=0,o=0,a=0;switch(t.keyCode){case 61:case 107:case 171:case 187:i=1;break;case 189:case 109:case 173:i=-1;break;case 37:t.shiftKey?r=-1:(t.preventDefault(),o=-1);break;case 39:t.shiftKey?r=1:(t.preventDefault(),o=1);break;case 38:t.shiftKey?n=1:(t.preventDefault(),a=-1);break;case 40:t.shiftKey?n=-1:(t.preventDefault(),a=1);break;default:return}return{cameraAnimation:function(s){var u=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:an,zoom:i?Math.round(u)+i*(t.shiftKey?2:1):u,bearing:s.getBearing()+r*e._bearingStep,pitch:s.getPitch()+n*e._pitchStep,offset:[-o*e._panStep,-a*e._panStep],center:s.getCenter()},{originalEvent:t})}}}},on.prototype.enable=function(){this._enabled=!0},on.prototype.disable=function(){this._enabled=!1,this.reset()},on.prototype.isEnabled=function(){return this._enabled},on.prototype.isActive=function(){return this._active};var sn=function(e,i){this._map=e,this._el=e.getCanvasContainer(),this._handler=i,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,t.bindAll(["_onTimeout"],this)};sn.prototype.setZoomRate=function(t){this._defaultZoomRate=t},sn.prototype.setWheelZoomRate=function(t){this._wheelZoomRate=t},sn.prototype.isEnabled=function(){return!!this._enabled},sn.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},sn.prototype.isZooming=function(){return!!this._zooming},sn.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},sn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},sn.prototype.wheel=function(e){if(this.isEnabled()){var i=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,r=t.browser.now(),n=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==i&&i%4.000244140625==0?this._type="wheel":0!==i&&Math.abs(i)<4?this._type="trackpad":n>400?(this._type=null,this._lastValue=i,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(n*i)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,i+=this._lastValue)),e.shiftKey&&i&&(i/=4),this._type&&(this._lastWheelEvent=e,this._delta-=i,this._active||this._start(e)),e.preventDefault()}},sn.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)},sn.prototype._start=function(e){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var r=i.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(r)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},sn.prototype.renderFrame=function(){var e=this;if(this._frameId&&(this._frameId=null,this.isActive())){var i=this._map.transform;if(0!==this._delta){var r="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,n=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==n&&(n=1/n);var o="number"==typeof this._targetZoom?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(o*n))),"wheel"===this._type&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var a,s="number"==typeof this._targetZoom?this._targetZoom:i.zoom,u=this._startZoom,l=this._easing,c=!1;if("wheel"===this._type&&u&&l){var p=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),h=l(p);a=t.number(u,s,h),p<1?this._frameId||(this._frameId=!0):c=!0}else a=s,c=!0;return this._active=!0,c&&(this._active=!1,this._finishTimeout=setTimeout((function(){e._zooming=!1,e._handler._triggerRenderFrame(),delete e._targetZoom,delete e._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!c,zoomDelta:a-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},sn.prototype._smoothOutEasing=function(e){var i=t.ease;if(this._prevEase){var r=this._prevEase,n=(t.browser.now()-r.start)/r.duration,o=r.easing(n+.01)-r.easing(n),a=.27/Math.sqrt(o*o+1e-4)*.01,s=Math.sqrt(.0729-a*a);i=t.bezier(a,s,.25,1)}return this._prevEase={start:t.browser.now(),duration:e,easing:i},i},sn.prototype.reset=function(){this._active=!1};var un=function(t,e){this._clickZoom=t,this._tapZoom=e};un.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},un.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},un.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},un.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var ln=function(){this.reset()};ln.prototype.reset=function(){this._active=!1},ln.prototype.dblclick=function(t,e){return t.preventDefault(),{cameraAnimation:function(i){i.easeTo({duration:300,zoom:i.getZoom()+(t.shiftKey?-1:1),around:i.unproject(e)},{originalEvent:t})}}},ln.prototype.enable=function(){this._enabled=!0},ln.prototype.disable=function(){this._enabled=!1,this.reset()},ln.prototype.isEnabled=function(){return this._enabled},ln.prototype.isActive=function(){return this._active};var cn=function(){this._tap=new Ur({numTouches:1,numTaps:1}),this.reset()};cn.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},cn.prototype.touchstart=function(t,e,i){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?i.length>0&&(this._swipePoint=e[0],this._swipeTouch=i[0].identifier):this._tap.touchstart(t,e,i))},cn.prototype.touchmove=function(t,e,i){if(this._tapTime){if(this._swipePoint){if(i[0].identifier!==this._swipeTouch)return;var r=e[0],n=r.y-this._swipePoint.y;return this._swipePoint=r,t.preventDefault(),this._active=!0,{zoomDelta:n/128}}}else this._tap.touchmove(t,e,i)},cn.prototype.touchend=function(t,e,i){this._tapTime?this._swipePoint&&0===i.length&&this.reset():this._tap.touchend(t,e,i)&&(this._tapTime=t.timeStamp)},cn.prototype.touchcancel=function(){this.reset()},cn.prototype.enable=function(){this._enabled=!0},cn.prototype.disable=function(){this._enabled=!1,this.reset()},cn.prototype.isEnabled=function(){return this._enabled},cn.prototype.isActive=function(){return this._active};var pn=function(t,e,i){this._el=t,this._mousePan=e,this._touchPan=i};pn.prototype.enable=function(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},pn.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},pn.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},pn.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var hn=function(t,e,i){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=i};hn.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},hn.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},hn.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},hn.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var dn=function(t,e,i,r){this._el=t,this._touchZoom=e,this._touchRotate=i,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0};dn.prototype.enable=function(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},dn.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},dn.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},dn.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},dn.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},dn.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var fn=function(t){return t.zoom||t.drag||t.pitch||t.rotate},_n=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(t.Event);function gn(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}var mn=function(e,r){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Lr(e),this._bearingSnap=r.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(r),t.bindAll(["handleEvent","handleWindowEvent"],this);var n=this._el;this._listeners=[[n,"touchstart",{passive:!0}],[n,"touchmove",{passive:!1}],[n,"touchend",void 0],[n,"touchcancel",void 0],[n,"mousedown",void 0],[n,"mousemove",void 0],[n,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[n,"mouseover",void 0],[n,"mouseout",void 0],[n,"dblclick",void 0],[n,"click",void 0],[n,"keydown",{capture:!1}],[n,"keyup",void 0],[n,"wheel",{passive:!1}],[n,"contextmenu",void 0],[t.window,"blur",void 0]];for(var o=0,a=this._listeners;o<a.length;o+=1){var s=a[o],u=s[0];i.addEventListener(u,s[1],u===t.window.document?this.handleWindowEvent:this.handleEvent,s[2])}};mn.prototype.destroy=function(){for(var e=0,r=this._listeners;e<r.length;e+=1){var n=r[e],o=n[0];i.removeEventListener(o,n[1],o===t.window.document?this.handleWindowEvent:this.handleEvent,n[2])}},mn.prototype._addDefaultHandlers=function(t){var e=this._map,i=e.getCanvasContainer();this._add("mapEvent",new Or(e,t));var r=e.boxZoom=new Fr(e,t);this._add("boxZoom",r);var n=new Vr,o=new ln;e.doubleClickZoom=new un(o,n),this._add("tapZoom",n),this._add("clickZoom",o);var a=new cn;this._add("tapDragZoom",a);var s=e.touchPitch=new rn;this._add("touchPitch",s);var u=new Xr(t),l=new Zr(t);e.dragRotate=new hn(t,u,l),this._add("mouseRotate",u,["mousePitch"]),this._add("mousePitch",l,["mouseRotate"]);var c=new Kr(t),p=new Yr(t);e.dragPan=new pn(i,c,p),this._add("mousePan",c),this._add("touchPan",p,["touchZoom","touchRotate"]);var h=new tn,d=new Jr;e.touchZoomRotate=new dn(i,d,h,a),this._add("touchRotate",h,["touchPan","touchZoom"]),this._add("touchZoom",d,["touchPan","touchRotate"]);var f=e.scrollZoom=new sn(e,this);this._add("scrollZoom",f,["mousePan"]);var _=e.keyboard=new on;this._add("keyboard",_),this._add("blockableMapEvent",new zr(e));for(var g=0,m=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];g<m.length;g+=1){var y=m[g];t.interactive&&t[y]&&e[y].enable(t[y])}},mn.prototype._add=function(t,e,i){this._handlers.push({handlerName:t,handler:e,allowed:i}),this._handlersById[t]=e},mn.prototype.stop=function(t){if(!this._updatingCamera){for(var e=0,i=this._handlers;e<i.length;e+=1)i[e].handler.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}},mn.prototype.isActive=function(){for(var t=0,e=this._handlers;t<e.length;t+=1)if(e[t].handler.isActive())return!0;return!1},mn.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},mn.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},mn.prototype.isMoving=function(){return Boolean(fn(this._eventsInProgress))||this.isZooming()},mn.prototype._blockedByActive=function(t,e,i){for(var r in t)if(r!==i&&(!e||e.indexOf(r)<0))return!0;return!1},mn.prototype.handleWindowEvent=function(t){this.handleEvent(t,t.type+"Window")},mn.prototype._getMapTouches=function(t){for(var e=[],i=0,r=t;i<r.length;i+=1){var n=r[i];this._el.contains(n.target)&&e.push(n)}return e},mn.prototype.handleEvent=function(t,e){if("blur"!==t.type){this._updatingCamera=!0;for(var r="renderFrame"===t.type?void 0:t,n={needsRenderFrame:!1},o={},a={},s=t.touches?this._getMapTouches(t.touches):void 0,u=s?i.touchPos(this._el,s):i.mousePos(this._el,t),l=0,c=this._handlers;l<c.length;l+=1){var p=c[l],h=p.handlerName,d=p.handler,f=p.allowed;if(d.isEnabled()){var _=void 0;this._blockedByActive(a,f,h)?d.reset():d[e||t.type]&&(_=d[e||t.type](t,u,s),this.mergeHandlerResult(n,o,_,h,r),_&&_.needsRenderFrame&&this._triggerRenderFrame()),(_||d.isActive())&&(a[h]=d)}}var g={};for(var m in this._previousActiveHandlers)a[m]||(g[m]=r);this._previousActiveHandlers=a,(Object.keys(g).length||gn(n))&&(this._changes.push([n,o,g]),this._triggerRenderFrame()),(Object.keys(a).length||gn(n))&&this._map._stop(!0),this._updatingCamera=!1;var y=n.cameraAnimation;y&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],y(this._map))}else this.stop(!0)},mn.prototype.mergeHandlerResult=function(e,i,r,n,o){if(r){t.extend(e,r);var a={handlerName:n,originalEvent:r.originalEvent||o};void 0!==r.zoomDelta&&(i.zoom=a),void 0!==r.panDelta&&(i.drag=a),void 0!==r.pitchDelta&&(i.pitch=a),void 0!==r.bearingDelta&&(i.rotate=a)}},mn.prototype._applyChanges=function(){for(var e={},i={},r={},n=0,o=this._changes;n<o.length;n+=1){var a=o[n],s=a[0],u=a[1],l=a[2];s.panDelta&&(e.panDelta=(e.panDelta||new t.Point(0,0))._add(s.panDelta)),s.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+s.zoomDelta),s.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+s.bearingDelta),s.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+s.pitchDelta),void 0!==s.around&&(e.around=s.around),void 0!==s.pinchAround&&(e.pinchAround=s.pinchAround),s.noInertia&&(e.noInertia=s.noInertia),t.extend(i,u),t.extend(r,l)}this._updateMapTransform(e,i,r),this._changes=[]},mn.prototype._updateMapTransform=function(t,e,i){var r=this._map,n=r.transform;if(!gn(t))return this._fireEvents(e,i,!0);var o=t.panDelta,a=t.zoomDelta,s=t.bearingDelta,u=t.pitchDelta,l=t.around,c=t.pinchAround;void 0!==c&&(l=c),r._stop(!0),l=l||r.transform.centerPoint;var p=n.pointLocation(o?l.sub(o):l);s&&(n.bearing+=s),u&&(n.pitch+=u),a&&(n.zoom+=a),n.setLocationAtPoint(p,l),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(e,i,!0)},mn.prototype._fireEvents=function(e,i,r){var n=this,o=fn(this._eventsInProgress),a=fn(e),s={};for(var u in e)this._eventsInProgress[u]||(s[u+"start"]=e[u].originalEvent),this._eventsInProgress[u]=e[u];for(var l in!o&&a&&this._fireEvent("movestart",a.originalEvent),s)this._fireEvent(l,s[l]);for(var c in a&&this._fireEvent("move",a.originalEvent),e)this._fireEvent(c,e[c].originalEvent);var p,h={};for(var d in this._eventsInProgress){var f=this._eventsInProgress[d],_=f.handlerName,g=f.originalEvent;this._handlersById[_].isActive()||(delete this._eventsInProgress[d],h[d+"end"]=p=i[_]||g)}for(var m in h)this._fireEvent(m,h[m]);var y=fn(this._eventsInProgress);if(r&&(o||a)&&!y){this._updatingCamera=!0;var v=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),b=function(t){return 0!==t&&-n._bearingSnap<t&&t<n._bearingSnap};v?(b(v.bearing||this._map.getBearing())&&(v.bearing=0),this._map.easeTo(v,{originalEvent:p})):(this._map.fire(new t.Event("moveend",{originalEvent:p})),b(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},mn.prototype._fireEvent=function(e,i){this._map.fire(new t.Event(e,i?{originalEvent:i}:{}))},mn.prototype._requestFrame=function(){var t=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add((function(e){delete t._frameId,t.handleEvent(new _n("renderFrame",{timeStamp:e})),t._applyChanges()}))},mn.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())};var yn=function(e){function i(i,r){e.call(this),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=r.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},i.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},i.prototype.panBy=function(e,i,r){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},i),r)},i.prototype.panTo=function(e,i,r){return this.easeTo(t.extend({center:e},i),r)},i.prototype.getZoom=function(){return this.transform.zoom},i.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},i.prototype.zoomTo=function(e,i,r){return this.easeTo(t.extend({zoom:e},i),r)},i.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},i.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},i.prototype.getBearing=function(){return this.transform.bearing},i.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},i.prototype.getPadding=function(){return this.transform.padding},i.prototype.setPadding=function(t,e){return this.jumpTo({padding:t},e),this},i.prototype.rotateTo=function(e,i,r){return this.easeTo(t.extend({bearing:e},i),r)},i.prototype.resetNorth=function(e,i){return this.rotateTo(0,t.extend({duration:1e3},e),i),this},i.prototype.resetNorthPitch=function(e,i){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),i),this},i.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},i.prototype.getPitch=function(){return this.transform.pitch},i.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},i.prototype.cameraForBounds=function(e,i){return e=t.LngLatBounds.convert(e),this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),0,i)},i.prototype._cameraForBoxAndBearing=function(e,i,r,n){var o={top:0,bottom:0,right:0,left:0};if("number"==typeof(n=t.extend({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},n)).padding){var a=n.padding;n.padding={top:a,bottom:a,right:a,left:a}}n.padding=t.extend(o,n.padding);var s=this.transform,u=s.padding,l=s.project(t.LngLat.convert(e)),c=s.project(t.LngLat.convert(i)),p=l.rotate(-r*Math.PI/180),h=c.rotate(-r*Math.PI/180),d=new t.Point(Math.max(p.x,h.x),Math.max(p.y,h.y)),f=new t.Point(Math.min(p.x,h.x),Math.min(p.y,h.y)),_=d.sub(f),g=(s.width-(u.left+u.right+n.padding.left+n.padding.right))/_.x,m=(s.height-(u.top+u.bottom+n.padding.top+n.padding.bottom))/_.y;if(!(m<0||g<0)){var y=Math.min(s.scaleZoom(s.scale*Math.min(g,m)),n.maxZoom),v=t.Point.convert(n.offset),b=new t.Point(v.x+(n.padding.left-n.padding.right)/2,v.y+(n.padding.top-n.padding.bottom)/2).mult(s.scale/s.zoomScale(y));return{center:s.unproject(l.add(c).div(2).sub(b)),zoom:y,bearing:r}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},i.prototype.fitBounds=function(t,e,i){return this._fitInternal(this.cameraForBounds(t,e),e,i)},i.prototype.fitScreenCoordinates=function(e,i,r,n,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)),this.transform.pointLocation(t.Point.convert(i)),r,n),n,o)},i.prototype._fitInternal=function(e,i,r){return e?(delete(i=t.extend(e,i)).padding,i.linear?this.easeTo(i,r):this.flyTo(i,r)):this},i.prototype.jumpTo=function(e,i){this.stop();var r=this.transform,n=!1,o=!1,a=!1;return"zoom"in e&&r.zoom!==+e.zoom&&(n=!0,r.zoom=+e.zoom),void 0!==e.center&&(r.center=t.LngLat.convert(e.center)),"bearing"in e&&r.bearing!==+e.bearing&&(o=!0,r.bearing=+e.bearing),"pitch"in e&&r.pitch!==+e.pitch&&(a=!0,r.pitch=+e.pitch),null==e.padding||r.isPaddingEqual(e.padding)||(r.padding=e.padding),this.fire(new t.Event("movestart",i)).fire(new t.Event("move",i)),n&&this.fire(new t.Event("zoomstart",i)).fire(new t.Event("zoom",i)).fire(new t.Event("zoomend",i)),o&&this.fire(new t.Event("rotatestart",i)).fire(new t.Event("rotate",i)).fire(new t.Event("rotateend",i)),a&&this.fire(new t.Event("pitchstart",i)).fire(new t.Event("pitch",i)).fire(new t.Event("pitchend",i)),this.fire(new t.Event("moveend",i))},i.prototype.easeTo=function(e,i){var r=this;this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||!e.essential&&t.browser.prefersReducedMotion)&&(e.duration=0);var n=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),u=this.getPadding(),l="zoom"in e?+e.zoom:o,c="bearing"in e?this._normalizeBearing(e.bearing,a):a,p="pitch"in e?+e.pitch:s,h="padding"in e?e.padding:n.padding,d=t.Point.convert(e.offset),f=n.centerPoint.add(d),_=n.pointLocation(f),g=t.LngLat.convert(e.center||_);this._normalizeCenter(g);var m,y,v=n.project(_),b=n.project(g).sub(v),x=n.zoomScale(l-o);e.around&&(m=t.LngLat.convert(e.around),y=n.locationPoint(m));var w={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||l!==o,this._rotating=this._rotating||a!==c,this._pitching=this._pitching||p!==s,this._padding=!n.isPaddingEqual(h),this._easeId=e.easeId,this._prepareEase(i,e.noMoveStart,w),this._ease((function(e){if(r._zooming&&(n.zoom=t.number(o,l,e)),r._rotating&&(n.bearing=t.number(a,c,e)),r._pitching&&(n.pitch=t.number(s,p,e)),r._padding&&(n.interpolatePadding(u,h,e),f=n.centerPoint.add(d)),m)n.setLocationAtPoint(m,y);else{var _=n.zoomScale(n.zoom-o),g=l>o?Math.min(2,x):Math.max(.5,x),w=Math.pow(g,1-e),E=n.unproject(v.add(b.mult(e*w)).mult(_));n.setLocationAtPoint(n.renderWorldCopies?E.wrap():E,f)}r._fireMoveEvents(i)}),(function(t){r._afterEase(i,t)}),e),this},i.prototype._prepareEase=function(e,i,r){void 0===r&&(r={}),this._moving=!0,i||r.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!r.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!r.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!r.pitching&&this.fire(new t.Event("pitchstart",e))},i.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},i.prototype._afterEase=function(e,i){if(!this._easeId||!i||this._easeId!==i){delete this._easeId;var r=this._zooming,n=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new t.Event("zoomend",e)),n&&this.fire(new t.Event("rotateend",e)),o&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}},i.prototype.flyTo=function(e,i){var r=this;if(!e.essential&&t.browser.prefersReducedMotion){var n=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(n,i)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var o=this.transform,a=this.getZoom(),s=this.getBearing(),u=this.getPitch(),l=this.getPadding(),c="zoom"in e?t.clamp(+e.zoom,o.minZoom,o.maxZoom):a,p="bearing"in e?this._normalizeBearing(e.bearing,s):s,h="pitch"in e?+e.pitch:u,d="padding"in e?e.padding:o.padding,f=o.zoomScale(c-a),_=t.Point.convert(e.offset),g=o.centerPoint.add(_),m=o.pointLocation(g),y=t.LngLat.convert(e.center||m);this._normalizeCenter(y);var v=o.project(m),b=o.project(y).sub(v),x=e.curve,w=Math.max(o.width,o.height),E=w/f,S=b.mag();if("minZoom"in e){var I=t.clamp(Math.min(e.minZoom,a,c),o.minZoom,o.maxZoom),A=w/o.zoomScale(I-a);x=Math.sqrt(A/S*2)}var C=x*x;function P(t){var e=(E*E-w*w+(t?-1:1)*C*C*S*S)/(2*(t?E:w)*C*S);return Math.log(Math.sqrt(e*e+1)-e)}function T(t){return(Math.exp(t)-Math.exp(-t))/2}function L(t){return(Math.exp(t)+Math.exp(-t))/2}var M=P(0),k=function(t){return L(M)/L(M+x*t)},R=function(t){return w*((L(M)*(T(e=M+x*t)/L(e))-T(M))/C)/S;var e},N=(P(1)-M)/x;if(Math.abs(S)<1e-6||!isFinite(N)){if(Math.abs(w-E)<1e-6)return this.easeTo(e,i);var D=E<w?-1:1;N=Math.abs(Math.log(E/w))/x,R=function(){return 0},k=function(t){return Math.exp(D*x*t)}}return e.duration="duration"in e?+e.duration:1e3*N/("screenSpeed"in e?+e.screenSpeed/x:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=s!==p,this._pitching=h!==u,this._padding=!o.isPaddingEqual(d),this._prepareEase(i,!1),this._ease((function(e){var n=e*N,f=1/k(n);o.zoom=1===e?c:a+o.scaleZoom(f),r._rotating&&(o.bearing=t.number(s,p,e)),r._pitching&&(o.pitch=t.number(u,h,e)),r._padding&&(o.interpolatePadding(l,d,e),g=o.centerPoint.add(_));var m=1===e?y:o.unproject(v.add(b.mult(R(n))).mult(f));o.setLocationAtPoint(o.renderWorldCopies?m.wrap():m,g),r._fireMoveEvents(i)}),(function(){return r._afterEase(i)}),e),this},i.prototype.isEasing=function(){return!!this._easeFrameId},i.prototype.stop=function(){return this._stop()},i.prototype._stop=function(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var i=this._onEaseEnd;delete this._onEaseEnd,i.call(this,e)}if(!t){var r=this.handlers;r&&r.stop(!1)}return this},i.prototype._ease=function(e,i,r){!1===r.animate||0===r.duration?(e(1),i()):(this._easeStart=t.browser.now(),this._easeOptions=r,this._onEaseFrame=e,this._onEaseEnd=i,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},i.prototype._renderFrameCallback=function(){var e=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},i.prototype._normalizeBearing=function(e,i){e=t.wrap(e,-180,180);var r=Math.abs(e-i);return Math.abs(e-360-i)<r&&(e-=360),Math.abs(e+360-i)<r&&(e+=360),e},i.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var i=t.lng-e.center.lng;t.lng+=i>180?-360:i<-180?360:0}},i}(t.Evented),vn=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};vn.prototype.getDefaultPosition=function(){return"bottom-right"},vn.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=i.create("div","mapboxgl-ctrl-attrib-inner",this._container),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},vn.prototype.onRemove=function(){i.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},vn.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var i=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){var r=i.reduce((function(t,e,r){return e.value&&(t+=e.key+"="+e.value+(r<i.length-1?"&":"")),t}),"?");e.href=t.config.FEEDBACK_URL+"/"+r+(this._map._hash?this._map._hash.getHashString(!0):""),e.rel="noopener nofollow"}},vn.prototype._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())},vn.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((function(t){return"string"!=typeof t?"":t}))):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var i=this._map.style.sourceCaches;for(var r in i){var n=i[r];if(n.used){var o=n.getSource();o.attribution&&t.indexOf(o.attribution)<0&&t.push(o.attribution)}}t.sort((function(t,e){return t.length-e.length}));var a=(t=t.filter((function(e,i){for(var r=i+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0}))).join(" | ");a!==this._attribHTML&&(this._attribHTML=a,t.length?(this._innerContainer.innerHTML=a,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},vn.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var bn=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};bn.prototype.onAdd=function(t){this._map=t,this._container=i.create("div","mapboxgl-ctrl");var e=i.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},bn.prototype.onRemove=function(){i.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},bn.prototype.getDefaultPosition=function(){return"bottom-left"},bn.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},bn.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},bn.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var xn=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};xn.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},xn.prototype.remove=function(t){for(var e=this._currentlyRunning,i=0,r=e?this._queue.concat(e):this._queue;i<r.length;i+=1){var n=r[i];if(n.id===t)return void(n.cancelled=!0)}},xn.prototype.run=function(t){void 0===t&&(t=0);var e=this._currentlyRunning=this._queue;this._queue=[];for(var i=0,r=e;i<r.length;i+=1){var n=r[i];if(!n.cancelled&&(n.callback(t),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},xn.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var wn={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},En=t.window.HTMLImageElement,Sn=t.window.HTMLElement,In=t.window.ImageBitmap,An={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Cn=function(r){function n(e){var i=this;if(null!=(e=t.extend({},An,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var n=new wr(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies);if(r.call(this,n,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new xn,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},wn,e.locale),this._requestManager=new t.RequestManager(e.transformRequest,e.accessToken),"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error("Container '"+e.container+"' not found.")}else{if(!(e.container instanceof Sn))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(function(){return i._update(!1)})),this.on("moveend",(function(){return i._update(!1)})),this.on("zoom",(function(){return i._update(!0)})),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1),t.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new mn(this,e),this._hash=e.hash&&new Sr("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new vn({customAttribution:e.customAttribution})),this.addControl(new bn,e.logoPosition),this.on("style.load",(function(){i.transform.unmodified&&i.jumpTo(i.style.stylesheet)})),this.on("data",(function(e){i._update("style"===e.dataType),i.fire(new t.Event(e.dataType+"data",e))})),this.on("dataloading",(function(e){i.fire(new t.Event(e.dataType+"dataloading",e))}))}r&&(n.__proto__=r),(n.prototype=Object.create(r&&r.prototype)).constructor=n;var o={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return n.prototype._getMapId=function(){return this._mapId},n.prototype.addControl=function(e,i){if(void 0===i&&e.getDefaultPosition&&(i=e.getDefaultPosition()),void 0===i&&(i="top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var r=e.onAdd(this);this._controls.push(e);var n=this._controlPositions[i];return-1!==i.indexOf("bottom")?n.insertBefore(r,n.firstChild):n.appendChild(r),this},n.prototype.removeControl=function(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var i=this._controls.indexOf(e);return i>-1&&this._controls.splice(i,1),e.onRemove(this),this},n.prototype.resize=function(e){var i=this._containerDimensions(),r=i[0],n=i[1];this._resizeCanvas(r,n),this.transform.resize(r,n),this.painter.resize(r,n);var o=!this._moving;return o&&(this.stop(),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e))),this.fire(new t.Event("resize",e)),o&&this.fire(new t.Event("moveend",e)),this},n.prototype.getBounds=function(){return this.transform.getBounds()},n.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},n.prototype.setMaxBounds=function(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()},n.prototype.setMinZoom=function(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},n.prototype.getMinZoom=function(){return this.transform.minZoom},n.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},n.prototype.getMaxZoom=function(){return this.transform.maxZoom},n.prototype.setMinPitch=function(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},n.prototype.getMinPitch=function(){return this.transform.minPitch},n.prototype.setMaxPitch=function(t){if((t=null==t?60:t)>60)throw new Error("maxPitch must be less than or equal to 60");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")},n.prototype.getMaxPitch=function(){return this.transform.maxPitch},n.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},n.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},n.prototype.project=function(e){return this.transform.locationPoint(t.LngLat.convert(e))},n.prototype.unproject=function(e){return this.transform.pointLocation(t.Point.convert(e))},n.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},n.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},n.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},n.prototype._createDelegatedListener=function(t,e,i){var r,n=this;if("mouseenter"===t||"mouseover"===t){var o=!1;return{layer:e,listener:i,delegates:{mousemove:function(r){var a=n.getLayer(e)?n.queryRenderedFeatures(r.point,{layers:[e]}):[];a.length?o||(o=!0,i.call(n,new Rr(t,n,r.originalEvent,{features:a}))):o=!1},mouseout:function(){o=!1}}}}if("mouseleave"===t||"mouseout"===t){var a=!1;return{layer:e,listener:i,delegates:{mousemove:function(r){(n.getLayer(e)?n.queryRenderedFeatures(r.point,{layers:[e]}):[]).length?a=!0:a&&(a=!1,i.call(n,new Rr(t,n,r.originalEvent)))},mouseout:function(e){a&&(a=!1,i.call(n,new Rr(t,n,e.originalEvent)))}}}}return{layer:e,listener:i,delegates:(r={},r[t]=function(t){var r=n.getLayer(e)?n.queryRenderedFeatures(t.point,{layers:[e]}):[];r.length&&(t.features=r,i.call(n,t),delete t.features)},r)}},n.prototype.on=function(t,e,i){if(void 0===i)return r.prototype.on.call(this,t,e);var n=this._createDelegatedListener(t,e,i);for(var o in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(n),n.delegates)this.on(o,n.delegates[o]);return this},n.prototype.once=function(t,e,i){if(void 0===i)return r.prototype.once.call(this,t,e);var n=this._createDelegatedListener(t,e,i);for(var o in n.delegates)this.once(o,n.delegates[o]);return this},n.prototype.off=function(t,e,i){var n=this;return void 0===i?r.prototype.off.call(this,t,e):(this._delegatedListeners&&this._delegatedListeners[t]&&function(r){for(var o=r[t],a=0;a<o.length;a++){var s=o[a];if(s.layer===e&&s.listener===i){for(var u in s.delegates)n.off(u,s.delegates[u]);return o.splice(a,1),n}}}(this._delegatedListeners),this)},n.prototype.queryRenderedFeatures=function(e,i){if(!this.style)return[];var r;if(void 0!==i||void 0===e||e instanceof t.Point||Array.isArray(e)||(i=e,e=void 0),i=i||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||"number"==typeof e[0])r=[t.Point.convert(e)];else{var n=t.Point.convert(e[0]),o=t.Point.convert(e[1]);r=[n,new t.Point(o.x,n.y),o,new t.Point(n.x,o.y),n]}return this.style.queryRenderedFeatures(r,i,this.transform)},n.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},n.prototype.setStyle=function(e,i){return!1!==(i=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(e,i))},n.prototype._getUIString=function(t){var e=this._locale[t];if(null==e)throw new Error("Missing UI string '"+t+"'");return e},n.prototype._updateStyle=function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new Ge(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},n.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Ge(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},n.prototype._diffStyle=function(e,i){var r=this;if("string"==typeof e){var n=this._requestManager.normalizeStyleURL(e),o=this._requestManager.transformRequest(n,t.ResourceType.Style);t.getJSON(o,(function(e,n){e?r.fire(new t.ErrorEvent(e)):n&&r._updateDiff(n,i)}))}else"object"==typeof e&&this._updateDiff(e,i)},n.prototype._updateDiff=function(e,i){try{this.style.setState(e)&&this._update(!0)}catch(r){t.warnOnce("Unable to perform style diff: "+(r.message||r.error||r)+".  Rebuilding the style from scratch."),this._updateStyle(e,i)}},n.prototype.getStyle=function(){if(this.style)return this.style.serialize()},n.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},n.prototype.addSource=function(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)},n.prototype.isSourceLoaded=function(e){var i=this.style&&this.style.sourceCaches[e];if(void 0!==i)return i.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},n.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var i=t[e]._tiles;for(var r in i){var n=i[r];if("loaded"!==n.state&&"errored"!==n.state)return!1}}return!0},n.prototype.addSourceType=function(t,e,i){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,i)},n.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},n.prototype.getSource=function(t){return this.style.getSource(t)},n.prototype.addImage=function(e,i,r){void 0===r&&(r={});var n=r.pixelRatio;void 0===n&&(n=1);var o=r.sdf;void 0===o&&(o=!1);var a=r.stretchX,s=r.stretchY,u=r.content;if(this._lazyInitEmptyStyle(),i instanceof En||In&&i instanceof In){var l=t.browser.getImageData(i);this.style.addImage(e,{data:new t.RGBAImage({width:l.width,height:l.height},l.data),pixelRatio:n,stretchX:a,stretchY:s,content:u,sdf:o,version:0})}else{if(void 0===i.width||void 0===i.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var c=i;this.style.addImage(e,{data:new t.RGBAImage({width:i.width,height:i.height},new Uint8Array(i.data)),pixelRatio:n,stretchX:a,stretchY:s,content:u,sdf:o,version:0,userImage:c}),c.onAdd&&c.onAdd(this,e)}},n.prototype.updateImage=function(e,i){var r=this.style.getImage(e);if(!r)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var n=i instanceof En||In&&i instanceof In?t.browser.getImageData(i):i,o=n.width,a=n.height,s=n.data;return void 0===o||void 0===a?this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):o!==r.data.width||a!==r.data.height?this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(r.data.replace(s,!(i instanceof En||In&&i instanceof In)),void this.style.updateImage(e,r))},n.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},n.prototype.removeImage=function(t){this.style.removeImage(t)},n.prototype.loadImage=function(e,i){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),i)},n.prototype.listImages=function(){return this.style.listImages()},n.prototype.addLayer=function(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)},n.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},n.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},n.prototype.getLayer=function(t){return this.style.getLayer(t)},n.prototype.setLayerZoomRange=function(t,e,i){return this.style.setLayerZoomRange(t,e,i),this._update(!0)},n.prototype.setFilter=function(t,e,i){return void 0===i&&(i={}),this.style.setFilter(t,e,i),this._update(!0)},n.prototype.getFilter=function(t){return this.style.getFilter(t)},n.prototype.setPaintProperty=function(t,e,i,r){return void 0===r&&(r={}),this.style.setPaintProperty(t,e,i,r),this._update(!0)},n.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},n.prototype.setLayoutProperty=function(t,e,i,r){return void 0===r&&(r={}),this.style.setLayoutProperty(t,e,i,r),this._update(!0)},n.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},n.prototype.setLight=function(t,e){return void 0===e&&(e={}),this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)},n.prototype.getLight=function(){return this.style.getLight()},n.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},n.prototype.removeFeatureState=function(t,e){return this.style.removeFeatureState(t,e),this._update()},n.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},n.prototype.getContainer=function(){return this._container},n.prototype.getCanvasContainer=function(){return this._canvasContainer},n.prototype.getCanvas=function(){return this._canvas},n.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},n.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},n.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=i.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=i.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=i.create("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var r=this._containerDimensions();this._resizeCanvas(r[0],r[1]);var n=this._controlContainer=i.create("div","mapboxgl-control-container",t),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(t){o[t]=i.create("div","mapboxgl-ctrl-"+t,n)}))},n.prototype._resizeCanvas=function(e,i){var r=t.browser.devicePixelRatio||1;this._canvas.width=r*e,this._canvas.height=r*i,this._canvas.style.width=e+"px",this._canvas.style.height=i+"px"},n.prototype._setupPainter=function(){var i=t.extend({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._canvas.getContext("webgl",i)||this._canvas.getContext("experimental-webgl",i);r?(this.painter=new yr(r,this.transform),t.webpSupported.testSupport(r)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},n.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},n.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},n.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},n.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this},n.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},n.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},n.prototype._render=function(e){var i,r=this,n=0,o=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(i=o.createQueryEXT(),o.beginQueryEXT(o.TIME_ELAPSED_EXT,i),n=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),!this._removed){var a=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var s=this.transform.zoom,u=t.browser.now();this.style.zoomHistory.update(s,u);var l=new t.EvaluationParameters(s,{now:u,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),c=l.crossFadingFactor();1===c&&c===this._crossFadingFactor||(a=!0,this._crossFadingFactor=c),this.style.update(l)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var p=t.browser.now()-n;o.endQueryEXT(o.TIME_ELAPSED_EXT,i),setTimeout((function(){var e=o.getQueryObjectEXT(i,o.QUERY_RESULT_EXT)/1e6;o.deleteQueryEXT(i),r.fire(new t.Event("gpu-timing-frame",{cpuTime:p,gpuTime:e}))}),50)}if(this.listens("gpu-timing-layer")){var h=this.painter.collectGpuTimers();setTimeout((function(){var e=r.painter.queryGpuTimers(h);r.fire(new t.Event("gpu-timing-layer",{layerTimes:e}))}),50)}var d=this._sourcesDirty||this._styleDirty||this._placementDirty;return d||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0),this}},n.prototype.remove=function(){this._hash&&this._hash.remove();for(var e=0,i=this._controls;e<i.length;e+=1)i[e].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("orientationchange",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),Pn(this._canvasContainer),Pn(this._controlContainer),Pn(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new t.Event("remove"))},n.prototype.triggerRepaint=function(){var e=this;this.style&&!this._frame&&(this._frame=t.browser.frame((function(t){e._frame=null,e._render(t)})))},n.prototype._onWindowOnline=function(){this._update()},n.prototype._onWindowResize=function(t){this._trackResize&&this.resize({originalEvent:t})._update()},o.showTileBoundaries.get=function(){return!!this._showTileBoundaries},o.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},o.showPadding.get=function(){return!!this._showPadding},o.showPadding.set=function(t){this._showPadding!==t&&(this._showPadding=t,this._update())},o.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},o.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},o.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},o.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},o.repaint.get=function(){return!!this._repaint},o.repaint.set=function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())},o.vertices.get=function(){return!!this._vertices},o.vertices.set=function(t){this._vertices=t,this._update()},n.prototype._setCacheLimits=function(e,i){t.setCacheLimits(e,i)},o.version.get=function(){return t.version},Object.defineProperties(n.prototype,o),n}(yn);function Pn(t){t.parentNode&&t.parentNode.removeChild(t)}var Tn={showCompass:!0,showZoom:!0,visualizePitch:!1},Ln=function(e){var r=this;this.options=t.extend({},Tn,e),this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(t){return r._map.zoomIn({},{originalEvent:t})})),i.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(t){return r._map.zoomOut({},{originalEvent:t})})),i.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(t){r.options.visualizePitch?r._map.resetNorthPitch({},{originalEvent:t}):r._map.resetNorth({},{originalEvent:t})})),this._compassIcon=i.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Ln.prototype._updateZoomButtons=function(){var t=this._map.getZoom();this._zoomInButton.disabled=t===this._map.getMaxZoom(),this._zoomOutButton.disabled=t===this._map.getMinZoom()},Ln.prototype._rotateCompassArrow=function(){var t=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=t},Ln.prototype.onAdd=function(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Mn(this._map,this._compass,this.options.visualizePitch)),this._container},Ln.prototype.onRemove=function(){i.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Ln.prototype._createButton=function(t,e){var r=i.create("button",t,this._container);return r.type="button",r.addEventListener("click",e),r},Ln.prototype._setButtonTitle=function(t,e){var i=this._map._getUIString("NavigationControl."+e);t.title=i,t.setAttribute("aria-label",i)};var Mn=function(e,r,n){void 0===n&&(n=!1),this._clickTolerance=10,this.element=r,this.mouseRotate=new Xr({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,n&&(this.mousePitch=new Zr({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),i.addEventListener(r,"mousedown",this.mousedown),i.addEventListener(r,"touchstart",this.touchstart,{passive:!1}),i.addEventListener(r,"touchmove",this.touchmove),i.addEventListener(r,"touchend",this.touchend),i.addEventListener(r,"touchcancel",this.reset)};function kn(e,i,r){if(e=new t.LngLat(e.lng,e.lat),i){var n=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),a=r.locationPoint(e).distSqr(i);r.locationPoint(n).distSqr(i)<a?e=n:r.locationPoint(o).distSqr(i)<a&&(e=o)}for(;Math.abs(e.lng-r.center.lng)>180;){var s=r.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=r.width&&s.y<=r.height)break;e.lng>r.center.lng?e.lng-=360:e.lng+=360}return e}Mn.prototype.down=function(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),i.disableDrag()},Mn.prototype.move=function(t,e){var i=this.map,r=this.mouseRotate.mousemoveWindow(t,e);if(r&&r.bearingDelta&&i.setBearing(i.getBearing()+r.bearingDelta),this.mousePitch){var n=this.mousePitch.mousemoveWindow(t,e);n&&n.pitchDelta&&i.setPitch(i.getPitch()+n.pitchDelta)}},Mn.prototype.off=function(){var t=this.element;i.removeEventListener(t,"mousedown",this.mousedown),i.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),i.removeEventListener(t,"touchmove",this.touchmove),i.removeEventListener(t,"touchend",this.touchend),i.removeEventListener(t,"touchcancel",this.reset),this.offTemp()},Mn.prototype.offTemp=function(){i.enableDrag(),i.removeEventListener(t.window,"mousemove",this.mousemove),i.removeEventListener(t.window,"mouseup",this.mouseup)},Mn.prototype.mousedown=function(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:function(){return e.preventDefault()}}),i.mousePos(this.element,e)),i.addEventListener(t.window,"mousemove",this.mousemove),i.addEventListener(t.window,"mouseup",this.mouseup)},Mn.prototype.mousemove=function(t){this.move(t,i.mousePos(this.element,t))},Mn.prototype.mouseup=function(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()},Mn.prototype.touchstart=function(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=i.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return t.preventDefault()}},this._startPos))},Mn.prototype.touchmove=function(t){1!==t.targetTouches.length?this.reset():(this._lastPos=i.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:function(){return t.preventDefault()}},this._lastPos))},Mn.prototype.touchend=function(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Mn.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Rn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Nn(t,e,i){var r=t.classList;for(var n in Rn)r.remove("mapboxgl-"+i+"-anchor-"+n);r.add("mapboxgl-"+i+"-anchor-"+e)}var Dn,On=function(e){function r(r,n){var o=this;if(e.call(this),(r instanceof t.window.HTMLElement||n)&&(r=t.extend({element:r},n)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&"auto"!==r.pitchAlignment?r.pitchAlignment:this._rotationAlignment,r&&r.element)this._element=r.element,this._offset=t.Point.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=i.create("div"),this._element.setAttribute("aria-label","Map marker");var a=i.createNS("http://www.w3.org/2000/svg","svg");a.setAttributeNS(null,"display","block"),a.setAttributeNS(null,"height","41px"),a.setAttributeNS(null,"width","27px"),a.setAttributeNS(null,"viewBox","0 0 27 41");var s=i.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"stroke","none"),s.setAttributeNS(null,"stroke-width","1"),s.setAttributeNS(null,"fill","none"),s.setAttributeNS(null,"fill-rule","evenodd");var u=i.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill-rule","nonzero");var l=i.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");for(var c=0,p=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];c<p.length;c+=1){var h=p[c],d=i.createNS("http://www.w3.org/2000/svg","ellipse");d.setAttributeNS(null,"opacity","0.04"),d.setAttributeNS(null,"cx","10.5"),d.setAttributeNS(null,"cy","5.80029008"),d.setAttributeNS(null,"rx",h.rx),d.setAttributeNS(null,"ry",h.ry),l.appendChild(d)}var f=i.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"fill",this._color);var _=i.createNS("http://www.w3.org/2000/svg","path");_.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),f.appendChild(_);var g=i.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"fill","#000000");var m=i.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),g.appendChild(m);var y=i.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"transform","translate(6.0, 7.0)"),y.setAttributeNS(null,"fill","#FFFFFF");var v=i.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"transform","translate(8.0, 8.0)");var b=i.createNS("http://www.w3.org/2000/svg","circle");b.setAttributeNS(null,"fill","#000000"),b.setAttributeNS(null,"opacity","0.25"),b.setAttributeNS(null,"cx","5.5"),b.setAttributeNS(null,"cy","5.5"),b.setAttributeNS(null,"r","5.4999962");var x=i.createNS("http://www.w3.org/2000/svg","circle");x.setAttributeNS(null,"fill","#FFFFFF"),x.setAttributeNS(null,"cx","5.5"),x.setAttributeNS(null,"cy","5.5"),x.setAttributeNS(null,"r","5.4999962"),v.appendChild(b),v.appendChild(x),u.appendChild(l),u.appendChild(f),u.appendChild(g),u.appendChild(y),u.appendChild(v),a.appendChild(u),a.setAttributeNS(null,"height",41*this._scale+"px"),a.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(a),this._offset=t.Point.convert(r&&r.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(function(t){t.preventDefault()})),this._element.addEventListener("mousedown",(function(t){t.preventDefault()})),this._element.addEventListener("focus",(function(){var t=o._map.getContainer();t.scrollTop=0,t.scrollLeft=0})),Nn(this._element,this._anchor,"marker"),this._popup=null}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},r.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),i.remove(this._element),this._popup&&this._popup.remove(),this},r.prototype.getLngLat=function(){return this._lngLat},r.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},r.prototype.getElement=function(){return this._element},r.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},r.prototype._onKeyPress=function(t){var e=t.code,i=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==i&&13!==i||this.togglePopup()},r.prototype._onMapClick=function(t){var e=t.originalEvent.target,i=this._element;this._popup&&(e===i||i.contains(e))&&this.togglePopup()},r.prototype.getPopup=function(){return this._popup},r.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},r.prototype._update=function(t){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=kn(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(e="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var r="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?r="rotateX(0deg)":"map"===this._pitchAlignment&&(r="rotateX("+this._map.getPitch()+"deg)"),t&&"moveend"!==t.type||(this._pos=this._pos.round()),i.setTransform(this._element,Rn[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+r+" "+e)}},r.prototype.getOffset=function(){return this._offset},r.prototype.setOffset=function(e){return this._offset=t.Point.convert(e),this._update(),this},r.prototype._onMove=function(e){this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},r.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},r.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},r.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},r.prototype.isDraggable=function(){return this._draggable},r.prototype.setRotation=function(t){return this._rotation=t||0,this._update(),this},r.prototype.getRotation=function(){return this._rotation},r.prototype.setRotationAlignment=function(t){return this._rotationAlignment=t||"auto",this._update(),this},r.prototype.getRotationAlignment=function(){return this._rotationAlignment},r.prototype.setPitchAlignment=function(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this},r.prototype.getPitchAlignment=function(){return this._pitchAlignment},r}(t.Evented),zn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Fn=0,Bn=!1,qn=function(e){function r(i){e.call(this),this.options=t.extend({},zn,i),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.onAdd=function(e){var r;return this._map=e,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),r=this._setupUI,void 0!==Dn?r(Dn):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then((function(t){r(Dn="denied"!==t.state)})):r(Dn=!!t.window.navigator.geolocation),this._container},r.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),i.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Fn=0,Bn=!1},r.prototype._isOutOfMapMaxBounds=function(t){var e=this._map.getMaxBounds(),i=t.coords;return e&&(i.longitude<e.getWest()||i.longitude>e.getEast()||i.latitude<e.getSouth()||i.latitude>e.getNorth())},r.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},r.prototype._onSuccess=function(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}},r.prototype._updateCamera=function(e){var i=new t.LngLat(e.coords.longitude,e.coords.latitude),r=e.coords.accuracy,n=this._map.getBearing(),o=t.extend({bearing:n},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(r),o,{geolocateSource:!0})},r.prototype._updateMarker=function(e){if(e){var i=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},r.prototype._updateCircleRadius=function(){var t=this._map._container.clientHeight/2,e=this._map.unproject([0,t]),i=this._map.unproject([1,t]),r=e.distanceTo(i),n=Math.ceil(2*this._accuracy/r);this._circleElement.style.width=n+"px",this._circleElement.style.height=n+"px"},r.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},r.prototype._onError=function(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&Bn)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}},r.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},r.prototype._setupUI=function(e){var r=this;if(this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this._geolocateButton=i.create("button","mapboxgl-ctrl-geolocate",this._container),i.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}else{var o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=i.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new On(this._dotElement),this._circleElement=i.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new On({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(e){e.geolocateSource||"ACTIVE_LOCK"!==r._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(r._watchState="BACKGROUND",r._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),r._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),r.fire(new t.Event("trackuserlocationend")))}))},r.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Fn--,Bn=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Fn>1?(e={maximumAge:6e5,timeout:0},Bn=!0):(e=this.options.positionOptions,Bn=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},r.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},r}(t.Evented),Un={maxWidth:100,unit:"metric"},Vn=function(e){this.options=t.extend({},Un,e),t.bindAll(["_onMove","setUnit"],this)};function Gn(t,e,i){var r=i&&i.maxWidth||100,n=t._container.clientHeight/2,o=t.unproject([0,n]),a=t.unproject([r,n]),s=o.distanceTo(a);if(i&&"imperial"===i.unit){var u=3.2808*s;u>5280?jn(e,r,u/5280,t._getUIString("ScaleControl.Miles")):jn(e,r,u,t._getUIString("ScaleControl.Feet"))}else i&&"nautical"===i.unit?jn(e,r,s/1852,t._getUIString("ScaleControl.NauticalMiles")):s>=1e3?jn(e,r,s/1e3,t._getUIString("ScaleControl.Kilometers")):jn(e,r,s,t._getUIString("ScaleControl.Meters"))}function jn(t,e,i,r){var n,o,a,s=(n=i,(o=Math.pow(10,(""+Math.floor(n)).length-1))*(a=(a=n/o)>=10?10:a>=5?5:a>=3?3:a>=2?2:a>=1?1:function(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(a)));t.style.width=e*(s/i)+"px",t.innerHTML=s+"&nbsp;"+r}Vn.prototype.getDefaultPosition=function(){return"bottom-left"},Vn.prototype._onMove=function(){Gn(this._map,this._container,this.options)},Vn.prototype.onAdd=function(t){return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Vn.prototype.onRemove=function(){i.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Vn.prototype.setUnit=function(t){this.options.unit=t,Gn(this._map,this._container,this.options)};var Kn=function(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")};Kn.prototype.onAdd=function(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Kn.prototype.onRemove=function(){i.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Kn.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},Kn.prototype._setupUI=function(){var e=this._fullscreenButton=i.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);i.create("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden",!0),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Kn.prototype._updateTitle=function(){var t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t},Kn.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Kn.prototype._isFullscreen=function(){return this._fullscreen},Kn.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Kn.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Xn={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Zn=function(e){function r(i){e.call(this),this.options=t.extend(Object.create(Xn),i),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.addTo=function(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},r.prototype.isOpen=function(){return!!this._map},r.prototype.remove=function(){return this._content&&i.remove(this._content),this._container&&(i.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this},r.prototype.getLngLat=function(){return this._lngLat},r.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},r.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},r.prototype.getElement=function(){return this._container},r.prototype.setText=function(e){return this.setDOMContent(t.window.document.createTextNode(e))},r.prototype.setHTML=function(e){var i,r=t.window.document.createDocumentFragment(),n=t.window.document.createElement("body");for(n.innerHTML=e;i=n.firstChild;)r.appendChild(i);return this.setDOMContent(r)},r.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},r.prototype.setMaxWidth=function(t){return this.options.maxWidth=t,this._update(),this},r.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},r.prototype.addClassName=function(t){this._container&&this._container.classList.add(t)},r.prototype.removeClassName=function(t){this._container&&this._container.classList.remove(t)},r.prototype.toggleClassName=function(t){if(this._container)return this._container.classList.toggle(t)},r.prototype._createContent=function(){this._content&&i.remove(this._content),this._content=i.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=i.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},r.prototype._onMouseUp=function(t){this._update(t.point)},r.prototype._onMouseMove=function(t){this._update(t.point)},r.prototype._onDrag=function(t){this._update(t.point)},r.prototype._update=function(e){var r=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=i.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=i.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(t){return r._container.classList.add(t)})),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=kn(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||e)){var n=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat),o=this.options.anchor,a=function e(i){if(i){if("number"==typeof i){var r=Math.round(Math.sqrt(.5*Math.pow(i,2)));return{center:new t.Point(0,0),top:new t.Point(0,i),"top-left":new t.Point(r,r),"top-right":new t.Point(-r,r),bottom:new t.Point(0,-i),"bottom-left":new t.Point(r,-r),"bottom-right":new t.Point(-r,-r),left:new t.Point(i,0),right:new t.Point(-i,0)}}if(i instanceof t.Point||Array.isArray(i)){var n=t.Point.convert(i);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:t.Point.convert(i.center||[0,0]),top:t.Point.convert(i.top||[0,0]),"top-left":t.Point.convert(i["top-left"]||[0,0]),"top-right":t.Point.convert(i["top-right"]||[0,0]),bottom:t.Point.convert(i.bottom||[0,0]),"bottom-left":t.Point.convert(i["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(i["bottom-right"]||[0,0]),left:t.Point.convert(i.left||[0,0]),right:t.Point.convert(i.right||[0,0])}}return e(new t.Point(0,0))}(this.options.offset);if(!o){var s,u=this._container.offsetWidth,l=this._container.offsetHeight;s=n.y+a.bottom.y<l?["top"]:n.y>this._map.transform.height-l?["bottom"]:[],n.x<u/2?s.push("left"):n.x>this._map.transform.width-u/2&&s.push("right"),o=0===s.length?"bottom":s.join("-")}var c=n.add(a[o]).round();i.setTransform(this._container,Rn[o]+" translate("+c.x+"px,"+c.y+"px)"),Nn(this._container,o,"popup")}},r.prototype._onClose=function(){this.remove()},r}(t.Evented),Yn={version:t.version,supported:e,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:Cn,NavigationControl:Ln,GeolocateControl:qn,AttributionControl:vn,ScaleControl:Vn,FullscreenControl:Kn,Popup:Zn,Marker:On,Style:Ge,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,prewarm:function(){Ft().acquire(Nt)},clearPrewarmedResources:function(){var t=Ot;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(Nt),Ot=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return Dt.workerCount},set workerCount(t){Dt.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage:function(e){t.clearTileCache(e)},workerUrl:""};return Yn})),i}()}));function K(t){let e;const i=t[7].default,r=a(i,t,t[6],null);return{c(){r&&r.c()},m(t,i){r&&r.m(t,i),e=!0},p(t,e){r&&r.p&&64&e&&u(r,i,t,t[6],e,null,null)},i(t){e||(D(r,t),e=!0)},o(t){O(r,t),e=!1},d(t){r&&r.d(t)}}}function X(t){let e,i,n=t[0]&&K(t);return{c(){e=h("div"),n&&n.c(),g(e,"id","map"),g(e,"class","svelte-4zwsn0")},m(r,o){c(r,e,o),n&&n.m(e,null),t[8](e),i=!0},p(t,[i]){t[0]?n?(n.p(t,i),1&i&&D(n,1)):(n=K(t),n.c(),D(n,1),n.m(e,null)):n&&(N={r:0,c:[],p:N},O(n,1,1,(()=>{n=null})),N.r||r(N.c),N=N.p)},i(t){i||(D(n),i=!0)},o(t){O(n),i=!1},d(i){i&&p(e),n&&n.d(),t[8](null)}}}function Z(t,e,i){let r,n,{$$slots:o={},$$scope:a}=e,{worldview:s="US"}=e,{location:u={bounds:[[-10.76,49.864],[1.863,59.479]]}}=e,{style:l}=e,{map:c}=e,{data:p}=e;return u.bounds&&(n={bounds:u.bounds}),x((()=>{const t=document.createElement("link");return t.rel="stylesheet",t.href="https://unpkg.com/mapbox-gl/dist/mapbox-gl.css",t.onload=()=>{j.accessToken="pk.eyJ1IjoicGxhbmVtYWQiLCJhIjoiemdYSVVLRSJ9.g3lbg_eN0kztmsfIPxa9MQ",i(0,c=new j.Map({container:r,style:l,interactive:!0,...n}));var t=new j.ScaleControl({maxWidth:80});c.addControl(t),c.on("load",(function(){console.log("loaded"),function(){const t=["all",["any",["in",s,["get","worldview"]],["==","all",["get","worldview"]]],["!=","true",["get","disputed"]]];c.setFilter("country-boundaries",t),c.setFilter("country-boundaries-outline",t),c.addLayer({id:"capital-location",type:"circle",source:{type:"geojson",data:null},paint:{"circle-radius":3,"circle-color":"hsla(355, 100%, 50%, 0.5)","circle-stroke-color":"white","circle-stroke-width":1},layout:{}})}()}))},document.head.appendChild(t),()=>{c.remove(),t.parentNode.removeChild(t)}})),t.$$set=t=>{"worldview"in t&&i(2,s=t.worldview),"location"in t&&i(3,u=t.location),"style"in t&&i(4,l=t.style),"map"in t&&i(0,c=t.map),"data"in t&&i(5,p=t.data),"$$scope"in t&&i(6,a=t.$$scope)},[c,r,s,u,l,p,a,o,function(t){E[t?"unshift":"push"]((()=>{r=t,i(1,r)}))}]}class Y extends V{constructor(t){super(),U(this,t,Z,X,o,{worldview:2,location:3,style:4,map:0,data:5})}}function H(t){let e,i;const r=t[1].default,n=a(r,t,t[0],null);return{c(){e=h("div"),n&&n.c(),g(e,"class","svelte-1rdgfc9")},m(t,r){c(t,e,r),n&&n.m(e,null),i=!0},p(t,[e]){n&&n.p&&1&e&&u(n,r,t,t[0],e,null,null)},i(t){i||(D(n,t),i=!0)},o(t){O(n,t),i=!1},d(t){t&&p(e),n&&n.d(t)}}}function W(t,e,i){let{$$slots:r={},$$scope:n}=e;return t.$$set=t=>{"$$scope"in t&&i(0,n=t.$$scope)},[n,r]}class Q extends V{constructor(t){super(),U(this,t,W,H,o,{})}}G((function(t,e){!function(t){function e(t,e,i){if(!S(i=i||{}))throw new Error("options is invalid");var r=i.bbox,n=i.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");r&&I(r),n&&A(n);var o={type:"Feature"};return n&&(o.id=n),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}function i(t,e,i){if(!S(i=i||{}))throw new Error("options is invalid");var n,a=i.bbox;if(!t)throw new Error("type is required");if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");switch(a&&I(a),t){case"Point":n=r(e).geometry;break;case"LineString":n=s(e).geometry;break;case"Polygon":n=o(e).geometry;break;case"MultiPoint":n=p(e).geometry;break;case"MultiLineString":n=c(e).geometry;break;case"MultiPolygon":n=h(e).geometry;break;default:throw new Error(t+" is invalid")}return a&&(n.bbox=a),n}function r(t,i,r){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!E(t[0])||!E(t[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:t},i,r)}function n(t,e,i){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return l(t.map((function(t){return r(t,e)})),i)}function o(t,i,r){if(!t)throw new Error("coordinates is required");for(var n=0;n<t.length;n++){var o=t[n];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++){if(0===n&&0===a&&!E(o[0][0])||!E(o[0][1]))throw new Error("coordinates must contain numbers");if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}}return e({type:"Polygon",coordinates:t},i,r)}function a(t,e,i){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return l(t.map((function(t){return o(t,e)})),i)}function s(t,i,r){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!E(t[0][1])||!E(t[0][1]))throw new Error("coordinates must contain numbers");return e({type:"LineString",coordinates:t},i,r)}function u(t,e,i){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return l(t.map((function(t){return s(t,e)})),i)}function l(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var i=e.bbox,r=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");i&&I(i),r&&A(r);var n={type:"FeatureCollection"};return r&&(n.id=r),i&&(n.bbox=i),n.features=t,n}function c(t,i,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiLineString",coordinates:t},i,r)}function p(t,i,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiPoint",coordinates:t},i,r)}function h(t,i,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiPolygon",coordinates:t},i,r)}function d(t,i,r){if(!t)throw new Error("geometries is required");if(!Array.isArray(t))throw new Error("geometries must be an Array");return e({type:"GeometryCollection",geometries:t},i,r)}function f(t,e){if(null==t||isNaN(t))throw new Error("num is required");if(e&&!(e>=0))throw new Error("precision must be a positive number");var i=Math.pow(10,e||0);return Math.round(t*i)/i}function _(t,e){if(null==t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var i=zo[e||"kilometers"];if(!i)throw new Error(e+" units is invalid");return t*i}function g(t,e){if(null==t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var i=zo[e||"kilometers"];if(!i)throw new Error(e+" units is invalid");return t/i}function m(t,e){return v(g(t,e))}function y(t){if(null==t)throw new Error("bearing is required");var e=t%360;return e<0&&(e+=360),e}function v(t){if(null==t)throw new Error("radians is required");return t%(2*Math.PI)*180/Math.PI}function b(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180}function x(t,e,i){if(null==t)throw new Error("length is required");if(!(t>=0))throw new Error("length must be a positive number");return _(g(t,e),i||"kilometers")}function w(t,e,i){if(null==t)throw new Error("area is required");if(!(t>=0))throw new Error("area must be a positive number");var r=Bo[e||"meters"];if(!r)throw new Error("invalid original units");var n=Bo[i||"kilometers"];if(!n)throw new Error("invalid final units");return t/r*n}function E(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function S(t){return!!t&&t.constructor===Object}function I(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!E(t))throw new Error("bbox must only contain numbers")}))}function A(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function C(t,e,i){if(null!==t)for(var r,n,o,a,s,u,l,c,p=0,h=0,d=t.type,f="FeatureCollection"===d,_="Feature"===d,g=f?t.features.length:1,m=0;m<g;m++){s=(c=!!(l=f?t.features[m].geometry:_?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var y=0;y<s;y++){var v=0,b=0;if(null!==(a=c?l.geometries[y]:l)){u=a.coordinates;var x=a.type;switch(p=!i||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":e(u,h,m,v,b),h++,v++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++)e(u[r],h,m,v,b),h++,"MultiPoint"===x&&v++;"LineString"===x&&v++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(n=0;n<u[r].length-p;n++)e(u[r][n],h,m,v,b),h++;"MultiLineString"===x&&v++,"Polygon"===x&&b++}"Polygon"===x&&v++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for("MultiPolygon"===x&&(b=0),n=0;n<u[r].length;n++){for(o=0;o<u[r][n].length-p;o++)e(u[r][n][o],h,m,v,b),h++;b++}v++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)C(a.geometries[r],e,i);break;default:throw new Error("Unknown Geometry Type")}}}}}function P(t,e,i,r){var n=i;return C(t,(function(t,r,o,a,s){n=0===r&&void 0===i?t:e(n,t,r,o,a,s)}),r),n}function T(t,e){var i;switch(t.type){case"FeatureCollection":for(i=0;i<t.features.length;i++)e(t.features[i].properties,i);break;case"Feature":e(t.properties,0)}}function L(t,e,i){var r=i;return T(t,(function(t,n){r=0===n&&void 0===i?t:e(r,t,n)})),r}function M(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var i=0;i<t.features.length;i++)e(t.features[i],i)}function k(t,e,i){var r=i;return M(t,(function(t,n){r=0===n&&void 0===i?t:e(r,t,n)})),r}function R(t){var e=[];return C(t,(function(t){e.push(t)})),e}function N(t,e){var i,r,n,o,a,s,u,l,c,p,h=0,d="FeatureCollection"===t.type,f="Feature"===t.type,_=d?t.features.length:1;for(i=0;i<_;i++){for(s=d?t.features[i].geometry:f?t.geometry:t,l=d?t.features[i].properties:f?t.properties:{},c=d?t.features[i].bbox:f?t.bbox:void 0,p=d?t.features[i].id:f?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,n=0;n<a;n++)if(null!==(o=u?s.geometries[n]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(o,h,l,c,p);break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)e(o.geometries[r],h,l,c,p);break;default:throw new Error("Unknown Geometry Type")}else e(null,h,l,c,p);h++}}function D(t,e,i){var r=i;return N(t,(function(t,n,o,a,s){r=0===n&&void 0===i?t:e(r,t,n,o,a,s)})),r}function O(t,i){N(t,(function(t,r,n,o,a){var s,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return void i(e(t,n,{bbox:o,id:a}),r,0)}switch(u){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}t.coordinates.forEach((function(t,o){i(e({type:s,coordinates:t},n),r,o)}))}))}function z(t,e,i){var r=i;return O(t,(function(t,n,o){r=0===n&&0===o&&void 0===i?t:e(r,t,n,o)})),r}function F(t,e){O(t,(function(t,i,r){var n=0;if(t.geometry){var o=t.geometry.type;"Point"!==o&&"MultiPoint"!==o&&P(t,(function(o,a,u,l,c,p){var h=s([o,a],t.properties);return e(h,i,r,p,n),n++,a}))}}))}function B(t,e,i){var r=i,n=!1;return F(t,(function(t,o,a,s,u){r=!1===n&&void 0===i?t:e(r,t,o,a,s,u),n=!0})),r}function q(t,e){if(!t)throw new Error("geojson is required");O(t,(function(t,i,r){if(null!==t.geometry){var n=t.geometry.type,o=t.geometry.coordinates;switch(n){case"LineString":e(t,i,r,0,0);break;case"Polygon":for(var a=0;a<o.length;a++)e(s(o[a],t.properties),i,r,a)}}}))}function U(t,e,i){var r=i;return q(t,(function(t,n,o,a){r=0===n&&void 0===i?t:e(r,t,n,o,a)})),r}function V(t){var e=[1/0,1/0,-1/0,-1/0];return C(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function G(t){if(!t)throw new Error("obj is required");var e=j(t);if(e.length>1&&E(e[0])&&E(e[1]))return e;throw new Error("Coordinate is not a valid Point")}function j(t){if(!t)throw new Error("obj is required");var e;if(t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates),e)return K(e),e;throw new Error("No valid coordinates")}function K(t){if(t.length>1&&E(t[0])&&E(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return K(t[0]);throw new Error("coordinates must only contain numbers")}function X(t,e,i){if(!e||!i)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+i+": must be a "+e+", given "+t.type)}function Z(t,e,i){if(!t)throw new Error("No feature passed");if(!i)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+i+": must be a "+e+", given "+t.geometry.type)}function Y(t,e,i){if(!t)throw new Error("No featureCollection passed");if(!i)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+i+", FeatureCollection required");for(var r=0;r<t.features.length;r++){var n=t.features[r];if(!n||"Feature"!==n.type||!n.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!n.geometry||n.geometry.type!==e)throw new Error("Invalid input to "+i+": must be a "+e+", given "+n.geometry.type)}}function H(t){if(!t)throw new Error("geojson is required");if(void 0!==t.geometry)return t.geometry;if(t.coordinates||t.geometries)return t;throw new Error("geojson must be a valid Feature or Geometry Object")}function W(){throw new Error("invariant.getGeomType has been deprecated in v5.0 in favor of invariant.getType")}function Q(t,e){if(!t)throw new Error((e||"geojson")+" is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error((e||"geojson")+" is invalid")}function J(t,e,i){i=i||{};for(var r=Object.keys(Go),n=0;n<r.length;n++){var o=r[n],a=i[o];a=null!=a?a:Go[o],jo[o]=a}jo.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var s=function(t){var e=[],i=0;return t.rows,t.cols,t.cells.forEach((function(r,n){r.forEach((function(r,o){if(void 0!==r&&!function(t){return 5===t.cval||10===t.cval}(r)&&!tt(r)){var a=function(t,e,i){var r,n,o,a=t.length,s=[],u=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],l=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],c=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],p=(t[e][i],t[e][i]),h=p.cval,d=it(p,o=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][h]);s.push([i+d[0],e+d[1]]),d=it(p,o=c[h]),s.push([i+d[0],e+d[1]]),et(p);for(var f=i+u[h],_=e+l[h],g=h;f>=0&&_>=0&&_<a&&(f!=i||_!=e)&&void 0!==(p=t[_][f]);){if(0===(h=p.cval)||15===h)return{path:s,info:"mergeable"};o=c[h],r=u[h],n=l[h],5!==h&&10!==h||(5===h?p.flipped?-1===l[g]?(o="left",r=-1,n=0):(o="right",r=1,n=0):-1===u[g]&&(o="bottom",r=0,n=-1):10===h&&(p.flipped?-1===u[g]?(o="top",r=0,n=1):(o="bottom",r=0,n=-1):1===l[g]&&(o="left",r=-1,n=0))),d=it(p,o),s.push([f+d[0],_+d[1]]),et(p),f+=r,_+=n,g=h}return{path:s,info:"closed"}}(t.cells,n,o),s=!1;if("mergeable"===a.info)for(var u=a.path[a.path.length-1][0],l=a.path[a.path.length-1][1],c=i-1;c>=0;c--)if(Math.abs(e[c][0][0]-u)<=1e-7&&Math.abs(e[c][0][1]-l)<=1e-7){for(var p=a.path.length-2;p>=0;--p)e[c].unshift(a.path[p]);s=!0;break}s||(e[i++]=a.path)}}))})),e}(function(t,e){for(var i=t.length-1,r=t[0].length-1,n={rows:i,cols:r,cells:[]},o=0;o<i;++o){n.cells[o]=[];for(var a=0;a<r;++a){var s=0,u=t[o+1][a],l=t[o+1][a+1],c=t[o][a+1],p=t[o][a];if(!(isNaN(u)||isNaN(l)||isNaN(c)||isNaN(p))){s|=u>=e?8:0,s|=l>=e?4:0,s|=c>=e?2:0;var h,d,f,_,g=!1;if(5==(s|=p>=e?1:0)||10===s){var m=(u+l+c+p)/4;5===s&&m<e?(s=10,g=!0):10===s&&m<e&&(s=5,g=!0)}0!==s&&15!==s&&(h=d=f=_=.5,1===s?(f=1-$(e,u,p),d=1-$(e,c,p)):2===s?(d=$(e,p,c),_=1-$(e,l,c)):3===s?(f=1-$(e,u,p),_=1-$(e,l,c)):4===s?(h=$(e,u,l),_=$(e,c,l)):5===s?(h=$(e,u,l),_=$(e,c,l),d=1-$(e,c,p),f=1-$(e,u,p)):6===s?(d=$(e,p,c),h=$(e,u,l)):7===s?(f=1-$(e,u,p),h=$(e,u,l)):8===s?(f=$(e,p,u),h=1-$(e,l,u)):9===s?(d=1-$(e,c,p),h=1-$(e,l,u)):10===s?(h=1-$(e,l,u),_=1-$(e,l,c),d=$(e,p,c),f=$(e,p,u)):11===s?(h=1-$(e,l,u),_=1-$(e,l,c)):12===s?(f=$(e,p,u),_=$(e,c,l)):13===s?(d=1-$(e,c,p),_=$(e,c,l)):14===s?(f=$(e,p,u),d=$(e,p,c)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+s),n.cells[o][a]={cval:s,flipped:g,top:h,right:_,bottom:d,left:f})}}}return n}(t,e));return"function"==typeof jo.successCallback&&jo.successCallback(s),s}function $(t,e,i){return(t-e)/(i-e)}function tt(t){return 0===t.cval||15===t.cval}function et(t){tt(t)||5===t.cval||10===t.cval||(t.cval=15)}function it(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}function rt(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var i=e.zProperty||"elevation",r=e.flip,n=e.flags;Y(t,"Point","input must contain Points");for(var o=function(t,e){var i={};return M(t,(function(t){var e=j(t)[1];i[e]||(i[e]=[]),i[e].push(t)})),Object.keys(i).map((function(t){return i[t].sort((function(t,e){return j(t)[0]-j(e)[0]}))})).sort((function(t,i){return e?j(t[0])[1]-j(i[0])[1]:j(i[0])[1]-j(t[0])[1]}))}(t,r),a=[],s=0;s<o.length;s++){for(var u=o[s],l=[],c=0;c<u.length;c++){var p=u[c];p.properties[i]?l.push(p.properties[i]):l.push(0),!0===n&&(p.properties.matrixPosition=[s,c])}a.push(l)}return a}function nt(t,e,i,r,n){for(i=i||0,r=r||t.length-1,n=n||function(t,e){return t<e?-1:t>e?1:0};r>i;){if(r-i>600){var o=r-i+1,a=e-i+1,s=Math.log(o),u=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1);nt(t,e,Math.max(i,Math.floor(e-a*u/o+l)),Math.min(r,Math.floor(e+(o-a)*u/o+l)),n)}var c=t[e],p=i,h=r;for(ot(t,i,e),n(t[r],c)>0&&ot(t,i,r);p<h;){for(ot(t,p,h),p++,h--;n(t[p],c)<0;)p++;for(;n(t[h],c)>0;)h--}0===n(t[i],c)?ot(t,i,h):ot(t,++h,r),h<=e&&(i=h+1),e<=h&&(r=h-1)}}function ot(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function at(t,e){if(!(this instanceof at))return new at(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function st(t,e){ut(t,0,t.children.length,e,t)}function ut(t,e,i,r,n){n||(n=gt(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var o,a=e;a<i;a++)o=t.children[a],lt(n,t.leaf?r(o):o);return n}function lt(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function ct(t,e){return t.minX-e.minX}function pt(t,e){return t.minY-e.minY}function ht(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function dt(t){return t.maxX-t.minX+(t.maxY-t.minY)}function ft(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function _t(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function gt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function mt(t,e,i,r,n){for(var o,a=[e,i];a.length;)(i=a.pop())-(e=a.pop())<=r||(o=e+Math.ceil((i-e)/r/2)*r,Ko(t,o,e,i,n),a.push(e,o,o,i))}function yt(t,e){return t(e={exports:{}},e.exports),e.exports}function vt(t,e){if(!(this instanceof vt))return new vt(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||function(t,e){return t<e?-1:t>e?1:0},this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)}function bt(t,e,i){e=Math.max(0,void 0===e?2:e),i=i||0;for(var r,n=function(t){for(var e=t[0],i=t[0],r=t[0],n=t[0],o=0;o<t.length;o++){var a=t[o];a[0]<e[0]&&(e=a),a[0]>r[0]&&(r=a),a[1]<i[1]&&(i=a),a[1]>n[1]&&(n=a)}var s=[e,i,r,n],u=s.slice();for(o=0;o<t.length;o++)na(t[o],s)||u.push(t[o]);var l=ta(u),c=[];for(o=0;o<l.length;o++)c.push(u[l[o]]);return c}(t),o=Xo(16,["[0]","[1]","[0]","[1]"]).load(t),a=[],s=0;s<n.length;s++){var u=n[s];o.remove(u),r=It(u,r),a.push(r)}var l=Xo(16);for(s=0;s<a.length;s++)l.insert(St(a[s]));for(var c=e*e,p=i*i;a.length;){var h=a.shift(),d=h.p,f=h.next.p,_=At(d,f);if(!(_<p)){var g=_/c;(u=function(t,e,i,r,n,o,a){for(var s=new ia(null,xt),u=t.data;u;){for(var l=0;l<u.children.length;l++){var c=u.children[l],p=u.leaf?Ct(c,i,r):function(t,e,i){if(wt(t,i)||wt(e,i))return 0;var r=Pt(t[0],t[1],e[0],e[1],i.minX,i.minY,i.maxX,i.minY);if(0===r)return 0;var n=Pt(t[0],t[1],e[0],e[1],i.minX,i.minY,i.minX,i.maxY);if(0===n)return 0;var o=Pt(t[0],t[1],e[0],e[1],i.maxX,i.minY,i.maxX,i.maxY);if(0===o)return 0;var a=Pt(t[0],t[1],e[0],e[1],i.minX,i.maxY,i.maxX,i.maxY);return 0===a?0:Math.min(r,n,o,a)}(i,r,c);p>o||s.push({node:c,dist:p})}for(;s.length&&!s.peek().node.children;){var h=s.pop(),d=h.node,f=Ct(d,e,i),_=Ct(d,r,n);if(h.dist<f&&h.dist<_&&Et(i,d,a)&&Et(r,d,a))return d}(u=s.pop())&&(u=u.node)}return null}(o,h.prev.p,d,f,h.next.next.p,g,l))&&Math.min(At(u,d),At(u,f))<=g&&(a.push(h),a.push(It(u,h)),o.remove(u),l.remove(h),l.insert(St(h)),l.insert(St(h.next)))}}h=r;var m=[];do{m.push(h.p),h=h.next}while(h!==r);return m.push(h.p),m}function xt(t,e){return t.dist-e.dist}function wt(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function Et(t,e,i){for(var r=Math.min(t[0],e[0]),n=Math.min(t[1],e[1]),o=Math.max(t[0],e[0]),a=Math.max(t[1],e[1]),s=i.search({minX:r,minY:n,maxX:o,maxY:a}),u=0;u<s.length;u++)if(function(t,e,i,r){return t!==r&&e!==i&&oa(t,e,i)>0!=oa(t,e,r)>0&&oa(i,r,t)>0!=oa(i,r,e)>0}(s[u].p,s[u].next.p,t,e))return!1;return!0}function St(t){var e=t.p,i=t.next.p;return t.minX=Math.min(e[0],i[0]),t.minY=Math.min(e[1],i[1]),t.maxX=Math.max(e[0],i[0]),t.maxY=Math.max(e[1],i[1]),t}function It(t,e){var i={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(i.next=e.next,i.prev=e,e.next.prev=i,e.next=i):(i.prev=i,i.next=i),i}function At(t,e){var i=t[0]-e[0],r=t[1]-e[1];return i*i+r*r}function Ct(t,e,i){var r=e[0],n=e[1],o=i[0]-r,a=i[1]-n;if(0!==o||0!==a){var s=((t[0]-r)*o+(t[1]-n)*a)/(o*o+a*a);s>1?(r=i[0],n=i[1]):s>0&&(r+=o*s,n+=a*s)}return(o=t[0]-r)*o+(a=t[1]-n)*a}function Pt(t,e,i,r,n,o,a,s){var u,l,c,p,h=i-t,d=r-e,f=a-n,_=s-o,g=t-n,m=e-o,y=h*h+d*d,v=h*f+d*_,b=f*f+_*_,x=h*g+d*m,w=f*g+_*m,E=y*b-v*v,S=E,I=E;0===E?(l=0,S=1,p=w,I=b):(p=y*w-v*x,(l=v*w-b*x)<0?(l=0,p=w,I=b):l>S&&(l=S,p=w+v,I=b)),p<0?(p=0,-x<0?l=0:-x>y?l=S:(l=-x,S=y)):p>I&&(p=I,-x+v<0?l=0:-x+v>y?l=S:(l=-x+v,S=y));var A=(1-(c=0===p?0:p/I))*n+c*a-((1-(u=0===l?0:l/S))*t+u*i),C=(1-c)*o+c*s-((1-u)*e+u*r);return A*A+C*C}function Tt(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var i=e.concavity||1/0,r=[];if(C(t,(function(t){r.push([t[0],t[1]])})),!r.length)return null;var n=aa(r,i);return n.length>3?o([n]):null}function Lt(t,e,i){if("object"!=typeof(i=i||{}))throw new Error("options is invalid");var r=i.ignoreBoundary;if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var n=G(t),o=j(e),a=e.geometry?e.geometry.type:e.type,s=e.bbox;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(n,s))return!1;"Polygon"===a&&(o=[o]);for(var u=0,l=!1;u<o.length&&!l;u++)if(Mt(n,o[u][0],r)){for(var c=!1,p=1;p<o[u].length&&!c;)Mt(n,o[u][p],!r)&&(c=!0),p++;c||(l=!0)}return l}function Mt(t,e,i){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var n=0,o=e.length-1;n<e.length;o=n++){var a=e[n][0],s=e[n][1],u=e[o][0],l=e[o][1];if(t[1]*(a-u)+s*(u-t[0])+l*(t[0]-a)==0&&(a-t[0])*(u-t[0])<=0&&(s-t[1])*(l-t[1])<=0)return!i;s>t[1]!=l>t[1]&&t[0]<(u-a)*(t[1]-s)/(l-s)+a&&(r=!r)}return r}function kt(t,e){var i=[];return N(e,(function(e){M(t,(function(t){Lt(t,e)&&i.push(t)}))})),l(i)}function Rt(t,e){if("FeatureCollection"!==t.type)throw new Error("points must be a FeatureCollection");var i=!1;return l(function(t){if(t.length<3)return[];t.sort(Dt);for(var e,i,r,n,o,a,s=t.length-1,u=t[s].x,l=t[0].x,c=t[s].y,p=c;s--;)t[s].y<c&&(c=t[s].y),t[s].y>p&&(p=t[s].y);var h,d=l-u,f=p-c,_=d>f?d:f,g=.5*(l+u),m=.5*(p+c),y=[new Nt({x:g-20*_,y:m-_,__sentinel:!0},{x:g,y:m+20*_,__sentinel:!0},{x:g+20*_,y:m-_,__sentinel:!0})],v=[],b=[];for(s=t.length;s--;){for(b.length=0,h=y.length;h--;)(d=t[s].x-y[h].x)>0&&d*d>y[h].r?(v.push(y[h]),y.splice(h,1)):d*d+(f=t[s].y-y[h].y)*f>y[h].r||(b.push(y[h].a,y[h].b,y[h].b,y[h].c,y[h].c,y[h].a),y.splice(h,1));for(Ot(b),h=b.length;h;)i=b[--h],e=b[--h],r=t[s],n=i.x-e.x,o=i.y-e.y,a=2*(n*(r.y-i.y)-o*(r.x-i.x)),Math.abs(a)>1e-12&&y.push(new Nt(e,i,r))}for(Array.prototype.push.apply(v,y),s=v.length;s--;)(v[s].a.__sentinel||v[s].b.__sentinel||v[s].c.__sentinel)&&v.splice(s,1);return v}(t.features.map((function(t){var r={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?r.z=t.properties[e]:3===t.geometry.coordinates.length&&(i=!0,r.z=t.geometry.coordinates[2]),r}))).map((function(t){var e=[t.a.x,t.a.y],r=[t.b.x,t.b.y],n=[t.c.x,t.c.y],a={};return i?(e.push(t.a.z),r.push(t.b.z),n.push(t.c.z)):a={a:t.a.z,b:t.b.z,c:t.c.z},o([[e,r,n,e]],a)})))}function Nt(t,e,i){this.a=t,this.b=e,this.c=i;var r,n,o=e.x-t.x,a=e.y-t.y,s=i.x-t.x,u=i.y-t.y,l=o*(t.x+e.x)+a*(t.y+e.y),c=s*(t.x+i.x)+u*(t.y+i.y),p=2*(o*(i.y-e.y)-a*(i.x-e.x));this.x=(u*l-a*c)/p,this.y=(o*c-s*l)/p,r=this.x-t.x,n=this.y-t.y,this.r=r*r+n*n}function Dt(t,e){return e.x-t.x}function Ot(t){var e,i,r,n,o,a=t.length;t:for(;a;)for(i=t[--a],e=t[--a],r=a;r;)if(o=t[--r],n=t[--r],e===n&&i===o||e===o&&i===n){t.splice(a,2),t.splice(r,2),a-=2;continue t}}function zt(t,e,i){if(!S(i=i||{}))throw new Error("options is invalid");var r=i.units,n=G(t),o=G(e),a=b(o[1]-n[1]),s=b(o[0]-n[0]),u=b(n[1]),l=b(o[1]),c=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(u)*Math.cos(l);return _(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),r)}function Ft(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Bt(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(i){switch(i){case"type":case"features":return;default:e[i]=t[i]}})),e.features=t.features.map((function(t){return Bt(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Ut(t);default:throw new Error("unknown GeoJSON type")}}function Bt(t){var e={type:"Feature"};return Object.keys(t).forEach((function(i){switch(i){case"type":case"properties":case"geometry":return;default:e[i]=t[i]}})),e.properties=qt(t.properties),e.geometry=Ut(t.geometry),e}function qt(t){var e={};return t?(Object.keys(t).forEach((function(i){var r=t[i];"object"==typeof r?null===r?e[i]=null:r.length?e[i]=r.map((function(t){return t})):e[i]=qt(r):e[i]=r})),e):e}function Ut(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return Ut(t)})),e):(e.coordinates=Vt(t.coordinates),e)}function Vt(t){return"object"!=typeof t[0]?t.slice():t.map((function(t){return Vt(t)}))}function Gt(t,e){function i(t,e){e.length&&e.pop();for(var i=l[t<0?~t:t],r=0,n=i.length;r<n;++r)e.push(u(i[r],r));t<0&&ca(e,n)}function r(t){return u(t)}function n(t){for(var e=[],r=0,n=t.length;r<n;++r)i(t[r],e);return e.length<2&&e.push(e[0]),e}function o(t){for(var e=n(t);e.length<4;)e.push(e[0]);return e}function a(t){return t.map(o)}function s(t){var e,i=t.type;switch(i){case"GeometryCollection":return{type:i,geometries:t.geometries.map(s)};case"Point":e=r(t.coordinates);break;case"MultiPoint":e=t.coordinates.map(r);break;case"LineString":e=n(t.arcs);break;case"MultiLineString":e=t.arcs.map(n);break;case"Polygon":e=a(t.arcs);break;case"MultiPolygon":e=t.arcs.map(a);break;default:return null}return{type:i,coordinates:e}}var u=la(t.transform),l=t.arcs;return s(e)}function jt(t,e){function i(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(i);break;case"Polygon":r(t.arcs);break;case"MultiPolygon":t.arcs.forEach(r)}}function r(t){t.forEach((function(e){e.forEach((function(e){(o[e=e<0?~e:e]||(o[e]=[])).push(t)}))})),a.push(t)}function n(e){return function(t){for(var e,i=-1,r=t.length,n=t[r-1],o=0;++i<r;)e=n,n=t[i],o+=e[0]*n[1]-e[1]*n[0];return Math.abs(o)}(Gt(t,{type:"Polygon",arcs:[e]}).coordinates[0])}var o={},a=[],s=[];return e.forEach(i),a.forEach((function(t){if(!t._){var e=[],i=[t];for(t._=1,s.push(e);t=i.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){o[t<0?~t:t].forEach((function(t){t._||(t._=1,i.push(t))}))}))}))}})),a.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:s.map((function(e){var i,r=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){o[t<0?~t:t].length<2&&r.push(t)}))}))})),(i=(r=pa(t,r)).length)>1)for(var a,s,u=1,l=n(r[0]);u<i;++u)(a=n(r[u]))>l&&(s=r[0],r[0]=r[u],r[u]=s,l=a);return r}))}}function Kt(t,e,i){for(var r,n=e+(i---e>>1);e<n;++e,--i)r=t[e],t[e]=t[i],t[i]=r}function Xt(t){return null==t?{type:null}:("FeatureCollection"===t.type?function(t){var e={type:"GeometryCollection",geometries:t.features.map(Zt)};return null!=t.bbox&&(e.bbox=t.bbox),e}:"Feature"===t.type?Zt:Yt)(t)}function Zt(t){var e,i=Yt(t.geometry);for(e in null!=t.id&&(i.id=t.id),null!=t.bbox&&(i.bbox=t.bbox),t.properties){i.properties=t.properties;break}return i}function Yt(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Yt)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Ht(t){var e,i=t[0],r=t[1];return r<i&&(e=i,i=r,r=e),i+31*r}function Wt(t,e){var i,r=t[0],n=t[1],o=e[0],a=e[1];return n<r&&(i=r,r=n,n=i),a<o&&(i=o,o=a,a=i),r===o&&n===a}function Qt(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var i=e.mutate;if("FeatureCollection"!==Q(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==i&&void 0!==i||(t=Ft(t));var r=[],n=U(t,(function(t,e){return function(t,e){var i,r=t.geometry.coordinates,n=e.geometry.coordinates,o=Jt(r[0]),a=Jt(r[r.length-1]),u=Jt(n[0]),l=Jt(n[n.length-1]);if(o===l)i=n.concat(r.slice(1));else if(u===a)i=r.concat(n.slice(1));else if(o===u)i=r.slice(1).reverse().concat(n);else{if(a!==l)return null;i=r.concat(n.reverse().slice(1))}return s(i)}(t,e)||(r.push(t),e)}));return n&&r.push(n),r.length?1===r.length?r[0]:c(r.map((function(t){return t.coordinates}))):null}function Jt(t){return t[0].toString()+","+t[1].toString()}function $t(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var i=e.mutate;if("FeatureCollection"!==Q(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==i&&void 0!==i||(t=Ft(t));var r=function(t){var e={};O(t,(function(t){e[t.geometry.type]=!0}));var i=Object.keys(e);return 1===i.length?i[0]:null}(t);if(!r)throw new Error("geojson must be homogenous");switch(r){case"LineString":return Qt(t,e);case"Polygon":return function(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var i=e.mutate;if("FeatureCollection"!==Q(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==i&&void 0!==i||(t=Ft(t));var r=[];O(t,(function(t){r.push(t.geometry)}));var n=wa({geoms:d(r).geometry});return ha(n,n.objects.geoms.geometries)}(t,e);default:throw new Error(r+" is not supported")}}function te(t,i){var r="object"==typeof i?i.mutate:i;if(!t)throw new Error("geojson is required");var n=Q(t),o=[];switch(n){case"LineString":o=ee(t);break;case"MultiLineString":case"Polygon":j(t).forEach((function(t){o.push(ee(t))}));break;case"MultiPolygon":j(t).forEach((function(t){var e=[];t.forEach((function(t){e.push(ee(t))})),o.push(e)}));break;case"Point":return t;case"MultiPoint":var a={};j(t).forEach((function(t){var e=t.join("-");a.hasOwnProperty(e)||(o.push(t),a[e]=!0)}));break;default:throw new Error(n+" geometry not supported")}return t.coordinates?!0===r?(t.coordinates=o,t):{type:n,coordinates:o}:!0===r?(t.geometry.coordinates=o,t):e({type:n,coordinates:o},t.properties,t.bbox,t.id)}function ee(t){var e=j(t);if(2===e.length&&!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(e[0],e[1]))return e;var i,r,n,o=[],a=e.length-1;o.push(e[0]);for(var s=1;s<a;s++)i=e[s-1],r=e[s],function(t,e,i){var r=i[0],n=i[1],o=t[0],a=t[1],s=e[0],u=e[1],l=s-o,c=u-a;return(r-o)*c-(n-a)*l==0&&(Math.abs(l)>=Math.abs(c)?l>0?o<=r&&r<=s:s<=r&&r<=o:c>0?a<=n&&n<=u:u<=n&&n<=a)}(i,n=e[s+1],r)||o.push(r);return o.push(n),o}function ie(t,e){var i=t.x-e.x,r=t.y-e.y;return i*i+r*r}function re(t,e,i){var r=e.x,n=e.y,o=i.x-r,a=i.y-n;if(0!==o||0!==a){var s=((t.x-r)*o+(t.y-n)*a)/(o*o+a*a);s>1?(r=i.x,n=i.y):s>0&&(r+=o*s,n+=a*s)}return(o=t.x-r)*o+(a=t.y-n)*a}function ne(t,e,i,r,n){for(var o,a=r,s=e+1;s<i;s++){var u=re(t[s],t[e],t[i]);u>a&&(o=s,a=u)}a>r&&(o-e>1&&ne(t,e,o,r,n),n.push(t[o]),i-o>1&&ne(t,o,i,r,n))}function oe(t,e,i){if(t.length<=2)return t;var r=void 0!==e?e*e:1;return function(t,e){var i=t.length-1,r=[t[0]];return ne(t,0,i,e,r),r.push(t[i]),r}(t=i?t:function(t,e){for(var i,r=t[0],n=[r],o=1,a=t.length;o<a;o++)ie(i=t[o],r)>e&&(n.push(i),r=i);return r!==i&&n.push(i),n}(t,r),r)}function ae(t,e,i){return oe(t.map((function(t){return{x:t[0],y:t[1],z:t[2]}})),e,i).map((function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]}))}function se(t,e,i){return t.map((function(t){var r=t.map((function(t){return{x:t[0],y:t[1]}}));if(r.length<4)throw new Error("invalid polygon");for(var n=oe(r,e,i).map((function(t){return[t.x,t.y]}));!function(t){return!(t.length<3||3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}(n);)n=oe(r,e-=.01*e,i).map((function(t){return[t.x,t.y]}));return n[n.length-1][0]===n[0][0]&&n[n.length-1][1]===n[0][1]||n.push(n[0]),n}))}function ue(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var i=e.resolution||1e4,r=e.sharpness||.85;if(!t)throw new Error("line is required");if(!E(i))throw new Error("resolution must be an number");if(!E(r))throw new Error("sharpness must be an number");for(var n=[],o=new Ea({points:H(t).coordinates.map((function(t){return{x:t[0],y:t[1]}})),duration:i,sharpness:r}),a=0;a<o.duration;a+=10){var u=o.pos(a);Math.floor(a/100)%2==0&&n.push([u.x,u.y])}return s(n,t.properties)}function le(t){I(t);var e=Number(t[0]),i=Number(t[1]),r=Number(t[2]),n=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[e,i];return o([[a,[r,i],[r,n],[e,n],a]])}function ce(t){return le(V(t))}function pe(t){var e=t[0],i=t[1],r=t[2],n=t[3];if(zt(t.slice(0,2),[r,i])>=zt(t.slice(0,2),[e,n])){var o=(i+n)/2;return[e,o-(r-e)/2,r,o+(r-e)/2]}var a=(e+r)/2;return[a-(n-i)/2,i,a+(n-i)/2,n]}function he(t,e,i,n){if(!S(n=n||{}))throw new Error("options is invalid");var o=n.units,a=n.properties,s=G(t),u=b(s[0]),l=b(s[1]),c=b(i),p=g(e,o),h=Math.asin(Math.sin(l)*Math.cos(p)+Math.cos(l)*Math.sin(p)*Math.cos(c));return r([v(u+Math.atan2(Math.sin(c)*Math.sin(p)*Math.cos(l),Math.cos(p)-Math.sin(l)*Math.sin(h))),v(h)],a)}function de(t,e,i){var r=(i=i||{}).steps||64,n=i.properties;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if("object"!=typeof i)throw new Error("options must be an object");if("number"!=typeof r)throw new Error("steps must be a number");r=r||64,n=n||t.properties||{};for(var a=[],s=0;s<r;s++)a.push(he(t,e,-360*s/r,i).geometry.coordinates);return a.push(a[0]),o([a],n)}function fe(t,e,i){if(!S(i=i||{}))throw new Error("options is invalid");if(!0===i.final)return function(t,e){var i=fe(e,t);return(i+180)%360}(t,e);var r=G(t),n=G(e),o=b(r[0]),a=b(n[0]),s=b(r[1]),u=b(n[1]),l=Math.sin(a-o)*Math.cos(u),c=Math.cos(s)*Math.sin(u)-Math.sin(s)*Math.cos(u)*Math.cos(a-o);return v(Math.atan2(l,c))}function _e(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var i=e.properties;if(!t)throw new Error("geojson is required");var n=V(t);return r([(n[0]+n[2])/2,(n[1]+n[3])/2],i)}function ge(t,e){var i=0,n=0,o=0;return C(t,(function(t){i+=t[0],n+=t[1],o++}),!0),r([i/o,n/o],e)}function me(t,e){switch(Q(t)){case"Point":return t;case"Polygon":var i=[];C(t,(function(t){i.push(t)}));var n,o,a,s,u,l,c,p,h=ge(t,e),d=h.geometry.coordinates,f=0,_=0,g=0,m=i.map((function(t){return[t[0]-d[0],t[1]-d[1]]}));for(n=0;n<i.length-1;n++)s=(o=m[n])[0],l=o[1],u=(a=m[n+1])[0],g+=p=s*(c=a[1])-u*l,f+=(s+u)*p,_+=(l+c)*p;if(0===g)return h;var y=1/(.5*g*6);return r([d[0]+y*f,d[1]+y*_],e);default:var v=Tt(t);return v?me(v,e):ge(t,e)}}function ye(t){var e=[];return"FeatureCollection"===t.type?M(t,(function(t){C(t,(function(i){e.push(r(i,t.properties))}))})):C(t,(function(i){e.push(r(i,t.properties))})),l(e)}function ve(t,e,i){i=i||2;var r,n,o,a,s,u,l,c=e&&e.length,p=c?e[0]*i:t.length,h=be(t,0,p,i,!0),d=[];if(!h)return d;if(c&&(h=function(t,e,i,r){var n,o,a,s=[];for(n=0,o=e.length;n<o;n++)(a=be(t,e[n]*r,n<o-1?e[n+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(function(t){var e=t,i=t;do{e.x<i.x&&(i=e),e=e.next}while(e!==t);return i}(a));for(s.sort(Ee),n=0;n<s.length;n++)!function(t,e){if(e=function(t,e){var i,r=e,n=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>a){if(a=s,s===n){if(o===r.y)return r;if(o===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!i)return null;if(n===a)return i.prev;var u,l=i,c=i.x,p=i.y,h=1/0;for(r=i.next;r!==l;)n>=r.x&&r.x>=c&&n!==r.x&&Ie(o<p?n:a,o,c,p,o<p?a:n,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(n-r.x))<h||u===h&&r.x>i.x)&&Te(r,t)&&(i=r,h=u),r=r.next;return i}(t,e)){var i=Le(e,t);xe(i,i.next)}}(s[n],i),i=xe(i,i.next);return i}(t,e,h,i)),t.length>80*i){r=o=t[0],n=a=t[1];for(var f=i;f<p;f+=i)(s=t[f])<r&&(r=s),(u=t[f+1])<n&&(n=u),s>o&&(o=s),u>a&&(a=u);l=0!==(l=Math.max(o-r,a-n))?1/l:0}return we(h,d,i,r,n,l),d}function be(t,e,i,r,n){var o,a;if(n===Ne(t,e,i,r)>0)for(o=e;o<i;o+=r)a=Me(o,t[o],t[o+1],a);else for(o=i-r;o>=e;o-=r)a=Me(o,t[o],t[o+1],a);return a&&Ce(a,a.next)&&(ke(a),a=a.next),a}function xe(t,e){if(!t)return t;e||(e=t);var i,r=t;do{if(i=!1,r.steiner||!Ce(r,r.next)&&0!==Ae(r.prev,r,r.next))r=r.next;else{if(ke(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function we(t,e,i,r,n,o,a){if(t){!a&&o&&function(t,e,i,r){var n=t;do{null===n.z&&(n.z=Se(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,i,r,n,o,a,s,u,l=1;do{for(i=t,t=null,o=null,a=0;i;){for(a++,r=i,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||i.z<=r.z)?(n=i,i=i.nextZ,s--):(n=r,r=r.nextZ,u--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;i=r}o.nextZ=null,l*=2}while(a>1)}(n)}(t,r,n,o);for(var s,u,l=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?function(t,e,i,r){var n=t.prev,o=t,a=t.next;if(Ae(n,o,a)>=0)return!1;for(var s=n.x<o.x?n.x<a.x?n.x:a.x:o.x<a.x?o.x:a.x,u=n.y<o.y?n.y<a.y?n.y:a.y:o.y<a.y?o.y:a.y,l=n.x>o.x?n.x>a.x?n.x:a.x:o.x>a.x?o.x:a.x,c=n.y>o.y?n.y>a.y?n.y:a.y:o.y>a.y?o.y:a.y,p=Se(s,u,e,i,r),h=Se(l,c,e,i,r),d=t.nextZ;d&&d.z<=h;){if(d!==t.prev&&d!==t.next&&Ie(n.x,n.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Ae(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(d=t.prevZ;d&&d.z>=p;){if(d!==t.prev&&d!==t.next&&Ie(n.x,n.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Ae(d.prev,d,d.next)>=0)return!1;d=d.prevZ}return!0}(t,r,n,o):function(t){var e=t.prev,i=t,r=t.next;if(Ae(e,i,r)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(Ie(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&Ae(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}(t))e.push(s.i/i),e.push(t.i/i),e.push(u.i/i),ke(t),t=u.next,l=u.next;else if((t=u)===l){a?1===a?we(t=function(t,e,i){var r=t;do{var n=r.prev,o=r.next.next;!Ce(n,o)&&Pe(n,r,r.next,o)&&Te(n,o)&&Te(o,n)&&(e.push(n.i/i),e.push(r.i/i),e.push(o.i/i),ke(r),ke(r.next),r=t=o),r=r.next}while(r!==t);return r}(t,e,i),e,i,r,n,o,2):2===a&&function(t,e,i,r,n,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&Pe(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&Te(t,e)&&Te(e,t)&&function(t,e){var i=t,r=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&n<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==t);return r}(t,e)}(a,s)){var u=Le(a,s);return a=xe(a,a.next),u=xe(u,u.next),we(a,e,i,r,n,o),void we(u,e,i,r,n,o)}s=s.next}a=a.next}while(a!==t)}(t,e,i,r,n,o):we(xe(t),e,i,r,n,o,1);break}}}function Ee(t,e){return t.x-e.x}function Se(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Ie(t,e,i,r,n,o,a,s){return(n-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(i-a)*(e-s)>=0&&(i-a)*(o-s)-(n-a)*(r-s)>=0}function Ae(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function Ce(t,e){return t.x===e.x&&t.y===e.y}function Pe(t,e,i,r){return!!(Ce(t,e)&&Ce(i,r)||Ce(t,r)&&Ce(i,e))||Ae(t,e,i)>0!=Ae(t,e,r)>0&&Ae(i,r,t)>0!=Ae(i,r,e)>0}function Te(t,e){return Ae(t.prev,t,t.next)<0?Ae(t,e,t.next)>=0&&Ae(t,t.prev,e)>=0:Ae(t,e,t.prev)<0||Ae(t,t.next,e)<0}function Le(t,e){var i=new Re(t.i,t.x,t.y),r=new Re(e.i,e.x,e.y),n=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=n,n.prev=i,r.next=i,i.prev=r,o.next=r,r.prev=o,r}function Me(t,e,i,r){var n=new Re(t,e,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function ke(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Re(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ne(t,e,i,r){for(var n=0,o=e,a=i-r;o<i;o+=r)n+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return n}function De(t){var e=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var a=0;a<e;a++)i.vertices.push(t[n][o][a]);n>0&&(r+=t[n-1].length,i.holes.push(r))}return i}(t),i=Sa(e.vertices,e.holes,2),r=[],n=[];i.forEach((function(t,r){var o=i[r];n.push([e.vertices[2*o],e.vertices[2*o+1]])}));for(var a=0;a<n.length;a+=3){var s=n.slice(a,a+3);s.push(n[a]),r.push(o([s]))}return r}function Oe(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var i,r=1/0;return M(e,(function(e,n){var o=zt(t,e);o<r&&((i=Ft(e)).properties.featureIndex=n,i.properties.distanceToPoint=o,r=o)})),i}function ze(t,e,i,r,n){Fe(t,e,i||0,r||t.length-1,n||function(t,e){return t<e?-1:t>e?1:0})}function Fe(t,e,i,r,n){for(;r>i;){if(r-i>600){var o=r-i+1,a=e-i+1,s=Math.log(o),u=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1);Fe(t,e,Math.max(i,Math.floor(e-a*u/o+l)),Math.min(r,Math.floor(e+(o-a)*u/o+l)),n)}var c=t[e],p=i,h=r;for(Be(t,i,e),n(t[r],c)>0&&Be(t,i,r);p<h;){for(Be(t,p,h),p++,h--;n(t[p],c)<0;)p++;for(;n(t[h],c)>0;)h--}0===n(t[i],c)?Be(t,i,h):Be(t,++h,r),h<=e&&(i=h+1),e<=h&&(r=h-1)}}function Be(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function qe(t,e){if(!(this instanceof qe))return new qe(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Ue(t,e){Ve(t,0,t.children.length,e,t)}function Ve(t,e,i,r,n){n||(n=We(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var o,a=e;a<i;a++)o=t.children[a],Ge(n,t.leaf?r(o):o);return n}function Ge(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function je(t,e){return t.minX-e.minX}function Ke(t,e){return t.minY-e.minY}function Xe(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Ze(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Ye(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function He(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function We(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Qe(t,e,i,r,n){for(var o,a=[e,i];a.length;)(i=a.pop())-(e=a.pop())<=r||(ze(t,o=e+Math.ceil((i-e)/r/2)*r,e,i,n),a.push(e,o,o,i))}function Je(t){var e=qe(t);return e.insert=function(t){if(Array.isArray(t)){var e=t;(t=$e(e)).bbox=e}else t.bbox=t.bbox?t.bbox:ti(t);return qe.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){var i=$e(t);i.bbox=t,e.push(i)})):M(t,(function(t){t.bbox=t.bbox?t.bbox:ti(t),e.push(t)})),qe.prototype.load.call(this,e)},e.remove=function(t){if(Array.isArray(t)){var e=t;(t=$e(e)).bbox=e}return qe.prototype.remove.call(this,t)},e.clear=function(){return qe.prototype.clear.call(this)},e.search=function(t){return{type:"FeatureCollection",features:qe.prototype.search.call(this,this.toBBox(t))}},e.collides=function(t){return qe.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return{type:"FeatureCollection",features:qe.prototype.all.call(this)}},e.toJSON=function(){return qe.prototype.toJSON.call(this)},e.fromJSON=function(t){return qe.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;return{minX:(e=t.bbox?t.bbox:Array.isArray(t)&&4===t.length?t:ti(t))[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}function $e(t){var e=[t[0],t[1]],i=[t[0],t[3]],r=[t[2],t[3]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:[[e,[t[2],t[1]],r,i,e]]}}}function ti(t){var e=[1/0,1/0,-1/0,-1/0];return C(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function ei(t){if(!t)throw new Error("geojson is required");var e=[];return O(t,(function(t){!function(t,e){var i=[],r=t.geometry;switch(r.type){case"Polygon":i=j(r);break;case"LineString":i=[j(r)]}i.forEach((function(i){(function(t,e){var i=[];return t.reduce((function(t,r){var n=s([t,r],e);return n.bbox=function(t,e){var i=t[0],r=t[1],n=e[0],o=e[1];return[i<n?i:n,r<o?r:o,i>n?i:n,r>o?r:o]}(t,r),i.push(n),r})),i})(i,t.properties).forEach((function(t){t.id=e.length,e.push(t)}))}))}(t,e)})),l(e)}function ii(t,i){var r={},n=[];if("LineString"===t.type&&(t=e(t)),"LineString"===i.type&&(i=e(i)),"Feature"===t.type&&"Feature"===i.type&&"LineString"===t.geometry.type&&"LineString"===i.geometry.type&&2===t.geometry.coordinates.length&&2===i.geometry.coordinates.length){var o=ri(t,i);return o&&n.push(o),l(n)}var a=Je();return a.load(ei(i)),M(ei(t),(function(t){M(a.search(t),(function(e){var i=ri(t,e);if(i){var o=j(i).join(",");r[o]||(r[o]=!0,n.push(i))}}))})),l(n)}function ri(t,e){var i=j(t),n=j(e);if(2!==i.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==n.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var o=i[0][0],a=i[0][1],s=i[1][0],u=i[1][1],l=n[0][0],c=n[0][1],p=n[1][0],h=n[1][1],d=(h-c)*(s-o)-(p-l)*(u-a);if(0===d)return null;var f=((p-l)*(a-c)-(h-c)*(o-l))/d,_=((s-o)*(a-c)-(u-a)*(o-l))/d;return f>=0&&f<=1&&_>=0&&_<=1?r([o+f*(s-o),a+f*(u-a)]):null}function ni(t,e,i){if(!S(i=i||{}))throw new Error("options is invalid");var n=t.geometry?t.geometry.type:t.type;if("LineString"!==n&&"MultiLineString"!==n)throw new Error("lines must be LineString or MultiLineString");var o=r([1/0,1/0],{dist:1/0}),a=0;return O(t,(function(t){for(var n=j(t),u=0;u<n.length-1;u++){var l=r(n[u]);l.properties.dist=zt(e,l,i);var c=r(n[u+1]);c.properties.dist=zt(e,c,i);var p=zt(l,c,i),h=Math.max(l.properties.dist,c.properties.dist),d=fe(l,c),f=he(e,h,d+90,i),_=he(e,h,d-90,i),g=ii(s([f.geometry.coordinates,_.geometry.coordinates]),s([l.geometry.coordinates,c.geometry.coordinates])),m=null;g.features.length>0&&((m=g.features[0]).properties.dist=zt(e,m,i),m.properties.location=a+zt(l,m,i)),l.properties.dist<o.properties.dist&&((o=l).properties.index=u,o.properties.location=a),c.properties.dist<o.properties.dist&&((o=c).properties.index=u+1,o.properties.location=a+p),m&&m.properties.dist<o.properties.dist&&((o=m).properties.index=u),a+=p}})),o}function oi(t,e,i){if(!S(i=i||{}))throw new Error("options is invalid");var r,n=i.final;if(!t)throw new Error("start point is required");if(!e)throw new Error("end point is required");return(r=n?ai(G(e),G(t)):ai(G(t),G(e)))>180?-(360-r):r}function ai(t,e){var i=b(t[1]),r=b(e[1]),n=b(e[0]-t[0]);n>Math.PI&&(n-=2*Math.PI),n<-Math.PI&&(n+=2*Math.PI);var o=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(i/2+Math.PI/4));return(v(Math.atan2(n,o))+360)%360}function si(t,e,i){if(!S(i=i||{}))throw new Error("options is invalid");var r=i.units;if(!t)throw new Error("from point is required");if(!e)throw new Error("to point is required");var n=G(t),o=G(e);return o[0]+=o[0]-n[0]>180?-360:n[0]-o[0]>180?360:0,x(function(t,e,i){var r=i=void 0===i?Oo:Number(i),n=t[1]*Math.PI/180,o=e[1]*Math.PI/180,a=o-n,s=Math.abs(e[0]-t[0])*Math.PI/180;s>Math.PI&&(s-=2*Math.PI);var u=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(n/2+Math.PI/4)),l=Math.abs(u)>1e-11?a/u:Math.cos(n);return Math.sqrt(a*a+l*l*s*s)*r}(n,o),"meters",r)}function ui(t,e){return ci(t,"mercator",e)}function li(t,e){return ci(t,"wgs84",e)}function ci(t,e,i){if(!S(i=i||{}))throw new Error("options is invalid");var r=i.mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&E(t[0])?t="mercator"===e?pi(t):hi(t):(!0!==r&&(t=Ft(t)),C(t,(function(t){var i="mercator"===e?pi(t):hi(t);t[0]=i[0],t[1]=i[1]}))),t}function pi(t){var e=Math.PI/180,i=20037508.342789244,r=[6378137*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]))*e,6378137*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return r[0]>i&&(r[0]=i),r[0]<-i&&(r[0]=-i),r[1]>i&&(r[1]=i),r[1]<-i&&(r[1]=-i),r}function hi(t){var e=180/Math.PI;return[t[0]*e/6378137,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/6378137)))*e]}function di(t,i,n){if(!S(n=n||{}))throw new Error("options is invalid");if(!t)throw new Error("pt is required");if(Array.isArray(t)?t=r(t):"Point"===t.type?t=e(t):Z(t,"Point","point"),!i)throw new Error("line is required");Array.isArray(i)?i=s(i):"LineString"===i.type?i=e(i):Z(i,"LineString","line");var o=1/0,a=t.geometry.coordinates;return F(i,(function(t){var e=t.geometry.coordinates[0],i=t.geometry.coordinates[1],s=function(t,e,i,n){var o=n.mercator,a=!0!==o?zt(e,t,n):fi(e,t,n),s=y(!0!==o?fe(e,t):oi(e,t)),u=y(!0!==o?fe(e,i):oi(e,i)),l=Math.abs(s-u);if(l>90)return a;var c=(u+180)%360,p=y(!0!==o?fe(i,t):oi(i,t)),h=Math.abs(p-c);return h>180&&(h=Math.abs(h-360)),h>90?!0!==o?zt(t,i,n):fi(t,i,n):!0!==o?a*Math.sin(b(l)):function(t,e,i,n){var o=0;(Math.abs(t[0])>=180||Math.abs(e[0])>=180||Math.abs(i[0])>=180)&&(o=t[0]>0||e[0]>0||i[0]>0?-180:180);var a=r(i),s=li(function(t,e,i){var r=t[0],n=t[1],o=e[0]-r,a=e[1]-n,s=((i[0]-r)*o+(i[1]-n)*a)/(o*o+a*a);return[r+s*o,n+s*a]}(ui([t[0]+o,t[1]]),ui([e[0]+o,e[1]]),ui([i[0]+o,i[1]])));return 0!==o&&(s[0]-=o),si(a,s,n)}(e,i,t,n)}(a,e,i,n);o>s&&(o=s)})),o}function fi(t,e,i){var r=i.units,n=0;Math.abs(t[0])>=180&&(n=t[0]>0?-180:180),Math.abs(e[0])>=180&&(n=e[0]>0?-180:180);var o=ui([t[0]+n,t[1]]),a=ui([e[0]+n,e[1]]),s=function(t){return t*t},u=s(o[0]-a[0])+s(o[1]-a[1]);return x(Math.sqrt(u),"meters",r)}function _i(t){for(var i=function(t){return"FeatureCollection"!==t.type?"Feature"!==t.type?l([e(t)]):l([t]):t}(t),n=_e(i),o=!1,a=0;!o&&a<i.features.length;){var s,u=i.features[a].geometry,c=!1;if("Point"===u.type)n.geometry.coordinates[0]===u.coordinates[0]&&n.geometry.coordinates[1]===u.coordinates[1]&&(o=!0);else if("MultiPoint"===u.type){var p=!1;for(s=0;!p&&s<u.coordinates.length;)n.geometry.coordinates[0]===u.coordinates[s][0]&&n.geometry.coordinates[1]===u.coordinates[s][1]&&(o=!0,p=!0),s++}else if("LineString"===u.type)for(s=0;!c&&s<u.coordinates.length-1;)gi(n.geometry.coordinates[0],n.geometry.coordinates[1],u.coordinates[s][0],u.coordinates[s][1],u.coordinates[s+1][0],u.coordinates[s+1][1])&&(c=!0,o=!0),s++;else if("MultiLineString"===u.type)for(var h=0;h<u.coordinates.length;){c=!1,s=0;for(var d=u.coordinates[h];!c&&s<d.length-1;)gi(n.geometry.coordinates[0],n.geometry.coordinates[1],d[s][0],d[s][1],d[s+1][0],d[s+1][1])&&(c=!0,o=!0),s++;h++}else"Polygon"!==u.type&&"MultiPolygon"!==u.type||Lt(n,u)&&(o=!0);a++}if(o)return n;var f=l([]);for(a=0;a<i.features.length;a++)f.features=f.features.concat(ye(i.features[a]).features);return r(Oe(n,f).geometry.coordinates)}function gi(t,e,i,r,n,o){return Math.sqrt((n-i)*(n-i)+(o-r)*(o-r))===Math.sqrt((t-i)*(t-i)+(e-r)*(e-r))+Math.sqrt((n-t)*(n-t)+(o-e)*(o-e))}function mi(t){return D(t,(function(t,e){return t+yi(e)}),0)}function yi(t){var e,i=0;switch(t.type){case"Polygon":return vi(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)i+=vi(t.coordinates[e]);return i;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(e=0;e<t.geometries.length;e++)i+=yi(t.geometries[e]);return i}}function vi(t){var e=0;if(t&&t.length>0){e+=Math.abs(bi(t[0]));for(var i=1;i<t.length;i++)e-=Math.abs(bi(t[i]))}return e}function bi(t){var e,i,r,n,o,a,s=0,u=t.length;if(u>2){for(a=0;a<u;a++)a===u-2?(r=u-2,n=u-1,o=0):a===u-1?(r=u-1,n=0,o=1):(r=a,n=a+1,o=a+2),e=t[r],i=t[n],s+=(xi(t[o][0])-xi(e[0]))*Math.sin(xi(i[1]));s=s*Ca*Ca/2}return s}function xi(t){return t*Math.PI/180}function wi(t,e){if(!S(e=e||{}))throw new Error("options is invalid");if(!t)throw new Error("geojson is required");return B(t,(function(t,i){var r=i.geometry.coordinates;return t+zt(r[0],r[1],e)}),0)}function Ei(t,e,i,r){if(!S(r=r||{}))throw new Error("options is invalid");var n,o=[];if("Feature"===t.type)n=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");n=t.coordinates}for(var a,u,l,c=0,p=0;p<n.length&&!(e>=c&&p===n.length-1);p++){if(c>e&&0===o.length){if(!(a=e-c))return o.push(n[p]),s(o);u=fe(n[p],n[p-1])-180,l=he(n[p],a,u,r),o.push(l.geometry.coordinates)}if(c>=i)return(a=i-c)?(u=fe(n[p],n[p-1])-180,l=he(n[p],a,u,r),o.push(l.geometry.coordinates),s(o)):(o.push(n[p]),s(o));if(c>=e&&o.push(n[p]),p===n.length-1)return s(o);c+=zt(n[p],n[p+1],r)}return s(n[n.length-1])}function Si(t,e,i){var r=(i=i||{}).ignoreEndVertices;if(!S(i))throw new Error("invalid options");if(!t)throw new Error("pt is required");if(!e)throw new Error("line is required");for(var n=G(t),o=j(e),a=0;a<o.length-1;a++){var s=!1;if(r&&(0===a&&(s="start"),a===o.length-2&&(s="end"),0===a&&a+1===o.length-1&&(s="both")),function(t,e,i,r){var n=i[0],o=i[1],a=t[0],s=t[1],u=e[0],l=e[1],c=u-a,p=l-s;return(i[0]-a)*p-(i[1]-s)*c==0&&(r?"start"===r?Math.abs(c)>=Math.abs(p)?c>0?a<n&&n<=u:u<=n&&n<a:p>0?s<o&&o<=l:l<=o&&o<s:"end"===r?Math.abs(c)>=Math.abs(p)?c>0?a<=n&&n<u:u<n&&n<=a:p>0?s<=o&&o<l:l<o&&o<=s:"both"===r?Math.abs(c)>=Math.abs(p)?c>0?a<n&&n<u:u<n&&n<a:p>0?s<o&&o<l:l<o&&o<s:void 0:Math.abs(c)>=Math.abs(p)?c>0?a<=n&&n<=u:u<=n&&n<=a:p>0?s<=o&&o<=l:l<=o&&o<=s)}(o[a],o[a+1],n,s))return!0}return!1}function Ii(t,e){var i=Q(t),r=Q(e),n=H(t),o=H(e);switch(i){case"Point":switch(r){case"MultiPoint":return function(t,e){var i,r=!1;for(i=0;i<e.coordinates.length;i++)if(Ci(e.coordinates[i],t.coordinates)){r=!0;break}return r}(n,o);case"LineString":return Si(n,o,{ignoreEndVertices:!0});case"Polygon":return Lt(n,o,{ignoreBoundary:!0});default:throw new Error("feature2 "+r+" geometry not supported")}case"MultiPoint":switch(r){case"MultiPoint":return function(t,e){for(var i=0;i<t.coordinates.length;i++){for(var r=!1,n=0;n<e.coordinates.length;n++)Ci(t.coordinates[i],e.coordinates[n])&&(r=!0);if(!r)return!1}return!0}(n,o);case"LineString":return function(t,e){for(var i=!1,r=0;r<t.coordinates.length;r++){if(!Si(t.coordinates[r],e))return!1;i||(i=Si(t.coordinates[r],e,{ignoreEndVertices:!0}))}return i}(n,o);case"Polygon":return function(t,e){for(var i=!0,r=0;r<t.coordinates.length;r++){var n=Lt(t.coordinates[1],e);if(!n){i=!1;break}n=Lt(t.coordinates[1],e,{ignoreBoundary:!0})}return i&&n}(n,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"LineString":return function(t,e){for(var i=0;i<t.coordinates.length;i++)if(!Si(t.coordinates[i],e))return!1;return!0}(n,o);case"Polygon":return function(t,e){if(!Ai(V(e),V(t)))return!1;for(var i=!1,r=0;r<t.coordinates.length-1;r++){if(!Lt(t.coordinates[r],e))return!1;i||(i=Lt(t.coordinates[r],e,{ignoreBoundary:!0})),i||(i=Lt(function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(t.coordinates[r],t.coordinates[r+1]),e,{ignoreBoundary:!0}))}return i}(n,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"Polygon":return function(t,e){var i=V(t);if(!Ai(V(e),i))return!1;for(var r=0;r<t.coordinates[0].length;r++)if(!Lt(t.coordinates[0][r],e))return!1;return!0}(n,o);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function Ai(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function Ci(t,e){return t[0]===e[0]&&t[1]===e[1]}function Pi(t,e,i){if(!S(i=i||{}))throw new Error("options is invalid");var n=i.mask,o=i.properties,a=[];if(null==e)throw new Error("cellSide is required");if(!E(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(n&&-1===["Polygon","MultiPolygon"].indexOf(Q(n)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=t[0],u=t[1],c=t[2],p=t[3],h=e/zt([s,u],[c,u],i)*(c-s),d=e/zt([s,u],[s,p],i)*(p-u),f=c-s,_=p-u,g=Math.floor(f/h),m=(_-Math.floor(_/d)*d)/2,y=s+(f-g*h)/2;y<=c;){for(var v=u+m;v<=p;){var b=r([y,v],o);n?Ii(b,n)&&a.push(b):a.push(b),v+=d}y+=h}return l(a)}function Ti(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var i=e.precision,r=e.coordinates,n=e.mutate;if(i=null==i||isNaN(i)?6:i,r=null==r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if("number"!=typeof i)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==n&&void 0!==n||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,i);return C(t,(function(t){!function(t,e,i){t.length>i&&t.splice(i,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e}(t,o,r)})),t}function Li(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var i=0,r=t.length;i<r;i++)if(t[i]instanceof Array&&e[i]instanceof Array){if(!Li(t[i],e[i]))return!1}else if(t[i]!==e[i])return!1;return!0}function Mi(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function ki(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var i=0,r=t.length;i<r;i++)if(t[i]instanceof Array&&e[i]instanceof Array){if(!ki(t[i],e[i]))return!1}else if(t[i]!=e[i])return!1;return!0}function Ri(t,e){var i=[],r=Je();return O(e,(function(e){if(i.forEach((function(t,e){t.id=e})),i.length){var n=r.search(e);if(n.features.length){var o=Di(e,n);i=i.filter((function(t){return t.id!==o.id})),r.remove(o),M(Ni(o,e),(function(t){i.push(t),r.insert(t)}))}}else(i=Ni(t,e).features).forEach((function(t){t.bbox||(t.bbox=pe(V(t)))})),r.load(l(i))})),l(i)}function Ni(t,e){var i=[],r=j(t)[0],n=j(t)[t.geometry.coordinates.length-1];if(Oi(r,G(e))||Oi(n,G(e)))return l([t]);var o=Je(),a=ei(t);o.load(a);var u=o.search(e);if(!u.features.length)return l([t]);var c=Di(e,u),p=k(a,(function(t,r,n){var o=j(r)[1],a=G(e);return n===c.id?(t.push(a),i.push(s(t)),Oi(a,o)?[a]:[a,o]):(t.push(o),t)}),[r]);return p.length>1&&i.push(s(p)),l(i)}function Di(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var i,r=1/0;return M(e,(function(e){var n=ni(e,t).properties.dist;n<r&&(i=e,r=n)})),i}function Oi(t,e){return t[0]===e[0]&&t[1]===e[1]}function zi(t,e,i,r,n){if(!S(n=n||{}))throw new Error("options is invalid");var o=n.steps,a=n.units;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if(null==i)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if("object"!=typeof n)throw new Error("options must be an object");o=o||64;var u=Fi(i),l=Fi(r),c=t.properties;if(u===l)return s(de(t,e,n).geometry.coordinates[0],c);for(var p=u,h=u<l?l:l+360,d=p,f=[],_=0;d<h;)f.push(he(t,e,d,a).geometry.coordinates),d=p+360*++_/o;return d>h&&f.push(he(t,e,h,a).geometry.coordinates),s(f,c)}function Fi(t){var e=t%360;return e<0&&(e+=360),e}function Bi(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var i=e.properties,r=Q(t),n=j(t);if(i=i||t.properties||{},!n.length)throw new Error("polygon must contain coordinates");switch(r){case"Polygon":return qi(n,i);case"MultiPolygon":var o=[];return n.forEach((function(t){o.push(qi(t,i))})),l(o);default:throw new Error("geom "+r+" not supported")}}function qi(t,e){return t.length>1?c(t,e):s(t[0],e)}function Ui(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var i=e.properties,r=e.autoComplete,n=e.orderCoords;if(!t)throw new Error("lines is required");switch(r=void 0===r||r,n=void 0===n||n,Q(t)){case"FeatureCollection":case"GeometryCollection":var o=[];return(t.features?t.features:t.geometries).forEach((function(t){o.push(j(Vi(t,{},r,n)))})),h(o,i)}return Vi(t,i,r,n)}function Vi(t,e,i,r){e=e||t.properties||{};var n=j(t),a=Q(t);if(!n.length)throw new Error("line must contain coordinates");switch(a){case"LineString":return i&&(n=Gi(n)),o([n],e);case"MultiLineString":var u=[],l=0;return n.forEach((function(t){if(i&&(t=Gi(t)),r){var e=function(t){var e=t[0],i=t[1],r=t[2],n=t[3];return Math.abs(e-r)*Math.abs(i-n)}(V(s(t)));e>l?(u.unshift(t),l=e):u.push(t)}else u.push(t)})),o(u,e);default:throw new Error("geometry type "+a+" is not supported")}}function Gi(t){var e=t[0],i=e[0],r=e[1],n=t[t.length-1],o=n[0],a=n[1];return i===o&&r===a||t.push(e),t}function ji(t,e,i){var r,n,o,a,s,u=t.length,l=Xi(t[0],e),c=[];for(i||(i=[]),r=1;r<u;r++){for(n=t[r-1],a=s=Xi(o=t[r],e);;){if(!(l|a)){c.push(n),a!==s?(c.push(o),r<u-1&&(i.push(c),c=[])):r===u-1&&c.push(o);break}if(l&a)break;l?l=Xi(n=Ki(n,o,l,e),e):a=Xi(o=Ki(n,o,a,e),e)}l=s}return c.length&&i.push(c),i}function Ki(t,e,i,r){return 8&i?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&i?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&i?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&i?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function Xi(t,e){var i=0;return t[0]<e[0]?i|=1:t[0]>e[2]&&(i|=2),t[1]<e[1]?i|=4:t[1]>e[3]&&(i|=8),i}function Zi(t,e){for(var i=[],r=0;r<t.length;r++){var n=Fa.polygon(t[r],e);n.length>0&&(n[0][0]===n[n.length-1][0]&&n[0][1]===n[n.length-1][1]||n.push(n[0]),n.length>=4&&i.push(n))}return i}function Yi(t){return"[object Arguments]"===Object.prototype.toString.call(t)}function Hi(t,e,i){return i||(i={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?(i.strict,t===e):function(t,e,i){var r,n;if(Wi(t)||Wi(e))return!1;if(t.prototype!==e.prototype)return!1;if(Yi(t))return!!Yi(e)&&Hi(t=Ba.call(t),e=Ba.call(e),i);if(Qi(t)){if(!Qi(e))return!1;if(t.length!==e.length)return!1;for(r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}try{var o=Object.keys(t),a=Object.keys(e)}catch(t){return!1}if(o.length!==a.length)return!1;for(o.sort(),a.sort(),r=o.length-1;r>=0;r--)if(o[r]!==a[r])return!1;for(r=o.length-1;r>=0;r--)if(!Hi(t[n=o[r]],e[n],i))return!1;return typeof t==typeof e}(t,e,i))}function Wi(t){return null==t}function Qi(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}function Ji(t,e,i){if(!S(i=i||{}))throw new Error("options is invalid");var r,n=i.tolerance||0,o=[],a=Je();return a.load(ei(t)),F(e,(function(t){var e=!1;M(a.search(t),(function(i){if(!1===e){var o=j(t).sort(),a=j(i).sort();Hi(o,a)||(0===n?Si(o[0],i)&&Si(o[1],i):ni(i,o[0]).properties.dist<=n&&ni(i,o[1]).properties.dist<=n)?(e=!0,r=r?$i(r,t):t):(0===n?Si(a[0],t)&&Si(a[1],t):ni(t,a[0]).properties.dist<=n&&ni(t,a[1]).properties.dist<=n)&&(r=r?$i(r,i):i)}})),!1===e&&r&&(o.push(r),r=void 0)})),r&&o.push(r),l(o)}function $i(t,e){var i=j(e),r=j(t),n=r[0],o=r[r.length-1],a=t.geometry.coordinates;return Hi(i[0],n)?a.unshift(i[1]):Hi(i[0],o)?a.push(i[1]):Hi(i[1],n)?a.unshift(i[0]):Hi(i[1],o)&&a.push(i[0]),t}function tr(t){var e=t%360;return e<0&&(e+=360),e}function er(t,e,i,n){if(!S(n=n||{}))throw new Error("options is invalid");var o=n.units,a=n.properties;if(!t)throw new Error("origin is required");if(null==e)throw new Error("distance is required");if(null==i)throw new Error("bearing is required");if(!(e>=0))throw new Error("distance must be greater than 0");var s=x(e,o,"meters"),u=G(t),l=function(t,e,i,r){var n=e/(r=void 0===r?Oo:Number(r)),o=t[0]*Math.PI/180,a=b(t[1]),s=b(i),u=n*Math.cos(s),l=a+u;Math.abs(l)>Math.PI/2&&(l=l>0?Math.PI-l:-Math.PI-l);var c=Math.log(Math.tan(l/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),p=Math.abs(c)>1e-11?u/c:Math.cos(a);return[(180*(o+n*Math.sin(s)/p)/Math.PI+540)%360-180,180*l/Math.PI]}(u,s,i);return l[0]+=l[0]-u[0]>180?-360:u[0]-l[0]>180?360:0,r(l,a)}function ir(t,e,i,r,n,o){for(var a=0;a<t.length;a++){var s=t[a],u=t[a+1];a===t.length-1&&(u=t[0]),r=rr(s,u,e),i<=0&&r>0?function(t,e,i){return rr(t,e,i)<0}(e,s,n)||(n=s):i>0&&r<=0&&(function(t,e,i){return rr(t,e,i)>0}(e,s,o)||(o=s)),i=r}return[n,o]}function rr(t,e,i){return(e[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(e[1]-t[1])}function nr(t){if(!t)throw new Error("line is required");var e=t.geometry?t.geometry.type:t.type;if(!Array.isArray(t)&&"LineString"!==e)throw new Error("geometry must be a LineString");for(var i,r,n=j(t),o=0,a=1;a<n.length;)i=r||n[0],o+=((r=n[a])[0]-i[0])*(r[1]+i[1]),a++;return o>0}function or(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return N(t,(function(t){or(t,e)})),t;case"LineString":return ar(j(t),e),t;case"Polygon":return sr(j(t),e),t;case"MultiLineString":return j(t).forEach((function(t){ar(t,e)})),t;case"MultiPolygon":return j(t).forEach((function(t){sr(t,e)})),t;case"Point":case"MultiPoint":return t}}function ar(t,e){nr(t)===e&&t.reverse()}function sr(t,e){nr(t[0])!==e&&t[0].reverse();for(var i=1;i<t.length;i++)nr(t[i])===e&&t[i].reverse()}function ur(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var i=e.zProperty||"elevation",r=e.flip,n=e.flags;Y(t,"Point","input must contain Points");for(var o=function(t,e){var i={};return M(t,(function(t){var e=j(t)[1];i[e]||(i[e]=[]),i[e].push(t)})),Object.keys(i).map((function(t){return i[t].sort((function(t,e){return j(t)[0]-j(e)[0]}))})).sort((function(t,i){return e?j(t[0])[1]-j(i[0])[1]:j(i[0])[1]-j(t[0])[1]}))}(t,r),a=[],s=0;s<o.length;s++){for(var u=o[s],l=[],c=0;c<u.length;c++){var p=u[c];p.properties[i]?l.push(p.properties[i]):l.push(0),!0===n&&(p.properties.matrixPosition=[s,c])}a.push(l)}return a}function lr(t,e,i,r){r=r||{};for(var n=Object.keys(qa),o=0;o<n.length;o++){var a=n[o],s=r[a];s=null!=s?s:qa[a],Ua[a]=s}Ua.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+i)+"]");var u,l=function(t,e,i){for(var r=t.length-1,n=t[0].length-1,o={rows:r,cols:n,cells:[]},a=e+Math.abs(i),s=0;s<r;++s){o.cells[s]=[];for(var u=0;u<n;++u){var l=0,c=t[s+1][u],p=t[s+1][u+1],h=t[s][u+1],d=t[s][u];if(!(isNaN(c)||isNaN(p)||isNaN(h)||isNaN(d))){l|=c<e?0:c>a?128:64,l|=p<e?0:p>a?32:16,l|=h<e?0:h>a?8:4;var f=+(l|=d<e?0:d>a?2:1),_=0;if(17===l||18===l||33===l||34===l||38===l||68===l||72===l||98===l||102===l||132===l||136===l||137===l||152===l||153===l){var g=(c+p+h+d)/4;_=g>a?2:g<e?0:1,34===l?1===_?l=35:0===_&&(l=136):136===l?1===_?(l=35,_=4):0===_&&(l=34):17===l?1===_?(l=155,_=4):0===_&&(l=153):68===l?1===_?(l=103,_=4):0===_&&(l=102):153===l?1===_&&(l=155):102===l?1===_&&(l=103):152===l?_<2&&(l=156,_=1):137===l?_<2&&(l=139,_=1):98===l?_<2&&(l=99,_=1):38===l?_<2&&(l=39,_=1):18===l?_>0?(l=156,_=4):l=152:33===l?_>0?(l=139,_=4):l=137:72===l?_>0?(l=99,_=4):l=98:132===l&&(_>0?(l=39,_=4):l=38)}if(0!=l&&170!=l){var m,y,v,b,x,w,E,S;m=y=v=b=x=w=E=S=.5;var I=[];1===l?(v=1-cr(e,h,d),S=1-cr(e,c,d),I.push(Cs[l])):169===l?(v=cr(a,d,h),S=cr(a,d,c),I.push(Cs[l])):4===l?(w=1-cr(e,p,h),b=cr(e,d,h),I.push(Is[l])):166===l?(w=cr(a,h,p),b=1-cr(a,h,d),I.push(Is[l])):16===l?(x=cr(e,h,p),y=cr(e,c,p),I.push(Ss[l])):154===l?(x=1-cr(a,p,h),y=1-cr(a,p,c),I.push(Ss[l])):64===l?(E=cr(e,d,c),m=1-cr(e,p,c),I.push(Ts[l])):106===l?(E=1-cr(a,c,d),m=cr(a,c,p),I.push(Ts[l])):168===l?(b=cr(a,d,h),v=cr(e,d,h),S=cr(e,d,c),E=cr(a,d,c),I.push(As[l]),I.push(Cs[l])):2===l?(b=1-cr(e,h,d),v=1-cr(a,h,d),S=1-cr(a,c,d),E=1-cr(e,c,d),I.push(As[l]),I.push(Cs[l])):162===l?(x=cr(a,h,p),w=cr(e,h,p),b=1-cr(e,h,d),v=1-cr(a,h,d),I.push(As[l]),I.push(Cs[l])):8===l?(x=1-cr(e,p,h),w=1-cr(a,p,h),b=cr(a,d,h),v=cr(e,d,h),I.push(Ss[l]),I.push(Is[l])):138===l?(x=1-cr(e,p,h),w=1-cr(a,p,h),m=1-cr(a,p,c),y=1-cr(e,p,c),I.push(Ss[l]),I.push(Is[l])):32===l?(x=cr(a,h,p),w=cr(e,h,p),m=cr(e,c,p),y=cr(a,c,p),I.push(Ss[l]),I.push(Is[l])):42===l?(S=1-cr(a,c,d),E=1-cr(e,c,d),m=cr(e,c,p),y=cr(a,c,p),I.push(Ps[l]),I.push(Ts[l])):128===l&&(S=cr(e,d,c),E=cr(a,d,c),m=1-cr(a,p,c),y=1-cr(e,p,c),I.push(Ps[l]),I.push(Ts[l])),5===l?(w=1-cr(e,p,h),S=1-cr(e,c,d),I.push(Is[l])):165===l?(w=cr(a,h,p),S=cr(a,d,c),I.push(Is[l])):20===l?(b=cr(e,d,h),y=cr(e,c,p),I.push(As[l])):150===l?(b=1-cr(a,h,d),y=1-cr(a,p,c),I.push(As[l])):80===l?(x=cr(e,h,p),E=cr(e,d,c),I.push(Ss[l])):90===l?(x=1-cr(a,p,h),E=1-cr(a,c,d),I.push(Ss[l])):65===l?(v=1-cr(e,h,d),m=1-cr(e,p,c),I.push(Cs[l])):105===l?(v=cr(a,d,h),m=cr(a,c,p),I.push(Cs[l])):160===l?(x=cr(a,h,p),w=cr(e,h,p),S=cr(e,d,c),E=cr(a,d,c),I.push(Ss[l]),I.push(Is[l])):10===l?(x=1-cr(e,p,h),w=1-cr(a,p,h),S=1-cr(a,c,d),E=1-cr(e,c,d),I.push(Ss[l]),I.push(Is[l])):130===l?(b=1-cr(e,h,d),v=1-cr(a,h,d),m=1-cr(a,p,c),y=1-cr(e,p,c),I.push(As[l]),I.push(Cs[l])):40===l?(b=cr(a,d,h),v=cr(e,d,h),m=cr(e,c,p),y=cr(a,c,p),I.push(As[l]),I.push(Cs[l])):101===l?(w=cr(a,h,p),m=cr(a,c,p),I.push(Is[l])):69===l?(w=1-cr(e,p,h),m=1-cr(e,p,c),I.push(Is[l])):149===l?(S=cr(a,d,c),y=1-cr(a,p,c),I.push(Ps[l])):21===l?(S=1-cr(e,c,d),y=cr(e,c,p),I.push(Ps[l])):86===l?(b=1-cr(a,h,d),E=1-cr(a,c,d),I.push(As[l])):84===l?(b=cr(e,d,h),E=cr(e,d,c),I.push(As[l])):89===l?(x=1-cr(a,p,h),v=cr(a,d,h),I.push(Cs[l])):81===l?(x=cr(e,h,p),v=1-cr(e,h,d),I.push(Cs[l])):96===l?(x=cr(a,h,p),w=cr(e,h,p),E=cr(e,d,c),m=cr(a,c,p),I.push(Ss[l]),I.push(Is[l])):74===l?(x=1-cr(e,p,h),w=1-cr(a,p,h),E=1-cr(a,c,d),m=1-cr(e,p,c),I.push(Ss[l]),I.push(Is[l])):24===l?(x=1-cr(a,p,h),b=cr(a,d,h),v=cr(e,d,h),y=cr(e,c,p),I.push(Ss[l]),I.push(Cs[l])):146===l?(x=cr(e,h,p),b=1-cr(e,h,d),v=1-cr(a,h,d),y=1-cr(a,p,c),I.push(Ss[l]),I.push(Cs[l])):6===l?(w=1-cr(e,p,h),b=1-cr(a,h,d),S=1-cr(a,c,d),E=1-cr(e,c,d),I.push(Is[l]),I.push(As[l])):164===l?(w=cr(a,h,p),b=cr(e,d,h),S=cr(e,d,c),E=cr(a,d,c),I.push(Is[l]),I.push(As[l])):129===l?(v=1-cr(e,h,d),S=cr(a,d,c),m=1-cr(a,p,c),y=1-cr(e,p,c),I.push(Cs[l]),I.push(Ps[l])):41===l?(v=cr(a,d,h),S=1-cr(e,c,d),m=cr(e,c,p),y=cr(a,c,p),I.push(Cs[l]),I.push(Ps[l])):66===l?(b=1-cr(e,h,d),v=1-cr(a,h,d),E=1-cr(a,c,d),m=1-cr(e,p,c),I.push(As[l]),I.push(Cs[l])):104===l?(b=cr(a,d,h),v=cr(e,d,h),E=cr(e,d,c),m=cr(a,c,p),I.push(Cs[l]),I.push(Ls[l])):144===l?(x=cr(e,h,p),S=cr(e,d,c),E=cr(a,d,c),y=1-cr(a,p,c),I.push(Ss[l]),I.push(Ts[l])):26===l?(x=1-cr(a,p,h),S=1-cr(a,c,d),E=1-cr(e,c,d),y=cr(e,c,p),I.push(Ss[l]),I.push(Ts[l])):36===l?(w=cr(a,h,p),b=cr(e,d,h),m=cr(e,c,p),y=cr(a,c,p),I.push(Is[l]),I.push(As[l])):134===l?(w=1-cr(e,p,h),b=1-cr(a,h,d),m=1-cr(a,p,c),y=1-cr(e,p,c),I.push(Is[l]),I.push(As[l])):9===l?(x=1-cr(e,p,h),w=1-cr(a,p,h),v=cr(a,d,h),S=1-cr(e,c,d),I.push(Ss[l]),I.push(Is[l])):161===l?(x=cr(a,h,p),w=cr(e,h,p),v=1-cr(e,h,d),S=cr(a,d,c),I.push(Ss[l]),I.push(Is[l])):37===l?(w=cr(a,h,p),S=1-cr(e,c,d),m=cr(e,c,p),y=cr(a,c,p),I.push(Is[l]),I.push(Ps[l])):133===l?(w=1-cr(e,p,h),S=cr(a,d,c),m=1-cr(a,p,c),y=1-cr(e,p,c),I.push(Is[l]),I.push(Ps[l])):148===l?(b=cr(e,d,h),S=cr(e,d,c),E=cr(a,d,c),y=1-cr(a,p,c),I.push(As[l]),I.push(Ts[l])):22===l?(b=1-cr(a,h,d),S=1-cr(a,c,d),E=1-cr(e,c,d),y=cr(e,c,p),I.push(As[l]),I.push(Ts[l])):82===l?(x=cr(e,h,p),b=1-cr(e,h,d),v=1-cr(a,h,d),E=1-cr(a,c,d),I.push(Ss[l]),I.push(Cs[l])):88===l?(x=1-cr(a,p,h),b=cr(a,d,h),v=cr(e,d,h),E=cr(e,d,c),I.push(Ss[l]),I.push(Cs[l])):73===l?(x=1-cr(e,p,h),w=1-cr(a,p,h),v=cr(a,d,h),m=1-cr(e,p,c),I.push(Ss[l]),I.push(Is[l])):97===l?(x=cr(a,h,p),w=cr(e,h,p),v=1-cr(e,h,d),m=cr(a,c,p),I.push(Ss[l]),I.push(Is[l])):145===l?(x=cr(e,h,p),v=1-cr(e,h,d),S=cr(a,d,c),y=1-cr(a,p,c),I.push(Ss[l]),I.push(Ps[l])):25===l?(x=1-cr(a,p,h),v=cr(a,d,h),S=1-cr(e,c,d),y=cr(e,c,p),I.push(Ss[l]),I.push(Ps[l])):70===l?(w=1-cr(e,p,h),b=1-cr(a,h,d),E=1-cr(a,c,d),m=1-cr(e,p,c),I.push(Is[l]),I.push(As[l])):100===l?(w=cr(a,h,p),b=cr(e,d,h),E=cr(e,d,c),m=cr(a,c,p),I.push(Is[l]),I.push(As[l])):34===l?(0===_?(x=1-cr(e,p,h),w=1-cr(a,p,h),b=cr(a,d,h),v=cr(e,d,h),S=cr(e,d,c),E=cr(a,d,c),m=1-cr(a,p,c),y=1-cr(e,p,c)):(x=cr(a,h,p),w=cr(e,h,p),b=1-cr(e,h,d),v=1-cr(a,h,d),S=1-cr(a,c,d),E=1-cr(e,c,d),m=cr(e,c,p),y=cr(a,c,p)),I.push(Ss[l]),I.push(Is[l]),I.push(Ps[l]),I.push(Ts[l])):35===l?(4===_?(x=1-cr(e,p,h),w=1-cr(a,p,h),b=cr(a,d,h),v=cr(e,d,h),S=cr(e,d,c),E=cr(a,d,c),m=1-cr(a,p,c),y=1-cr(e,p,c)):(x=cr(a,h,p),w=cr(e,h,p),b=1-cr(e,h,d),v=1-cr(a,h,d),S=1-cr(a,c,d),E=1-cr(e,c,d),m=cr(e,c,p),y=cr(a,c,p)),I.push(Ss[l]),I.push(Is[l]),I.push(Cs[l]),I.push(Ts[l])):136===l?(0===_?(x=cr(a,h,p),w=cr(e,h,p),b=1-cr(e,h,d),v=1-cr(a,h,d),S=1-cr(a,c,d),E=1-cr(e,c,d),m=cr(e,c,p),y=cr(a,c,p)):(x=1-cr(e,p,h),w=1-cr(a,p,h),b=cr(a,d,h),v=cr(e,d,h),S=cr(e,d,c),E=cr(a,d,c),m=1-cr(a,p,c),y=1-cr(e,p,c)),I.push(Ss[l]),I.push(Is[l]),I.push(Ps[l]),I.push(Ts[l])):153===l?(0===_?(x=cr(e,h,p),v=1-cr(e,h,d),S=1-cr(e,c,d),y=cr(e,c,p)):(x=1-cr(a,p,h),v=cr(a,d,h),S=cr(a,d,c),y=1-cr(a,p,c)),I.push(Ss[l]),I.push(Cs[l])):102===l?(0===_?(w=1-cr(e,p,h),b=cr(e,d,h),E=cr(e,d,c),m=1-cr(e,p,c)):(w=cr(a,h,p),b=1-cr(a,h,d),E=1-cr(a,c,d),m=cr(a,c,p)),I.push(Is[l]),I.push(Ts[l])):155===l?(4===_?(x=cr(e,h,p),v=1-cr(e,h,d),S=1-cr(e,c,d),y=cr(e,c,p)):(x=1-cr(a,p,h),v=cr(a,d,h),S=cr(a,d,c),y=1-cr(a,p,c)),I.push(Ss[l]),I.push(Ps[l])):103===l?(4===_?(w=1-cr(e,p,h),b=cr(e,d,h),E=cr(e,d,c),m=1-cr(e,p,c)):(w=cr(a,h,p),b=1-cr(a,h,d),E=1-cr(a,c,d),m=cr(a,c,p)),I.push(Is[l]),I.push(As[l])):152===l?(0===_?(x=cr(e,h,p),b=1-cr(e,h,d),v=1-cr(a,h,d),S=1-cr(a,c,d),E=1-cr(e,c,d),y=cr(e,c,p)):(x=1-cr(a,p,h),b=cr(a,d,h),v=cr(e,d,h),S=cr(e,d,c),E=cr(a,d,c),y=1-cr(a,p,c)),I.push(Ss[l]),I.push(As[l]),I.push(Cs[l])):156===l?(4===_?(x=cr(e,h,p),b=1-cr(e,h,d),v=1-cr(a,h,d),S=1-cr(a,c,d),E=1-cr(e,c,d),y=cr(e,c,p)):(x=1-cr(a,p,h),b=cr(a,d,h),v=cr(e,d,h),S=cr(e,d,c),E=cr(a,d,c),y=1-cr(a,p,c)),I.push(Ss[l]),I.push(Cs[l]),I.push(Ts[l])):137===l?(0===_?(x=cr(a,h,p),w=cr(e,h,p),v=1-cr(e,h,d),S=1-cr(e,c,d),m=cr(e,c,p),y=cr(a,c,p)):(x=1-cr(e,p,h),w=1-cr(a,p,h),v=cr(a,d,h),S=cr(a,d,c),m=1-cr(a,p,c),y=1-cr(e,p,c)),I.push(Ss[l]),I.push(Is[l]),I.push(Cs[l])):139===l?(4===_?(x=cr(a,h,p),w=cr(e,h,p),v=1-cr(e,h,d),S=1-cr(e,c,d),m=cr(e,c,p),y=cr(a,c,p)):(x=1-cr(e,p,h),w=1-cr(a,p,h),v=cr(a,d,h),S=cr(a,d,c),m=1-cr(a,p,c),y=1-cr(e,p,c)),I.push(Ss[l]),I.push(Is[l]),I.push(Ps[l])):98===l?(0===_?(x=1-cr(e,p,h),w=1-cr(a,p,h),b=cr(a,d,h),v=cr(e,d,h),E=cr(e,d,c),m=1-cr(e,p,c)):(x=cr(a,h,p),w=cr(e,h,p),b=1-cr(e,h,d),v=1-cr(a,h,d),E=1-cr(a,c,d),m=cr(a,c,p)),I.push(Ss[l]),I.push(Is[l]),I.push(Ts[l])):99===l?(4===_?(x=1-cr(e,p,h),w=1-cr(a,p,h),b=cr(a,d,h),v=cr(e,d,h),E=cr(e,d,c),m=1-cr(e,p,c)):(x=cr(a,h,p),w=cr(e,h,p),b=1-cr(e,h,d),v=1-cr(a,h,d),E=1-cr(a,c,d),m=cr(a,c,p)),I.push(Ss[l]),I.push(Is[l]),I.push(Cs[l])):38===l?(0===_?(w=1-cr(e,p,h),b=cr(e,d,h),S=cr(e,d,c),E=cr(a,d,c),m=1-cr(a,p,c),y=1-cr(e,p,c)):(w=cr(a,h,p),b=1-cr(a,h,d),S=1-cr(a,c,d),E=1-cr(e,c,d),m=cr(e,c,p),y=cr(a,c,p)),I.push(Is[l]),I.push(Ps[l]),I.push(Ts[l])):39===l?(4===_?(w=1-cr(e,p,h),b=cr(e,d,h),S=cr(e,d,c),E=cr(a,d,c),m=1-cr(a,p,c),y=1-cr(e,p,c)):(w=cr(a,h,p),b=1-cr(a,h,d),S=1-cr(a,c,d),E=1-cr(e,c,d),m=cr(e,c,p),y=cr(a,c,p)),I.push(Is[l]),I.push(As[l]),I.push(Ts[l])):85===l&&(x=1,w=0,b=1,v=0,S=0,E=1,m=0,y=1),(m<0||m>1||y<0||y>1||x<0||x>1||b<0||b>1||S<0||S>1||E<0||E>1)&&console.log("MarchingSquaresJS-isoBands: "+l+" "+f+" "+c+","+p+","+h+","+d+" "+_+" "+m+" "+y+" "+x+" "+w+" "+b+" "+v+" "+S+" "+E),o.cells[s][u]={cval:l,cval_real:f,flipped:_,topleft:m,topright:y,righttop:x,rightbottom:w,bottomright:b,bottomleft:v,leftbottom:S,lefttop:E,edges:I}}}}}return o}(t,e,i);return Ua.polygons?(Ua.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),u=function(t){var e=[],i=0;return t.cells.forEach((function(t,r){t.forEach((function(t,n){if(void 0!==t){var o=ks[t.cval](t);"object"==typeof o&&pr(o)?"object"==typeof o[0]&&pr(o[0])?"object"==typeof o[0][0]&&pr(o[0][0])?o.forEach((function(t){t.forEach((function(t){t[0]+=n,t[1]+=r})),e[i++]=t})):(o.forEach((function(t){t[0]+=n,t[1]+=r})),e[i++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}}))})),e}(l)):(Ua.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),u=function(t){for(var e=[],i=t.rows,r=t.cols,n=[],o=0;o<i;o++)for(var a=0;a<r;a++)if(void 0!==t.cells[o][a]&&t.cells[o][a].edges.length>0){var s=function(t){if(t.edges.length>0){var e=t.edges[t.edges.length-1],i=t.cval_real;switch(e){case 0:return i&Ga?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return i&ja?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return i&ja?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return i&Ka?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return i&Ga?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return i&ja?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return i&ja?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return i&Ka?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return i&ja?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return i&Ka?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return i&Ka?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return i&Va?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return i&ja?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return i&Ka?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return i&Ka?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return i&Va?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return i&ja?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return i&Va?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return i&Ka?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return i&Va?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return i&Va?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return i&Ga?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return i&Va?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return i&Ga?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}(t.cells[o][a]),u=null,l=a,c=o;null!==s&&n.push([s.p[0]+l,s.p[1]+c]);do{if(null===(u=function(t,e,i,r){var n,o,a,s,u,l=t.cval;switch(e){case-1:switch(r){case 0:n=Is[l],a=es[l],s=is[l],u=rs[l];break;default:n=Ss[l],a=Ja[l],s=$a[l],u=ts[l]}break;case 1:switch(r){case 0:n=Ps[l],a=ds[l],s=fs[l],u=_s[l];break;default:n=Ts[l],a=cs[l],s=ps[l],u=hs[l]}break;default:switch(i){case-1:switch(r){case 0:n=Ls[l],a=Xa[l],s=Za[l],u=Ya[l];break;default:n=Ms[l],a=Ha[l],s=Wa[l],u=Qa[l]}break;case 1:switch(r){case 0:n=Cs[l],a=ns[l],s=os[l],u=as[l];break;default:n=As[l],a=ss[l],s=us[l],u=ls[l]}}}if(o=t.edges.indexOf(n),void 0===t.edges[o])return null;switch(function(t,e){delete t.edges[e];for(var i=e+1;i<t.edges.length;i++)t.edges[i-1]=t.edges[i];t.edges.pop()}(t,o),l=t.cval_real,n){case 0:l&Ga?(e=t.topleft,i=1):(e=1,i=t.righttop);break;case 1:l&ja?(e=1,i=t.rightbottom):(e=t.topleft,i=1);break;case 2:l&ja?(e=t.topleft,i=1):(e=t.bottomright,i=0);break;case 3:l&Ka?(e=t.bottomleft,i=0):(e=t.topleft,i=1);break;case 4:l&Ga?(e=t.topright,i=1):(e=1,i=t.righttop);break;case 5:l&ja?(e=1,i=t.rightbottom):(e=t.topright,i=1);break;case 6:l&ja?(e=t.topright,i=1):(e=t.bottomright,i=0);break;case 7:l&Ka?(e=t.bottomleft,i=0):(e=t.topright,i=1);break;case 8:l&ja?(e=1,i=t.righttop):(e=t.bottomright,i=0);break;case 9:l&Ka?(e=t.bottomleft,i=0):(e=1,i=t.righttop);break;case 10:l&Ka?(e=1,i=t.righttop):(e=0,i=t.leftbottom);break;case 11:l&Va?(e=0,i=t.lefttop):(e=1,i=t.righttop);break;case 12:l&ja?(e=1,i=t.rightbottom):(e=t.bottomright,i=0);break;case 13:l&Ka?(e=t.bottomleft,i=0):(e=1,i=t.rightbottom);break;case 14:l&Ka?(e=1,i=t.rightbottom):(e=0,i=t.leftbottom);break;case 15:l&Va?(e=0,i=t.lefttop):(e=1,i=t.rightbottom);break;case 16:l&ja?(e=0,i=t.leftbottom):(e=t.bottomright,i=0);break;case 17:l&Va?(e=0,i=t.lefttop):(e=t.bottomright,i=0);break;case 18:l&Ka?(e=t.bottomleft,i=0):(e=0,i=t.leftbottom);break;case 19:l&Va?(e=0,i=t.lefttop):(e=t.bottomleft,i=0);break;case 20:l&Va?(e=0,i=t.leftbottom):(e=t.topleft,i=1);break;case 21:l&Ga?(e=t.topright,i=1):(e=0,i=t.leftbottom);break;case 22:l&Va?(e=0,i=t.lefttop):(e=t.topleft,i=1);break;case 23:l&Ga?(e=t.topright,i=1):(e=0,i=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==i&&void 0!==a&&void 0!==s&&void 0!==u||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+i+" "+a+" "+s+" "+u)),{p:[e,i],x:a,y:s,o:u}}(t.cells[c][l],s.x,s.y,s.o)))break;if(n.push([u.p[0]+l,u.p[1]+c]),l+=u.x,s=u,(c+=u.y)<0||c>=i||l<0||l>=r||void 0===t.cells[c][l]){var p=function(t,e,i,r,n,o){for(var a=t.cells[i][e],s=a.cval_real,u=e+r,l=i+n,c=[],p=!1;!p;){if(void 0===t.cells[l]||void 0===t.cells[l][u])if(l-=n,u-=r,s=(a=t.cells[l][u]).cval_real,-1===n)if(0===o)if(s&Ka)c.push([u,l]),r=-1,n=0,o=0;else{if(!(s&ja)){c.push([u+a.bottomright,l]),r=0,n=1,o=1,p=!0;break}c.push([u+1,l]),r=1,n=0,o=0}else{if(!(s&Ka)){if(s&ja){c.push([u+a.bottomright,l]),r=0,n=1,o=1,p=!0;break}c.push([u+a.bottomleft,l]),r=0,n=1,o=0,p=!0;break}c.push([u,l]),r=-1,n=0,o=0}else if(1===n)if(0===o){if(!(s&Ga)){if(s&Va){c.push([u+a.topleft,l+1]),r=0,n=-1,o=0,p=!0;break}c.push([u+a.topright,l+1]),r=0,n=-1,o=1,p=!0;break}c.push([u+1,l+1]),r=1,n=0,o=1}else c.push([u+1,l+1]),r=1,n=0,o=1;else if(-1===r)if(0===o){if(!(s&Va)){if(s&Ka){c.push([u,l+a.leftbottom]),r=1,n=0,o=0,p=!0;break}c.push([u,l+a.lefttop]),r=1,n=0,o=1,p=!0;break}c.push([u,l+1]),r=0,n=1,o=0}else{if(!(s&Va)){console.log("MarchingSquaresJS-isoBands: wtf");break}c.push([u,l+1]),r=0,n=1,o=0}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(s&ja)){c.push([u+1,l+a.rightbottom]),r=-1,n=0,o=0,p=!0;break}c.push([u+1,l]),r=0,n=-1,o=1}else{if(!(s&ja)){if(s&Ga){c.push([u+1,l+a.righttop]),r=-1,n=0,o=1;break}c.push([u+1,l+a.rightbottom]),r=-1,n=0,o=0,p=!0;break}c.push([u+1,l]),r=0,n=-1,o=1}}else if(s=(a=t.cells[l][u]).cval_real,-1===r)if(0===o)if(void 0!==t.cells[l-1]&&void 0!==t.cells[l-1][u])r=0,n=-1,o=1;else{if(!(s&Ka)){c.push([u+a.bottomright,l]),r=0,n=1,o=1,p=!0;break}c.push([u,l])}else{if(!(s&Va)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+u+","+l);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===r){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l+1]&&void 0!==t.cells[l+1][u])r=0,n=1,o=0;else{if(!(s&Ga)){c.push([u+a.topleft,l+1]),r=0,n=-1,o=0,p=!0;break}c.push([u+1,l+1]),r=1,n=0,o=1}}else if(-1===n){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][u+1])r=1,n=0,o=1;else{if(!(s&ja)){c.push([u+1,l+a.righttop]),r=-1,n=0,o=1,p=!0;break}c.push([u+1,l]),r=0,n=-1,o=1}}else{if(1!==n){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][u-1])r=-1,n=0,o=0;else{if(!(s&Va)){c.push([u,l+a.leftbottom]),r=1,n=0,o=0,p=!0;break}c.push([u,l+1]),r=0,n=1,o=0}}if(l+=n,(u+=r)===e&&l===i)break}return{path:c,i:u,j:l,x:r,y:n,o:o}}(t,l-=u.x,c-=u.y,u.x,u.y,u.o);if(null===p)break;p.path.forEach((function(t){n.push(t)})),l=p.i,c=p.j,s=p}}while(void 0!==t.cells[c][l]&&t.cells[c][l].edges.length>0);e.push(n),n=[],t.cells[o][a].edges.length>0&&a--}return e}(l)),"function"==typeof Ua.successCallback&&Ua.successCallback(u),u}function cr(t,e,i){return(t-e)/(i-e)}function pr(t){return t.constructor.toString().indexOf("Array")>-1}function hr(t,e,i){if(!S(i=i||{}))throw new Error("options is invalid");var r=i.pivot,n=i.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("angle is required");return 0===e||(r||(r=ge(t)),!1!==n&&void 0!==n||(t=Ft(t)),C(t,(function(t){var i=oi(r,t)+e,n=si(r,t),o=j(er(r,n,i));t[0]=o[0],t[1]=o[1]}))),t}function dr(t,e,i){if(!S(i=i||{}))throw new Error("options is invalid");var r=i.origin,n=i.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(r)||"object"==typeof r;return!0!==n&&(t=Ft(t)),"FeatureCollection"!==t.type||o?fr(t,e,r):(M(t,(function(i,n){t.features[n]=fr(i,e,r)})),t)}function fr(t,e,i){var n="Point"===Q(t);return i=function(t,e){if(null!=e||(e="centroid"),Array.isArray(e)||"object"==typeof e)return G(e);var i=t.bbox?t.bbox:V(t),n=i[0],o=i[1],a=i[2],s=i[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return r([n,o]);case"se":case"southeast":case"eastsouth":case"bottomright":return r([a,o]);case"nw":case"northwest":case"westnorth":case"topleft":return r([n,s]);case"ne":case"northeast":case"eastnorth":case"topright":return r([a,s]);case"center":return _e(t);case void 0:case null:case"centroid":return ge(t);default:throw new Error("invalid origin")}}(t,i),1===e||n||C(t,(function(t){var r=si(i,t),n=oi(i,t),o=j(er(i,r*e,n));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)})),t}function _r(t){var e=t[0],i=t[1];return[i[0]-e[0],i[1]-e[1]]}function gr(t,e){return t[0]*e[1]-e[0]*t[1]}function mr(t,e){return!function(t,e){return 0===gr(_r(t),_r(e))}(t,e)&&function(t,e){var i=t[0],r=_r(t),n=e[0],o=_r(e),a=gr(r,o);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(i,function(t,e){return[t*e[0],t*e[1]]}(gr(function(t,e){return[t[0]-e[0],t[1]-e[1]]}(n,i),o)/a,r))}(t,e)}function yr(t,e,i){var r=[],n=m(e,i),o=j(t),a=[];return o.forEach((function(t,e){if(e!==o.length-1){var i=function(t,e,i){var r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),n=t[0]+i*(e[1]-t[1])/r,o=e[0]+i*(e[1]-t[1])/r;return[[n,t[1]+i*(t[0]-e[0])/r],[o,e[1]+i*(t[0]-e[0])/r]]}(t,o[e+1],n);if(r.push(i),e>0){var s=r[e-1],u=mr(i,s);!1!==u&&(s[1]=u,i[0]=u),a.push(s[0]),e===o.length-2&&(a.push(i[0]),a.push(i[1]))}2===o.length&&(a.push(i[0]),a.push(i[1]))}})),s(a,t.properties)}function vr(t,e,i){var r=e[0]-t[0],n=e[1]-t[1],o=i[0]-e[0],a=i[1]-e[1];return Math.sign(r*a-o*n)}function br(t,e){return e.geometry.coordinates[0].every((function(e){return Lt(r(e),t)}))}function xr(t,e){for(var i=0;i<t.coordinates.length-1;i++)if(function(t,e,i){var r=i[0]-t[0],n=i[1]-t[1],o=e[0]-t[0],a=e[1]-t[1];return r*a-n*o==0&&(Math.abs(o)>=Math.abs(a)?o>0?t[0]<=i[0]&&i[0]<=e[0]:e[0]<=i[0]&&i[0]<=t[0]:a>0?t[1]<=i[1]&&i[1]<=e[1]:e[1]<=i[1]&&i[1]<=t[1])}(t.coordinates[i],t.coordinates[i+1],e.coordinates))return!0;return!1}function wr(t,e){return ii(e,Bi(t)).features.length>0}function Er(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function Sr(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ir(t,e){for(var i=!1,r=!1,n=t.coordinates.length,o=0;o<n&&!i&&!r;){for(var a=0;a<e.coordinates.length-1;a++){var s=!0;0!==a&&a!==e.coordinates.length-2||(s=!1),Pr(e.coordinates[a],e.coordinates[a+1],t.coordinates[o],s)?i=!0:r=!0}o++}return i&&r}function Ar(t,e){return ii(t,Bi(e)).features.length>0}function Cr(t,e){for(var i=!1,n=!1,o=t.coordinates[0].length,a=0;a<o&&i&&n;)Lt(r(t.coordinates[0][a]),e)?i=!0:n=!0,a++;return n&&n}function Pr(t,e,i,r){var n=i[0]-t[0],o=i[1]-t[1],a=e[0]-t[0],s=e[1]-t[1];return 0==n*s-o*a&&(r?Math.abs(a)>=Math.abs(s)?a>0?t[0]<=i[0]&&i[0]<=e[0]:e[0]<=i[0]&&i[0]<=t[0]:s>0?t[1]<=i[1]&&i[1]<=e[1]:e[1]<=i[1]&&i[1]<=t[1]:Math.abs(a)>=Math.abs(s)?a>0?t[0]<i[0]&&i[0]<e[0]:e[0]<i[0]&&i[0]<t[0]:s>0?t[1]<i[1]&&i[1]<e[1]:e[1]<i[1]&&i[1]<t[1])}function Tr(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function Lr(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function Mr(t,e){return qs(t,e,{strict:!0})}function kr(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");var i=Q(t);if(i!==Q(e))throw new Error("features must be of the same type");if("Point"===i)throw new Error("Point geometry not supported");if(new Vs({precision:6}).compare(t,e))return!1;var r=0;switch(i){case"MultiPoint":var n=R(t),o=R(e);n.forEach((function(t){o.forEach((function(e){t[0]===e[0]&&t[1]===e[1]&&r++}))}));break;case"LineString":case"MultiLineString":F(t,(function(t){F(e,(function(e){Ji(t,e).features.length&&r++}))}));break;case"Polygon":case"MultiPolygon":F(t,(function(t){F(e,(function(e){ii(t,e).features.length&&r++}))}))}return r>0}function Rr(t,e,i){i=i||[];for(var r=0;r<t;r++)i[r]=e;return i}function Nr(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function Dr(t){for(var e=t,i=[];e.parent;)i.unshift(e),e=e.parent;return i}function Or(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var i=0;i<t.length;i++){this.grid[i]=[];for(var r=0,n=t[i];r<n.length;r++){var o=new zr(i,r,n[r]);this.grid[i][r]=o,this.nodes.push(o)}}this.init()}function zr(t,e,i){this.x=t,this.y=e,this.weight=i}function Fr(t){this.content=[],this.scoreFunction=t}function Br(t){return t[0]}function qr(t){return t[1]}function Ur(){this._=null}function Vr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Gr(t,e){var i=e,r=e.R,n=i.U;n?n.L===i?n.L=r:n.R=r:t._=r,r.U=n,i.U=r,i.R=r.L,i.R&&(i.R.U=i),r.L=i}function jr(t,e){var i=e,r=e.L,n=i.U;n?n.L===i?n.L=r:n.R=r:t._=r,r.U=n,i.U=r,i.L=r.R,i.L&&(i.L.U=i),r.R=i}function Kr(t){for(;t.L;)t=t.L;return t}function Xr(t,e,i,r){var n=[null,null],o=uu.push(n)-1;return n.left=t,n.right=e,i&&Yr(n,t,e,i),r&&Yr(n,e,t,r),au[t.index].halfedges.push(o),au[e.index].halfedges.push(o),n}function Zr(t,e,i){var r=[e,i];return r.left=t,r}function Yr(t,e,i,r){t[0]||t[1]?t.left===i?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=i)}function Hr(t,e,i,r,n){var o,a=t[0],s=t[1],u=a[0],l=a[1],c=0,p=1,h=s[0]-u,d=s[1]-l;if(o=e-u,h||!(o>0)){if(o/=h,h<0){if(o<c)return;o<p&&(p=o)}else if(h>0){if(o>p)return;o>c&&(c=o)}if(o=r-u,h||!(o<0)){if(o/=h,h<0){if(o>p)return;o>c&&(c=o)}else if(h>0){if(o<c)return;o<p&&(p=o)}if(o=i-l,d||!(o>0)){if(o/=d,d<0){if(o<c)return;o<p&&(p=o)}else if(d>0){if(o>p)return;o>c&&(c=o)}if(o=n-l,d||!(o<0)){if(o/=d,d<0){if(o>p)return;o>c&&(c=o)}else if(d>0){if(o<c)return;o<p&&(p=o)}return!(c>0||p<1)||(c>0&&(t[0]=[u+c*h,l+c*d]),p<1&&(t[1]=[u+p*h,l+p*d]),!0)}}}}}function Wr(t,e,i,r,n){var o=t[1];if(o)return!0;var a,s,u=t[0],l=t.left,c=t.right,p=l[0],h=l[1],d=c[0],f=c[1],_=(p+d)/2,g=(h+f)/2;if(f===h){if(_<e||_>=r)return;if(p>d){if(u){if(u[1]>=n)return}else u=[_,i];o=[_,n]}else{if(u){if(u[1]<i)return}else u=[_,n];o=[_,i]}}else if(s=g-(a=(p-d)/(f-h))*_,a<-1||a>1)if(p>d){if(u){if(u[1]>=n)return}else u=[(i-s)/a,i];o=[(n-s)/a,n]}else{if(u){if(u[1]<i)return}else u=[(n-s)/a,n];o=[(i-s)/a,i]}else if(h<f){if(u){if(u[0]>=r)return}else u=[e,a*e+s];o=[r,a*r+s]}else{if(u){if(u[0]<e)return}else u=[r,a*r+s];o=[e,a*e+s]}return t[0]=u,t[1]=o,!0}function Qr(t,e){var i=t.site,r=e.left,n=e.right;return i===n&&(n=r,r=i),n?Math.atan2(n[1]-r[1],n[0]-r[0]):(i===r?(r=e[1],n=e[0]):(r=e[0],n=e[1]),Math.atan2(r[0]-n[0],n[1]-r[1]))}function Jr(t,e){return e[+(e.left!==t.site)]}function $r(t,e){return e[+(e.left===t.site)]}function tn(t){var e=t.P,i=t.N;if(e&&i){var r=e.site,n=t.site,o=i.site;if(r!==o){var a=n[0],s=n[1],u=r[0]-a,l=r[1]-s,c=o[0]-a,p=o[1]-s,h=2*(u*p-l*c);if(!(h>=-hu)){var d=u*u+l*l,f=c*c+p*p,_=(p*d-l*f)/h,g=(u*f-c*d)/h,m=lu.pop()||new function(){Vr(this),this.x=this.y=this.arc=this.site=this.cy=null};m.arc=t,m.site=n,m.x=_+a,m.y=(m.cy=g+s)+Math.sqrt(_*_+g*g),t.circle=m;for(var y=null,v=su._;v;)if(m.y<v.y||m.y===v.y&&m.x<=v.x){if(!v.L){y=v.P;break}v=v.L}else{if(!v.R){y=v;break}v=v.R}su.insert(y,m),y||(nu=m)}}}}function en(t){var e=t.circle;e&&(e.P||(nu=e.N),su.remove(e),lu.push(e),Vr(e),t.circle=null)}function rn(t){var e=cu.pop()||new function(){Vr(this),this.edge=this.site=this.circle=null};return e.site=t,e}function nn(t){en(t),ou.remove(t),cu.push(t),Vr(t)}function on(t){var e=t.circle,i=e.x,r=e.cy,n=[i,r],o=t.P,a=t.N,s=[t];nn(t);for(var u=o;u.circle&&Math.abs(i-u.circle.x)<pu&&Math.abs(r-u.circle.cy)<pu;)o=u.P,s.unshift(u),nn(u),u=o;s.unshift(u),en(u);for(var l=a;l.circle&&Math.abs(i-l.circle.x)<pu&&Math.abs(r-l.circle.cy)<pu;)a=l.N,s.push(l),nn(l),l=a;s.push(l),en(l);var c,p=s.length;for(c=1;c<p;++c)l=s[c],u=s[c-1],Yr(l.edge,u.site,l.site,n);u=s[0],(l=s[p-1]).edge=Xr(u.site,l.site,null,n),tn(u),tn(l)}function an(t){for(var e,i,r,n,o=t[0],a=t[1],s=ou._;s;)if((r=sn(s,a)-o)>pu)s=s.L;else{if(!((n=o-function(t,e){var i=t.N;if(i)return sn(i,e);var r=t.site;return r[1]===e?r[0]:1/0}(s,a))>pu)){r>-pu?(e=s.P,i=s):n>-pu?(e=s,i=s.N):e=i=s;break}if(!s.R){e=s;break}s=s.R}!function(t){au[t.index]={site:t,halfedges:[]}}(t);var u=rn(t);if(ou.insert(e,u),e||i){if(e===i)return en(e),i=rn(e.site),ou.insert(u,i),u.edge=i.edge=Xr(e.site,u.site),tn(e),void tn(i);if(i){en(e),en(i);var l=e.site,c=l[0],p=l[1],h=t[0]-c,d=t[1]-p,f=i.site,_=f[0]-c,g=f[1]-p,m=2*(h*g-d*_),y=h*h+d*d,v=_*_+g*g,b=[(g*y-d*v)/m+c,(h*v-_*y)/m+p];Yr(i.edge,l,f,b),u.edge=Xr(l,t,null,b),i.edge=Xr(t,f,null,b),tn(e),tn(i)}else u.edge=Xr(e.site,u.site)}}function sn(t,e){var i=t.site,r=i[0],n=i[1],o=n-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var s=(i=a.site)[0],u=i[1],l=u-e;if(!l)return s;var c=s-r,p=1/o-1/l,h=c/l;return p?(-h+Math.sqrt(h*h-2*p*(c*c/(-2*l)-u+l/2+n-o/2)))/p+r:(r+s)/2}function un(t,e,i){return(t[0]-i[0])*(e[1]-t[1])-(t[0]-e[0])*(i[1]-t[1])}function ln(t,e){return e[1]-t[1]||e[0]-t[0]}function cn(t,e){var i,r,n,o=t.sort(ln).pop();for(uu=[],au=new Array(t.length),ou=new Ur,su=new Ur;;)if(n=nu,o&&(!n||o[1]<n.y||o[1]===n.y&&o[0]<n.x))o[0]===i&&o[1]===r||(an(o),i=o[0],r=o[1]),o=t.pop();else{if(!n)break;on(n.arc)}if(function(){for(var t,e,i,r,n=0,o=au.length;n<o;++n)if((t=au[n])&&(r=(e=t.halfedges).length)){var a=new Array(r),s=new Array(r);for(i=0;i<r;++i)a[i]=i,s[i]=Qr(t,uu[e[i]]);for(a.sort((function(t,e){return s[e]-s[t]})),i=0;i<r;++i)s[i]=e[a[i]];for(i=0;i<r;++i)e[i]=s[i]}}(),e){var a=+e[0][0],s=+e[0][1],u=+e[1][0],l=+e[1][1];!function(t,e,i,r){for(var n,o=uu.length;o--;)Wr(n=uu[o],t,e,i,r)&&Hr(n,t,e,i,r)&&(Math.abs(n[0][0]-n[1][0])>pu||Math.abs(n[0][1]-n[1][1])>pu)||delete uu[o]}(a,s,u,l),function(t,e,i,r){var n,o,a,s,u,l,c,p,h,d,f,_,g=au.length,m=!0;for(n=0;n<g;++n)if(o=au[n]){for(a=o.site,s=(u=o.halfedges).length;s--;)uu[u[s]]||u.splice(s,1);for(s=0,l=u.length;s<l;)f=(d=$r(o,uu[u[s]]))[0],_=d[1],p=(c=Jr(o,uu[u[++s%l]]))[0],h=c[1],(Math.abs(f-p)>pu||Math.abs(_-h)>pu)&&(u.splice(s,0,uu.push(Zr(a,d,Math.abs(f-t)<pu&&r-_>pu?[t,Math.abs(p-t)<pu?h:r]:Math.abs(_-r)<pu&&i-f>pu?[Math.abs(h-r)<pu?p:i,r]:Math.abs(f-i)<pu&&_-e>pu?[i,Math.abs(p-i)<pu?h:e]:Math.abs(_-e)<pu&&f-t>pu?[Math.abs(h-e)<pu?p:t,e]:null))-1),++l);l&&(m=!1)}if(m){var y,v,b,x=1/0;for(n=0,m=null;n<g;++n)(o=au[n])&&(b=(y=(a=o.site)[0]-t)*y+(v=a[1]-e)*v)<x&&(x=b,m=o);if(m){var w=[t,e],E=[t,r],S=[i,r],I=[i,e];m.halfedges.push(uu.push(Zr(a=m.site,w,E))-1,uu.push(Zr(a,E,S))-1,uu.push(Zr(a,S,I))-1,uu.push(Zr(a,I,w))-1)}}for(n=0;n<g;++n)(o=au[n])&&(o.halfedges.length||delete au[n])}(a,s,u,l)}this.edges=uu,this.cells=au,ou=su=uu=au=null}function pn(t){return(t=t.slice()).push(t[0]),o([t])}function hn(t,e,i,r){var n=(r=r||{}).steps||64,a=r.units||"kilometers",s=r.angle||0,u=r.pivot||t,l=r.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!i)throw new Error("ySemiAxis is required");if(!S(r))throw new Error("options must be an object");if(!E(n))throw new Error("steps must be a number");if(!E(s))throw new Error("angle must be a number");var c=G(t);if("degrees"===a)var p=b(s);else e=er(t,e,90,{units:a}),i=er(t,i,0,{units:a}),e=G(e)[0]-c[0],i=G(i)[1]-c[1];for(var h=[],d=0;d<n;d+=1){var f=-360*d/n,_=e*i/Math.sqrt(Math.pow(i,2)+Math.pow(e,2)*Math.pow(dn(f),2)),g=e*i/Math.sqrt(Math.pow(e,2)+Math.pow(i,2)/Math.pow(dn(f),2));if(f<-90&&f>=-270&&(_=-_),f<-180&&f>=-360&&(g=-g),"degrees"===a){var m=_*Math.cos(p)+g*Math.sin(p),y=g*Math.cos(p)-_*Math.sin(p);_=m,g=y}h.push([_+c[0],g+c[1]])}return h.push(h[0]),"degrees"===a?o([h],l):hr(o([h],l),s,{pivot:u})}function dn(t){var e=t*Math.PI/180;return Math.tan(e)}function fn(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var i=e.properties,n=e.weight;if(!t)throw new Error("geojson is required");var o=0,a=0,s=0;return N(t,(function(t,e,i){var r=i[n];if(!E(r=null==r?1:r))throw new Error("weight value must be a number for feature index "+e);(r=Number(r))>0&&C(t,(function(t){o+=t[0]*r,a+=t[1]*r,s+=r}))})),r([o/s,a/s],i)}function _n(t,e,i,n){var o=i.properties.tolerance||.001,a=0,s=0,u=0,l=0;if(M(i,(function(e){var i=e.properties.weight,r=null==i?1:i;if(!E(r=Number(r)))throw new Error("weight value must be a number");if(r>0){l+=1;var n=r*zt(e,t);0===n&&(n=1);var o=r/n;a+=e.geometry.coordinates[0]*o,s+=e.geometry.coordinates[1]*o,u+=o}})),l<1)throw new Error("no features to measure");var c=a/u,p=s/u;return 1===l||0===n||Math.abs(c-e[0])<o&&Math.abs(p-e[1])<o?r([c,p],{medianCandidates:i.properties.medianCandidates}):(i.properties.medianCandidates.push([c,p]),_n([c,p],t,i,n-1))}function gn(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function mn(t){if(S(t)&&(t=t.bbox),t&&!Array.isArray(t))throw new Error("bbox is invalid");return t?function(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}(t):[360*xn(),180*xn()]}function yn(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var i=e.bbox;null!=t||(t=1);for(var n=[],o=0;o<t;o++)n.push(r(mn(i)));return l(n)}function vn(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var i=e.bbox,r=e.num_vertices,n=e.max_radial_length;null!=t||(t=1),E(r)||(r=10),E(n)||(n=10);for(var a=[],s=0;s<t;s++){var u=[],c=Array.apply(null,new Array(r+1)).map(Math.random);c.forEach((function(t,e,i){i[e]=e>0?t+i[e-1]:t})),c.forEach((function(t){t=2*t*Math.PI/c[c.length-1];var e=Math.random();u.push([e*n*Math.sin(t),e*n*Math.cos(t)])})),u[u.length-1]=u[0],u=u.map(function(t){return function(e){return[e[0]+t[0],e[1]+t[1]]}}(mn(i))),a.push(o([u]))}return l(a)}function bn(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var i=e.bbox,r=e.num_vertices,n=e.max_length,o=e.max_rotation;null!=t||(t=1),(!E(r)||r<2)&&(r=10),E(n)||(n=1e-4),E(o)||(o=Math.PI/8);for(var a=[],u=0;u<t;u++){for(var c=[mn(i)],p=0;p<r-1;p++){var h=(0===p?2*Math.random()*Math.PI:Math.tan((c[p][1]-c[p-1][1])/(c[p][0]-c[p-1][0])))+(Math.random()-.5)*o*2,d=Math.random()*n;c.push([c[p][0]+d*Math.cos(h),c[p][1]+d*Math.sin(h)])}a.push(s(c))}return l(a)}function xn(){return Math.random()-.5}function wn(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("filter is required");var i=[];return M(t,(function(t){An(t.properties,e)&&i.push(t)})),l(i)}function En(t,e,i){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("property is required");for(var r=In(t,e),n=Object.keys(r),o=0;o<n.length;o++){for(var a=n[o],s=r[a],u=[],c=0;c<s.length;c++)u.push(t.features[s[c]]);i(l(u),a,o)}}function Sn(t,e,i,r){var n=r;return En(t,e,(function(t,e,o){n=0===o&&void 0===r?t:i(n,t,e,o)})),n}function In(t,e){var i={};return M(t,(function(t,r){var n=t.properties||{};if(n.hasOwnProperty(e)){var o=n[e];i.hasOwnProperty(o)?i[o].push(r):i[o]=[r]}})),i}function An(t,e){if(void 0===t)return!1;var i=typeof e;if("number"===i||"string"===i)return t.hasOwnProperty(e);if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(!An(t,e[r]))return!1;return!0}return Cn(t,e)}function Cn(t,e){for(var i=Object.keys(e),r=0;r<i.length;r++){var n=i[r];if(t[n]!==e[n])return!1}return!0}function Pn(t,e){if(!e)return{};if(!e.length)return{};for(var i={},r=0;r<e.length;r++){var n=e[r];t.hasOwnProperty(n)&&(i[n]=t[n])}return i}function Tn(){}function Ln(t){this.message=t||""}function Mn(t){this.message=t||""}function kn(){}function Rn(t){return null===t?Nl:t.color}function Nn(t){return null===t?null:t.parent}function Dn(t,e){null!==t&&(t.color=e)}function On(t){return null===t?null:t.left}function zn(t){return null===t?null:t.right}function Fn(){this.root_=null,this.size_=0}function Bn(){}function qn(){this.array_=[],arguments[0]instanceof vl&&this.addAll(arguments[0])}function Un(){}function Vn(t){this.message=t||""}function Gn(){this.array_=[]}function jn(t){switch(t.type){case"Polygon":return mi(t)>1?t:null;case"MultiPolygon":var e=[];if(O(t,(function(t){mi(t)>1&&e.push(t.geometry.coordinates)})),e.length)return{type:"MultiPolygon",coordinates:e}}}function Kn(){this.reset()}function Xn(t,e,i){var r=t.s=e+i,n=r-e,o=r-n;t.t=e-o+(i-n)}function Zn(t){return t>1?Bd:t<-1?-Bd:Math.asin(t)}function Yn(){}function Hn(t,e){t&&tf.hasOwnProperty(t.type)&&tf[t.type](t,e)}function Wn(t,e,i){var r,n=-1,o=t.length-i;for(e.lineStart();++n<o;)r=t[n],e.point(r[0],r[1],r[2]);e.lineEnd()}function Qn(t,e){var i=-1,r=t.length;for(e.polygonStart();++i<r;)Wn(t[i],e,1);e.polygonEnd()}function Jn(t){return[Xd(t[1],t[0]),Zn(t[2])]}function $n(t){var e=t[0],i=t[1],r=Zd(i);return[r*Zd(e),r*Wd(e),Wd(i)]}function to(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function eo(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function io(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ro(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function no(t){var e=Qd(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function oo(t,e){return[t>Fd?t-Ud:t<-Fd?t+Ud:t,e]}function ao(t,e,i){return(t%=Ud)?e||i?rf(uo(t),lo(e,i)):uo(t):e||i?lo(e,i):oo}function so(t){return function(e,i){return[(e+=t)>Fd?e-Ud:e<-Fd?e+Ud:e,i]}}function uo(t){var e=so(t);return e.invert=so(-t),e}function lo(t,e){function i(t,e){var i=Zd(e),s=Zd(t)*i,u=Wd(t)*i,l=Wd(e),c=l*r+s*n;return[Xd(u*o-c*a,s*r-l*n),Zn(c*o+u*a)]}var r=Zd(t),n=Wd(t),o=Zd(e),a=Wd(e);return i.invert=function(t,e){var i=Zd(e),s=Zd(t)*i,u=Wd(t)*i,l=Wd(e),c=l*o-u*a;return[Xd(u*o+l*a,s*r+c*n),Zn(c*r-s*n)]},i}function co(t,e){(e=$n(e))[0]-=t,no(e);var i=function(t){return t>1?0:t<-1?Fd:Math.acos(t)}(-e[1]);return((-e[2]<0?-i:i)+Ud-zd)%Ud}function po(t,e,i,r){this.x=t,this.z=e,this.o=i,this.e=r,this.v=!1,this.n=this.p=null}function ho(t){if(e=t.length){for(var e,i,r=0,n=t[0];++r<e;)n.n=i=t[r],i.p=n,n=i;n.n=i=t[0],i.p=n}}function fo(t,e,i,r){function n(n,o){return t<=n&&n<=i&&e<=o&&o<=r}function o(n,o,s,l){var c=0,p=0;if(null==n||(c=a(n,s))!==(p=a(o,s))||u(n,o)<0^s>0)do{l.point(0===c||3===c?t:i,c>1?r:e)}while((c=(c+s+4)%4)!==p);else l.point(o[0],o[1])}function a(r,n){return jd(r[0]-t)<zd?n>0?0:3:jd(r[0]-i)<zd?n>0?2:1:jd(r[1]-e)<zd?n>0?1:0:n>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var i=a(t,1),r=a(e,1);return i!==r?i-r:0===i?e[1]-t[1]:1===i?t[0]-e[0]:2===i?t[1]-e[1]:e[0]-t[0]}return function(a){function u(t,e){n(t,e)&&x.point(t,e)}function l(o,a){var s=n(o,a);if(p&&h.push([o,a]),v)d=o,f=a,_=s,v=!1,s&&(x.lineStart(),x.point(o,a));else if(s&&y)x.point(o,a);else{var u=[g=Math.max(hf,Math.min(pf,g)),m=Math.max(hf,Math.min(pf,m))],l=[o=Math.max(hf,Math.min(pf,o)),a=Math.max(hf,Math.min(pf,a))];af(u,l,t,e,i,r)?(y||(x.lineStart(),x.point(u[0],u[1])),x.point(l[0],l[1]),s||x.lineEnd(),b=!1):s&&(x.lineStart(),x.point(o,a),b=!1)}g=o,m=a,y=s}var c,p,h,d,f,_,g,m,y,v,b,x=a,w=of(),E={point:u,lineStart:function(){E.point=l,p&&p.push(h=[]),v=!0,y=!1,g=m=NaN},lineEnd:function(){c&&(l(d,f),_&&y&&w.rejoin(),c.push(w.result())),E.point=u,y&&x.lineEnd()},polygonStart:function(){x=w,c=[],p=[],b=!0},polygonEnd:function(){var e=function(){for(var e=0,i=0,n=p.length;i<n;++i)for(var o,a,s=p[i],u=1,l=s.length,c=s[0],h=c[0],d=c[1];u<l;++u)o=h,a=d,h=(c=s[u])[0],d=c[1],a<=r?d>r&&(h-o)*(r-a)>(d-a)*(t-o)&&++e:d<=r&&(h-o)*(r-a)<(d-a)*(t-o)&&--e;return e}(),i=b&&e,n=(c=cf(c)).length;(i||n)&&(a.polygonStart(),i&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),n&&uf(c,s,e,o,a),a.polygonEnd()),x=a,c=p=h=null}};return E}}function _o(t){return t.length>1}function go(t,e){return((t=t.x)[0]<0?t[1]-Bd-zd:Bd-t[1])-((e=e.x)[0]<0?e[1]-Bd-zd:Bd-e[1])}function mo(t){return function(e){var i=new yo;for(var r in t)i[r]=t[r];return i.stream=e,i}}function yo(){}function vo(t,e,i){var r=e[1][0]-e[0][0],n=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),ef(i,t.stream(vf));var a=vf.result(),s=Math.min(r/(a[1][0]-a[0][0]),n/(a[1][1]-a[0][1])),u=+e[0][0]+(r-s*(a[1][0]+a[0][0]))/2,l=+e[0][1]+(n-s*(a[1][1]+a[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*s).translate([u,l])}function bo(t){return function(t){function e(t){return[(t=l(t[0]*Gd,t[1]*Gd))[0]*_+a,s-t[1]*_]}function i(t,e){return[(t=o(t,e))[0]*_+a,s-t[1]*_]}function r(){l=rf(u=ao(b,x,w),o);var t=o(y,v);return a=g-t[0]*_,s=m+t[1]*_,n()}function n(){return d=f=null,e}var o,a,s,u,l,c,p,h,d,f,_=150,g=480,m=250,y=0,v=0,b=0,x=0,w=0,E=null,S=xf,I=null,A=ff,C=.5,P=If(i,C);return e.stream=function(t){return d&&f===t?d:d=Af(S(u,P(A(f=t))))},e.clipAngle=function(t){return arguments.length?(S=+t?wf(E=t*Gd,6*Gd):(E=null,xf),n()):E*Vd},e.clipExtent=function(t){return arguments.length?(A=null==t?(I=c=p=h=null,ff):fo(I=+t[0][0],c=+t[0][1],p=+t[1][0],h=+t[1][1]),n()):null==I?null:[[I,c],[p,h]]},e.scale=function(t){return arguments.length?(_=+t,r()):_},e.translate=function(t){return arguments.length?(g=+t[0],m=+t[1],r()):[g,m]},e.center=function(t){return arguments.length?(y=t[0]%360*Gd,v=t[1]%360*Gd,r()):[y*Vd,v*Vd]},e.rotate=function(t){return arguments.length?(b=t[0]%360*Gd,x=t[1]%360*Gd,w=t.length>2?t[2]%360*Gd:0,r()):[b*Vd,x*Vd,w*Vd]},e.precision=function(t){return arguments.length?(P=If(i,C=t*t),n()):Qd(C)},e.fitExtent=function(t,i){return vo(e,t,i)},e.fitSize=function(t,i){return function(t,e,i){return vo(t,[[0,0],e],i)}(e,t,i)},function(){return o=t.apply(this,arguments),e.invert=o.invert&&function(t){return(t=l.invert((t[0]-a)/_,(s-t[1])/_))&&[t[0]*Vd,t[1]*Vd]},r()}}((function(){return t}))()}function xo(t,e){return[t,Hd(Jd((Bd+e)/2))]}function wo(t,e){return[Hd(Jd((Bd+e)/2)),-t]}function Eo(t,i,r,n){var o=t.properties||{},a="Feature"===t.type?t.geometry:t;if("GeometryCollection"===a.type){var s=[];return N(t,(function(t){var e=Eo(t,i,r);e&&s.push(e)})),l(s)}var u,c=V(t),p=c[1]>50&&c[3]>50;u=p?{type:a.type,coordinates:Io(a.coordinates,Co(a))}:ui(a);var h,d=(new Ec).read(u),f=_(g(i,r),"meters"),m=fh.bufferOp(d,f);if(!So((m=(new Sc).write(m)).coordinates))return(h=p?{type:m.type,coordinates:Ao(m.coordinates,Co(a))}:li(m)).geometry?h:e(h,o)}function So(t){return Array.isArray(t[0])?So(t[0]):isNaN(t[0])}function Io(t,e){return"object"!=typeof t[0]?e(t):t.map((function(t){return Io(t,e)}))}function Ao(t,e){return"object"!=typeof t[0]?e.invert(t):t.map((function(t){return Ao(t,e)}))}function Co(t){var e=_e(t).geometry.coordinates.reverse(),i=e.map((function(t){return-t}));return Cf().center(e).rotate(i).scale(Oo)}function Po(){for(var t=new Ec,e=t.read(JSON.stringify(arguments[0].geometry)),i=1;i<arguments.length;i++)e=Nd.union(e,t.read(JSON.stringify(arguments[i].geometry)));return{type:"Feature",geometry:e=(new Sc).write(e),properties:arguments[0].properties}}function To(t,i){var r=H(t),n=H(i);if(te(Ti(n,{precision:4})).coordinates[0].length<4)return null;if(te(Ti(r,{precision:4})).coordinates[0].length<4)return null;var o=new Ec,a=o.read(Ti(r)),s=o.read(Ti(n)),u=Id.intersection(a,s);return u.isEmpty()?null:e((new Sc).write(u))}function Lo(t,e){return function(t,e,i){var r,n;if(!Array.isArray(e))throw new Error("Get closest expects an array as second argument");return e.forEach((function(e,o){var a=i(e,t);a>=0&&(void 0===n||a<n)&&(n=a,r=o)})),r}(t,e,(function(t,e){return t-e}))}function Mo(t,e,i){if(!S(i=i||{}))throw new Error("options is invalid");var r=i.properties||{},n=i.triangles,a=i.mask;if(null==e)throw new Error("cellSide is required");if(!E(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(a&&-1===["Polygon","MultiPolygon"].indexOf(Q(a)))throw new Error("options.mask must be a (Multi)Polygon");var s=t[0],u=t[1],c=t[2],p=t[3],h=(u+p)/2,d=(s+c)/2,f=2*e/zt([s,h],[c,h],i)*(c-s),_=2*e/zt([d,u],[d,p],i)*(p-u),g=f/2,m=2*g,y=Math.sqrt(3)/2*_,v=c-s,b=p-u,x=.75*m,w=y,I=(v-m)/(m-g/2),A=Math.floor(I),C=(A*x-g/2-v)/2-g/2+x/2,P=Math.floor((b-y)/y),T=(b-P*y)/2,L=P*y-b>y/2;L&&(T-=y/4);for(var M=[],k=[],R=0;R<6;R++){var N=2*Math.PI/6*R;M.push(Math.cos(N)),k.push(Math.sin(N))}for(var D=[],O=0;O<=A;O++)for(var z=0;z<=P;z++){var F=O%2==1;if(!(0===z&&F||0===z&&L)){var B=O*x+s-C,q=z*w+u+T;if(F&&(q-=y/2),!0===n)(function(t,e,i,r,n,a){for(var s=[],u=0;u<6;u++){var l=[];l.push(t),l.push([t[0]+e*n[u],t[1]+i*a[u]]),l.push([t[0]+e*n[(u+1)%6],t[1]+i*a[(u+1)%6]]),l.push(t),s.push(o([l],r))}return s})([B,q],f/2,_/2,r,M,k).forEach((function(t){a?To(a,t)&&D.push(t):D.push(t)}));else{var U=function(t,e,i,r,n,a){for(var s=[],u=0;u<6;u++){var l=t[0]+e*n[u],c=t[1]+i*a[u];s.push([l,c])}return s.push(s[0].slice()),o([s],r)}([B,q],f/2,_/2,r,M,k);a?To(a,U)&&D.push(U):D.push(U)}}}return l(D)}function ko(t){if(t.features.length<=1)return t;var e=function(t){var e=Xo(),i=[];return O(t,(function(t,e){var r=V(t);i.push({minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],geojson:t,index:e})})),e.load(i),e}(t),i=[],r={};return O(t,(function(t,n){if(r[n])return!0;for(e.remove({index:n},Ro),r[n]=!0;;){var o=V(t),a=e.search({minX:o[0],minY:o[1],maxX:o[2],maxY:o[3]});if(a.length>0){var s=a.map((function(t){return r[t.index]=!0,e.remove({index:t.index},Ro),t.geojson}));s.push(t),t=Po.apply(this,s)}if(0===a.length)break}i.push(t)})),l(i)}function Ro(t,e){return t.index===e.index}function No(t,e,i){if(!S(i=i||{}))throw new Error("options is invalid");var r=i.properties,n=i.mask,a=[];if(null==e)throw new Error("cellSide is required");if(!E(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(n&&-1===["Polygon","MultiPolygon"].indexOf(Q(n)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=t[0],u=t[1],c=t[2],p=t[3],h=e/zt([s,u],[c,u],i)*(c-s),d=e/zt([s,u],[s,p],i)*(p-u),f=c-s,_=p-u,g=Math.floor(f/h),m=Math.floor(_/d),y=(_-m*d)/2,v=s+(f-g*h)/2,b=0;b<g;b++){for(var x=u+y,w=0;w<m;w++){var I=o([[[v,x],[v,x+d],[v+h,x+d],[v+h,x],[v,x]]],r);n?To(n,I)&&a.push(I):a.push(I),x+=d}v+=h}return l(a)}function Do(t,e,i){if(!S(i=i||{}))throw new Error("options is invalid");var r=i.properties,n=i.mask,a=[];if(null==e)throw new Error("cellSide is required");if(!E(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(n&&-1===["Polygon","MultiPolygon"].indexOf(Q(n)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=e/zt([t[0],t[1]],[t[2],t[1]],i)*(t[2]-t[0]),u=e/zt([t[0],t[1]],[t[0],t[3]],i)*(t[3]-t[1]),c=0,p=t[0];p<=t[2];){for(var h=0,d=t[1];d<=t[3];){var f=null,_=null;c%2==0&&h%2==0?(f=o([[[p,d],[p,d+u],[p+s,d],[p,d]]],r),_=o([[[p,d+u],[p+s,d+u],[p+s,d],[p,d+u]]],r)):c%2==0&&h%2==1?(f=o([[[p,d],[p+s,d+u],[p+s,d],[p,d]]],r),_=o([[[p,d],[p,d+u],[p+s,d+u],[p,d]]],r)):h%2==0&&c%2==1?(f=o([[[p,d],[p,d+u],[p+s,d+u],[p,d]]],r),_=o([[[p,d],[p+s,d+u],[p+s,d],[p,d]]],r)):h%2==1&&c%2==1&&(f=o([[[p,d],[p,d+u],[p+s,d],[p,d]]],r),_=o([[[p,d+u],[p+s,d+u],[p+s,d],[p,d+u]]],r)),n?(To(n,f)&&a.push(f),To(n,_)&&a.push(_)):(a.push(f),a.push(_)),d+=u,h++}c++,p+=s}return l(a)}var Oo=6371008.8,zo={meters:Oo,metres:Oo,millimeters:1e3*Oo,millimetres:1e3*Oo,centimeters:100*Oo,centimetres:100*Oo,kilometers:Oo/1e3,kilometres:Oo/1e3,miles:Oo/1609.344,nauticalmiles:Oo/1852,inches:39.37*Oo,yards:Oo/1.0936,feet:3.28084*Oo,radians:1,degrees:Oo/111325},Fo={meters:1,metres:1,millimeters:1e3,millimetres:1e3,centimeters:100,centimetres:100,kilometers:.001,kilometres:.001,miles:1/1609.344,nauticalmiles:1/1852,inches:39.37,yards:1/1.0936,feet:3.28084,radians:1/Oo,degrees:1/111325},Bo={meters:1,metres:1,millimeters:1e6,millimetres:1e6,centimeters:1e4,centimetres:1e4,kilometers:1e-6,kilometres:1e-6,acres:247105e-9,miles:386e-9,yards:1.195990046,feet:10.763910417,inches:1550.003100006},qo=Object.freeze({earthRadius:Oo,factors:zo,unitsFactors:Fo,areaFactors:Bo,feature:e,geometry:i,point:r,points:n,polygon:o,polygons:a,lineString:s,lineStrings:u,featureCollection:l,multiLineString:c,multiPoint:p,multiPolygon:h,geometryCollection:d,round:f,radiansToLength:_,lengthToRadians:g,lengthToDegrees:m,bearingToAzimuth:y,radiansToDegrees:v,degreesToRadians:b,convertLength:x,convertArea:w,isNumber:E,isObject:S,validateBBox:I,validateId:A,radians2degrees:function(){throw new Error("method has been renamed to `radiansToDegrees`")},degrees2radians:function(){throw new Error("method has been renamed to `degreesToRadians`")},distanceToDegrees:function(){throw new Error("method has been renamed to `lengthToDegrees`")},distanceToRadians:function(){throw new Error("method has been renamed to `lengthToRadians`")},radiansToDistance:function(){throw new Error("method has been renamed to `radiansToLength`")},bearingToAngle:function(){throw new Error("method has been renamed to `bearingToAzimuth`")},convertDistance:function(){throw new Error("method has been renamed to `convertLength`")}}),Uo=Object.freeze({coordEach:C,coordReduce:P,propEach:T,propReduce:L,featureEach:M,featureReduce:k,coordAll:R,geomEach:N,geomReduce:D,flattenEach:O,flattenReduce:z,segmentEach:F,segmentReduce:B,lineEach:q,lineReduce:U}),Vo=Object.freeze({getCoord:G,getCoords:j,containsNumber:K,geojsonType:X,featureOf:Z,collectionOf:Y,getGeom:H,getGeomType:W,getType:Q}),Go={successCallback:null,verbose:!1},jo={},Ko=nt,Xo=at;at.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],r=this.toBBox;if(!_t(t,e))return i;for(var n,o,a,s,u=[];e;){for(n=0,o=e.children.length;n<o;n++)a=e.children[n],_t(t,s=e.leaf?r(a):a)&&(e.leaf?i.push(a):ft(t,s)?this._all(a,i):u.push(a));e=u.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!_t(t,e))return!1;for(var r,n,o,a,s=[];e;){for(r=0,n=e.children.length;r<n;r++)if(o=e.children[r],_t(t,a=e.leaf?i(o):o)){if(e.leaf||ft(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=gt([]),this},remove:function(t,e){if(!t)return this;for(var i,r,n,o,a=this.data,s=this.toBBox(t),u=[],l=[];a||u.length;){if(a||(a=u.pop(),r=u[u.length-1],i=l.pop(),o=!0),a.leaf&&-1!==(n=function(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}(t,a.children,e)))return a.children.splice(n,1),u.push(a),this._condense(u),this;o||a.leaf||!ft(a,s)?r?(i++,a=r.children[i],o=!1):a=null:(u.push(a),l.push(i),i=0,r=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:ct,compareMinY:pt,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,r){var n,o=i-e+1,a=this._maxEntries;if(o<=a)return st(n=gt(t.slice(e,i+1)),this.toBBox),n;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(n=gt([])).leaf=!1,n.height=r;var s,u,l,c,p=Math.ceil(o/a),h=p*Math.ceil(Math.sqrt(a));for(mt(t,e,i,h,this.compareMinX),s=e;s<=i;s+=h)for(mt(t,s,l=Math.min(s+h-1,i),p,this.compareMinY),u=s;u<=l;u+=p)c=Math.min(u+p-1,l),n.children.push(this._build(t,u,c,r-1));return st(n,this.toBBox),n},_chooseSubtree:function(t,e,i,r){for(var n,o,a,s,u,l,c,p;r.push(e),!e.leaf&&r.length-1!==i;){for(c=p=1/0,n=0,o=e.children.length;n<o;n++)u=ht(a=e.children[n]),(l=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,a)-u)<p?(p=l,c=u<c?u:c,s=a):l===p&&u<c&&(c=u,s=a);e=s||e.children[0]}return e},_insert:function(t,e,i){var r=this.toBBox,n=i?t:r(t),o=[],a=this._chooseSubtree(n,this.data,e,o);for(a.children.push(t),lt(a,n);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(n,o,e)},_split:function(t,e){var i=t[e],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var o=this._chooseSplitIndex(i,n,r),a=gt(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,st(i,this.toBBox),st(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},_splitRoot:function(t,e){this.data=gt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,st(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var r,n,o,a,s,u,l,c;for(u=l=1/0,r=e;r<=i-e;r++)a=function(t,e){var i=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),n=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,n-i)*Math.max(0,o-r)}(n=ut(t,0,r,this.toBBox),o=ut(t,r,i,this.toBBox)),s=ht(n)+ht(o),a<u?(u=a,c=r,l=s<l?s:l):a===u&&s<l&&(l=s,c=r);return c},_chooseSplitAxis:function(t,e,i){var r=t.leaf?this.compareMinX:ct,n=t.leaf?this.compareMinY:pt;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,n)&&t.children.sort(r)},_allDistMargin:function(t,e,i,r){t.children.sort(r);var n,o,a=this.toBBox,s=ut(t,0,e,a),u=ut(t,i-e,i,a),l=dt(s)+dt(u);for(n=e;n<i-e;n++)o=t.children[n],lt(s,t.leaf?a(o):o),l+=dt(s);for(n=i-e-1;n>=e;n--)o=t.children[n],lt(u,t.leaf?a(o):o),l+=dt(u);return l},_adjustParentBBoxes:function(t,e,i){for(var r=i;r>=0;r--)lt(e[r],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():st(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var Zo=function(t,e,i){var r=t*e,n=Yo*t,o=n-(n-t),a=t-o,s=Yo*e,u=s-(s-e),l=e-u,c=a*l-(r-o*u-a*u-o*l);return i?(i[0]=c,i[1]=r,i):[c,r]},Yo=+(Math.pow(2,27)+1),Ho=function(t,e){var i=0|t.length,r=0|e.length;if(1===i&&1===r)return function(t,e){var i=t+e,r=i-t,n=t-(i-r)+(e-r);return n?[n,i]:[i]}(t[0],e[0]);var n,o,a=new Array(i+r),s=0,u=0,l=0,c=Math.abs,p=t[u],h=c(p),d=e[l],f=c(d);h<f?(o=p,(u+=1)<i&&(h=c(p=t[u]))):(o=d,(l+=1)<r&&(f=c(d=e[l]))),u<i&&h<f||l>=r?(n=p,(u+=1)<i&&(h=c(p=t[u]))):(n=d,(l+=1)<r&&(f=c(d=e[l])));for(var _,g,m=n+o,y=m-n,v=o-y,b=v,x=m;u<i&&l<r;)h<f?(n=p,(u+=1)<i&&(h=c(p=t[u]))):(n=d,(l+=1)<r&&(f=c(d=e[l]))),(v=(o=b)-(y=(m=n+o)-n))&&(a[s++]=v),b=x-((_=x+m)-(g=_-x))+(m-g),x=_;for(;u<i;)(v=(o=b)-(y=(m=(n=p)+o)-n))&&(a[s++]=v),b=x-((_=x+m)-(g=_-x))+(m-g),x=_,(u+=1)<i&&(p=t[u]);for(;l<r;)(v=(o=b)-(y=(m=(n=d)+o)-n))&&(a[s++]=v),b=x-((_=x+m)-(g=_-x))+(m-g),x=_,(l+=1)<r&&(d=e[l]);return b&&(a[s++]=b),x&&(a[s++]=x),s||(a[s++]=0),a.length=s,a},Wo=function(t,e,i){var r=t+e,n=r-t,o=e-n,a=t-(r-n);return i?(i[0]=a+o,i[1]=r,i):[a+o,r]},Qo=function(t,e){var i=t.length;if(1===i){var r=Zo(t[0],e);return r[0]?r:[r[1]]}var n=new Array(2*i),o=[.1,.1],a=[.1,.1],s=0;Zo(t[0],e,o),o[0]&&(n[s++]=o[0]);for(var u=1;u<i;++u){Zo(t[u],e,a);var l=o[1];Wo(l,a[0],o),o[0]&&(n[s++]=o[0]);var c=a[1],p=o[1],h=c+p,d=p-(h-c);o[1]=h,d&&(n[s++]=d)}return o[1]&&(n[s++]=o[1]),0===s&&(n[s++]=0),n.length=s,n},Jo=function(t,e){var i=0|t.length,r=0|e.length;if(1===i&&1===r)return function(t,e){var i=t+e,r=i-t,n=t-(i-r)+(e-r);return n?[n,i]:[i]}(t[0],-e[0]);var n,o,a=new Array(i+r),s=0,u=0,l=0,c=Math.abs,p=t[u],h=c(p),d=-e[l],f=c(d);h<f?(o=p,(u+=1)<i&&(h=c(p=t[u]))):(o=d,(l+=1)<r&&(f=c(d=-e[l]))),u<i&&h<f||l>=r?(n=p,(u+=1)<i&&(h=c(p=t[u]))):(n=d,(l+=1)<r&&(f=c(d=-e[l])));for(var _,g,m=n+o,y=m-n,v=o-y,b=v,x=m;u<i&&l<r;)h<f?(n=p,(u+=1)<i&&(h=c(p=t[u]))):(n=d,(l+=1)<r&&(f=c(d=-e[l]))),(v=(o=b)-(y=(m=n+o)-n))&&(a[s++]=v),b=x-((_=x+m)-(g=_-x))+(m-g),x=_;for(;u<i;)(v=(o=b)-(y=(m=(n=p)+o)-n))&&(a[s++]=v),b=x-((_=x+m)-(g=_-x))+(m-g),x=_,(u+=1)<i&&(p=t[u]);for(;l<r;)(v=(o=b)-(y=(m=(n=d)+o)-n))&&(a[s++]=v),b=x-((_=x+m)-(g=_-x))+(m-g),x=_,(l+=1)<r&&(d=-e[l]);return b&&(a[s++]=b),x&&(a[s++]=x),s||(a[s++]=0),a.length=s,a},$o=yt((function(t){function e(t,e){for(var i=new Array(t.length-1),r=1;r<t.length;++r)for(var n=i[r-1]=new Array(t.length-1),o=0,a=0;o<t.length;++o)o!==e&&(n[a++]=t[r][o]);return i}function i(t){return 1&t?"-":""}function r(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",r(t.slice(0,e)),",",r(t.slice(e)),")"].join("")}function n(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var o=[],a=0;a<t.length;++a)o.push(["scale(",r(n(e(t,a))),",",i(a),t[0][a],")"].join(""));return o}function o(t){for(var i=[],o=[],a=function(t){for(var e=new Array(t),i=0;i<t;++i){e[i]=new Array(t);for(var r=0;r<t;++r)e[i][r]=["m",r,"[",t-i-1,"]"].join("")}return e}(t),s=[],u=0;u<t;++u)0==(1&u)?i.push.apply(i,n(e(a,u))):o.push.apply(o,n(e(a,u))),s.push("m"+u);var l=r(i),c=r(o),p="orientation"+t+"Exact",h=["function ",p,"(",s.join(),"){var p=",l,",n=",c,",d=sub(p,n);return d[d.length-1];};return ",p].join("");return new Function("sum","prod","scale","sub",h)(Ho,Zo,Qo,Jo)}var a=5,s=o(3),u=o(4),l=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,i){var r,n=(t[1]-i[1])*(e[0]-i[0]),o=(t[0]-i[0])*(e[1]-i[1]),a=n-o;if(n>0){if(o<=0)return a;r=n+o}else{if(!(n<0))return a;if(o>=0)return a;r=-(n+o)}var u=33306690738754716e-32*r;return a>=u||a<=-u?a:s(t,e,i)},function(t,e,i,r){var n=t[0]-r[0],o=e[0]-r[0],a=i[0]-r[0],s=t[1]-r[1],l=e[1]-r[1],c=i[1]-r[1],p=t[2]-r[2],h=e[2]-r[2],d=i[2]-r[2],f=o*c,_=a*l,g=a*s,m=n*c,y=n*l,v=o*s,b=p*(f-_)+h*(g-m)+d*(y-v),x=7771561172376103e-31*((Math.abs(f)+Math.abs(_))*Math.abs(p)+(Math.abs(g)+Math.abs(m))*Math.abs(h)+(Math.abs(y)+Math.abs(v))*Math.abs(d));return b>x||-b>x?b:u(t,e,i,r)}];!function(){for(;l.length<=a;)l.push(o(l.length));for(var e=[],i=["slow"],r=0;r<=a;++r)e.push("a"+r),i.push("o"+r);var n=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=a;++r)n.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");n.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),i.push(n.join(""));var s=Function.apply(void 0,i);for(t.exports=s.apply(void 0,[function(t){var e=l[t.length];return e||(e=l[t.length]=o(t.length)),e.apply(void 0,t)}].concat(l)),r=0;r<=a;++r)t.exports[r]=l[r]}()})),ta=function(t){var e=t.length;if(e<3){for(var i=new Array(e),r=0;r<e;++r)i[r]=r;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:i}var n=new Array(e);for(r=0;r<e;++r)n[r]=r;n.sort((function(e,i){return t[e][0]-t[i][0]||t[e][1]-t[i][1]}));var o=[n[0],n[1]],a=[n[0],n[1]];for(r=2;r<e;++r){for(var s=n[r],u=t[s],l=o.length;l>1&&ea(t[o[l-2]],t[o[l-1]],u)<=0;)l-=1,o.pop();for(o.push(s),l=a.length;l>1&&ea(t[a[l-2]],t[a[l-1]],u)>=0;)l-=1,a.pop();a.push(s)}i=new Array(a.length+o.length-2);for(var c=0,p=(r=0,o.length);r<p;++r)i[c++]=o[r];for(var h=a.length-2;h>0;--h)i[c++]=a[h];return i},ea=$o[3],ia=vt,ra=vt;vt.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,i=this.compare,r=e[t];t>0;){var n=t-1>>1,o=e[n];if(i(r,o)>=0)break;e[t]=o,t=n}e[t]=r},_down:function(t){for(var e=this.data,i=this.compare,r=this.length>>1,n=e[t];t<r;){var o=1+(t<<1),a=o+1,s=e[o];if(a<this.length&&i(e[a],s)<0&&(o=a,s=e[a]),i(s,n)>=0)break;e[t]=s,t=o}e[t]=n}},ia.default=ra;var na=function(t,e){for(var i=t[0],r=t[1],n=!1,o=0,a=e.length-1;o<e.length;a=o++){var s=e[o][0],u=e[o][1],l=e[a][0],c=e[a][1];u>r!=c>r&&i<(l-s)*(r-u)/(c-u)+s&&(n=!n)}return n},oa=$o[3],aa=bt,sa=bt;aa.default=sa;var ua=function(t){return t},la=function(t){if(null==t)return ua;var e,i,r=t.scale[0],n=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,s){s||(e=i=0);var u=2,l=t.length,c=new Array(l);for(c[0]=(e+=t[0])*r+o,c[1]=(i+=t[1])*n+a;u<l;)c[u]=t[u],++u;return c}},ca=function(t,e){for(var i,r=t.length,n=r-e;n<--r;)i=t[n],t[n++]=t[r],t[r]=i},pa=function(t,e){function i(t,e){for(var i in t){var n=t[i];delete e[n.start],delete n.start,delete n.end,n.forEach((function(t){r[t<0?~t:t]=1})),a.push(n)}}var r={},n={},o={},a=[],s=-1;return e.forEach((function(i,r){var n,o=t.arcs[i<0?~i:i];o.length<3&&!o[1][0]&&!o[1][1]&&(n=e[++s],e[s]=i,e[r]=n)})),e.forEach((function(e){var i,r,a=function(e){var i,r=t.arcs[e<0?~e:e],n=r[0];return t.transform?(i=[0,0],r.forEach((function(t){i[0]+=t[0],i[1]+=t[1]}))):i=r[r.length-1],e<0?[i,n]:[n,i]}(e),s=a[0],u=a[1];if(i=o[s])if(delete o[i.end],i.push(e),i.end=u,r=n[u]){delete n[r.start];var l=r===i?i:i.concat(r);n[l.start=i.start]=o[l.end=r.end]=l}else n[i.start]=o[i.end]=i;else if(i=n[u])if(delete n[i.start],i.unshift(e),i.start=s,r=o[s]){delete o[r.end];var c=r===i?i:r.concat(i);n[c.start=r.start]=o[c.end=i.end]=c}else n[i.start]=o[i.end]=i;else n[(i=[e]).start=s]=o[i.end=u]=i})),i(o,n),i(n,o),e.forEach((function(t){r[t<0?~t:t]||a.push([t])})),a},ha=function(t){return Gt(t,jt.apply(this,arguments))},da=function(t,e,i,r,n,o){3===arguments.length&&(r=o=Array,n=null);for(var a=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=new o(t),u=t-1,l=0;l<t;++l)a[l]=n;return{set:function(r,o){for(var l=e(r)&u,c=a[l],p=0;c!=n;){if(i(c,r))return s[l]=o;if(++p>=t)throw new Error("full hashmap");c=a[l=l+1&u]}return a[l]=r,s[l]=o,o},maybeSet:function(r,o){for(var l=e(r)&u,c=a[l],p=0;c!=n;){if(i(c,r))return s[l];if(++p>=t)throw new Error("full hashmap");c=a[l=l+1&u]}return a[l]=r,s[l]=o,o},get:function(r,o){for(var l=e(r)&u,c=a[l],p=0;c!=n;){if(i(c,r))return s[l];if(++p>=t)break;c=a[l=l+1&u]}return o},keys:function(){for(var t=[],e=0,i=a.length;e<i;++e){var r=a[e];r!=n&&t.push(r)}return t}}},fa=function(t,e){return t[0]===e[0]&&t[1]===e[1]},_a=new ArrayBuffer(16),ga=new Float64Array(_a),ma=new Uint32Array(_a),ya=function(t){ga[0]=t[0],ga[1]=t[1];var e=ma[0]^ma[1];return 2147483647&(e<<5^e>>7^ma[2]^ma[3])},va=function(t){function e(t,e,i,r){if(h[i]!==t){h[i]=t;var n=d[i];if(n>=0){var o=f[i];n===e&&o===r||n===r&&o===e||(++g,_[i]=1)}else d[i]=e,f[i]=r}}function i(t){return ya(u[t])}function r(t,e){return fa(u[t],u[e])}var n,o,a,s,u=t.coordinates,l=t.lines,c=t.rings,p=function(){for(var t=da(1.4*u.length,i,r,Int32Array,-1,Int32Array),e=new Int32Array(u.length),n=0,o=u.length;n<o;++n)e[n]=t.maybeSet(n,n);return e}(),h=new Int32Array(u.length),d=new Int32Array(u.length),f=new Int32Array(u.length),_=new Int8Array(u.length),g=0;for(n=0,o=u.length;n<o;++n)h[n]=d[n]=f[n]=-1;for(n=0,o=l.length;n<o;++n){var m=l[n],y=m[0],v=m[1];for(a=p[y],s=p[++y],++g,_[a]=1;++y<=v;)e(n,a,a=s,s=p[y]);++g,_[s]=1}for(n=0,o=u.length;n<o;++n)h[n]=-1;for(n=0,o=c.length;n<o;++n){var b=c[n],x=b[0]+1,w=b[1];for(e(n,p[w-1],a=p[x-1],s=p[x]);++x<=w;)e(n,a,a=s,s=p[x])}h=d=f=null;var E,S=function(t,e,i,r,n){3===arguments.length&&(r=Array,n=null);for(var o=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=t-1,s=0;s<t;++s)o[s]=n;return{add:function(r){for(var s=e(r)&a,u=o[s],l=0;u!=n;){if(i(u,r))return!0;if(++l>=t)throw new Error("full hashset");u=o[s=s+1&a]}return o[s]=r,!0},has:function(r){for(var s=e(r)&a,u=o[s],l=0;u!=n;){if(i(u,r))return!0;if(++l>=t)break;u=o[s=s+1&a]}return!1},values:function(){for(var t=[],e=0,i=o.length;e<i;++e){var r=o[e];r!=n&&t.push(r)}return t}}}(1.4*g,ya,fa);for(n=0,o=u.length;n<o;++n)_[E=p[n]]&&S.add(u[E]);return S},ba=function(t){var e,i,r,n=va(t),o=t.coordinates,a=t.lines,s=t.rings;for(i=0,r=a.length;i<r;++i)for(var u=a[i],l=u[0],c=u[1];++l<c;)n.has(o[l])&&(e={0:l,1:u[1]},u[1]=l,u=u.next=e);for(i=0,r=s.length;i<r;++i)for(var p=s[i],h=p[0],d=h,f=p[1],_=n.has(o[h]);++d<f;)n.has(o[d])&&(_?(e={0:d,1:p[1]},p[1]=d,p=p.next=e):(function(t,e,i,r){Kt(t,e,i),Kt(t,e,e+r),Kt(t,e+r,i)}(o,h,f,f-d),o[f]=o[h],_=!0,d=h));return t},xa=function(t){function e(t){var e,i,r,n,o,a,s,u;if(r=d.get(e=l[t[0]]))for(s=0,u=r.length;s<u;++s)if(function(t,e){var i=t[0],r=e[0],n=t[1];if(i-n!=r-e[1])return!1;for(;i<=n;++i,++r)if(!fa(l[i],l[r]))return!1;return!0}(n=r[s],t))return t[0]=n[0],void(t[1]=n[1]);if(o=d.get(i=l[t[1]]))for(s=0,u=o.length;s<u;++s)if(function(t,e){var i=t[0],r=e[0],n=t[1],o=e[1];if(i-n!=r-o)return!1;for(;i<=n;++i,--o)if(!fa(l[i],l[o]))return!1;return!0}(a=o[s],t))return t[1]=a[0],void(t[0]=a[1]);r?r.push(t):d.set(e,[t]),o?o.push(t):d.set(i,[t]),f.push(t)}function i(t,e){var i=t[0],r=e[0],o=t[1]-i;if(o!==e[1]-r)return!1;for(var a=n(t),s=n(e),u=0;u<o;++u)if(!fa(l[i+(u+a)%o],l[r+(u+s)%o]))return!1;return!0}function r(t,e){var i=t[0],r=e[0],o=t[1],a=e[1],s=o-i;if(s!==a-r)return!1;for(var u=n(t),c=s-n(e),p=0;p<s;++p)if(!fa(l[i+(p+u)%s],l[a-(p+c)%s]))return!1;return!0}function n(t){for(var e=t[0],i=t[1],r=e,n=r,o=l[r];++r<i;){var a=l[r];(a[0]<o[0]||a[0]===o[0]&&a[1]<o[1])&&(n=r,o=a)}return n-e}var o,a,s,u,l=t.coordinates,c=t.lines,p=t.rings,h=c.length+p.length;for(delete t.lines,delete t.rings,s=0,u=c.length;s<u;++s)for(o=c[s];o=o.next;)++h;for(s=0,u=p.length;s<u;++s)for(a=p[s];a=a.next;)++h;var d=da(2*h*1.4,ya,fa),f=t.arcs=[];for(s=0,u=c.length;s<u;++s){o=c[s];do{e(o)}while(o=o.next)}for(s=0,u=p.length;s<u;++s)if((a=p[s]).next)do{e(a)}while(a=a.next);else!function(t){var e,o,a,s,u;if(o=d.get(e=l[t[0]]))for(s=0,u=o.length;s<u;++s){if(i(a=o[s],t))return t[0]=a[0],void(t[1]=a[1]);if(r(a,t))return t[0]=a[1],void(t[1]=a[0])}if(o=d.get(e=l[t[0]+n(t)]))for(s=0,u=o.length;s<u;++s){if(i(a=o[s],t))return t[0]=a[0],void(t[1]=a[1]);if(r(a,t))return t[0]=a[1],void(t[1]=a[0])}o?o.push(t):d.set(e,[t]),f.push(t)}(a);return t},wa=function(t,e){function i(t){t&&c.hasOwnProperty(t.type)&&c[t.type](t)}function r(t){var e=[];do{var i=l.get(t);e.push(t[0]<t[1]?i:~i)}while(t=t.next);return e}function n(t){return t.map(r)}var o=function(t){function e(t){null!=t&&l.hasOwnProperty(t.type)&&l[t.type](t)}function i(t){var e=t[0],i=t[1];e<o&&(o=e),e>s&&(s=e),i<a&&(a=i),i>u&&(u=i)}function r(t){t.forEach(i)}function n(t){t.forEach(r)}var o=1/0,a=1/0,s=-1/0,u=-1/0,l={GeometryCollection:function(t){t.geometries.forEach(e)},Point:function(t){i(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(i)},LineString:function(t){r(t.arcs)},MultiLineString:function(t){t.arcs.forEach(r)},Polygon:function(t){t.arcs.forEach(r)},MultiPolygon:function(t){t.arcs.forEach(n)}};for(var c in t)e(t[c]);return s>=o&&u>=a?[o,a,s,u]:void 0}(t=function(t){var e,i={};for(e in t)i[e]=Xt(t[e]);return i}(t)),a=e>0&&o&&function(t,e,i){function r(t){return[Math.round((t[0]-l)*d),Math.round((t[1]-c)*f)]}function n(t,e){for(var i,r,n,o,a,s=-1,u=0,p=t.length,h=new Array(p);++s<p;)i=t[s],o=Math.round((i[0]-l)*d),a=Math.round((i[1]-c)*f),o===r&&a===n||(h[u++]=[r=o,n=a]);for(h.length=u;u<e;)u=h.push([h[0][0],h[0][1]]);return h}function o(t){return n(t,2)}function a(t){return n(t,4)}function s(t){return t.map(a)}function u(t){null!=t&&_.hasOwnProperty(t.type)&&_[t.type](t)}var l=e[0],c=e[1],p=e[2],h=e[3],d=p-l?(i-1)/(p-l):1,f=h-c?(i-1)/(h-c):1,_={GeometryCollection:function(t){t.geometries.forEach(u)},Point:function(t){t.coordinates=r(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(r)},LineString:function(t){t.arcs=o(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(o)},Polygon:function(t){t.arcs=s(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(s)}};for(var g in t)u(t[g]);return{scale:[1/d,1/f],translate:[l,c]}}(t,o,e),s=xa(ba(function(t){function e(t){t&&l.hasOwnProperty(t.type)&&l[t.type](t)}function i(t){for(var e=0,i=t.length;e<i;++e)u[++o]=t[e];var r={0:o-i+1,1:o};return a.push(r),r}function r(t){for(var e=0,i=t.length;e<i;++e)u[++o]=t[e];var r={0:o-i+1,1:o};return s.push(r),r}function n(t){return t.map(r)}var o=-1,a=[],s=[],u=[],l={GeometryCollection:function(t){t.geometries.forEach(e)},LineString:function(t){t.arcs=i(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(i)},Polygon:function(t){t.arcs=t.arcs.map(r)},MultiPolygon:function(t){t.arcs=t.arcs.map(n)}};for(var c in t)e(t[c]);return{type:"Topology",coordinates:u,lines:a,rings:s,objects:t}}(t))),u=s.coordinates,l=da(1.4*s.arcs.length,Ht,Wt);t=s.objects,s.bbox=o,s.arcs=s.arcs.map((function(t,e){return l.set(t,e),u.slice(t[0],t[1]+1)})),delete s.coordinates,u=null;var c={GeometryCollection:function(t){t.geometries.forEach(i)},LineString:function(t){t.arcs=r(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(r)},Polygon:function(t){t.arcs=t.arcs.map(r)},MultiPolygon:function(t){t.arcs=t.arcs.map(n)}};for(var p in t)i(t[p]);return a&&(s.transform=a,s.arcs=function(t){for(var e=-1,i=t.length;++e<i;){for(var r,n,o=t[e],a=0,s=1,u=o.length,l=o[0],c=l[0],p=l[1];++a<u;)r=(l=o[a])[0],n=l[1],r===c&&n===p||(o[s++]=[r-c,n-p],c=r,p=n);1===s&&(o[s++]=[0,0]),o.length=s}return t}(s.arcs)),s},Ea=function(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var i=this.points[e],r=this.points[e+1];this.centers.push({x:(i.x+r.x)/2,y:(i.y+r.y)/2,z:(i.z+r.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){i=this.centers[e],r=this.centers[e+1];var n=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,a=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+n),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+a)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+n),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+a)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this};Ea.prototype.cacheSteps=function(t){var e=[],i=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var n=this.pos(r);Math.sqrt((n.x-i.x)*(n.x-i.x)+(n.y-i.y)*(n.y-i.y)+(n.z-i.z)*(n.z-i.z))>t&&(e.push(r),i=n)}return e},Ea.prototype.vector=function(t){var e=this.pos(t+10),i=this.pos(t-10);return{angle:180*Math.atan2(e.y-i.y,e.x-i.x)/3.14,speed:Math.sqrt((i.x-e.x)*(i.x-e.x)+(i.y-e.y)*(i.y-e.y)+(i.z-e.z)*(i.z-e.z))}},Ea.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var i=e/this.duration;if(i>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*i);return function(t,e,i,r,n){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:n.x*o[0]+r.x*o[1]+i.x*o[2]+e.x*o[3],y:n.y*o[0]+r.y*o[1]+i.y*o[2]+e.y*o[3],z:n.z*o[0]+r.z*o[1]+i.z*o[2]+e.z*o[3]}}((this.length-1)*i-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])};var Sa=ve,Ia=ve;ve.deviation=function(t,e,i,r){var n=e&&e.length,o=n?e[0]*i:t.length,a=Math.abs(Ne(t,0,o,i));if(n)for(var s=0,u=e.length;s<u;s++){var l=e[s]*i,c=s<u-1?e[s+1]*i:t.length;a-=Math.abs(Ne(t,l,c,i))}var p=0;for(s=0;s<r.length;s+=3){var h=r[s]*i,d=r[s+1]*i,f=r[s+2]*i;p+=Math.abs((t[h]-t[f])*(t[d+1]-t[h+1])-(t[h]-t[d])*(t[f+1]-t[h+1]))}return 0===a&&0===p?0:Math.abs((p-a)/a)},ve.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var a=0;a<e;a++)i.vertices.push(t[n][o][a]);n>0&&(r+=t[n-1].length,i.holes.push(r))}return i},Sa.default=Ia,qe.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],r=this.toBBox;if(!He(t,e))return i;for(var n,o,a,s,u=[];e;){for(n=0,o=e.children.length;n<o;n++)a=e.children[n],He(t,s=e.leaf?r(a):a)&&(e.leaf?i.push(a):Ye(t,s)?this._all(a,i):u.push(a));e=u.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!He(t,e))return!1;for(var r,n,o,a,s=[];e;){for(r=0,n=e.children.length;r<n;r++)if(o=e.children[r],He(t,a=e.leaf?i(o):o)){if(e.leaf||Ye(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=We([]),this},remove:function(t,e){if(!t)return this;for(var i,r,n,o,a=this.data,s=this.toBBox(t),u=[],l=[];a||u.length;){if(a||(a=u.pop(),r=u[u.length-1],i=l.pop(),o=!0),a.leaf&&-1!==(n=function(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}(t,a.children,e)))return a.children.splice(n,1),u.push(a),this._condense(u),this;o||a.leaf||!Ye(a,s)?r?(i++,a=r.children[i],o=!1):a=null:(u.push(a),l.push(i),i=0,r=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:je,compareMinY:Ke,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,r){var n,o=i-e+1,a=this._maxEntries;if(o<=a)return Ue(n=We(t.slice(e,i+1)),this.toBBox),n;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(n=We([])).leaf=!1,n.height=r;var s,u,l,c,p=Math.ceil(o/a),h=p*Math.ceil(Math.sqrt(a));for(Qe(t,e,i,h,this.compareMinX),s=e;s<=i;s+=h)for(Qe(t,s,l=Math.min(s+h-1,i),p,this.compareMinY),u=s;u<=l;u+=p)c=Math.min(u+p-1,l),n.children.push(this._build(t,u,c,r-1));return Ue(n,this.toBBox),n},_chooseSubtree:function(t,e,i,r){for(var n,o,a,s,u,l,c,p;r.push(e),!e.leaf&&r.length-1!==i;){for(c=p=1/0,n=0,o=e.children.length;n<o;n++)u=Xe(a=e.children[n]),(l=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,a)-u)<p?(p=l,c=u<c?u:c,s=a):l===p&&u<c&&(c=u,s=a);e=s||e.children[0]}return e},_insert:function(t,e,i){var r=this.toBBox,n=i?t:r(t),o=[],a=this._chooseSubtree(n,this.data,e,o);for(a.children.push(t),Ge(a,n);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(n,o,e)},_split:function(t,e){var i=t[e],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var o=this._chooseSplitIndex(i,n,r),a=We(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,Ue(i,this.toBBox),Ue(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},_splitRoot:function(t,e){this.data=We([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Ue(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var r,n,o,a,s,u,l,c;for(u=l=1/0,r=e;r<=i-e;r++)a=function(t,e){var i=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),n=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,n-i)*Math.max(0,o-r)}(n=Ve(t,0,r,this.toBBox),o=Ve(t,r,i,this.toBBox)),s=Xe(n)+Xe(o),a<u?(u=a,c=r,l=s<l?s:l):a===u&&s<l&&(l=s,c=r);return c},_chooseSplitAxis:function(t,e,i){var r=t.leaf?this.compareMinX:je,n=t.leaf?this.compareMinY:Ke;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,n)&&t.children.sort(r)},_allDistMargin:function(t,e,i,r){t.children.sort(r);var n,o,a=this.toBBox,s=Ve(t,0,e,a),u=Ve(t,i-e,i,a),l=Ze(s)+Ze(u);for(n=e;n<i-e;n++)o=t.children[n],Ge(s,t.leaf?a(o):o),l+=Ze(s);for(n=i-e-1;n>=e;n--)o=t.children[n],Ge(u,t.leaf?a(o):o),l+=Ze(u);return l},_adjustParentBBoxes:function(t,e,i){for(var r=i;r>=0;r--)Ge(e[r],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():Ue(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var Aa=Object.freeze({toMercator:ui,toWgs84:li}),Ca=6378137,Pa=function(t,e,i){function r(t,i,r,n){var u,l,c=o[t][i],p=o[t][i+1],h=o[r][n],d=o[r][n+1],f=function(t,e,i,r){if(Li(t,i)||Li(t,r)||Li(e,i)||Li(r,i))return null;var n=t[0],o=t[1],a=e[0],s=e[1],u=i[0],l=i[1],c=r[0],p=r[1],h=(n-a)*(l-p)-(o-s)*(u-c);return 0===h?null:[((n*s-o*a)*(u-c)-(n-a)*(u*p-l*c))/h,((n*s-o*a)*(l-p)-(o-s)*(u*p-l*c))/h]}(c,p,h,d);if(null!==f&&(u=p[0]!==c[0]?(f[0]-c[0])/(p[0]-c[0]):(f[1]-c[1])/(p[1]-c[1]),l=d[0]!==h[0]?(f[0]-h[0])/(d[0]-h[0]):(f[1]-h[1])/(d[1]-h[1]),!(u>=1||u<=0||l>=1||l<=0))){var _=f,g=!s[_];g&&(s[_]=!0),e?a.push(e(f,t,i,c,p,u,r,n,h,d,l,g)):a.push(f)}}function n(t,e){var i,r,n,a,s=o[t][e],u=o[t][e+1];return s[0]<u[0]?(i=s[0],r=u[0]):(i=u[0],r=s[0]),s[1]<u[1]?(n=s[1],a=u[1]):(n=u[1],a=s[1]),{minX:i,minY:n,maxX:r,maxY:a,ring:t,edge:e}}if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===i&&(i=1);var o=t.geometry.coordinates,a=[],s={};if(i){for(var u=[],l=0;l<o.length;l++)for(var c=0;c<o[l].length-1;c++)u.push(n(l,c));var p=Xo();p.load(u)}for(var h=0;h<o.length;h++)for(var d=0;d<o[h].length-1;d++)if(i)p.search(n(h,d)).forEach((function(t){var e=t.ring,i=t.edge;r(h,d,e,i)}));else for(var f=0;f<o.length;f++)for(var _=0;_<o[f].length-1;_++)r(h,d,f,_);return e||(a={type:"Feature",geometry:{type:"MultiPoint",coordinates:a}}),a},Ta=function(t){function e(){for(var t=[],e=0;e<f.features.length;e++)-1==f.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var i=-1,r=0;r<f.features.length;r++)t[e]!=r&&Lt(f.features[t[e]].geometry.coordinates[0][0],f.features[r],{ignoreBoundary:!0})&&mi(f.features[r])<1/0&&(i=r);f.features[t[e]].properties.parent=i}}function i(){for(var t=0;t<f.features.length;t++)if(-1==f.features[t].properties.parent){var e=f.features[t].properties.winding;f.features[t].properties.netWinding=e,r(t,e)}}function r(t,e){for(var i=0;i<f.features.length;i++)if(f.features[i].properties.parent==t){var n=e+f.features[i].properties.winding;f.features[i].properties.netWinding=n,r(i,n)}}if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var n=t.geometry.coordinates.length,a=[],s=0;s<n;s++){var u=t.geometry.coordinates[s];ki(u[0],u[u.length-1])||u.push(u[0]),a.push.apply(a,u.slice(0,u.length-1))}if(!function(t){for(var e={},i=1,r=0,n=t.length;r<n;++r){if(e.hasOwnProperty(t[r])){i=0;break}e[t[r]]=1}return i}(a))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var c=a.length,p=Pa(t,(function(t,e,i,r,n,o,a,s,u,l,c,p){return[t,e,i,r,n,o,a,s,u,l,c,p]})),h=p.length;if(0==h){var d=[];for(s=0;s<n;s++)d.push(o([t.geometry.coordinates[s]],{parent:-1,winding:function(t){for(var e=0,i=0;i<t.length-1;i++)t[i][0]<t[e][0]&&(e=i);if(Mi([t[(e-1).modulo(t.length-1)],t[e],t[(e+1).modulo(t.length-1)]],!0))var r=1;else r=-1;return r}(t.geometry.coordinates[s])}));var f=l(d);return e(),i(),f}var _=[],g=[];for(s=0;s<n;s++){_.push([]);for(var m=0;m<t.geometry.coordinates[s].length-1;m++)_[s].push([new La(t.geometry.coordinates[s][(m+1).modulo(t.geometry.coordinates[s].length-1)],1,[s,m],[s,(m+1).modulo(t.geometry.coordinates[s].length-1)],void 0)]),g.push(new Ma(t.geometry.coordinates[s][m],[s,(m-1).modulo(t.geometry.coordinates[s].length-1)],[s,m],void 0,void 0,!1,!0))}for(s=0;s<h;s++)_[p[s][1]][p[s][2]].push(new La(p[s][0],p[s][5],[p[s][1],p[s][2]],[p[s][6],p[s][7]],void 0)),p[s][11]&&g.push(new Ma(p[s][0],[p[s][1],p[s][2]],[p[s][6],p[s][7]],void 0,void 0,!0,!0));var y=g.length;for(s=0;s<_.length;s++)for(m=0;m<_[s].length;m++)_[s][m].sort((function(t,e){return t.param<e.param?-1:1}));var v=[];for(s=0;s<y;s++)v.push({minX:g[s].coord[0],minY:g[s].coord[1],maxX:g[s].coord[0],maxY:g[s].coord[1],index:s});var b=Xo();for(b.load(v),s=0;s<_.length;s++)for(m=0;m<_[s].length;m++)for(var x=0;x<_[s][m].length;x++){E=x==_[s][m].length-1?_[s][(m+1).modulo(t.geometry.coordinates[s].length-1)][0].coord:_[s][m][x+1].coord;var w=b.search({minX:E[0],minY:E[1],maxX:E[0],maxY:E[1]})[0];_[s][m][x].nxtIsectAlongEdgeIn=w.index}for(s=0;s<_.length;s++)for(m=0;m<_[s].length;m++)for(x=0;x<_[s][m].length;x++){var E=_[s][m][x].coord,S=(w=b.search({minX:E[0],minY:E[1],maxX:E[0],maxY:E[1]})[0]).index;S<c?g[S].nxtIsectAlongRingAndEdge2=_[s][m][x].nxtIsectAlongEdgeIn:ki(g[S].ringAndEdge1,_[s][m][x].ringAndEdgeIn)?g[S].nxtIsectAlongRingAndEdge1=_[s][m][x].nxtIsectAlongEdgeIn:g[S].nxtIsectAlongRingAndEdge2=_[s][m][x].nxtIsectAlongEdgeIn}var I=[];for(s=0,m=0;m<n;m++){var A=s;for(x=0;x<t.geometry.coordinates[m].length-1;x++)g[s].coord[0]<g[A].coord[0]&&(A=s),s++;var C=g[A].nxtIsectAlongRingAndEdge2;for(x=0;x<g.length;x++)if(g[x].nxtIsectAlongRingAndEdge1==A||g[x].nxtIsectAlongRingAndEdge2==A){var P=x;break}var T=Mi([g[P].coord,g[A].coord,g[C].coord],!0)?1:-1;I.push({isect:A,parent:-1,winding:T})}for(I.sort((function(t,e){return g[t.isect].coord>g[e.isect].coord?-1:1})),d=[];I.length>0;){var L=I.pop(),M=L.isect,k=L.parent,R=L.winding,N=d.length,D=[g[M].coord],O=M;if(g[M].ringAndEdge1Walkable)var z=g[M].ringAndEdge1,F=g[M].nxtIsectAlongRingAndEdge1;else z=g[M].ringAndEdge2,F=g[M].nxtIsectAlongRingAndEdge2;for(;!ki(g[M].coord,g[F].coord);){D.push(g[F].coord);var B=void 0;for(s=0;s<I.length;s++)if(I[s].isect==F){B=s;break}if(null!=B&&I.splice(B,1),ki(z,g[F].ringAndEdge1)){if(z=g[F].ringAndEdge2,g[F].ringAndEdge2Walkable=!1,g[F].ringAndEdge1Walkable){var q={isect:F};Mi([g[O].coord,g[F].coord,g[g[F].nxtIsectAlongRingAndEdge2].coord],1==R)?(q.parent=k,q.winding=-R):(q.parent=N,q.winding=R),I.push(q)}O=F,F=g[F].nxtIsectAlongRingAndEdge2}else z=g[F].ringAndEdge1,g[F].ringAndEdge1Walkable=!1,g[F].ringAndEdge2Walkable&&(q={isect:F},Mi([g[O].coord,g[F].coord,g[g[F].nxtIsectAlongRingAndEdge1].coord],1==R)?(q.parent=k,q.winding=-R):(q.parent=N,q.winding=R),I.push(q)),O=F,F=g[F].nxtIsectAlongRingAndEdge1}D.push(g[F].coord),d.push(o([D],{index:N,parent:k,winding:R,netWinding:void 0}))}return f=l(d),e(),i(),f},La=function(t,e,i,r,n){this.coord=t,this.param=e,this.ringAndEdgeIn=i,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=n},Ma=function(t,e,i,r,n,o,a){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=i,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=n,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=a};Number.prototype.modulo=function(t){return(this%t+t)%t};var ka=Math.PI/180,Ra=180/Math.PI,Na=function(t,e){this.lon=t,this.lat=e,this.x=ka*t,this.y=ka*e};Na.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},Na.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new Na(e,t)};var Da=function(){this.coords=[],this.length=0};Da.prototype.move_to=function(t){this.length++,this.coords.push(t)};var Oa=function(t){this.properties=t||{},this.geometries=[]};Oa.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},Oa.prototype.wkt=function(){for(var t="",e="LINESTRING(",i=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(i),t+=e.substring(0,e.length-1)+")"}return t};var za=function(t,e,i){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Na(t.x,t.y),this.end=new Na(e.x,e.y),this.properties=i||{};var r=this.start.x-this.end.x,n=this.start.y-this.end.y,o=Math.pow(Math.sin(n/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};za.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),i=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+i*Math.cos(this.end.y)*Math.cos(this.end.x),n=e*Math.cos(this.start.y)*Math.sin(this.start.x)+i*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+i*Math.sin(this.end.y),a=Ra*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(n,2)));return[Ra*Math.atan2(n,r),a]},za.prototype.Arc=function(t,e){var i=[];if(!t||t<=2)i.push([this.start.lon,this.start.lat]),i.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),n=0;n<t;++n){var o=r*n,a=this.interpolate(o);i.push(a)}for(var s=!1,u=0,l=e&&e.offset?e.offset:10,c=180-l,p=-180+l,h=360-l,d=1;d<i.length;++d){var f=i[d-1][0],_=i[d][0],g=Math.abs(_-f);g>h&&(_>c&&f<p||f>c&&_<p)?s=!0:g>u&&(u=g)}var m=[];if(s&&u<l){var y=[];m.push(y);for(var v=0;v<i.length;++v){var b=parseFloat(i[v][0]);if(v>0&&Math.abs(b-i[v-1][0])>h){var x=parseFloat(i[v-1][0]),w=parseFloat(i[v-1][1]),E=parseFloat(i[v][0]),S=parseFloat(i[v][1]);if(x>-180&&x<p&&180===E&&v+1<i.length&&i[v-1][0]>-180&&i[v-1][0]<p){y.push([-180,i[v][1]]),v++,y.push([i[v][0],i[v][1]]);continue}if(x>c&&x<180&&-180===E&&v+1<i.length&&i[v-1][0]>c&&i[v-1][0]<180){y.push([180,i[v][1]]),v++,y.push([i[v][0],i[v][1]]);continue}if(x<p&&E>c){var I=x;x=E,E=I;var A=w;w=S,S=A}if(x>c&&E<p&&(E+=360),x<=180&&E>=180&&x<E){var C=(180-x)/(E-x),P=C*S+(1-C)*w;y.push([i[v-1][0]>c?180:-180,P]),(y=[]).push([i[v-1][0]>c?-180:180,P]),m.push(y)}else y=[],m.push(y);y.push([b,i[v][1]])}else y.push([i[v][0],i[v][1]])}}else{var T=[];m.push(T);for(var L=0;L<i.length;++L)T.push([i[L][0],i[L][1]])}for(var M=new Oa(this.properties),k=0;k<m.length;++k){var R=new Da;M.geometries.push(R);for(var N=m[k],D=0;D<N.length;++D)R.move_to(N[D])}return M};var Fa=ji;ji.polyline=ji,ji.polygon=function(t,e){var i,r,n,o,a,s,u;for(r=1;r<=8;r*=2){for(i=[],o=!(Xi(n=t[t.length-1],e)&r),a=0;a<t.length;a++)(u=!(Xi(s=t[a],e)&r))!==o&&i.push(Ki(n,s,r,e)),u&&i.push(s),n=s,o=u;if(!(t=i).length)break}return i};var Ba=Array.prototype.slice,qa={successCallback:null,verbose:!1,polygons:!1},Ua={},Va=64,Ga=16,ja=4,Ka=1,Xa=[],Za=[],Ya=[],Ha=[],Wa=[],Qa=[],Ja=[],$a=[],ts=[],es=[],is=[],rs=[],ns=[],os=[],as=[],ss=[],us=[],ls=[],cs=[],ps=[],hs=[],ds=[],fs=[],_s=[];Ja[85]=es[85]=-1,$a[85]=is[85]=0,ts[85]=rs[85]=1,cs[85]=ds[85]=1,ps[85]=fs[85]=0,hs[85]=_s[85]=1,Xa[85]=Ha[85]=0,Za[85]=Wa[85]=-1,Ya[85]=as[85]=0,ss[85]=ns[85]=0,us[85]=os[85]=1,Qa[85]=ls[85]=1,ds[1]=ds[169]=0,fs[1]=fs[169]=-1,_s[1]=_s[169]=0,ns[1]=ns[169]=-1,os[1]=os[169]=0,as[1]=as[169]=0,es[4]=es[166]=0,is[4]=is[166]=-1,rs[4]=rs[166]=1,ss[4]=ss[166]=1,us[4]=us[166]=0,ls[4]=ls[166]=0,Ja[16]=Ja[154]=0,$a[16]=$a[154]=1,ts[16]=ts[154]=1,Ha[16]=Ha[154]=1,Wa[16]=Wa[154]=0,Qa[16]=Qa[154]=1,cs[64]=cs[106]=0,ps[64]=ps[106]=1,hs[64]=hs[106]=0,Xa[64]=Xa[106]=-1,Za[64]=Za[106]=0,Ya[64]=Ya[106]=1,cs[2]=cs[168]=0,ps[2]=ps[168]=-1,hs[2]=hs[168]=1,ds[2]=ds[168]=0,fs[2]=fs[168]=-1,_s[2]=_s[168]=0,ns[2]=ns[168]=-1,os[2]=os[168]=0,as[2]=as[168]=0,ss[2]=ss[168]=-1,us[2]=us[168]=0,ls[2]=ls[168]=1,Ja[8]=Ja[162]=0,$a[8]=$a[162]=-1,ts[8]=ts[162]=0,es[8]=es[162]=0,is[8]=is[162]=-1,rs[8]=rs[162]=1,ns[8]=ns[162]=1,os[8]=os[162]=0,as[8]=as[162]=1,ss[8]=ss[162]=1,us[8]=us[162]=0,ls[8]=ls[162]=0,Ja[32]=Ja[138]=0,$a[32]=$a[138]=1,ts[32]=ts[138]=1,es[32]=es[138]=0,is[32]=is[138]=1,rs[32]=rs[138]=0,Xa[32]=Xa[138]=1,Za[32]=Za[138]=0,Ya[32]=Ya[138]=0,Ha[32]=Ha[138]=1,Wa[32]=Wa[138]=0,Qa[32]=Qa[138]=1,ds[128]=ds[42]=0,fs[128]=fs[42]=1,_s[128]=_s[42]=1,cs[128]=cs[42]=0,ps[128]=ps[42]=1,hs[128]=hs[42]=0,Xa[128]=Xa[42]=-1,Za[128]=Za[42]=0,Ya[128]=Ya[42]=1,Ha[128]=Ha[42]=-1,Wa[128]=Wa[42]=0,Qa[128]=Qa[42]=0,es[5]=es[165]=-1,is[5]=is[165]=0,rs[5]=rs[165]=0,ds[5]=ds[165]=1,fs[5]=fs[165]=0,_s[5]=_s[165]=0,ss[20]=ss[150]=0,us[20]=us[150]=1,ls[20]=ls[150]=1,Ha[20]=Ha[150]=0,Wa[20]=Wa[150]=-1,Qa[20]=Qa[150]=1,Ja[80]=Ja[90]=-1,$a[80]=$a[90]=0,ts[80]=ts[90]=1,cs[80]=cs[90]=1,ps[80]=ps[90]=0,hs[80]=hs[90]=1,ns[65]=ns[105]=0,os[65]=os[105]=1,as[65]=as[105]=0,Xa[65]=Xa[105]=0,Za[65]=Za[105]=-1,Ya[65]=Ya[105]=0,Ja[160]=Ja[10]=-1,$a[160]=$a[10]=0,ts[160]=ts[10]=1,es[160]=es[10]=-1,is[160]=is[10]=0,rs[160]=rs[10]=0,ds[160]=ds[10]=1,fs[160]=fs[10]=0,_s[160]=_s[10]=0,cs[160]=cs[10]=1,ps[160]=ps[10]=0,hs[160]=hs[10]=1,ss[130]=ss[40]=0,us[130]=us[40]=1,ls[130]=ls[40]=1,ns[130]=ns[40]=0,os[130]=os[40]=1,as[130]=as[40]=0,Xa[130]=Xa[40]=0,Za[130]=Za[40]=-1,Ya[130]=Ya[40]=0,Ha[130]=Ha[40]=0,Wa[130]=Wa[40]=-1,Qa[130]=Qa[40]=1,es[37]=es[133]=0,is[37]=is[133]=1,rs[37]=rs[133]=1,ds[37]=ds[133]=0,fs[37]=fs[133]=1,_s[37]=_s[133]=0,Xa[37]=Xa[133]=-1,Za[37]=Za[133]=0,Ya[37]=Ya[133]=0,Ha[37]=Ha[133]=1,Wa[37]=Wa[133]=0,Qa[37]=Qa[133]=0,ss[148]=ss[22]=-1,us[148]=us[22]=0,ls[148]=ls[22]=0,ds[148]=ds[22]=0,fs[148]=fs[22]=-1,_s[148]=_s[22]=1,cs[148]=cs[22]=0,ps[148]=ps[22]=1,hs[148]=hs[22]=1,Ha[148]=Ha[22]=-1,Wa[148]=Wa[22]=0,Qa[148]=Qa[22]=1,Ja[82]=Ja[88]=0,$a[82]=$a[88]=-1,ts[82]=ts[88]=1,ss[82]=ss[88]=1,us[82]=us[88]=0,ls[82]=ls[88]=1,ns[82]=ns[88]=-1,os[82]=os[88]=0,as[82]=as[88]=1,cs[82]=cs[88]=0,ps[82]=ps[88]=-1,hs[82]=hs[88]=0,Ja[73]=Ja[97]=0,$a[73]=$a[97]=1,ts[73]=ts[97]=0,es[73]=es[97]=0,is[73]=is[97]=-1,rs[73]=rs[97]=0,ns[73]=ns[97]=1,os[73]=os[97]=0,as[73]=as[97]=0,Xa[73]=Xa[97]=1,Za[73]=Za[97]=0,Ya[73]=Ya[97]=1,Ja[145]=Ja[25]=0,$a[145]=$a[25]=-1,ts[145]=ts[25]=0,ns[145]=ns[25]=1,os[145]=os[25]=0,as[145]=as[25]=1,ds[145]=ds[25]=0,fs[145]=fs[25]=1,_s[145]=_s[25]=1,Ha[145]=Ha[25]=-1,Wa[145]=Wa[25]=0,Qa[145]=Qa[25]=0,es[70]=es[100]=0,is[70]=is[100]=1,rs[70]=rs[100]=0,ss[70]=ss[100]=-1,us[70]=us[100]=0,ls[70]=ls[100]=1,cs[70]=cs[100]=0,ps[70]=ps[100]=-1,hs[70]=hs[100]=1,Xa[70]=Xa[100]=1,Za[70]=Za[100]=0,Ya[70]=Ya[100]=0,es[101]=es[69]=0,is[101]=is[69]=1,rs[101]=rs[69]=0,Xa[101]=Xa[69]=1,Za[101]=Za[69]=0,Ya[101]=Ya[69]=0,ds[149]=ds[21]=0,fs[149]=fs[21]=1,_s[149]=_s[21]=1,Ha[149]=Ha[21]=-1,Wa[149]=Wa[21]=0,Qa[149]=Qa[21]=0,ss[86]=ss[84]=-1,us[86]=us[84]=0,ls[86]=ls[84]=1,cs[86]=cs[84]=0,ps[86]=ps[84]=-1,hs[86]=hs[84]=1,Ja[89]=Ja[81]=0,$a[89]=$a[81]=-1,ts[89]=ts[81]=0,ns[89]=ns[81]=1,os[89]=os[81]=0,as[89]=as[81]=1,Ja[96]=Ja[74]=0,$a[96]=$a[74]=1,ts[96]=ts[74]=0,es[96]=es[74]=-1,is[96]=is[74]=0,rs[96]=rs[74]=1,cs[96]=cs[74]=1,ps[96]=ps[74]=0,hs[96]=hs[74]=0,Xa[96]=Xa[74]=1,Za[96]=Za[74]=0,Ya[96]=Ya[74]=1,Ja[24]=Ja[146]=0,$a[24]=$a[146]=-1,ts[24]=ts[146]=1,ss[24]=ss[146]=1,us[24]=us[146]=0,ls[24]=ls[146]=1,ns[24]=ns[146]=0,os[24]=os[146]=1,as[24]=as[146]=1,Ha[24]=Ha[146]=0,Wa[24]=Wa[146]=-1,Qa[24]=Qa[146]=0,es[6]=es[164]=-1,is[6]=is[164]=0,rs[6]=rs[164]=1,ss[6]=ss[164]=-1,us[6]=us[164]=0,ls[6]=ls[164]=0,ds[6]=ds[164]=0,fs[6]=fs[164]=-1,_s[6]=_s[164]=1,cs[6]=cs[164]=1,ps[6]=ps[164]=0,hs[6]=hs[164]=0,ns[129]=ns[41]=0,os[129]=os[41]=1,as[129]=as[41]=1,ds[129]=ds[41]=0,fs[129]=fs[41]=1,_s[129]=_s[41]=0,Xa[129]=Xa[41]=-1,Za[129]=Za[41]=0,Ya[129]=Ya[41]=0,Ha[129]=Ha[41]=0,Wa[129]=Wa[41]=-1,Qa[129]=Qa[41]=0,ss[66]=ss[104]=0,us[66]=us[104]=1,ls[66]=ls[104]=0,ns[66]=ns[104]=-1,os[66]=os[104]=0,as[66]=as[104]=1,cs[66]=cs[104]=0,ps[66]=ps[104]=-1,hs[66]=hs[104]=0,Xa[66]=Xa[104]=0,Za[66]=Za[104]=-1,Ya[66]=Ya[104]=1,Ja[144]=Ja[26]=-1,$a[144]=$a[26]=0,ts[144]=ts[26]=0,ds[144]=ds[26]=1,fs[144]=fs[26]=0,_s[144]=_s[26]=1,cs[144]=cs[26]=0,ps[144]=ps[26]=1,hs[144]=hs[26]=1,Ha[144]=Ha[26]=-1,Wa[144]=Wa[26]=0,Qa[144]=Qa[26]=1,es[36]=es[134]=0,is[36]=is[134]=1,rs[36]=rs[134]=1,ss[36]=ss[134]=0,us[36]=us[134]=1,ls[36]=ls[134]=0,Xa[36]=Xa[134]=0,Za[36]=Za[134]=-1,Ya[36]=Ya[134]=1,Ha[36]=Ha[134]=1,Wa[36]=Wa[134]=0,Qa[36]=Qa[134]=0,Ja[9]=Ja[161]=-1,$a[9]=$a[161]=0,ts[9]=ts[161]=0,es[9]=es[161]=0,is[9]=is[161]=-1,rs[9]=rs[161]=0,ns[9]=ns[161]=1,os[9]=os[161]=0,as[9]=as[161]=0,ds[9]=ds[161]=1,fs[9]=fs[161]=0,_s[9]=_s[161]=1,Ja[136]=0,$a[136]=1,ts[136]=1,es[136]=0,is[136]=1,rs[136]=0,ss[136]=-1,us[136]=0,ls[136]=1,ns[136]=-1,os[136]=0,as[136]=0,ds[136]=0,fs[136]=-1,_s[136]=0,cs[136]=0,ps[136]=-1,hs[136]=1,Xa[136]=1,Za[136]=0,Ya[136]=0,Ha[136]=1,Wa[136]=0,Qa[136]=1,Ja[34]=0,$a[34]=-1,ts[34]=0,es[34]=0,is[34]=-1,rs[34]=1,ss[34]=1,us[34]=0,ls[34]=0,ns[34]=1,os[34]=0,as[34]=1,ds[34]=0,fs[34]=1,_s[34]=1,cs[34]=0,ps[34]=1,hs[34]=0,Xa[34]=-1,Za[34]=0,Ya[34]=1,Ha[34]=-1,Wa[34]=0,Qa[34]=0,Ja[35]=0,$a[35]=1,ts[35]=1,es[35]=0,is[35]=-1,rs[35]=1,ss[35]=1,us[35]=0,ls[35]=0,ns[35]=-1,os[35]=0,as[35]=0,ds[35]=0,fs[35]=-1,_s[35]=0,cs[35]=0,ps[35]=1,hs[35]=0,Xa[35]=-1,Za[35]=0,Ya[35]=1,Ha[35]=1,Wa[35]=0,Qa[35]=1,Ja[153]=0,$a[153]=1,ts[153]=1,ns[153]=-1,os[153]=0,as[153]=0,ds[153]=0,fs[153]=-1,_s[153]=0,Ha[153]=1,Wa[153]=0,Qa[153]=1,es[102]=0,is[102]=-1,rs[102]=1,ss[102]=1,us[102]=0,ls[102]=0,cs[102]=0,ps[102]=1,hs[102]=0,Xa[102]=-1,Za[102]=0,Ya[102]=1,Ja[155]=0,$a[155]=-1,ts[155]=0,ns[155]=1,os[155]=0,as[155]=1,ds[155]=0,fs[155]=1,_s[155]=1,Ha[155]=-1,Wa[155]=0,Qa[155]=0,es[103]=0,is[103]=1,rs[103]=0,ss[103]=-1,us[103]=0,ls[103]=1,cs[103]=0,ps[103]=-1,hs[103]=1,Xa[103]=1,Za[103]=0,Ya[103]=0,Ja[152]=0,$a[152]=1,ts[152]=1,ss[152]=-1,us[152]=0,ls[152]=1,ns[152]=-1,os[152]=0,as[152]=0,ds[152]=0,fs[152]=-1,_s[152]=0,cs[152]=0,ps[152]=-1,hs[152]=1,Ha[152]=1,Wa[152]=0,Qa[152]=1,Ja[156]=0,$a[156]=-1,ts[156]=1,ss[156]=1,us[156]=0,ls[156]=1,ns[156]=-1,os[156]=0,as[156]=0,ds[156]=0,fs[156]=-1,_s[156]=0,cs[156]=0,ps[156]=1,hs[156]=1,Ha[156]=-1,Wa[156]=0,Qa[156]=1,Ja[137]=0,$a[137]=1,ts[137]=1,es[137]=0,is[137]=1,rs[137]=0,ns[137]=-1,os[137]=0,as[137]=0,ds[137]=0,fs[137]=-1,_s[137]=0,Xa[137]=1,Za[137]=0,Ya[137]=0,Ha[137]=1,Wa[137]=0,Qa[137]=1,Ja[139]=0,$a[139]=1,ts[139]=1,es[139]=0,is[139]=-1,rs[139]=0,ns[139]=1,os[139]=0,as[139]=0,ds[139]=0,fs[139]=1,_s[139]=0,Xa[139]=-1,Za[139]=0,Ya[139]=0,Ha[139]=1,Wa[139]=0,Qa[139]=1,Ja[98]=0,$a[98]=-1,ts[98]=0,es[98]=0,is[98]=-1,rs[98]=1,ss[98]=1,us[98]=0,ls[98]=0,ns[98]=1,os[98]=0,as[98]=1,cs[98]=0,ps[98]=1,hs[98]=0,Xa[98]=-1,Za[98]=0,Ya[98]=1,Ja[99]=0,$a[99]=1,ts[99]=0,es[99]=0,is[99]=-1,rs[99]=1,ss[99]=1,us[99]=0,ls[99]=0,ns[99]=-1,os[99]=0,as[99]=1,cs[99]=0,ps[99]=-1,hs[99]=0,Xa[99]=1,Za[99]=0,Ya[99]=1,es[38]=0,is[38]=-1,rs[38]=1,ss[38]=1,us[38]=0,ls[38]=0,ds[38]=0,fs[38]=1,_s[38]=1,cs[38]=0,ps[38]=1,hs[38]=0,Xa[38]=-1,Za[38]=0,Ya[38]=1,Ha[38]=-1,Wa[38]=0,Qa[38]=0,es[39]=0,is[39]=1,rs[39]=1,ss[39]=-1,us[39]=0,ls[39]=0,ds[39]=0,fs[39]=-1,_s[39]=1,cs[39]=0,ps[39]=1,hs[39]=0,Xa[39]=-1,Za[39]=0,Ya[39]=1,Ha[39]=1,Wa[39]=0,Qa[39]=0;var gs=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},ms=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},ys=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},vs=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},bs=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},xs=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},ws=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},Es=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Ss=[],Is=[],As=[],Cs=[],Ps=[],Ts=[],Ls=[],Ms=[];Cs[1]=Ps[1]=18,Cs[169]=Ps[169]=18,As[4]=Is[4]=12,As[166]=Is[166]=12,Ss[16]=Ms[16]=4,Ss[154]=Ms[154]=4,Ts[64]=Ls[64]=22,Ts[106]=Ls[106]=22,As[2]=Ts[2]=17,Cs[2]=Ps[2]=18,As[168]=Ts[168]=17,Cs[168]=Ps[168]=18,Ss[8]=Cs[8]=9,Is[8]=As[8]=12,Ss[162]=Cs[162]=9,Is[162]=As[162]=12,Ss[32]=Ms[32]=4,Is[32]=Ls[32]=1,Ss[138]=Ms[138]=4,Is[138]=Ls[138]=1,Ps[128]=Ms[128]=21,Ts[128]=Ls[128]=22,Ps[42]=Ms[42]=21,Ts[42]=Ls[42]=22,Is[5]=Ps[5]=14,Is[165]=Ps[165]=14,As[20]=Ms[20]=6,As[150]=Ms[150]=6,Ss[80]=Ts[80]=11,Ss[90]=Ts[90]=11,Cs[65]=Ls[65]=3,Cs[105]=Ls[105]=3,Ss[160]=Ts[160]=11,Is[160]=Ps[160]=14,Ss[10]=Ts[10]=11,Is[10]=Ps[10]=14,As[130]=Ms[130]=6,Cs[130]=Ls[130]=3,As[40]=Ms[40]=6,Cs[40]=Ls[40]=3,Is[101]=Ls[101]=1,Is[69]=Ls[69]=1,Ps[149]=Ms[149]=21,Ps[21]=Ms[21]=21,As[86]=Ts[86]=17,As[84]=Ts[84]=17,Ss[89]=Cs[89]=9,Ss[81]=Cs[81]=9,Ss[96]=Ls[96]=0,Is[96]=Ts[96]=15,Ss[74]=Ls[74]=0,Is[74]=Ts[74]=15,Ss[24]=As[24]=8,Cs[24]=Ms[24]=7,Ss[146]=As[146]=8,Cs[146]=Ms[146]=7,Is[6]=Ts[6]=15,As[6]=Ps[6]=16,Is[164]=Ts[164]=15,As[164]=Ps[164]=16,Cs[129]=Ms[129]=7,Ps[129]=Ls[129]=20,Cs[41]=Ms[41]=7,Ps[41]=Ls[41]=20,As[66]=Ls[66]=2,Cs[66]=Ts[66]=19,As[104]=Ls[104]=2,Cs[104]=Ts[104]=19,Ss[144]=Ps[144]=10,Ts[144]=Ms[144]=23,Ss[26]=Ps[26]=10,Ts[26]=Ms[26]=23,Is[36]=Ms[36]=5,As[36]=Ls[36]=2,Is[134]=Ms[134]=5,As[134]=Ls[134]=2,Ss[9]=Ps[9]=10,Is[9]=Cs[9]=13,Ss[161]=Ps[161]=10,Is[161]=Cs[161]=13,Is[37]=Ms[37]=5,Ps[37]=Ls[37]=20,Is[133]=Ms[133]=5,Ps[133]=Ls[133]=20,As[148]=Ps[148]=16,Ts[148]=Ms[148]=23,As[22]=Ps[22]=16,Ts[22]=Ms[22]=23,Ss[82]=As[82]=8,Cs[82]=Ts[82]=19,Ss[88]=As[88]=8,Cs[88]=Ts[88]=19,Ss[73]=Ls[73]=0,Is[73]=Cs[73]=13,Ss[97]=Ls[97]=0,Is[97]=Cs[97]=13,Ss[145]=Cs[145]=9,Ps[145]=Ms[145]=21,Ss[25]=Cs[25]=9,Ps[25]=Ms[25]=21,Is[70]=Ls[70]=1,As[70]=Ts[70]=17,Is[100]=Ls[100]=1,As[100]=Ts[100]=17,Ss[34]=Cs[34]=9,Is[34]=As[34]=12,Ps[34]=Ms[34]=21,Ts[34]=Ls[34]=22,Ss[136]=Ms[136]=4,Is[136]=Ls[136]=1,As[136]=Ts[136]=17,Cs[136]=Ps[136]=18,Ss[35]=Ms[35]=4,Is[35]=As[35]=12,Cs[35]=Ps[35]=18,Ts[35]=Ls[35]=22,Ss[153]=Ms[153]=4,Cs[153]=Ps[153]=18,Is[102]=As[102]=12,Ts[102]=Ls[102]=22,Ss[155]=Cs[155]=9,Ps[155]=Ms[155]=23,Is[103]=Ls[103]=1,As[103]=Ts[103]=17,Ss[152]=Ms[152]=4,As[152]=Ts[152]=17,Cs[152]=Ps[152]=18,Ss[156]=As[156]=8,Cs[156]=Ps[156]=18,Ts[156]=Ms[156]=23,Ss[137]=Ms[137]=4,Is[137]=Ls[137]=1,Cs[137]=Ps[137]=18,Ss[139]=Ms[139]=4,Is[139]=Cs[139]=13,Ps[139]=Ls[139]=20,Ss[98]=Cs[98]=9,Is[98]=As[98]=12,Ts[98]=Ls[98]=22,Ss[99]=Ls[99]=0,Is[99]=As[99]=12,Cs[99]=Ts[99]=19,Is[38]=As[38]=12,Ps[38]=Ms[38]=21,Ts[38]=Ls[38]=22,Is[39]=Ms[39]=5,As[39]=Ps[39]=16,Ts[39]=Ls[39]=22;var ks=[];ks[1]=ks[169]=gs,ks[4]=ks[166]=ms,ks[16]=ks[154]=ys,ks[64]=ks[106]=vs,ks[168]=ks[2]=bs,ks[162]=ks[8]=xs,ks[138]=ks[32]=ws,ks[42]=ks[128]=Es,ks[5]=ks[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},ks[20]=ks[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},ks[80]=ks[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},ks[65]=ks[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},ks[160]=ks[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},ks[130]=ks[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},ks[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},ks[101]=ks[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},ks[149]=ks[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},ks[86]=ks[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},ks[89]=ks[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},ks[96]=ks[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},ks[24]=ks[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},ks[6]=ks[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},ks[129]=ks[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},ks[66]=ks[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},ks[144]=ks[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},ks[36]=ks[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},ks[9]=ks[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},ks[37]=ks[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},ks[148]=ks[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},ks[82]=ks[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},ks[73]=ks[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},ks[145]=ks[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},ks[70]=ks[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},ks[34]=function(t){return[Es(t),xs(t)]},ks[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},ks[136]=function(t){return[ws(t),bs(t)]},ks[153]=function(t){return[ys(t),gs(t)]},ks[102]=function(t){return[ms(t),vs(t)]},ks[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},ks[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},ks[152]=function(t){return[ys(t),bs(t)]},ks[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},ks[137]=function(t){return[ws(t),gs(t)]},ks[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},ks[98]=function(t){return[xs(t),vs(t)]},ks[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},ks[38]=function(t){return[ms(t),Es(t)]},ks[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var Rs=function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1};Rs.buildId=function(t){return t.join(",")},Rs.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter((function(e){return e.from.id!==t.from.id}))},Rs.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter((function(e){return e.to.id!==t.to.id}))},Rs.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},Rs.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort((function(e,i){var r=e.to,n=i.to;if(r.coordinates[0]-t.coordinates[0]>=0&&n.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&n.coordinates[0]-t.coordinates[0]>=0)return-1;if(r.coordinates[0]-t.coordinates[0]==0&&n.coordinates[0]-t.coordinates[0]==0)return r.coordinates[1]-t.coordinates[1]>=0||n.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-n.coordinates[1]:n.coordinates[1]-r.coordinates[1];var o=vr(t.coordinates,r.coordinates,n.coordinates);return o<0?1:o>0?-1:Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(n.coordinates[0]-t.coordinates[0],2)+Math.pow(n.coordinates[1]-t.coordinates[1],2))})),this.outerEdgesSorted=!0)},Rs.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},Rs.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},Rs.prototype.addInnerEdge=function(t){this.innerEdges.push(t)};var Ns=function(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)};Ns.prototype.getSymetric=function(){return this.symetric||(this.symetric=new Ns(this.to,this.from),this.symetric.symetric=this),this.symetric},Ns.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},Ns.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},Ns.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},Ns.prototype.toLineString=function(){return s([this.from.coordinates,this.to.coordinates])},Ns.prototype.compareTo=function(t){return vr(t.from.coordinates,t.to.coordinates,this.to.coordinates)};var Ds=function(){this.edges=[],this.polygon=void 0,this.envelope=void 0},Os={length:{configurable:!0}};Ds.prototype.push=function(t){this[this.edges.length]=t,this.edges.push(t),this.polygon=this.envelope=void 0},Ds.prototype.get=function(t){return this.edges[t]},Os.length.get=function(){return this.edges.length},Ds.prototype.forEach=function(t){this.edges.forEach(t)},Ds.prototype.map=function(t){return this.edges.map(t)},Ds.prototype.some=function(t){return this.edges.some(t)},Ds.prototype.isValid=function(){return!0},Ds.prototype.isHole=function(){var t=this,e=this.edges.reduce((function(e,i,r){return i.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=r),e}),0),i=(0===e?this.length:e)-1,r=(e+1)%this.length,n=vr(this.edges[i].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return 0===n?this.edges[i].from.coordinates[0]>this.edges[r].from.coordinates[0]:n>0},Ds.prototype.toMultiPoint=function(){return p(this.edges.map((function(t){return t.from.coordinates})))},Ds.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map((function(t){return t.from.coordinates}));return t.push(this.edges[0].from.coordinates),this.polygon=o([t])},Ds.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=ce(this.toPolygon())},Ds.findEdgeRingContaining=function(t,e){var i,n,o=t.getEnvelope();return e.forEach((function(e){var a=e.getEnvelope();if(n&&(i=n.getEnvelope()),!function(t,e){var i=t.geometry.coordinates.map((function(t){return t[0]})),r=t.geometry.coordinates.map((function(t){return t[1]})),n=e.geometry.coordinates.map((function(t){return t[0]})),o=e.geometry.coordinates.map((function(t){return t[1]}));return Math.max(null,i)===Math.max(null,n)&&Math.max(null,r)===Math.max(null,o)&&Math.min(null,i)===Math.min(null,n)&&Math.min(null,r)===Math.min(null,o)}(a,o)&&br(a,o)){var s=t.map((function(t){return t.from.coordinates})).find((function(t){return!e.some((function(e){return function(t,e){return t[0]===e[0]&&t[1]===e[1]}(t,e.from.coordinates)}))}));s&&e.inside(r(s))&&(n&&!br(i,a)||(n=e))}})),n},Ds.prototype.inside=function(t){return Lt(t,this.toPolygon())},Object.defineProperties(Ds.prototype,Os);var zs=function(){this.edges=[],this.nodes={}};zs.fromGeoJson=function(t){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(t);var e=new zs;return O(t,(function(t){Z(t,"LineString","Graph::fromGeoJson"),P(t,(function(t,i){if(t){var r=e.getNode(t),n=e.getNode(i);e.addEdge(r,n)}return i}))})),e},zs.prototype.getNode=function(t){var e=Rs.buildId(t),i=this.nodes[e];return i||(i=this.nodes[e]=new Rs(t)),i},zs.prototype.addEdge=function(t,e){var i=new Ns(t,e),r=i.getSymetric();this.edges.push(i),this.edges.push(r)},zs.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map((function(e){return t.nodes[e]})).forEach((function(e){return t._removeIfDangle(e)}))},zs.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var i=t.getOuterEdges().map((function(t){return t.to}));this.removeNode(t),i.forEach((function(t){return e._removeIfDangle(t)}))}},zs.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))}))},zs.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach((function(t){return e._computeNextCWEdges(e.nodes[t])})):t.getOuterEdges().forEach((function(e,i){t.getOuterEdge((0===i?t.getOuterEdges().length:i)-1).symetric.next=e}))},zs.prototype._computeNextCCWEdges=function(t,e){for(var i,r,n=t.getOuterEdges(),o=n.length-1;o>=0;--o){var a=n[o],s=a.symetric,u=void 0,l=void 0;a.label===e&&(u=a),s.label===e&&(l=s),u&&l&&(l&&(r=l),u&&(r&&(r.next=u,r=void 0),i||(i=u)))}r&&(r.next=i)},zs.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach((function(i){if(!(i.label>=0)){t.push(i);var r=i;do{r.label=e,r=r.next}while(!i.isEqual(r));e++}})),t},zs.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach((function(t){t.label=void 0})),this._findLabeledEdgeRings().forEach((function(e){t._findIntersectionNodes(e).forEach((function(i){t._computeNextCCWEdges(i,e.label)}))}));var e=[];return this.edges.forEach((function(i){i.ring||e.push(t._findEdgeRing(i))})),e},zs.prototype._findIntersectionNodes=function(t){var e=[],i=t,r=function(){var r=0;i.from.getOuterEdges().forEach((function(e){e.label===t.label&&++r})),r>1&&e.push(i.from),i=i.next};do{r()}while(!t.isEqual(i));return e},zs.prototype._findEdgeRing=function(t){var e=t,i=new Ds;do{i.push(e),e.ring=i,e=e.next}while(!t.isEqual(e));return i},zs.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach((function(t){return e.removeEdge(t)})),t.innerEdges.forEach((function(t){return e.removeEdge(t)})),delete this.nodes[t.id]},zs.prototype.removeEdge=function(t){this.edges=this.edges.filter((function(e){return!e.isEqual(t)})),t.deleteEdge()};var Fs=yt((function(t,e){function i(t){var e=[];for(var i in t)e.push(i);return e}(t.exports="function"==typeof Object.keys?Object.keys:i).shim=i})),Bs=(Fs.shim,yt((function(t,e){function i(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function r(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(e=t.exports=n?i:r).supported=i,e.unsupported=r}))),qs=(Bs.supported,Bs.unsupported,yt((function(t){function e(t){return null==t}function i(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}var r=Array.prototype.slice,n=t.exports=function(t,o,a){return a||(a={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?a.strict?t===o:t==o:function(t,o,a){var s,u;if(e(t)||e(o))return!1;if(t.prototype!==o.prototype)return!1;if(Bs(t))return!!Bs(o)&&(t=r.call(t),o=r.call(o),n(t,o,a));if(i(t)){if(!i(o))return!1;if(t.length!==o.length)return!1;for(s=0;s<t.length;s++)if(t[s]!==o[s])return!1;return!0}try{var l=Fs(t),c=Fs(o)}catch(t){return!1}if(l.length!=c.length)return!1;for(l.sort(),c.sort(),s=l.length-1;s>=0;s--)if(l[s]!=c[s])return!1;for(s=l.length-1;s>=0;s--)if(u=l[s],!n(t[u],o[u],a))return!1;return typeof t==typeof o}(t,o,a))}}))),Us=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:Mr};Us.prototype.compare=function(t,e){if(t.type!==e.type||!Lr(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var i=this,r=Tr(t),n=Tr(e);return r.every((function(t){return this.some((function(e){return i.compare(t,e)}))}),n)}}return!1},Us.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(t[i].toFixed(this.precision)!==e[i].toFixed(this.precision))return!1;return!0},Us.prototype.compareLine=function(t,e,i,r){if(!Lr(t,e))return!1;var n=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!r||this.compareCoord(n[0],o[0])||(o=this.fixStartIndex(o,n))){var a=this.compareCoord(n[i],o[i]);return this.direction||a?this.comparePath(n,o):!!this.compareCoord(n[i],o[o.length-(1+i)])&&this.comparePath(n.slice().reverse(),o)}},Us.prototype.fixStartIndex=function(t,e){for(var i,r=-1,n=0;n<t.length;n++)if(this.compareCoord(t[n],e[0])){r=n;break}return r>=0&&(i=[].concat(t.slice(r,t.length),t.slice(1,r+1))),i},Us.prototype.comparePath=function(t,e){var i=this;return t.every((function(t,e){return i.compareCoord(t,this[e])}),e)},Us.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var i=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length),n=this;return i.every((function(t){return this.some((function(e){return n.compareLine(t,e,1,!0)}))}),r)}return!1},Us.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},Us.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},Us.prototype.removePseudo=function(t){return t};var Vs=Us,Gs=yt((function(t){function e(t,e,i,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,i,r)}e.prototype.run=function(t,e,i,r){this._init(t,e,i,r);for(var n=0;n<this._datasetLength;n++)if(1!==this._visited[n]){this._visited[n]=1;var o=this._regionQuery(n);if(o.length<this.minPts)this.noise.push(n);else{var a=this.clusters.length;this.clusters.push([]),this._addToCluster(n,a),this._expandCluster(a,o)}}return this.clusters},e.prototype._init=function(t,e,i,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),i&&(this.minPts=i),r&&(this.distance=r)},e.prototype._expandCluster=function(t,e){for(var i=0;i<e.length;i++){var r=e[i];if(1!==this._visited[r]){this._visited[r]=1;var n=this._regionQuery(r);n.length>=this.minPts&&(e=this._mergeArrays(e,n))}1!==this._assigned[r]&&this._addToCluster(r,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],i=0;i<this._datasetLength;i++)this.distance(this.dataset[t],this.dataset[i])<this.epsilon&&e.push(i);return e},e.prototype._mergeArrays=function(t,e){for(var i=e.length,r=0;r<i;r++){var n=e[r];t.indexOf(n)<0&&t.push(n)}return t},e.prototype._euclideanDistance=function(t,e){for(var i=0,r=Math.min(t.length,e.length);r--;)i+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(i)},t.exports&&(t.exports=e)})),js=yt((function(t){function e(t,e,i){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,i)}e.prototype.init=function(t,e,i){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==i&&(this.distance=i)},e.prototype.run=function(t,e){this.init(t,e);for(var i=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var n=!0;n;){n=this.assign();for(var o=0;o<this.k;o++){for(var a=new Array(c),s=0,u=0;u<c;u++)a[u]=0;for(var l=0;l<i;l++){var c=this.dataset[l].length;if(o===this.assignments[l]){for(u=0;u<c;u++)a[u]+=this.dataset[l][u];s++}}if(s>0){for(u=0;u<c;u++)a[u]/=s;this.centroids[o]=a}else this.centroids[o]=this.randomCentroid(),n=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,i=this.dataset.length-1;do{e=Math.round(Math.random()*i),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,i=this.dataset.length,r=0;r<i;r++)(t=this.argmin(this.dataset[r],this.centroids,this.distance))!=this.assignments[r]&&(this.assignments[r]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),i=0;i<this.assignments.length;i++)void 0===e[t=this.assignments[i]]&&(e[t]=[]),e[t].push(i);return e},e.prototype.argmin=function(t,e,i){for(var r,n=Number.MAX_VALUE,o=0,a=e.length,s=0;s<a;s++)(r=i(t,e[s]))<n&&(n=r,o=s);return o},e.prototype.distance=function(t,e){for(var i=0,r=Math.min(t.length,e.length);r--;){var n=t[r]-e[r];i+=n*n}return Math.sqrt(i)},t.exports&&(t.exports=e)})),Ks=yt((function(t){function e(t,e,i){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,i)}e.prototype.insert=function(t,e){for(var i=this._queue.length,r=i;r--;){var n=this._priorities[r];"desc"===this._sorting?e>n&&(i=r):e<n&&(i=r)}this._insertAt(t,e,i)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,i=this._queue.length;e<i;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,i){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],e[r])}i&&(this._sorting=i)},e.prototype._insertAt=function(t,e,i){this._queue.length===i?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(i,0,t),this._priorities.splice(i,0,e))},t.exports&&(t.exports=e)})),Xs=yt((function(t){function e(t,e,i,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,i,r)}if(t.exports)var i=Ks;e.prototype.run=function(t,e,r,n){this._init(t,e,r,n);for(var o=0,a=this.dataset.length;o<a;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var s=this.clusters.length-1;this._orderedList.push(o);var u=new i(null,null,"asc"),l=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,l,u),this._expandCluster(s,u))}return this.clusters},e.prototype.getReachabilityPlot=function(){for(var t=[],e=0,i=this._orderedList.length;e<i;e++){var r=this._orderedList[e],n=this._reachability[r];t.push([r,n])}return t},e.prototype._init=function(t,e,i,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),i&&(this.minPts=i),r&&(this.distance=r)},e.prototype._updateQueue=function(t,e,i){var r=this;this._coreDistance=this._distanceToCore(t),e.forEach((function(e){if(void 0===r._processed[e]){var n=r.distance(r.dataset[t],r.dataset[e]),o=Math.max(r._coreDistance,n);void 0===r._reachability[e]?(r._reachability[e]=o,i.insert(e,o)):o<r._reachability[e]&&(r._reachability[e]=o,i.remove(e),i.insert(e,o))}}))},e.prototype._expandCluster=function(t,e){for(var i=e.getElements(),r=0,n=i.length;r<n;r++){var o=i[r];if(void 0===this._processed[o]){var a=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,a,e),this._expandCluster(t,e))}}},e.prototype._distanceToCore=function(t){for(var e=this.epsilon,i=0;i<e;i++)if(this._regionQuery(t,i).length>=this.minPts)return i},e.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var i=[],r=0,n=this.dataset.length;r<n;r++)this.distance(this.dataset[t],this.dataset[r])<e&&i.push(r);return i},e.prototype._euclideanDistance=function(t,e){for(var i=0,r=Math.min(t.length,e.length);r--;)i+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(i)},t.exports&&(t.exports=e)})),Zs=yt((function(t){t.exports&&(t.exports={DBSCAN:Gs,KMEANS:js,OPTICS:Xs,PriorityQueue:Ks})})),Ys=(Zs.DBSCAN,Zs.KMEANS,Zs.OPTICS,Zs.PriorityQueue,function(t,e,i){for(var r=t.length,n=0,o=0;o<r;o++){var a=(t[o]||0)-(e[o]||0);n+=a*a}return i?Math.sqrt(n):n}),Hs=Ys,Ws=function(t,e,i){var r=Math.abs(t-e);return i?r:r*r},Qs=Ys,Js=function(t,e){for(var i={},r=[],n=e<<2,o=t.length,a=t[0].length>0;r.length<e&&n-- >0;){var s=t[Math.floor(Math.random()*o)],u=a?s.join("_"):""+s;i[u]||(i[u]=!0,r.push(s))}if(r.length<e)throw new Error("Error initializating clusters");return r},$s=function(t,e){var i=t[0].length?Hs:Ws,r=[],n=t.length,o=t[0].length>0,a=t[Math.floor(Math.random()*n)];for(o&&a.join("_"),r.push(a);r.length<e;){for(var s=[],u=r.length,l=0,c=[],p=0;p<n;p++){for(var h=1/0,d=0;d<u;d++){var f=i(t[p],r[d]);f<=h&&(h=f)}s[p]=h}for(var _=0;_<n;_++)l+=s[_];for(var g=0;g<n;g++)c[g]={i:g,v:t[g],pr:s[g]/l,cs:0};c.sort((function(t,e){return t.pr-e.pr})),c[0].cs=c[0].pr;for(var m=1;m<n;m++)c[m].cs=c[m-1].cs+c[m].pr;for(var y=Math.random(),v=0;v<n-1&&c[v++].cs<y;);r.push(c[v-1].v)}return r},tu=1e4,eu=function(t,e,i,r){var n=[],o=[],a=[],s=[],u=!1,l=r||tu,c=t.length,p=t[0].length,h=p>0,d=[];if(i)n="kmrand"==i?Js(t,e):"kmpp"==i?$s(t,e):i;else for(var f={};n.length<e;){var _=Math.floor(Math.random()*c);f[_]||(f[_]=!0,n.push(t[_]))}do{Rr(e,0,d);for(var g=0;g<c;g++){for(var m=1/0,y=0,v=0;v<e;v++)(s=h?Qs(t[g],n[v]):Math.abs(t[g]-n[v]))<=m&&(m=s,y=v);a[g]=y,d[y]++}for(var b=[],x=(o=[],0);x<e;x++)b[x]=h?Rr(p,0,b[x]):0,o[x]=n[x];if(h){for(var w=0;w<e;w++)n[w]=[];for(var E=0;E<c;E++)for(var S=b[a[E]],I=t[E],A=0;A<p;A++)S[A]+=I[A];u=!0;for(var C=0;C<e;C++){for(var P=n[C],T=b[C],L=o[C],M=d[C],k=0;k<p;k++)P[k]=T[k]/M||0;if(u)for(var R=0;R<p;R++)if(L[R]!=P[R]){u=!1;break}}}else{for(var N=0;N<c;N++)b[a[N]]+=t[N];for(var D=0;D<e;D++)n[D]=b[D]/d[D]||0;u=!0;for(var O=0;O<e;O++)if(o[O]!=n[O]){u=!1;break}}u=u||--l<=0}while(!u);return{it:tu-l,k:e,idxs:a,centroids:n}},iu={search:function(t,e,i,r){t.cleanDirty();var n=(r=r||{}).heuristic||iu.heuristics.manhattan,o=r.closest||!1,a=new Fr((function(t){return t.f})),s=e;for(e.h=n(e,i),a.push(e);a.size()>0;){var u=a.pop();if(u===i)return Dr(u);u.closed=!0;for(var l=t.neighbors(u),c=0,p=l.length;c<p;++c){var h=l[c];if(!h.closed&&!h.isWall()){var d=u.g+h.getCost(u),f=h.visited;(!f||d<h.g)&&(h.visited=!0,h.parent=u,h.h=h.h||n(h,i),h.g=d,h.f=h.g+h.h,t.markDirty(h),o&&(h.h<s.h||h.h===s.h&&h.g<s.g)&&(s=h),f?a.rescoreElement(h):a.push(h))}}}return o?Dr(s):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var i=Math.sqrt(2),r=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return 1*(r+n)+(i-2)*Math.min(r,n)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};Or.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)iu.cleanNode(this.nodes[t])},Or.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)iu.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},Or.prototype.markDirty=function(t){this.dirtyNodes.push(t)},Or.prototype.neighbors=function(t){var e=[],i=t.x,r=t.y,n=this.grid;return n[i-1]&&n[i-1][r]&&e.push(n[i-1][r]),n[i+1]&&n[i+1][r]&&e.push(n[i+1][r]),n[i]&&n[i][r-1]&&e.push(n[i][r-1]),n[i]&&n[i][r+1]&&e.push(n[i][r+1]),this.diagonal&&(n[i-1]&&n[i-1][r-1]&&e.push(n[i-1][r-1]),n[i+1]&&n[i+1][r-1]&&e.push(n[i+1][r-1]),n[i-1]&&n[i-1][r+1]&&e.push(n[i-1][r+1]),n[i+1]&&n[i+1][r+1]&&e.push(n[i+1][r+1])),e},Or.prototype.toString=function(){for(var t,e,i,r,n=[],o=this.grid,a=0,s=o.length;a<s;a++){for(t=[],i=0,r=(e=o[a]).length;i<r;i++)t.push(e[i].weight);n.push(t.join(" "))}return n.join("\n")},zr.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},zr.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},zr.prototype.isWall=function(){return 0===this.weight},Fr.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),i=this.content.pop();e!==this.content.length-1&&(this.content[e]=i,this.scoreFunction(i)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var i=(t+1>>1)-1,r=this.content[i];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[i]=e,this.content[t]=r,t=i}},bubbleUp:function(t){for(var e=this.content.length,i=this.content[t],r=this.scoreFunction(i);;){var n,o=t+1<<1,a=o-1,s=null;if(a<e){var u=this.content[a];(n=this.scoreFunction(u))<r&&(s=a)}if(o<e){var l=this.content[o];this.scoreFunction(l)<(null===s?r:n)&&(s=o)}if(null===s)break;this.content[t]=this.content[s],this.content[s]=i,t=s}}};var ru=function(t){return function(){return t}};Ur.prototype={constructor:Ur,insert:function(t,e){var i,r,n;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;i=t}else this._?(t=Kr(this._),e.P=null,e.N=t,t.P=t.L=e,i=t):(e.P=e.N=null,this._=e,i=null);for(e.L=e.R=null,e.U=i,e.C=!0,t=e;i&&i.C;)i===(r=i.U).L?(n=r.R)&&n.C?(i.C=n.C=!1,r.C=!0,t=r):(t===i.R&&(Gr(this,i),i=(t=i).U),i.C=!1,r.C=!0,jr(this,r)):(n=r.L)&&n.C?(i.C=n.C=!1,r.C=!0,t=r):(t===i.L&&(jr(this,i),i=(t=i).U),i.C=!1,r.C=!0,Gr(this,r)),i=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,i,r,n=t.U,o=t.L,a=t.R;if(i=o?a?Kr(a):o:a,n?n.L===t?n.L=i:n.R=i:this._=i,o&&a?(r=i.C,i.C=t.C,i.L=o,o.U=i,i!==a?(n=i.U,i.U=t.U,t=i.R,n.L=t,i.R=a,a.U=i):(i.U=n,n=i,t=i.R)):(r=t.C,t=i),t&&(t.U=n),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===n.L){if((e=n.R).C&&(e.C=!1,n.C=!0,Gr(this,n),e=n.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,jr(this,e),e=n.R),e.C=n.C,n.C=e.R.C=!1,Gr(this,n),t=this._;break}}else if((e=n.L).C&&(e.C=!1,n.C=!0,jr(this,n),e=n.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Gr(this,e),e=n.L),e.C=n.C,n.C=e.L.C=!1,jr(this,n),t=this._;break}e.C=!0,t=n,n=n.U}while(!t.C);t&&(t.C=!1)}}};var nu,ou,au,su,uu,lu=[],cu=[],pu=1e-6,hu=1e-12;cn.prototype={constructor:cn,polygons:function(){var t=this.edges;return this.cells.map((function(e){var i=e.halfedges.map((function(i){return Jr(e,t[i])}));return i.data=e.site.data,i}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(i,r){if(o=(n=i.halfedges).length)for(var n,o,a,s=i.site,u=-1,l=e[n[o-1]],c=l.left===s?l.right:l.left;++u<o;)a=c,c=(l=e[n[u]]).left===s?l.right:l.left,a&&c&&r<a.index&&r<c.index&&un(s,a,c)<0&&t.push([s.data,a.data,c.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,i){for(var r,n,o=this,a=o._found||0,s=o.cells.length;!(n=o.cells[a]);)if(++a>=s)return null;var u=t-n.site[0],l=e-n.site[1],c=u*u+l*l;do{n=o.cells[r=a],a=null,n.halfedges.forEach((function(i){var r=o.edges[i],s=r.left;if(s!==n.site&&s||(s=r.right)){var u=t-s[0],l=e-s[1],p=u*u+l*l;p<c&&(c=p,a=s.index)}}))}while(null!==a);return o._found=r,null==i||c<=i*i?n.site:null}};var du=function(){function t(t){return new cn(t.map((function(r,n){var o=[Math.round(e(r,n,t)/pu)*pu,Math.round(i(r,n,t)/pu)*pu];return o.index=n,o.data=r,o})),r)}var e=Br,i=qr,r=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(i){return arguments.length?(e="function"==typeof i?i:ru(+i),t):e},t.y=function(e){return arguments.length?(i="function"==typeof e?e:ru(+e),t):i},t.extent=function(e){return arguments.length?(r=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},t.size=function(e){return arguments.length?(r=null==e?null:[[0,0],[+e[0],+e[1]]],t):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},t},fu=Object.freeze({randomPosition:mn,randomPoint:yn,randomPolygon:vn,randomLineString:bn}),_u=Object.freeze({getCluster:wn,clusterEach:En,clusterReduce:Sn,createBins:In,applyFilter:An,propertiesContainsFilter:Cn,filterProperties:Pn});"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),i=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(i+r,0):Math.min(r,i);var n=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:i;for(n=n<0?Math.max(i+arguments[2],0):Math.min(n,i);r<n;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var gu=function(){};gu.prototype.interfaces_=function(){return[]},gu.prototype.getClass=function(){return gu},gu.prototype.equalsWithTolerance=function(t,e,i){return Math.abs(t-e)<=i};var mu=function(){},yu=function(){},vu={MAX_VALUE:{configurable:!0}};yu.isNaN=function(t){return Number.isNaN(t)},yu.doubleToLongBits=function(t){return t},yu.longBitsToDouble=function(t){return t},yu.isInfinite=function(t){return!Number.isFinite(t)},vu.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(yu,vu);var bu=function(){},xu=function(){},wu=function(){},Eu=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},Su={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};Eu.prototype.setOrdinate=function(t,e){switch(t){case Eu.X:this.x=e;break;case Eu.Y:this.y=e;break;case Eu.Z:this.z=e;break;default:throw new mu("Invalid ordinate index: "+t)}},Eu.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],i=arguments[1];return!!gu.equalsWithTolerance(this.x,e.x,i)&&!!gu.equalsWithTolerance(this.y,e.y,i)}},Eu.prototype.getOrdinate=function(t){switch(t){case Eu.X:return this.x;case Eu.Y:return this.y;case Eu.Z:return this.z}throw new mu("Invalid ordinate index: "+t)},Eu.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||yu.isNaN(this.z))&&yu.isNaN(t.z)},Eu.prototype.equals=function(t){return t instanceof Eu&&this.equals2D(t)},Eu.prototype.equalInZ=function(t,e){return gu.equalsWithTolerance(this.z,t.z,e)},Eu.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},Eu.prototype.clone=function(){},Eu.prototype.copy=function(){return new Eu(this)},Eu.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},Eu.prototype.distance3D=function(t){var e=this.x-t.x,i=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+i*i+r*r)},Eu.prototype.distance=function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},Eu.prototype.hashCode=function(){var t=17;return 37*(t=37*t+Eu.hashCode(this.x))+Eu.hashCode(this.y)},Eu.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},Eu.prototype.interfaces_=function(){return[bu,xu,Tn]},Eu.prototype.getClass=function(){return Eu},Eu.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=yu.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},Su.DimensionalComparator.get=function(){return Iu},Su.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},Su.NULL_ORDINATE.get=function(){return yu.NaN},Su.X.get=function(){return 0},Su.Y.get=function(){return 1},Su.Z.get=function(){return 2},Object.defineProperties(Eu,Su);var Iu=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new mu("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};Iu.prototype.compare=function(t,e){var i=t,r=e,n=Iu.compare(i.x,r.x);if(0!==n)return n;var o=Iu.compare(i.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:Iu.compare(i.z,r.z)},Iu.prototype.interfaces_=function(){return[wu]},Iu.prototype.getClass=function(){return Iu},Iu.compare=function(t,e){return t<e?-1:t>e?1:yu.isNaN(t)?yu.isNaN(e)?0:-1:yu.isNaN(e)?1:0};var Au=function(){};Au.prototype.create=function(){},Au.prototype.interfaces_=function(){return[]},Au.prototype.getClass=function(){return Au};var Cu=function(){},Pu={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};Cu.prototype.interfaces_=function(){return[]},Cu.prototype.getClass=function(){return Cu},Cu.toLocationSymbol=function(t){switch(t){case Cu.EXTERIOR:return"e";case Cu.BOUNDARY:return"b";case Cu.INTERIOR:return"i";case Cu.NONE:return"-"}throw new mu("Unknown location value: "+t)},Pu.INTERIOR.get=function(){return 0},Pu.BOUNDARY.get=function(){return 1},Pu.EXTERIOR.get=function(){return 2},Pu.NONE.get=function(){return-1},Object.defineProperties(Cu,Pu);var Tu=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},Lu=function(){},Mu={LOG_10:{configurable:!0}};Lu.prototype.interfaces_=function(){return[]},Lu.prototype.getClass=function(){return Lu},Lu.log10=function(t){var e=Math.log(t);return yu.isInfinite(e)||yu.isNaN(e)?e:e/Lu.LOG_10},Lu.min=function(t,e,i,r){var n=t;return e<n&&(n=e),i<n&&(n=i),r<n&&(n=r),n},Lu.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],i=arguments[2];return t<e?e:t>i?i:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],n=arguments[1],o=arguments[2];return r<n?n:r>o?o:r}},Lu.wrap=function(t,e){return t<0?e- -t%e:t%e},Lu.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],i=arguments[0];return t>i&&(i=t),e>i&&(i=e),i}if(4===arguments.length){var r=arguments[1],n=arguments[2],o=arguments[3],a=arguments[0];return r>a&&(a=r),n>a&&(a=n),o>a&&(a=o),a}},Lu.average=function(t,e){return(t+e)/2},Mu.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(Lu,Mu);var ku=function(t){this.str=t};ku.prototype.append=function(t){this.str+=t},ku.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},ku.prototype.toString=function(t){return this.str};var Ru=function(t){this.value=t};Ru.prototype.intValue=function(){return this.value},Ru.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},Ru.isNaN=function(t){return Number.isNaN(t)};var Nu=function(){};Nu.isWhitespace=function(t){return t<=32&&t>=0||127===t},Nu.toUpperCase=function(t){return t.toUpperCase()};var Du=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length)if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var i=arguments[0];this.init(i)}else"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0]));else if(2===arguments.length){var r=arguments[0],n=arguments[1];this.init(r,n)}},Ou={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};Du.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},Du.prototype.extractSignificantDigits=function(t,e){var i=this.abs(),r=Du.magnitude(i._hi),n=Du.TEN.pow(r);(i=i.divide(n)).gt(Du.TEN)?(i=i.divide(Du.TEN),r+=1):i.lt(Du.ONE)&&(i=i.multiply(Du.TEN),r-=1);for(var o=r+1,a=new ku,s=Du.MAX_PRINT_DIGITS-1,u=0;u<=s;u++){t&&u===o&&a.append(".");var l=Math.trunc(i._hi);if(l<0)break;var c=!1,p=0;l>9?(c=!0,p="9"):p="0"+l,a.append(p),i=i.subtract(Du.valueOf(l)).multiply(Du.TEN),c&&i.selfAdd(Du.TEN);var h=!0,d=Du.magnitude(i._hi);if(d<0&&Math.abs(d)>=s-u&&(h=!1),!h)break}return e[0]=r,a.toString()},Du.prototype.sqr=function(){return this.multiply(this)},Du.prototype.doubleValue=function(){return this._hi+this._lo},Du.prototype.subtract=function(){if(arguments[0]instanceof Du){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},Du.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},Du.prototype.isZero=function(){return 0===this._hi&&0===this._lo},Du.prototype.selfSubtract=function(){if(arguments[0]instanceof Du){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},Du.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},Du.prototype.min=function(t){return this.le(t)?this:t},Du.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof Du){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1],n=null,o=null,a=null,s=null,u=null,l=null,c=null,p=null;return u=this._hi/i,p=(n=(l=Du.SPLIT*u)-(n=l-u))*(a=(p=Du.SPLIT*i)-(a=p-i))-(c=u*i)+n*(s=i-a)+(o=u-n)*a+o*s,p=u+(l=(this._hi-c-p+this._lo-u*r)/i),this._hi=p,this._lo=u-p+l,this}},Du.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},Du.prototype.divide=function(){if(arguments[0]instanceof Du){var t=arguments[0],e=null,i=null,r=null,n=null,o=null,a=null,s=null,u=null;return i=(o=this._hi/t._hi)-(e=(a=Du.SPLIT*o)-(e=a-o)),u=e*(r=(u=Du.SPLIT*t._hi)-(r=u-t._hi))-(s=o*t._hi)+e*(n=t._hi-r)+i*r+i*n,a=(this._hi-s-u+this._lo-o*t._lo)/t._hi,new Du(u=o+a,o-u+a)}if("number"==typeof arguments[0]){var l=arguments[0];return yu.isNaN(l)?Du.createNaN():Du.copy(this).selfDivide(l,0)}},Du.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},Du.prototype.pow=function(t){if(0===t)return Du.valueOf(1);var e=new Du(this),i=Du.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&i.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else i=e;return t<0?i.reciprocal():i},Du.prototype.ceil=function(){if(this.isNaN())return Du.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new Du(t,e)},Du.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},Du.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},Du.prototype.setValue=function(){if(arguments[0]instanceof Du){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},Du.prototype.max=function(t){return this.ge(t)?this:t},Du.prototype.sqrt=function(){if(this.isZero())return Du.valueOf(0);if(this.isNegative())return Du.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,i=Du.valueOf(e),r=this.subtract(i.sqr())._hi*(.5*t);return i.add(r)},Du.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof Du){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],i=null,r=null,n=null,o=null,a=null,s=null;return o=(n=this._hi+e)-(a=n-this._hi),r=(s=(o=e-a+(this._hi-o))+this._lo)+(n-(i=n+s)),this._hi=i+r,this._lo=r+(i-this._hi),this}}else if(2===arguments.length){var u=arguments[0],l=arguments[1],c=null,p=null,h=null,d=null,f=null,_=null,g=null;d=this._hi+u,p=this._lo+l,f=d-(_=d-this._hi),h=p-(g=p-this._lo);var m=(c=d+(_=(f=u-_+(this._hi-f))+p))+(_=(h=l-g+(this._lo-h))+(_+(d-c))),y=_+(c-m);return this._hi=m,this._lo=y,this}},Du.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof Du){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1],n=null,o=null,a=null,s=null,u=null,l=null;n=(u=Du.SPLIT*this._hi)-this._hi,l=Du.SPLIT*i,n=u-n,o=this._hi-n,a=l-i;var c=(u=this._hi*i)+(l=n*(a=l-a)-u+n*(s=i-a)+o*a+o*s+(this._hi*r+this._lo*i)),p=l+(n=u-c);return this._hi=c,this._lo=p,this}},Du.prototype.selfSqr=function(){return this.selfMultiply(this)},Du.prototype.floor=function(){if(this.isNaN())return Du.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new Du(t,e)},Du.prototype.negate=function(){return this.isNaN()?this:new Du(-this._hi,-this._lo)},Du.prototype.clone=function(){},Du.prototype.multiply=function(){if(arguments[0]instanceof Du){var t=arguments[0];return t.isNaN()?Du.createNaN():Du.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return yu.isNaN(e)?Du.createNaN():Du.copy(this).selfMultiply(e,0)}},Du.prototype.isNaN=function(){return yu.isNaN(this._hi)},Du.prototype.intValue=function(){return Math.trunc(this._hi)},Du.prototype.toString=function(){var t=Du.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},Du.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),i=this.extractSignificantDigits(!0,e),r=e[0]+1,n=i;if("."===i.charAt(0))n="0"+i;else if(r<0)n="0."+Du.stringOfChar("0",-r)+i;else if(-1===i.indexOf(".")){var o=r-i.length;n=i+Du.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+n:n},Du.prototype.reciprocal=function(){var t=null,e=null,i=null,r=null,n=null,o=null,a=null,s=null;e=(n=1/this._hi)-(t=(o=Du.SPLIT*n)-(t=o-n)),i=(s=Du.SPLIT*this._hi)-this._hi;var u=n+(o=(1-(a=n*this._hi)-(s=t*(i=s-i)-a+t*(r=this._hi-i)+e*i+e*r)-n*this._lo)/this._hi);return new Du(u,n-u+o)},Du.prototype.toSciNotation=function(){if(this.isZero())return Du.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),i=this.extractSignificantDigits(!1,e),r=Du.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===i.charAt(0))throw new Error("Found leading zero: "+i);var n="";i.length>1&&(n=i.substring(1));var o=i.charAt(0)+"."+n;return this.isNegative()?"-"+o+r:o+r},Du.prototype.abs=function(){return this.isNaN()?Du.NaN:this.isNegative()?this.negate():new Du(this)},Du.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},Du.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},Du.prototype.add=function(){if(arguments[0]instanceof Du){var t=arguments[0];return Du.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return Du.copy(this).selfAdd(e)}},Du.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof Du){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this._hi=i,this._lo=r}},Du.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},Du.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},Du.prototype.trunc=function(){return this.isNaN()?Du.NaN:this.isPositive()?this.floor():this.ceil()},Du.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},Du.prototype.interfaces_=function(){return[Tn,bu,xu]},Du.prototype.getClass=function(){return Du},Du.sqr=function(t){return Du.valueOf(t).selfMultiply(t)},Du.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return Du.parse(t)}if("number"==typeof arguments[0])return new Du(arguments[0])},Du.sqrt=function(t){return Du.valueOf(t).sqrt()},Du.parse=function(t){for(var e=0,i=t.length;Nu.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<i){var n=t.charAt(e);"-"!==n&&"+"!==n||(e++,"-"===n&&(r=!0))}for(var o=new Du,a=0,s=0,u=0;!(e>=i);){var l=t.charAt(e);if(e++,Nu.isDigit(l)){var c=l-"0";o.selfMultiply(Du.TEN),o.selfAdd(c),a++}else{if("."!==l){if("e"===l||"E"===l){var p=t.substring(e);try{u=Ru.parseInt(p)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+p+" in string "+t):e}break}throw new Error("Unexpected character '"+l+"' at position "+e+" in string "+t)}s=a}}var h=o,d=a-s-u;if(0===d)h=o;else if(d>0){var f=Du.TEN.pow(d);h=o.divide(f)}else if(d<0){var _=Du.TEN.pow(-d);h=o.multiply(_)}return r?h.negate():h},Du.createNaN=function(){return new Du(yu.NaN,yu.NaN)},Du.copy=function(t){return new Du(t)},Du.magnitude=function(t){var e=Math.abs(t),i=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(i));return 10*Math.pow(10,r)<=e&&(r+=1),r},Du.stringOfChar=function(t,e){for(var i=new ku,r=0;r<e;r++)i.append(t);return i.toString()},Ou.PI.get=function(){return new Du(3.141592653589793,12246467991473532e-32)},Ou.TWO_PI.get=function(){return new Du(6.283185307179586,24492935982947064e-32)},Ou.PI_2.get=function(){return new Du(1.5707963267948966,6123233995736766e-32)},Ou.E.get=function(){return new Du(2.718281828459045,14456468917292502e-32)},Ou.NaN.get=function(){return new Du(yu.NaN,yu.NaN)},Ou.EPS.get=function(){return 123259516440783e-46},Ou.SPLIT.get=function(){return 134217729},Ou.MAX_PRINT_DIGITS.get=function(){return 32},Ou.TEN.get=function(){return Du.valueOf(10)},Ou.ONE.get=function(){return Du.valueOf(1)},Ou.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},Ou.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(Du,Ou);var zu=function(){},Fu={DP_SAFE_EPSILON:{configurable:!0}};zu.prototype.interfaces_=function(){return[]},zu.prototype.getClass=function(){return zu},zu.orientationIndex=function(t,e,i){var r=zu.orientationIndexFilter(t,e,i);if(r<=1)return r;var n=Du.valueOf(e.x).selfAdd(-t.x),o=Du.valueOf(e.y).selfAdd(-t.y),a=Du.valueOf(i.x).selfAdd(-e.x),s=Du.valueOf(i.y).selfAdd(-e.y);return n.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},zu.signOfDet2x2=function(t,e,i,r){return t.multiply(r).selfSubtract(e.multiply(i)).signum()},zu.intersection=function(t,e,i,r){var n=Du.valueOf(r.y).selfSubtract(i.y).selfMultiply(Du.valueOf(e.x).selfSubtract(t.x)),o=Du.valueOf(r.x).selfSubtract(i.x).selfMultiply(Du.valueOf(e.y).selfSubtract(t.y)),a=n.subtract(o),s=Du.valueOf(r.x).selfSubtract(i.x).selfMultiply(Du.valueOf(t.y).selfSubtract(i.y)),u=Du.valueOf(r.y).selfSubtract(i.y).selfMultiply(Du.valueOf(t.x).selfSubtract(i.x)),l=s.subtract(u).selfDivide(a).doubleValue(),c=Du.valueOf(t.x).selfAdd(Du.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),p=Du.valueOf(e.x).selfSubtract(t.x).selfMultiply(Du.valueOf(t.y).selfSubtract(i.y)),h=Du.valueOf(e.y).selfSubtract(t.y).selfMultiply(Du.valueOf(t.x).selfSubtract(i.x)),d=p.subtract(h).selfDivide(a).doubleValue(),f=Du.valueOf(i.y).selfAdd(Du.valueOf(r.y).selfSubtract(i.y).selfMultiply(d)).doubleValue();return new Eu(c,f)},zu.orientationIndexFilter=function(t,e,i){var r=null,n=(t.x-i.x)*(e.y-i.y),o=(t.y-i.y)*(e.x-i.x),a=n-o;if(n>0){if(o<=0)return zu.signum(a);r=n+o}else{if(!(n<0))return zu.signum(a);if(o>=0)return zu.signum(a);r=-n-o}var s=zu.DP_SAFE_EPSILON*r;return a>=s||-a>=s?zu.signum(a):2},zu.signum=function(t){return t>0?1:t<0?-1:0},Fu.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(zu,Fu);var Bu=function(){},qu={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};qu.X.get=function(){return 0},qu.Y.get=function(){return 1},qu.Z.get=function(){return 2},qu.M.get=function(){return 3},Bu.prototype.setOrdinate=function(t,e,i){},Bu.prototype.size=function(){},Bu.prototype.getOrdinate=function(t,e){},Bu.prototype.getCoordinate=function(){},Bu.prototype.getCoordinateCopy=function(t){},Bu.prototype.getDimension=function(){},Bu.prototype.getX=function(t){},Bu.prototype.clone=function(){},Bu.prototype.expandEnvelope=function(t){},Bu.prototype.copy=function(){},Bu.prototype.getY=function(t){},Bu.prototype.toCoordinateArray=function(){},Bu.prototype.interfaces_=function(){return[xu]},Bu.prototype.getClass=function(){return Bu},Object.defineProperties(Bu,qu);var Uu=function(){},Vu=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Uu),Gu=function(){};Gu.arraycopy=function(t,e,i,r,n){for(var o=0,a=e;a<e+n;a++)i[r+o]=t[a],o++},Gu.getProperty=function(t){return{"line.separator":"\n"}[t]};var ju=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var i=arguments[0],r=arguments[1];this.x=i,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var n=arguments[0],o=arguments[1];this.x=n.y*o.w-o.y*n.w,this.y=o.x*n.w-n.x*o.w,this.w=n.x*o.y-o.x*n.y}else if(arguments[0]instanceof Eu&&arguments[1]instanceof Eu){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2];this.x=u,this.y=l,this.w=c}else if(4===arguments.length){var p=arguments[0],h=arguments[1],d=arguments[2],f=arguments[3],_=p.y-h.y,g=h.x-p.x,m=p.x*h.y-h.x*p.y,y=d.y-f.y,v=f.x-d.x,b=d.x*f.y-f.x*d.y;this.x=g*b-v*m,this.y=y*m-_*b,this.w=_*v-y*g}};ju.prototype.getY=function(){var t=this.y/this.w;if(yu.isNaN(t)||yu.isInfinite(t))throw new Vu;return t},ju.prototype.getX=function(){var t=this.x/this.w;if(yu.isNaN(t)||yu.isInfinite(t))throw new Vu;return t},ju.prototype.getCoordinate=function(){var t=new Eu;return t.x=this.getX(),t.y=this.getY(),t},ju.prototype.interfaces_=function(){return[]},ju.prototype.getClass=function(){return ju},ju.intersection=function(t,e,i,r){var n=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=i.y-r.y,u=r.x-i.x,l=i.x*r.y-r.x*i.y,c=n*u-s*o,p=(o*l-u*a)/c,h=(s*a-n*l)/c;if(yu.isNaN(p)||yu.isInfinite(p)||yu.isNaN(h)||yu.isInfinite(h))throw new Vu;return new Eu(p,h)};var Ku=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof Eu){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var i=arguments[0];this.init(i)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this.init(r.x,n.x,r.y,n.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3];this.init(o,a,s,u)}},Xu={serialVersionUID:{configurable:!0}};Ku.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Ku.prototype.equals=function(t){if(!(t instanceof Ku))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},Ku.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Ku;var e=this._minx>t._minx?this._minx:t._minx,i=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,n=this._maxy<t._maxy?this._maxy:t._maxy;return new Ku(e,r,i,n)},Ku.prototype.isNull=function(){return this._maxx<this._minx},Ku.prototype.getMaxX=function(){return this._maxx},Ku.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof Eu){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof Ku){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];return!this.isNull()&&i>=this._minx&&i<=this._maxx&&r>=this._miny&&r<=this._maxy}},Ku.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Ku){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof Eu){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];return!this.isNull()&&!(i>this._maxx||i<this._minx||r>this._maxy||r<this._miny)}},Ku.prototype.getMinY=function(){return this._miny},Ku.prototype.getMinX=function(){return this._minx},Ku.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof Eu){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Ku){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.isNull()?(this._minx=i,this._maxx=i,this._miny=r,this._maxy=r):(i<this._minx&&(this._minx=i),i>this._maxx&&(this._maxx=i),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},Ku.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},Ku.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Ku.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},Ku.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},Ku.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Ku.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Ku.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Ku.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},Ku.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=i,this._maxy+=i,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Ku.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Ku){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof Eu){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];return this.covers(i,r)}},Ku.prototype.centre=function(){return this.isNull()?null:new Eu((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Ku.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof Eu){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Ku){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i.x,r.x,i.y,r.y)}else if(4===arguments.length){var n=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];n<o?(this._minx=n,this._maxx=o):(this._minx=o,this._maxx=n),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},Ku.prototype.getMaxY=function(){return this._maxy},Ku.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var i=0;return this._maxy<t._miny?i=t._miny-this._maxy:this._miny>t._maxy&&(i=this._miny-t._maxy),0===e?i:0===i?e:Math.sqrt(e*e+i*i)},Ku.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+Eu.hashCode(this._minx))+Eu.hashCode(this._maxx))+Eu.hashCode(this._miny))+Eu.hashCode(this._maxy)},Ku.prototype.interfaces_=function(){return[bu,Tn]},Ku.prototype.getClass=function(){return Ku},Ku.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],i=arguments[2];return i.x>=(t.x<e.x?t.x:e.x)&&i.x<=(t.x>e.x?t.x:e.x)&&i.y>=(t.y<e.y?t.y:e.y)&&i.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],n=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),u=Math.max(o.x,a.x),l=Math.min(r.x,n.x),c=Math.max(r.x,n.x);return!(l>u||c<s||(s=Math.min(o.y,a.y),u=Math.max(o.y,a.y),l=Math.min(r.y,n.y),c=Math.max(r.y,n.y),l>u||c<s))}},Xu.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Ku,Xu);var Zu={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Yu=function(t){this.geometryFactory=t||new mc};Yu.prototype.read=function(t){var e,i,r;t=t.replace(/[\n\r]/g," ");var n=Zu.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((n=Zu.emptyTypeStr.exec(t))[2]=void 0),n&&(i=n[1].toLowerCase(),r=n[2],Wu[i]&&(e=Wu[i].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},Yu.prototype.write=function(t){return this.extractGeometry(t)},Yu.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Hu[e])return null;var i=e.toUpperCase();return t.isEmpty()?i+" EMPTY":i+"("+Hu[e].apply(this,[t])+")"};var Hu={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Hu.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],i=0,r=t._geometries.length;i<r;++i)e.push("("+Hu.point.apply(this,[t._geometries[i]])+")");return e.join(",")},linestring:function(t){for(var e=[],i=0,r=t._points._coordinates.length;i<r;++i)e.push(Hu.coordinate.apply(this,[t._points._coordinates[i]]));return e.join(",")},linearring:function(t){for(var e=[],i=0,r=t._points._coordinates.length;i<r;++i)e.push(Hu.coordinate.apply(this,[t._points._coordinates[i]]));return e.join(",")},multilinestring:function(t){for(var e=[],i=0,r=t._geometries.length;i<r;++i)e.push("("+Hu.linestring.apply(this,[t._geometries[i]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Hu.linestring.apply(this,[t._shell])+")");for(var i=0,r=t._holes.length;i<r;++i)e.push("("+Hu.linestring.apply(this,[t._holes[i]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],i=0,r=t._geometries.length;i<r;++i)e.push("("+Hu.polygon.apply(this,[t._geometries[i]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],i=0,r=t._geometries.length;i<r;++i)e.push(this.extractGeometry(t._geometries[i]));return e.join(",")}},Wu={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Zu.spaces);return this.geometryFactory.createPoint(new Eu(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,i=t.trim().split(","),r=[],n=0,o=i.length;n<o;++n)e=i[n].replace(Zu.trimParens,"$1"),r.push(Wu.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,i=t.trim().split(","),r=[],n=0,o=i.length;n<o;++n)e=i[n].trim().split(Zu.spaces),r.push(new Eu(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,i=t.trim().split(","),r=[],n=0,o=i.length;n<o;++n)e=i[n].trim().split(Zu.spaces),r.push(new Eu(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,i=t.trim().split(Zu.parenComma),r=[],n=0,o=i.length;n<o;++n)e=i[n].replace(Zu.trimParens,"$1"),r.push(Wu.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,i,r,n,o=t.trim().split(Zu.parenComma),a=[],s=0,u=o.length;s<u;++s)e=o[s].replace(Zu.trimParens,"$1"),i=Wu.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(i._points),0===s?n=r:a.push(r);return this.geometryFactory.createPolygon(n,a)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,i=t.trim().split(Zu.doubleParenComma),r=[],n=0,o=i.length;n<o;++n)e=i[n].replace(Zu.trimParens,"$1"),r.push(Wu.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),i=[],r=0,n=e.length;r<n;++r)i.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(i)}},Qu=function(t){this.parser=new Yu(t)};Qu.prototype.write=function(t){return this.parser.write(t)},Qu.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var Ju=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),$u=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ju),tl=function(){};tl.prototype.interfaces_=function(){return[]},tl.prototype.getClass=function(){return tl},tl.shouldNeverReachHere=function(){if(0===arguments.length)tl.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new $u("Should never reach here"+(null!==t?": "+t:""))}},tl.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],tl.isTrue(t,null);else if(2===arguments.length&&(e=arguments[1],!(t=arguments[0])))throw null===e?new $u:new $u(e)},tl.equals=function(){var t,e,i;if(2===arguments.length)t=arguments[0],e=arguments[1],tl.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],i=arguments[2],!(e=arguments[1]).equals(t)))throw new $u("Expected "+t+" but encountered "+e+(null!==i?": "+i:""))};var el=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Eu,this._intPt[1]=new Eu,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},il={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};el.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},el.prototype.getTopologySummary=function(){var t=new ku;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},el.prototype.computeIntersection=function(t,e,i,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=i,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,i,r)},el.prototype.getIntersectionNum=function(){return this._result},el.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},el.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},el.prototype.setPrecisionModel=function(t){this._precisionModel=t},el.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},el.prototype.getIntersection=function(t){return this._intPt[t]},el.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},el.prototype.hasIntersection=function(){return this._result!==el.NO_INTERSECTION},el.prototype.getEdgeDistance=function(t,e){return el.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},el.prototype.isCollinear=function(){return this._result===el.COLLINEAR_INTERSECTION},el.prototype.toString=function(){return Qu.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Qu.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},el.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},el.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},el.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},el.prototype.interfaces_=function(){return[]},el.prototype.getClass=function(){return el},el.computeEdgeDistance=function(t,e,i){var r=Math.abs(i.x-e.x),n=Math.abs(i.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(i))o=r>n?r:n;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=r>n?a:s)||t.equals(e)||(o=Math.max(a,s))}return tl.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},el.nonRobustComputeEdgeDistance=function(t,e,i){var r=t.x-e.x,n=t.y-e.y,o=Math.sqrt(r*r+n*n);return tl.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},il.DONT_INTERSECT.get=function(){return 0},il.DO_INTERSECT.get=function(){return 1},il.COLLINEAR.get=function(){return 2},il.NO_INTERSECTION.get=function(){return 0},il.POINT_INTERSECTION.get=function(){return 1},il.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(el,il);var rl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new Ku(this._inputLines[0][0],this._inputLines[0][1]),i=new Ku(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&i.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],i=arguments[1],r=arguments[2];if(this._isProper=!1,Ku.intersects(i,r,e)&&0===al.orientationIndex(i,r,e)&&0===al.orientationIndex(r,i,e))return this._isProper=!0,(e.equals(i)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,i,r,n){n.x=this.smallestInAbsValue(t.x,e.x,i.x,r.x),n.y=this.smallestInAbsValue(t.y,e.y,i.y,r.y),t.x-=n.x,t.y-=n.y,e.x-=n.x,e.y-=n.y,i.x-=n.x,i.y-=n.y,r.x-=n.x,r.y-=n.y},e.prototype.safeHCoordinateIntersection=function(t,i,r,n){var o=null;try{o=ju.intersection(t,i,r,n)}catch(a){if(!(a instanceof Vu))throw a;o=e.nearestEndpoint(t,i,r,n)}return o},e.prototype.intersection=function(t,i,r,n){var o=this.intersectionWithNormalization(t,i,r,n);return this.isInSegmentEnvelopes(o)||(o=new Eu(e.nearestEndpoint(t,i,r,n))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,i,r){var n=t,o=Math.abs(n);return Math.abs(e)<o&&(n=e,o=Math.abs(e)),Math.abs(i)<o&&(n=i,o=Math.abs(i)),Math.abs(r)<o&&(n=r),n},e.prototype.checkDD=function(t,e,i,r,n){var o=zu.intersection(t,e,i,r),a=this.isInSegmentEnvelopes(o);Gu.out.println("DD in env = "+a+"  --------------------- "+o),n.distance(o)>1e-4&&Gu.out.println("Distance = "+n.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,i,r){var n=new Eu(t),o=new Eu(e),a=new Eu(i),s=new Eu(r),u=new Eu;this.normalizeToEnvCentre(n,o,a,s,u);var l=this.safeHCoordinateIntersection(n,o,a,s);return l.x+=u.x,l.y+=u.y,l},e.prototype.computeCollinearIntersection=function(e,i,r,n){var o=Ku.intersects(e,i,r),a=Ku.intersects(e,i,n),s=Ku.intersects(r,n,e),u=Ku.intersects(r,n,i);return o&&a?(this._intPt[0]=r,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):s&&u?(this._intPt[0]=e,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||a||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=r,this._intPt[1]=i,!r.equals(i)||a||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&s?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&u?(this._intPt[0]=n,this._intPt[1]=i,!n.equals(i)||o||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,i,r,n){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=i.x<r.x?i.x:r.x,c=i.y<r.y?i.y:r.y,p=i.x>r.x?i.x:r.x,h=i.y>r.y?i.y:r.y,d=((o>l?o:l)+(s<p?s:p))/2,f=((a>c?a:c)+(u<h?u:h))/2;n.x=d,n.y=f,t.x-=n.x,t.y-=n.y,e.x-=n.x,e.y-=n.y,i.x-=n.x,i.y-=n.y,r.x-=n.x,r.y-=n.y},e.prototype.computeIntersect=function(e,i,r,n){if(this._isProper=!1,!Ku.intersects(e,i,r,n))return t.NO_INTERSECTION;var o=al.orientationIndex(e,i,r),a=al.orientationIndex(e,i,n);if(o>0&&a>0||o<0&&a<0)return t.NO_INTERSECTION;var s=al.orientationIndex(r,n,e),u=al.orientationIndex(r,n,i);return s>0&&u>0||s<0&&u<0?t.NO_INTERSECTION:0===o&&0===a&&0===s&&0===u?this.computeCollinearIntersection(e,i,r,n):(0===o||0===a||0===s||0===u?(this._isProper=!1,e.equals2D(r)||e.equals2D(n)?this._intPt[0]=e:i.equals2D(r)||i.equals2D(n)?this._intPt[0]=i:0===o?this._intPt[0]=new Eu(r):0===a?this._intPt[0]=new Eu(n):0===s?this._intPt[0]=new Eu(e):0===u&&(this._intPt[0]=new Eu(i))):(this._isProper=!0,this._intPt[0]=this.intersection(e,i,r,n)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,i,r){var n=t,o=al.distancePointLine(t,i,r),a=al.distancePointLine(e,i,r);return a<o&&(o=a,n=e),(a=al.distancePointLine(i,t,e))<o&&(o=a,n=i),(a=al.distancePointLine(r,t,e))<o&&(o=a,n=r),n},e}(el),nl=function(){};nl.prototype.interfaces_=function(){return[]},nl.prototype.getClass=function(){return nl},nl.orientationIndex=function(t,e,i){var r=e.x-t.x,n=e.y-t.y,o=i.x-e.x,a=i.y-e.y;return nl.signOfDet2x2(r,n,o,a)},nl.signOfDet2x2=function(t,e,i,r){var n=null,o=null,a=null;if(n=1,0===t||0===r)return 0===e||0===i?0:e>0?i>0?-n:n:i>0?n:-n;if(0===e||0===i)return r>0?t>0?n:-n:t>0?-n:n;if(e>0?r>0?e<=r||(n=-n,o=t,t=i,i=o,o=e,e=r,r=o):e<=-r?(n=-n,i=-i,r=-r):(o=t,t=-i,i=o,o=e,e=-r,r=o):r>0?-e<=r?(n=-n,t=-t,e=-e):(o=-t,t=i,i=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,i=-i,r=-r):(n=-n,o=-t,t=-i,i=o,o=-e,e=-r,r=o),t>0){if(!(i>0))return n;if(!(t<=i))return n}else{if(i>0)return-n;if(!(t>=i))return-n;n=-n,t=-t,i=-i}for(;;){if((r-=(a=Math.floor(i/t))*e)<0)return-n;if(r>e)return n;if(t>(i-=a*t)+i){if(e<r+r)return n}else{if(e>r+r)return-n;i=t-i,r=e-r,n=-n}if(0===r)return 0===i?0:-n;if(0===i)return n;if((e-=(a=Math.floor(t/i))*r)<0)return n;if(e>r)return-n;if(i>(t-=a*i)+t){if(r<e+e)return-n}else{if(r>e+e)return n;t=i-t,e=r-e,n=-n}if(0===e)return 0===t?0:n;if(0===t)return-n}};var ol=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};ol.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var i=t.x,r=e.x;return i>r&&(i=e.x,r=t.x),this._p.x>=i&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var n=t.x-this._p.x,o=t.y-this._p.y,a=e.x-this._p.x,s=e.y-this._p.y,u=nl.signOfDet2x2(n,o,a,s);if(0===u)return this._isPointOnSegment=!0,null;s<o&&(u=-u),u>0&&this._crossingCount++}},ol.prototype.isPointInPolygon=function(){return this.getLocation()!==Cu.EXTERIOR},ol.prototype.getLocation=function(){return this._isPointOnSegment?Cu.BOUNDARY:this._crossingCount%2==1?Cu.INTERIOR:Cu.EXTERIOR},ol.prototype.isOnSegment=function(){return this._isPointOnSegment},ol.prototype.interfaces_=function(){return[]},ol.prototype.getClass=function(){return ol},ol.locatePointInRing=function(){if(arguments[0]instanceof Eu&&Tu(arguments[1],Bu)){for(var t=arguments[1],e=new ol(arguments[0]),i=new Eu,r=new Eu,n=1;n<t.size();n++)if(t.getCoordinate(n,i),t.getCoordinate(n-1,r),e.countSegment(i,r),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof Eu&&arguments[1]instanceof Array){for(var o=arguments[1],a=new ol(arguments[0]),s=1;s<o.length;s++){var u=o[s],l=o[s-1];if(a.countSegment(u,l),a.isOnSegment())return a.getLocation()}return a.getLocation()}};var al=function(){},sl={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};al.prototype.interfaces_=function(){return[]},al.prototype.getClass=function(){return al},al.orientationIndex=function(t,e,i){return zu.orientationIndex(t,e,i)},al.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,i=t[0].x,r=1;r<t.length-1;r++){var n=t[r].x-i,o=t[r+1].y;e+=n*(t[r-1].y-o)}return e/2}if(Tu(arguments[0],Bu)){var a=arguments[0],s=a.size();if(s<3)return 0;var u=new Eu,l=new Eu,c=new Eu;a.getCoordinate(0,l),a.getCoordinate(1,c);var p=l.x;c.x-=p;for(var h=0,d=1;d<s-1;d++)u.y=l.y,l.x=c.x,l.y=c.y,a.getCoordinate(d+1,c),c.x-=p,h+=l.x*(u.y-c.y);return h/2}},al.distanceLineLine=function(t,e,i,r){if(t.equals(e))return al.distancePointLine(t,i,r);if(i.equals(r))return al.distancePointLine(r,t,e);var n=!1;if(Ku.intersects(t,e,i,r)){var o=(e.x-t.x)*(r.y-i.y)-(e.y-t.y)*(r.x-i.x);if(0===o)n=!0;else{var a=(t.y-i.y)*(r.x-i.x)-(t.x-i.x)*(r.y-i.y),s=((t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y))/o,u=a/o;(u<0||u>1||s<0||s>1)&&(n=!0)}}else n=!0;return n?Lu.min(al.distancePointLine(t,i,r),al.distancePointLine(e,i,r),al.distancePointLine(i,t,e),al.distancePointLine(r,t,e)):0},al.isPointInRing=function(t,e){return al.locatePointInRing(t,e)!==Cu.EXTERIOR},al.computeLength=function(t){var e=t.size();if(e<=1)return 0;var i=0,r=new Eu;t.getCoordinate(0,r);for(var n=r.x,o=r.y,a=1;a<e;a++){t.getCoordinate(a,r);var s=r.x,u=r.y,l=s-n,c=u-o;i+=Math.sqrt(l*l+c*c),n=s,o=u}return i},al.isCCW=function(t){var e=t.length-1;if(e<3)throw new mu("Ring has fewer than 4 points, so orientation cannot be determined");for(var i=t[0],r=0,n=1;n<=e;n++){var o=t[n];o.y>i.y&&(i=o,r=n)}var a=r;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(i)&&a!==r);var s=r;do{s=(s+1)%e}while(t[s].equals2D(i)&&s!==r);var u=t[a],l=t[s];if(u.equals2D(i)||l.equals2D(i)||u.equals2D(l))return!1;var c=al.computeOrientation(u,i,l);return 0===c?u.x>l.x:c>0},al.locatePointInRing=function(t,e){return ol.locatePointInRing(t,e)},al.distancePointLinePerpendicular=function(t,e,i){var r=(i.x-e.x)*(i.x-e.x)+(i.y-e.y)*(i.y-e.y),n=((e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y))/r;return Math.abs(n)*Math.sqrt(r)},al.computeOrientation=function(t,e,i){return al.orientationIndex(t,e,i)},al.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new mu("Line array must contain at least one vertex");for(var i=t.distance(e[0]),r=0;r<e.length-1;r++){var n=al.distancePointLine(t,e[r],e[r+1]);n<i&&(i=n)}return i}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var u=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),l=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/u;if(l<=0)return o.distance(a);if(l>=1)return o.distance(s);var c=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/u;return Math.abs(c)*Math.sqrt(u)}},al.isOnLine=function(t,e){for(var i=new rl,r=1;r<e.length;r++){var n=e[r-1],o=e[r];if(i.computeIntersection(t,n,o),i.hasIntersection())return!0}return!1},sl.CLOCKWISE.get=function(){return-1},sl.RIGHT.get=function(){return al.CLOCKWISE},sl.COUNTERCLOCKWISE.get=function(){return 1},sl.LEFT.get=function(){return al.COUNTERCLOCKWISE},sl.COLLINEAR.get=function(){return 0},sl.STRAIGHT.get=function(){return al.COLLINEAR},Object.defineProperties(al,sl);var ul=function(){};ul.prototype.filter=function(t){},ul.prototype.interfaces_=function(){return[]},ul.prototype.getClass=function(){return ul};var ll=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},cl={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};ll.prototype.isGeometryCollection=function(){return this.getSortIndex()===ll.SORTINDEX_GEOMETRYCOLLECTION},ll.prototype.getFactory=function(){return this._factory},ll.prototype.getGeometryN=function(t){return this},ll.prototype.getArea=function(){return 0},ll.prototype.isRectangle=function(){return!1},ll.prototype.equals=function(){if(arguments[0]instanceof ll){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof ll))return!1;var i=e;return this.equalsExact(i)}},ll.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},ll.prototype.geometryChanged=function(){this.apply(ll.geometryChangedFilter)},ll.prototype.geometryChangedAction=function(){this._envelope=null},ll.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},ll.prototype.getLength=function(){return 0},ll.prototype.getNumGeometries=function(){return 1},ll.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var i=arguments[0],r=arguments[1];return this.getSortIndex()!==i.getSortIndex()?this.getSortIndex()-i.getSortIndex():this.isEmpty()&&i.isEmpty()?0:this.isEmpty()?-1:i.isEmpty()?1:this.compareToSameClass(i,r)}},ll.prototype.getUserData=function(){return this._userData},ll.prototype.getSRID=function(){return this._SRID},ll.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},ll.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===ll.SORTINDEX_GEOMETRYCOLLECTION)throw new mu("This method does not support GeometryCollection arguments")},ll.prototype.equal=function(t,e,i){return 0===i?t.equals(e):t.distance(e)<=i},ll.prototype.norm=function(){var t=this.copy();return t.normalize(),t},ll.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},ll.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Ku(this._envelope)},ll.prototype.setSRID=function(t){this._SRID=t},ll.prototype.setUserData=function(t){this._userData=t},ll.prototype.compare=function(t,e){for(var i=t.iterator(),r=e.iterator();i.hasNext()&&r.hasNext();){var n=i.next(),o=r.next(),a=n.compareTo(o);if(0!==a)return a}return i.hasNext()?1:r.hasNext()?-1:0},ll.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},ll.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ll.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ll.SORTINDEX_MULTIPOINT||this.getSortIndex()===ll.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ll.SORTINDEX_MULTIPOLYGON},ll.prototype.interfaces_=function(){return[xu,bu,Tn]},ll.prototype.getClass=function(){return ll},ll.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},ll.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},cl.serialVersionUID.get=function(){return 0x799ea46522854c00},cl.SORTINDEX_POINT.get=function(){return 0},cl.SORTINDEX_MULTIPOINT.get=function(){return 1},cl.SORTINDEX_LINESTRING.get=function(){return 2},cl.SORTINDEX_LINEARRING.get=function(){return 3},cl.SORTINDEX_MULTILINESTRING.get=function(){return 4},cl.SORTINDEX_POLYGON.get=function(){return 5},cl.SORTINDEX_MULTIPOLYGON.get=function(){return 6},cl.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},cl.geometryChangedFilter.get=function(){return pl},Object.defineProperties(ll,cl);var pl=function(){};pl.interfaces_=function(){return[ul]},pl.filter=function(t){t.geometryChangedAction()};var hl=function(){};hl.prototype.filter=function(t){},hl.prototype.interfaces_=function(){return[]},hl.prototype.getClass=function(){return hl};var dl=function(){},fl={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};dl.prototype.isInBoundary=function(t){},dl.prototype.interfaces_=function(){return[]},dl.prototype.getClass=function(){return dl},fl.Mod2BoundaryNodeRule.get=function(){return _l},fl.EndPointBoundaryNodeRule.get=function(){return gl},fl.MultiValentEndPointBoundaryNodeRule.get=function(){return ml},fl.MonoValentEndPointBoundaryNodeRule.get=function(){return yl},fl.MOD2_BOUNDARY_RULE.get=function(){return new _l},fl.ENDPOINT_BOUNDARY_RULE.get=function(){return new gl},fl.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new ml},fl.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new yl},fl.OGC_SFS_BOUNDARY_RULE.get=function(){return dl.MOD2_BOUNDARY_RULE},Object.defineProperties(dl,fl);var _l=function(){};_l.prototype.isInBoundary=function(t){return t%2==1},_l.prototype.interfaces_=function(){return[dl]},_l.prototype.getClass=function(){return _l};var gl=function(){};gl.prototype.isInBoundary=function(t){return t>0},gl.prototype.interfaces_=function(){return[dl]},gl.prototype.getClass=function(){return gl};var ml=function(){};ml.prototype.isInBoundary=function(t){return t>1},ml.prototype.interfaces_=function(){return[dl]},ml.prototype.getClass=function(){return ml};var yl=function(){};yl.prototype.isInBoundary=function(t){return 1===t},yl.prototype.interfaces_=function(){return[dl]},yl.prototype.getClass=function(){return yl};var vl=function(){};vl.prototype.add=function(){},vl.prototype.addAll=function(){},vl.prototype.isEmpty=function(){},vl.prototype.iterator=function(){},vl.prototype.size=function(){},vl.prototype.toArray=function(){},vl.prototype.remove=function(){};var bl=function(t){function e(e){t.call(this),this.message=e||""}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={name:{configurable:!0}};return i.name.get=function(){return"IndexOutOfBoundsException"},Object.defineProperties(e,i),e}(Error),xl=function(){};xl.prototype.hasNext=function(){},xl.prototype.next=function(){},xl.prototype.remove=function(){};var wl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(vl);(Ln.prototype=new Error).name="NoSuchElementException";var El=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof vl&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,vl]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var i=this.array_[t];return this.array_[t]=e,i},e.prototype.iterator=function(){return new Sl(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new bl;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,i=this.array_.length;e<i;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,i=0,r=this.array_.length;i<r;i++)if(this.array_[i]===t){this.array_.splice(i,1),e=!0;break}return e},e}(wl),Sl=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new Ln;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(xl),Il=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.ensureCapacity(i.length),this.add(i,r)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={coordArrayType:{configurable:!0}};return i.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[1],i=!1,r=arguments[0].iterator();r.hasNext();)this.add(r.next(),e),i=!0;return i}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),i=0;i<this.size();i++)e.add(i,this.get(i).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var i=arguments[0],r=arguments[1];return this.add(i,r,!0),!0}if(arguments[0]instanceof Eu&&"boolean"==typeof arguments[1]){var n=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(n))return null;t.prototype.add.call(this,n)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return this.add(o,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],u=arguments[1];if(arguments[2])for(var l=0;l<s.length;l++)this.add(s[l],u);else for(var c=s.length-1;c>=0;c--)this.add(s[c],u);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof Eu){var p=arguments[0],h=arguments[1];if(!arguments[2]){var d=this.size();if(d>0){if(p>0&&this.get(p-1).equals2D(h))return null;if(p<d&&this.get(p).equals2D(h))return null}}t.prototype.add.call(this,p,h)}}else if(4===arguments.length){var f=arguments[0],_=arguments[1],g=arguments[2],m=arguments[3],y=1;g>m&&(y=-1);for(var v=g;v!==m;v+=y)this.add(f[v],_);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new Eu(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,i),e}(El),Al=function(){},Cl={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Cl.ForwardComparator.get=function(){return Pl},Cl.BidirectionalComparator.get=function(){return Tl},Cl.coordArrayType.get=function(){return new Array(0).fill(null)},Al.prototype.interfaces_=function(){return[]},Al.prototype.getClass=function(){return Al},Al.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},Al.ptNotInList=function(t,e){for(var i=0;i<t.length;i++){var r=t[i];if(Al.indexOf(r,e)<0)return r}return null},Al.scroll=function(t,e){var i=Al.indexOf(e,t);if(i<0)return null;var r=new Array(t.length).fill(null);Gu.arraycopy(t,i,r,0,t.length-i),Gu.arraycopy(t,0,r,t.length-i,i),Gu.arraycopy(r,0,t,0,t.length)},Al.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(!t[i].equals(e[i]))return!1;return!0}if(3===arguments.length){var r=arguments[0],n=arguments[1],o=arguments[2];if(r===n)return!0;if(null===r||null===n)return!1;if(r.length!==n.length)return!1;for(var a=0;a<r.length;a++)if(0!==o.compare(r[a],n[a]))return!1;return!0}},Al.intersection=function(t,e){for(var i=new Il,r=0;r<t.length;r++)e.intersects(t[r])&&i.add(t[r],!0);return i.toCoordinateArray()},Al.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Al.removeRepeatedPoints=function(t){return Al.hasRepeatedPoints(t)?new Il(t,!1).toCoordinateArray():t},Al.reverse=function(t){for(var e=t.length-1,i=Math.trunc(e/2),r=0;r<=i;r++){var n=t[r];t[r]=t[e-r],t[e-r]=n}},Al.removeNull=function(t){for(var e=0,i=0;i<t.length;i++)null!==t[i]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var n=0,o=0;o<t.length;o++)null!==t[o]&&(r[n++]=t[o]);return r},Al.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),i=0;i<t.length;i++)e[i]=new Eu(t[i]);return e}if(5===arguments.length)for(var r=arguments[0],n=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],u=0;u<s;u++)o[a+u]=new Eu(r[n+u])},Al.isEqualReversed=function(t,e){for(var i=0;i<t.length;i++){var r=t[i],n=e[t.length-i-1];if(0!==r.compareTo(n))return!1}return!0},Al.envelope=function(t){for(var e=new Ku,i=0;i<t.length;i++)e.expandToInclude(t[i]);return e},Al.toCoordinateArray=function(t){return t.toArray(Al.coordArrayType)},Al.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Al.indexOf=function(t,e){for(var i=0;i<e.length;i++)if(t.equals(e[i]))return i;return-1},Al.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var i=t.length-1-e,r=t[e].compareTo(t[i]);if(0!==r)return r}return 1},Al.compare=function(t,e){for(var i=0;i<t.length&&i<e.length;){var r=t[i].compareTo(e[i]);if(0!==r)return r;i++}return i<e.length?-1:i<t.length?1:0},Al.minCoordinate=function(t){for(var e=null,i=0;i<t.length;i++)(null===e||e.compareTo(t[i])>0)&&(e=t[i]);return e},Al.extract=function(t,e,i){e=Lu.clamp(e,0,t.length);var r=(i=Lu.clamp(i,-1,t.length))-e+1;i<0&&(r=0),e>=t.length&&(r=0),i<e&&(r=0);var n=new Array(r).fill(null);if(0===r)return n;for(var o=0,a=e;a<=i;a++)n[o++]=t[a];return n},Object.defineProperties(Al,Cl);var Pl=function(){};Pl.prototype.compare=function(t,e){return Al.compare(t,e)},Pl.prototype.interfaces_=function(){return[wu]},Pl.prototype.getClass=function(){return Pl};var Tl=function(){};Tl.prototype.compare=function(t,e){var i=t,r=e;if(i.length<r.length)return-1;if(i.length>r.length)return 1;if(0===i.length)return 0;var n=Al.compare(i,r);return Al.isEqualReversed(i,r)?0:n},Tl.prototype.OLDcompare=function(t,e){var i=t,r=e;if(i.length<r.length)return-1;if(i.length>r.length)return 1;if(0===i.length)return 0;for(var n=Al.increasingDirection(i),o=Al.increasingDirection(r),a=n>0?0:i.length-1,s=o>0?0:i.length-1,u=0;u<i.length;u++){var l=i[a].compareTo(r[s]);if(0!==l)return l;a+=n,s+=o}return 0},Tl.prototype.interfaces_=function(){return[wu]},Tl.prototype.getClass=function(){return Tl};var Ll=function(){};Ll.prototype.get=function(){},Ll.prototype.put=function(){},Ll.prototype.size=function(){},Ll.prototype.values=function(){},Ll.prototype.entrySet=function(){};var Ml=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ll);(Mn.prototype=new Error).name="OperationNotSupported",(kn.prototype=new vl).contains=function(){};var kl=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof vl&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,i=this.array_.length;e<i;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,i=this.array_.length;e<i;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Rl(this)},e}(kn),Rl=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new Ln;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new Mn},e}(xl),Nl=0;(Fn.prototype=new Ml).get=function(t){for(var e=this.root_;null!==e;){var i=t.compareTo(e.key);if(i<0)e=e.left;else{if(!(i>0))return e.value;e=e.right}}return null},Fn.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Nl,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var i,r,n=this.root_;do{if(i=n,(r=t.compareTo(n.key))<0)n=n.left;else{if(!(r>0)){var o=n.value;return n.value=e,o}n=n.right}}while(null!==n);var a={key:t,left:null,right:null,value:e,parent:i,color:Nl,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?i.left=a:i.right=a,this.fixAfterInsertion(a),this.size_++,null},Fn.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(Nn(t)===On(Nn(Nn(t)))){var e=zn(Nn(Nn(t)));1===Rn(e)?(Dn(Nn(t),Nl),Dn(e,Nl),Dn(Nn(Nn(t)),1),t=Nn(Nn(t))):(t===zn(Nn(t))&&(t=Nn(t),this.rotateLeft(t)),Dn(Nn(t),Nl),Dn(Nn(Nn(t)),1),this.rotateRight(Nn(Nn(t))))}else{var i=On(Nn(Nn(t)));1===Rn(i)?(Dn(Nn(t),Nl),Dn(i,Nl),Dn(Nn(Nn(t)),1),t=Nn(Nn(t))):(t===On(Nn(t))&&(t=Nn(t),this.rotateRight(t)),Dn(Nn(t),Nl),Dn(Nn(Nn(t)),1),this.rotateLeft(Nn(Nn(t))))}this.root_.color=Nl},Fn.prototype.values=function(){var t=new El,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=Fn.successor(e));)t.add(e.value);return t},Fn.prototype.entrySet=function(){var t=new kl,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=Fn.successor(e));)t.add(e);return t},Fn.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},Fn.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},Fn.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},Fn.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var i=t.parent,r=t;null!==i&&r===i.right;)r=i,i=i.parent;return i},Fn.prototype.size=function(){return this.size_};var Dl=function(){};Dl.prototype.interfaces_=function(){return[]},Dl.prototype.getClass=function(){return Dl},Bn.prototype=new kn,(qn.prototype=new Bn).contains=function(t){for(var e=0,i=this.array_.length;e<i;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},qn.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,i=this.array_.length;e<i;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},qn.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},qn.prototype.remove=function(t){throw new Mn},qn.prototype.size=function(){return this.array_.length},qn.prototype.isEmpty=function(){return 0===this.array_.length},qn.prototype.toArray=function(){for(var t=[],e=0,i=this.array_.length;e<i;e++)t.push(this.array_[e]);return t},qn.prototype.iterator=function(){return new Ol(this)};var Ol=function(t){this.treeSet_=t,this.position_=0};Ol.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new Ln;return this.treeSet_.array_[this.position_++]},Ol.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Ol.prototype.remove=function(){throw new Mn};var zl=function(){};zl.sort=function(){var t,e,i,r,n=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},n.sort(r);else if(2===arguments.length)i=arguments[1],r=function(t,e){return i.compare(t,e)},n.sort(r);else if(3===arguments.length){(e=n.slice(arguments[1],arguments[2])).sort();var o=n.slice(0,arguments[1]).concat(e,n.slice(arguments[2],n.length));for(n.splice(0,n.length),t=0;t<o.length;t++)n.push(o[t])}else if(4===arguments.length)for(e=n.slice(arguments[1],arguments[2]),i=arguments[3],r=function(t,e){return i.compare(t,e)},e.sort(r),o=n.slice(0,arguments[1]).concat(e,n.slice(arguments[2],n.length)),n.splice(0,n.length),t=0;t<o.length;t++)n.push(o[t])},zl.asList=function(t){for(var e=new El,i=0,r=t.length;i<r;i++)e.add(t[i]);return e};var Fl=function(){},Bl={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Bl.P.get=function(){return 0},Bl.L.get=function(){return 1},Bl.A.get=function(){return 2},Bl.FALSE.get=function(){return-1},Bl.TRUE.get=function(){return-2},Bl.DONTCARE.get=function(){return-3},Bl.SYM_FALSE.get=function(){return"F"},Bl.SYM_TRUE.get=function(){return"T"},Bl.SYM_DONTCARE.get=function(){return"*"},Bl.SYM_P.get=function(){return"0"},Bl.SYM_L.get=function(){return"1"},Bl.SYM_A.get=function(){return"2"},Fl.prototype.interfaces_=function(){return[]},Fl.prototype.getClass=function(){return Fl},Fl.toDimensionSymbol=function(t){switch(t){case Fl.FALSE:return Fl.SYM_FALSE;case Fl.TRUE:return Fl.SYM_TRUE;case Fl.DONTCARE:return Fl.SYM_DONTCARE;case Fl.P:return Fl.SYM_P;case Fl.L:return Fl.SYM_L;case Fl.A:return Fl.SYM_A}throw new mu("Unknown dimension value: "+t)},Fl.toDimensionValue=function(t){switch(Nu.toUpperCase(t)){case Fl.SYM_FALSE:return Fl.FALSE;case Fl.SYM_TRUE:return Fl.TRUE;case Fl.SYM_DONTCARE:return Fl.DONTCARE;case Fl.SYM_P:return Fl.P;case Fl.SYM_L:return Fl.L;case Fl.SYM_A:return Fl.A}throw new mu("Unknown dimension symbol: "+t)},Object.defineProperties(Fl,Bl);var ql=function(){};ql.prototype.filter=function(t){},ql.prototype.interfaces_=function(){return[]},ql.prototype.getClass=function(){return ql};var Ul=function(){};Ul.prototype.filter=function(t,e){},Ul.prototype.isDone=function(){},Ul.prototype.isGeometryChanged=function(){},Ul.prototype.interfaces_=function(){return[]},Ul.prototype.getClass=function(){return Ul};var Vl=function(t){function e(e,i){if(t.call(this,i),this._geometries=e||[],t.hasNullElements(this._geometries))throw new mu("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new Ku,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,i=0;i<this._geometries.length;i++)for(var r=this._geometries[i].getCoordinates(),n=0;n<r.length;n++)t[++e]=r[n];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],i=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._geometries.length!==r._geometries.length)return!1;for(var n=0;n<this._geometries.length;n++)if(!this._geometries[n].equalsExact(r._geometries[n],i))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();zl.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=Fl.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=Fl.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),i=0;i<this._geometries.length;i++)e[i]=this._geometries[i].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new qn(zl.asList(this._geometries)),i=new qn(zl.asList(t._geometries));return this.compare(e,i)}if(2===arguments.length){for(var r=arguments[1],n=arguments[0],o=this.getNumGeometries(),a=n.getNumGeometries(),s=0;s<o&&s<a;){var u=this.getGeometryN(s),l=n.getGeometryN(s),c=u.compareToSameClass(l,r);if(0!==c)return c;s++}return s<o?1:s<a?-1:0}},e.prototype.apply=function(){if(Tu(arguments[0],hl))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(Tu(arguments[0],Ul)){var i=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(i),!i.isDone());r++);i.isGeometryChanged()&&this.geometryChanged()}else if(Tu(arguments[0],ql)){var n=arguments[0];n.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(n)}else if(Tu(arguments[0],ul)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),tl.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var i=0;i<this._geometries.length;i++)e._geometries[i]=this._geometries[i].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),i=0;i<t.length;i++)t[i]=this._geometries[i].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,i),e}(ll),Gl=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ll.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],i=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,i)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Fl.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),i=0;i<this._geometries.length;i++)e[t-1-i]=this._geometries[i].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new jl(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),i=0;i<t.length;i++)t[i]=this._geometries[i].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Dl]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,i),e}(Vl),jl=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=dl.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this._geom=i,this._geomFact=i.getFactory(),this._bnRule=r}};jl.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},jl.prototype.getBoundary=function(){return this._geom instanceof Hl?this.boundaryLineString(this._geom):this._geom instanceof Gl?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},jl.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},jl.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},jl.prototype.computeBoundaryCoordinates=function(t){var e=new El;this._endpointMap=new Fn;for(var i=0;i<t.getNumGeometries();i++){var r=t.getGeometryN(i);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var n=this._endpointMap.entrySet().iterator();n.hasNext();){var o=n.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&e.add(o.getKey())}return Al.toCoordinateArray(e)},jl.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Kl,this._endpointMap.put(t,e)),e.count++},jl.prototype.interfaces_=function(){return[]},jl.prototype.getClass=function(){return jl},jl.getBoundary=function(){return 1===arguments.length?new jl(arguments[0]).getBoundary():2===arguments.length?new jl(arguments[0],arguments[1]).getBoundary():void 0};var Kl=function(){this.count=null};Kl.prototype.interfaces_=function(){return[]},Kl.prototype.getClass=function(){return Kl};var Xl=function(){},Zl={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Xl.prototype.interfaces_=function(){return[]},Xl.prototype.getClass=function(){return Xl},Xl.chars=function(t,e){for(var i=new Array(e).fill(null),r=0;r<e;r++)i[r]=t;return String(i)},Xl.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},i=new function(){}(e);return t.printStackTrace(i),e.toString()}if(2===arguments.length){for(var r=arguments[0],n=arguments[1],o="",a=new function(){}(new function(){}(Xl.getStackTrace(r))),s=0;s<n;s++)try{o+=a.readLine()+Xl.NEWLINE}catch(t){if(!(t instanceof Un))throw t;tl.shouldNeverReachHere()}return o}},Xl.split=function(t,e){for(var i=e.length,r=new El,n=""+t,o=n.indexOf(e);o>=0;){var a=n.substring(0,o);r.add(a),o=(n=n.substring(o+i)).indexOf(e)}n.length>0&&r.add(n);for(var s=new Array(r.size()).fill(null),u=0;u<s.length;u++)s[u]=r.get(u);return s},Xl.toString=function(){if(1===arguments.length){var t=arguments[0];return Xl.SIMPLE_ORDINATE_FORMAT.format(t)}},Xl.spaces=function(t){return Xl.chars(" ",t)},Zl.NEWLINE.get=function(){return Gu.getProperty("line.separator")},Zl.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Xl,Zl);var Yl=function(){};Yl.prototype.interfaces_=function(){return[]},Yl.prototype.getClass=function(){return Yl},Yl.copyCoord=function(t,e,i,r){for(var n=Math.min(t.getDimension(),i.getDimension()),o=0;o<n;o++)i.setOrdinate(r,o,t.getOrdinate(e,o))},Yl.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,Bu.X)===t.getOrdinate(e-1,Bu.X)&&t.getOrdinate(0,Bu.Y)===t.getOrdinate(e-1,Bu.Y)},Yl.isEqual=function(t,e){var i=t.size();if(i!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),n=0;n<i;n++)for(var o=0;o<r;o++){var a=t.getOrdinate(n,o),s=e.getOrdinate(n,o);if(!(t.getOrdinate(n,o)===e.getOrdinate(n,o)||yu.isNaN(a)&&yu.isNaN(s)))return!1}return!0},Yl.extend=function(t,e,i){var r=t.create(i,e.getDimension()),n=e.size();if(Yl.copy(e,0,r,0,n),n>0)for(var o=n;o<i;o++)Yl.copy(e,n-1,r,o,1);return r},Yl.reverse=function(t){for(var e=t.size()-1,i=Math.trunc(e/2),r=0;r<=i;r++)Yl.swap(t,r,e-r)},Yl.swap=function(t,e,i){if(e===i)return null;for(var r=0;r<t.getDimension();r++){var n=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(i,r)),t.setOrdinate(i,r,n)}},Yl.copy=function(t,e,i,r,n){for(var o=0;o<n;o++)Yl.copyCoord(t,e+o,i,r+o)},Yl.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var i=t.getDimension(),r=new ku;r.append("(");for(var n=0;n<e;n++){n>0&&r.append(" ");for(var o=0;o<i;o++)o>0&&r.append(","),r.append(Xl.toString(t.getOrdinate(n,o)))}return r.append(")"),r.toString()}},Yl.ensureValidRing=function(t,e){var i=e.size();return 0===i?e:i<=3?Yl.createClosedRing(t,e,4):e.getOrdinate(0,Bu.X)===e.getOrdinate(i-1,Bu.X)&&e.getOrdinate(0,Bu.Y)===e.getOrdinate(i-1,Bu.Y)?e:Yl.createClosedRing(t,e,i+1)},Yl.createClosedRing=function(t,e,i){var r=t.create(i,e.getDimension()),n=e.size();Yl.copy(e,0,r,0,n);for(var o=n;o<i;o++)Yl.copy(e,0,r,o,1);return r};var Hl=function(t){function e(e,i){t.call(this,i),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Ku:this._points.expandEnvelope(new Ku)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],i=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._points.size()!==r._points.size())return!1;for(var n=0;n<this._points.size();n++)if(!this.equal(this._points.getCoordinate(n),r._points.getCoordinate(n),i))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Yl.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Fl.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return al.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Yl.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,i=0;e<this._points.size()&&i<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(i));if(0!==r)return r;e++,i++}return e<this._points.size()?1:i<t._points.size()?-1:0}if(2===arguments.length){var n=arguments[0];return arguments[1].compare(this._points,n._points)}},e.prototype.apply=function(){if(Tu(arguments[0],hl))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(Tu(arguments[0],Ul)){var i=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(i.filter(this._points,r),!i.isDone());r++);i.isGeometryChanged()&&this.geometryChanged()}else(Tu(arguments[0],ql)||Tu(arguments[0],ul))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new jl(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new mu("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Dl]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,i),e}(ll),Wl=function(){};Wl.prototype.interfaces_=function(){return[]},Wl.prototype.getClass=function(){return Wl};var Ql=function(t){function e(e,i){t.call(this,i),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Ku;var t=new Ku;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],i=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),i))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Fl.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(Tu(arguments[0],hl)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(Tu(arguments[0],Ul)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(Tu(arguments[0],ql)||Tu(arguments[0],ul))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),tl.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Wl]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,i),e}(ll),Jl=function(){};Jl.prototype.interfaces_=function(){return[]},Jl.prototype.getClass=function(){return Jl};var $l=function(t){function e(e,i,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===i&&(i=[]),t.hasNullElements(i))throw new mu("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(i))throw new mu("shell is empty but holes are not");this._shell=e,this._holes=i}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,i=this._shell.getCoordinates(),r=0;r<i.length;r++)t[++e]=i[r];for(var n=0;n<this._holes.length;n++)for(var o=this._holes[n].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(al.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(al.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),i=0;i<5;i++){var r=t.getX(i);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var n=t.getY(i);if(n!==e.getMinY()&&n!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var u=t.getX(s),l=t.getY(s);if(u!==o==(l!==a))return!1;o=u,a=l}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],i=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e,n=this._shell,o=r._shell;if(!n.equalsExact(o,i))return!1;if(this._holes.length!==r._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(r._holes[a],i))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);zl.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);Gu.arraycopy(e.getCoordinates(),0,r,0,r.length);var n=Al.minCoordinate(e.getCoordinates());Al.scroll(r,n),Gu.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],al.isCCW(e.getCoordinates())===i&&Al.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,i=t._shell;return e.compareToSameClass(i)}if(2===arguments.length){var r=arguments[1],n=arguments[0],o=this._shell,a=n._shell,s=o.compareToSameClass(a,r);if(0!==s)return s;for(var u=this.getNumInteriorRing(),l=n.getNumInteriorRing(),c=0;c<u&&c<l;){var p=this.getInteriorRingN(c),h=n.getInteriorRingN(c),d=p.compareToSameClass(h,r);if(0!==d)return d;c++}return c<u?1:c<l?-1:0}},e.prototype.apply=function(t){if(Tu(t,hl)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(Tu(t,Ul)){if(this._shell.apply(t),!t.isDone())for(var i=0;i<this._holes.length&&(this._holes[i].apply(t),!t.isDone());i++);t.isGeometryChanged()&&this.geometryChanged()}else if(Tu(t,ql))t.filter(this);else if(Tu(t,ul)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var i=0;i<this._holes.length;i++)e._holes[i]=this._holes[i].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),i=new Array(this._holes.length).fill(null),r=0;r<i.length;r++)i[r]=this._holes[r].copy();return new e(t,i,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Jl]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,i),e}(ll),tc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ll.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],i=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,i)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Fl.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),i=0;i<t.length;i++)t[i]=this._geometries[i].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Wl]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,i),e}(Vl),ec=function(t){function e(e,i){e instanceof Eu&&i instanceof mc&&(e=i.getCoordinateSequenceFactory().create(e)),t.call(this,e,i),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ll.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Fl.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Yl.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new mu("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new mu("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},i.MINIMUM_VALID_SIZE.get=function(){return 4},i.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,i),e}(Hl),ic=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ll.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],i=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,i)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),i=0;i<this._geometries.length;i++)e[i]=this._geometries[i].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new El,e=0;e<this._geometries.length;e++)for(var i=this._geometries[e].getBoundary(),r=0;r<i.getNumGeometries();r++)t.add(i.getGeometryN(r));var n=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(n))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),i=0;i<t.length;i++)t[i]=this._geometries[i].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Jl]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,i),e}(Vl),rc=function(t){this._factory=t||null,this._isUserDataCopied=!1},nc={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};rc.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},rc.prototype.edit=function(t,e){if(null===t)return null;var i=this.editInternal(t,e);return this._isUserDataCopied&&i.setUserData(t.getUserData()),i},rc.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof Vl?this.editGeometryCollection(t,e):t instanceof $l?this.editPolygon(t,e):t instanceof Ql||t instanceof Hl?e.edit(t,this._factory):(tl.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},rc.prototype.editGeometryCollection=function(t,e){for(var i=e.edit(t,this._factory),r=new El,n=0;n<i.getNumGeometries();n++){var o=this.edit(i.getGeometryN(n),e);null===o||o.isEmpty()||r.add(o)}return i.getClass()===tc?this._factory.createMultiPoint(r.toArray([])):i.getClass()===Gl?this._factory.createMultiLineString(r.toArray([])):i.getClass()===ic?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},rc.prototype.editPolygon=function(t,e){var i=e.edit(t,this._factory);if(null===i&&(i=this._factory.createPolygon(null)),i.isEmpty())return i;var r=this.edit(i.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var n=new El,o=0;o<i.getNumInteriorRing();o++){var a=this.edit(i.getInteriorRingN(o),e);null===a||a.isEmpty()||n.add(a)}return this._factory.createPolygon(r,n.toArray([]))},rc.prototype.interfaces_=function(){return[]},rc.prototype.getClass=function(){return rc},rc.GeometryEditorOperation=function(){},nc.NoOpGeometryOperation.get=function(){return oc},nc.CoordinateOperation.get=function(){return ac},nc.CoordinateSequenceOperation.get=function(){return sc},Object.defineProperties(rc,nc);var oc=function(){};oc.prototype.edit=function(t,e){return t},oc.prototype.interfaces_=function(){return[rc.GeometryEditorOperation]},oc.prototype.getClass=function(){return oc};var ac=function(){};ac.prototype.edit=function(t,e){var i=this.editCoordinates(t.getCoordinates(),t);return null===i?t:t instanceof ec?e.createLinearRing(i):t instanceof Hl?e.createLineString(i):t instanceof Ql?i.length>0?e.createPoint(i[0]):e.createPoint():t},ac.prototype.interfaces_=function(){return[rc.GeometryEditorOperation]},ac.prototype.getClass=function(){return ac};var sc=function(){};sc.prototype.edit=function(t,e){return t instanceof ec?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Hl?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Ql?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},sc.prototype.interfaces_=function(){return[rc.GeometryEditorOperation]},sc.prototype.getClass=function(){return sc};var uc=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new Eu}else if(Tu(arguments[0],Bu)){var i=arguments[0];if(null===i)return this._coordinates=new Array(0).fill(null),null;this._dimension=i.getDimension(),this._coordinates=new Array(i.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=i.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var n=arguments[0],o=arguments[1];this._coordinates=n,this._dimension=o,null===n&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=s;for(var u=0;u<a;u++)this._coordinates[u]=new Eu}},lc={serialVersionUID:{configurable:!0}};uc.prototype.setOrdinate=function(t,e,i){switch(e){case Bu.X:this._coordinates[t].x=i;break;case Bu.Y:this._coordinates[t].y=i;break;case Bu.Z:this._coordinates[t].z=i;break;default:throw new mu("invalid ordinateIndex")}},uc.prototype.size=function(){return this._coordinates.length},uc.prototype.getOrdinate=function(t,e){switch(e){case Bu.X:return this._coordinates[t].x;case Bu.Y:return this._coordinates[t].y;case Bu.Z:return this._coordinates[t].z}return yu.NaN},uc.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],i=arguments[1];i.x=this._coordinates[e].x,i.y=this._coordinates[e].y,i.z=this._coordinates[e].z}},uc.prototype.getCoordinateCopy=function(t){return new Eu(this._coordinates[t])},uc.prototype.getDimension=function(){return this._dimension},uc.prototype.getX=function(t){return this._coordinates[t].x},uc.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new uc(t,this._dimension)},uc.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},uc.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new uc(t,this._dimension)},uc.prototype.toString=function(){if(this._coordinates.length>0){var t=new ku(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},uc.prototype.getY=function(t){return this._coordinates[t].y},uc.prototype.toCoordinateArray=function(){return this._coordinates},uc.prototype.interfaces_=function(){return[Bu,Tn]},uc.prototype.getClass=function(){return uc},lc.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(uc,lc);var cc=function(){},pc={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};cc.prototype.readResolve=function(){return cc.instance()},cc.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new uc(arguments[0]);if(Tu(arguments[0],Bu))return new uc(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new uc(t):new uc(t,e)}},cc.prototype.interfaces_=function(){return[Au,Tn]},cc.prototype.getClass=function(){return cc},cc.instance=function(){return cc.instanceObject},pc.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},pc.instanceObject.get=function(){return new cc},Object.defineProperties(cc,pc);var hc=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new El,e=this.map_.values(),i=e.next();!i.done;)t.add(i.value),i=e.next();return t},e.prototype.entrySet=function(){var t=new kl;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(Ll),dc=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof _c){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var i=arguments[0];this._modelType=t.FIXED,this.setScale(i)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},fc={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};dc.prototype.equals=function(t){if(!(t instanceof dc))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},dc.prototype.compareTo=function(t){var e=t,i=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new Ru(i).compareTo(new Ru(r))},dc.prototype.getScale=function(){return this._scale},dc.prototype.isFloating=function(){return this._modelType===dc.FLOATING||this._modelType===dc.FLOATING_SINGLE},dc.prototype.getType=function(){return this._modelType},dc.prototype.toString=function(){var t="UNKNOWN";return this._modelType===dc.FLOATING?t="Floating":this._modelType===dc.FLOATING_SINGLE?t="Floating-Single":this._modelType===dc.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},dc.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return yu.isNaN(t)||this._modelType===dc.FLOATING_SINGLE?t:this._modelType===dc.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof Eu){var e=arguments[0];if(this._modelType===dc.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},dc.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===dc.FLOATING?t=16:this._modelType===dc.FLOATING_SINGLE?t=6:this._modelType===dc.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},dc.prototype.setScale=function(t){this._scale=Math.abs(t)},dc.prototype.interfaces_=function(){return[Tn,bu]},dc.prototype.getClass=function(){return dc},dc.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},fc.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},fc.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(dc,fc);var _c=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},gc={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};_c.prototype.readResolve=function(){return _c.nameToTypeMap.get(this._name)},_c.prototype.toString=function(){return this._name},_c.prototype.interfaces_=function(){return[Tn]},_c.prototype.getClass=function(){return _c},gc.serialVersionUID.get=function(){return-552860263173159e4},gc.nameToTypeMap.get=function(){return new hc},Object.defineProperties(_c,gc),dc.Type=_c,dc.FIXED=new _c("FIXED"),dc.FLOATING=new _c("FLOATING"),dc.FLOATING_SINGLE=new _c("FLOATING SINGLE");var mc=function t(){this._precisionModel=new dc,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?Tu(arguments[0],Au)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof dc&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},yc={serialVersionUID:{configurable:!0}};mc.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new Eu(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new Eu(t.getMinX(),t.getMinY()),new Eu(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new Eu(t.getMinX(),t.getMinY()),new Eu(t.getMinX(),t.getMaxY()),new Eu(t.getMaxX(),t.getMaxY()),new Eu(t.getMaxX(),t.getMinY()),new Eu(t.getMinX(),t.getMinY())]),null)},mc.prototype.createLineString=function(t){return t?t instanceof Array?new Hl(this.getCoordinateSequenceFactory().create(t),this):Tu(t,Bu)?new Hl(t,this):void 0:new Hl(this.getCoordinateSequenceFactory().create([]),this)},mc.prototype.createMultiLineString=function(){return 0===arguments.length?new Gl(null,this):1===arguments.length?new Gl(arguments[0],this):void 0},mc.prototype.buildGeometry=function(t){for(var e=null,i=!1,r=!1,n=t.iterator();n.hasNext();){var o=n.next(),a=o.getClass();null===e&&(e=a),a!==e&&(i=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(i||r)return this.createGeometryCollection(mc.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof $l)return this.createMultiPolygon(mc.toPolygonArray(t));if(s instanceof Hl)return this.createMultiLineString(mc.toLineStringArray(t));if(s instanceof Ql)return this.createMultiPoint(mc.toPointArray(t));tl.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},mc.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},mc.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Eu){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(Tu(arguments[0],Bu))return new Ql(arguments[0],this)}},mc.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},mc.prototype.createPolygon=function(){if(0===arguments.length)return new $l(null,null,this);if(1===arguments.length){if(Tu(arguments[0],Bu)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ec){var i=arguments[0];return this.createPolygon(i,null)}}else if(2===arguments.length)return new $l(arguments[0],arguments[1],this)},mc.prototype.getSRID=function(){return this._SRID},mc.prototype.createGeometryCollection=function(){return 0===arguments.length?new Vl(null,this):1===arguments.length?new Vl(arguments[0],this):void 0},mc.prototype.createGeometry=function(t){return new rc(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},mc.prototype.getPrecisionModel=function(){return this._precisionModel},mc.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Tu(arguments[0],Bu))return new ec(arguments[0],this)}},mc.prototype.createMultiPolygon=function(){return 0===arguments.length?new ic(null,this):1===arguments.length?new ic(arguments[0],this):void 0},mc.prototype.createMultiPoint=function(){if(0===arguments.length)return new tc(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new tc(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Tu(arguments[0],Bu)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(e.size()).fill(null),r=0;r<e.size();r++){var n=this.getCoordinateSequenceFactory().create(1,e.getDimension());Yl.copy(e,r,n,0,1),i[r]=this.createPoint(n)}return this.createMultiPoint(i)}}},mc.prototype.interfaces_=function(){return[Tn]},mc.prototype.getClass=function(){return mc},mc.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},mc.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},mc.getDefaultCoordinateSequenceFactory=function(){return cc.instance()},mc.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},mc.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},mc.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},mc.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},mc.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},mc.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},mc.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},yc.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(mc,yc);var vc=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],bc=function(t){this.geometryFactory=t||new mc};bc.prototype.read=function(t){var e,i=(e="string"==typeof t?JSON.parse(t):t).type;if(!xc[i])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==vc.indexOf(i)?xc[i].apply(this,[e.coordinates]):"GeometryCollection"===i?xc[i].apply(this,[e.geometries]):xc[i].apply(this,[e])},bc.prototype.write=function(t){var e=t.getGeometryType();if(!wc[e])throw new Error("Geometry is not supported");return wc[e].apply(this,[t])};var xc={Feature:function(t){var e={};for(var i in t)e[i]=t[i];if(t.geometry){var r=t.geometry.type;if(!xc[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=xc.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var i=0;i<t.features.length;++i)e.features.push(this.read(t.features[i]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],i=0;i<t.length;++i){var r=t[i];e.push(new Eu(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new Eu(t[0],t[1]),new Eu(t[2],t[1]),new Eu(t[2],t[3]),new Eu(t[0],t[3]),new Eu(t[0],t[1])])},Point:function(t){var e=new Eu(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],i=0;i<t.length;++i)e.push(xc.Point.apply(this,[t[i]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=xc.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],i=0;i<t.length;++i)e.push(xc.LineString.apply(this,[t[i]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=xc.coordinates.apply(this,[t[0]]),i=this.geometryFactory.createLinearRing(e),r=[],n=1;n<t.length;++n){var o=t[n],a=xc.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);r.push(s)}return this.geometryFactory.createPolygon(i,r)},MultiPolygon:function(t){for(var e=[],i=0;i<t.length;++i){var r=t[i];e.push(xc.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],i=0;i<t.length;++i){var r=t[i];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},wc={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:wc.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],i=0;i<t._geometries.length;++i){var r=t._geometries[i],n=wc.Point.apply(this,[r]);e.push(n.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],i=t.getCoordinates(),r=0;r<i.length;++r){var n=i[r];e.push(wc.coordinate.apply(this,[n]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],i=0;i<t._geometries.length;++i){var r=t._geometries[i],n=wc.LineString.apply(this,[r]);e.push(n.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],i=wc.LineString.apply(this,[t._shell]);e.push(i.coordinates);for(var r=0;r<t._holes.length;++r){var n=t._holes[r],o=wc.LineString.apply(this,[n]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],i=0;i<t._geometries.length;++i){var r=t._geometries[i],n=wc.Polygon.apply(this,[r]);e.push(n.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],i=0;i<t._geometries.length;++i){var r=t._geometries[i],n=r.getGeometryType();e.push(wc[n].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},Ec=function(t){this.geometryFactory=t||new mc,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new bc(this.geometryFactory)};Ec.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===dc.FIXED&&this.reducePrecision(e),e},Ec.prototype.reducePrecision=function(t){var e,i;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,i=t.points.length;e<i;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,i=t.geometries.length;e<i;e++)this.reducePrecision(t.geometries[e])};var Sc=function(){this.parser=new bc(this.geometryFactory)};Sc.prototype.write=function(t){return this.parser.write(t)};var Ic=function(){},Ac={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Ic.prototype.interfaces_=function(){return[]},Ic.prototype.getClass=function(){return Ic},Ic.opposite=function(t){return t===Ic.LEFT?Ic.RIGHT:t===Ic.RIGHT?Ic.LEFT:t},Ac.ON.get=function(){return 0},Ac.LEFT.get=function(){return 1},Ac.RIGHT.get=function(){return 2},Object.defineProperties(Ic,Ac),(Vn.prototype=new Error).name="EmptyStackException",(Gn.prototype=new wl).add=function(t){return this.array_.push(t),!0},Gn.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},Gn.prototype.push=function(t){return this.array_.push(t),t},Gn.prototype.pop=function(t){if(0===this.array_.length)throw new Vn;return this.array_.pop()},Gn.prototype.peek=function(){if(0===this.array_.length)throw new Vn;return this.array_[this.array_.length-1]},Gn.prototype.empty=function(){return 0===this.array_.length},Gn.prototype.isEmpty=function(){return this.empty()},Gn.prototype.search=function(t){return this.array_.indexOf(t)},Gn.prototype.size=function(){return this.array_.length},Gn.prototype.toArray=function(){for(var t=[],e=0,i=this.array_.length;e<i;e++)t.push(this.array_[e]);return t};var Cc=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Cc.prototype.getCoordinate=function(){return this._minCoord},Cc.prototype.getRightmostSide=function(t,e){var i=this.getRightmostSideOfSegment(t,e);return i<0&&(i=this.getRightmostSideOfSegment(t,e-1)),i<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),i},Cc.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();tl.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],i=t[this._minIndex+1],r=al.computeOrientation(this._minCoord,i,e),n=!1;(e.y<this._minCoord.y&&i.y<this._minCoord.y&&r===al.COUNTERCLOCKWISE||e.y>this._minCoord.y&&i.y>this._minCoord.y&&r===al.CLOCKWISE)&&(n=!0),n&&(this._minIndex=this._minIndex-1)},Cc.prototype.getRightmostSideOfSegment=function(t,e){var i=t.getEdge().getCoordinates();if(e<0||e+1>=i.length)return-1;if(i[e].y===i[e+1].y)return-1;var r=Ic.LEFT;return i[e].y<i[e+1].y&&(r=Ic.RIGHT),r},Cc.prototype.getEdge=function(){return this._orientedDe},Cc.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),i=0;i<e.length-1;i++)(null===this._minCoord||e[i].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=i,this._minCoord=e[i])},Cc.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Cc.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var i=e.next();i.isForward()&&this.checkForRightmostCoordinate(i)}tl.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Ic.LEFT&&(this._orientedDe=this._minDe.getSym())},Cc.prototype.interfaces_=function(){return[]},Cc.prototype.getClass=function(){return Cc};var Pc=function(t){function e(i,r){t.call(this,e.msgWithCoord(i,r)),this.pt=r?new Eu(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(Ju),Tc=function(){this.array_=[]};Tc.prototype.addLast=function(t){this.array_.push(t)},Tc.prototype.removeFirst=function(){return this.array_.shift()},Tc.prototype.isEmpty=function(){return 0===this.array_.length};var Lc=function(){this._finder=null,this._dirEdgeList=new El,this._nodes=new El,this._rightMostCoord=null,this._env=null,this._finder=new Cc};Lc.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Lc.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Lc.prototype.computeNodeDepth=function(t){for(var e=null,i=t.getEdges().iterator();i.hasNext();){var r=i.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Pc("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var n=t.getEdges().iterator();n.hasNext();){var o=n.next();o.setVisited(!0),this.copySymDepths(o)}},Lc.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Ic.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Lc.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Lc.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Ic.RIGHT)>=1&&e.getDepth(Ic.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Lc.prototype.computeDepths=function(t){var e=new kl,i=new Tc,r=t.getNode();for(i.addLast(r),e.add(r),t.setVisited(!0);!i.isEmpty();){var n=i.removeFirst();e.add(n),this.computeNodeDepth(n);for(var o=n.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(i.addLast(s),e.add(s))}}}},Lc.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Lc.prototype.getEnvelope=function(){if(null===this._env){for(var t=new Ku,e=this._dirEdgeList.iterator();e.hasNext();)for(var i=e.next().getEdge().getCoordinates(),r=0;r<i.length-1;r++)t.expandToInclude(i[r]);this._env=t}return this._env},Lc.prototype.addReachable=function(t){var e=new Gn;for(e.add(t);!e.empty();){var i=e.pop();this.add(i,e)}},Lc.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Ic.LEFT,t.getDepth(Ic.RIGHT)),e.setDepth(Ic.RIGHT,t.getDepth(Ic.LEFT))},Lc.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var i=t.getEdges().iterator();i.hasNext();){var r=i.next();this._dirEdgeList.add(r);var n=r.getSym().getNode();n.isVisited()||e.push(n)}},Lc.prototype.getNodes=function(){return this._nodes},Lc.prototype.getDirectedEdges=function(){return this._dirEdgeList},Lc.prototype.interfaces_=function(){return[bu]},Lc.prototype.getClass=function(){return Lc};var Mc=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var i=arguments[0];this.init(1),this.location[Ic.ON]=i}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var n=0;n<this.location.length;n++)this.location[n]=r.location[n]}}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.init(3),this.location[Ic.ON]=o,this.location[Ic.LEFT]=a,this.location[Ic.RIGHT]=s}};Mc.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Mc.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==Cu.NONE)return!1;return!0},Mc.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===Cu.NONE&&(this.location[e]=t)},Mc.prototype.isLine=function(){return 1===this.location.length},Mc.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Ic.ON]=this.location[Ic.ON],e[Ic.LEFT]=Cu.NONE,e[Ic.RIGHT]=Cu.NONE,this.location=e}for(var i=0;i<this.location.length;i++)this.location[i]===Cu.NONE&&i<t.location.length&&(this.location[i]=t.location[i])},Mc.prototype.getLocations=function(){return this.location},Mc.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Ic.LEFT];this.location[Ic.LEFT]=this.location[Ic.RIGHT],this.location[Ic.RIGHT]=t},Mc.prototype.toString=function(){var t=new ku;return this.location.length>1&&t.append(Cu.toLocationSymbol(this.location[Ic.LEFT])),t.append(Cu.toLocationSymbol(this.location[Ic.ON])),this.location.length>1&&t.append(Cu.toLocationSymbol(this.location[Ic.RIGHT])),t.toString()},Mc.prototype.setLocations=function(t,e,i){this.location[Ic.ON]=t,this.location[Ic.LEFT]=e,this.location[Ic.RIGHT]=i},Mc.prototype.get=function(t){return t<this.location.length?this.location[t]:Cu.NONE},Mc.prototype.isArea=function(){return this.location.length>1},Mc.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===Cu.NONE)return!0;return!1},Mc.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Ic.ON,t)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this.location[e]=i}},Mc.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(Cu.NONE)},Mc.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Mc.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Mc.prototype.interfaces_=function(){return[]},Mc.prototype.getClass=function(){return Mc};var kc=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Mc(e),this.elt[1]=new Mc(e)}else if(arguments[0]instanceof t){var i=arguments[0];this.elt[0]=new Mc(i.elt[0]),this.elt[1]=new Mc(i.elt[1])}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this.elt[0]=new Mc(Cu.NONE),this.elt[1]=new Mc(Cu.NONE),this.elt[r].setLocation(n)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new Mc(o,a,s),this.elt[1]=new Mc(o,a,s)}else if(4===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2],p=arguments[3];this.elt[0]=new Mc(Cu.NONE,Cu.NONE,Cu.NONE),this.elt[1]=new Mc(Cu.NONE,Cu.NONE,Cu.NONE),this.elt[u].setLocations(l,c,p)}};kc.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},kc.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},kc.prototype.isNull=function(t){return this.elt[t].isNull()},kc.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this.elt[e].setAllLocationsIfNull(i)}},kc.prototype.isLine=function(t){return this.elt[t].isLine()},kc.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Mc(t.elt[e]):this.elt[e].merge(t.elt[e])},kc.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},kc.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Ic.ON)}if(2===arguments.length){var e=arguments[0],i=arguments[1];return this.elt[e].get(i)}},kc.prototype.toString=function(){var t=new ku;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},kc.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},kc.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},kc.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Ic.ON,e)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],n=arguments[2];this.elt[i].setLocation(r,n)}},kc.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},kc.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},kc.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Mc(this.elt[t].location[0]))},kc.prototype.interfaces_=function(){return[]},kc.prototype.getClass=function(){return kc},kc.toLineLabel=function(t){for(var e=new kc(Cu.NONE),i=0;i<2;i++)e.setLocation(i,t.getLocation(i));return e};var Rc=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new El,this._pts=new El,this._label=new kc(Cu.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new El,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Rc.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=al.isCCW(this._ring.getCoordinates())},Rc.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Rc.prototype.computePoints=function(t){this._startDe=t;var e=t,i=!0;do{if(null===e)throw new Pc("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Pc("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();tl.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),i),i=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},Rc.prototype.getLinearRing=function(){return this._ring},Rc.prototype.getCoordinate=function(t){return this._pts.get(t)},Rc.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},Rc.prototype.addPoints=function(t,e,i){var r=t.getCoordinates();if(e){var n=1;i&&(n=0);for(var o=n;o<r.length;o++)this._pts.add(r[o])}else{var a=r.length-2;i&&(a=r.length-1);for(var s=a;s>=0;s--)this._pts.add(r[s])}},Rc.prototype.isHole=function(){return this._isHole},Rc.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Rc.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!al.isPointInRing(t,e.getCoordinates()))return!1;for(var i=this._holes.iterator();i.hasNext();)if(i.next().containsPoint(t))return!1;return!0},Rc.prototype.addHole=function(t){this._holes.add(t)},Rc.prototype.isShell=function(){return null===this._shell},Rc.prototype.getLabel=function(){return this._label},Rc.prototype.getEdges=function(){return this._edges},Rc.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Rc.prototype.getShell=function(){return this._shell},Rc.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],i=arguments[0].getLocation(e,Ic.RIGHT);if(i===Cu.NONE)return null;if(this._label.getLocation(e)===Cu.NONE)return this._label.setLocation(e,i),null}},Rc.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Rc.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),i=0;i<this._holes.size();i++)e[i]=this._holes.get(i).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Rc.prototype.interfaces_=function(){return[]},Rc.prototype.getClass=function(){return Rc};var Nc=function(t){function e(){var e=arguments[0],i=arguments[1];t.call(this,e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Rc),Dc=function(t){function e(){var e=arguments[0],i=arguments[1];t.call(this,e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new El,e=this._startDe;do{if(null===e.getMinEdgeRing()){var i=new Nc(e,this._geometryFactory);t.add(i)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Rc),Oc=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};Oc.prototype.setVisited=function(t){this._isVisited=t},Oc.prototype.setInResult=function(t){this._isInResult=t},Oc.prototype.isCovered=function(){return this._isCovered},Oc.prototype.isCoveredSet=function(){return this._isCoveredSet},Oc.prototype.setLabel=function(t){this._label=t},Oc.prototype.getLabel=function(){return this._label},Oc.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Oc.prototype.updateIM=function(t){tl.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Oc.prototype.isInResult=function(){return this._isInResult},Oc.prototype.isVisited=function(){return this._isVisited},Oc.prototype.interfaces_=function(){return[]},Oc.prototype.getClass=function(){return Oc};var zc=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],i=arguments[1];this._coord=e,this._edges=i,this._label=new kc(0,Cu.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var i=Cu.NONE;if(i=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);i!==Cu.BOUNDARY&&(i=r)}return i},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],i=arguments[1];null===this._label?this._label=new kc(e,i):this._label.setLocation(e,i)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof kc)for(var i=arguments[0],r=0;r<2;r++){var n=this.computeMergedLocation(i,r);this._label.getLocation(r)===Cu.NONE&&this._label.setLocation(r,n)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=Cu.NONE;null!==this._label&&(e=this._label.getLocation(t));var i=null;switch(e){case Cu.BOUNDARY:i=Cu.INTERIOR;break;case Cu.INTERIOR:default:i=Cu.BOUNDARY}this._label.setLocation(t,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Oc),Fc=function(){this.nodeMap=new Fn,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};Fc.prototype.find=function(t){return this.nodeMap.get(t)},Fc.prototype.addNode=function(){if(arguments[0]instanceof Eu){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof zc){var i=arguments[0],r=this.nodeMap.get(i.getCoordinate());return null===r?(this.nodeMap.put(i.getCoordinate(),i),i):(r.mergeLabel(i),r)}},Fc.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},Fc.prototype.iterator=function(){return this.nodeMap.values().iterator()},Fc.prototype.values=function(){return this.nodeMap.values()},Fc.prototype.getBoundaryNodes=function(t){for(var e=new El,i=this.iterator();i.hasNext();){var r=i.next();r.getLabel().getLocation(t)===Cu.BOUNDARY&&e.add(r)}return e},Fc.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},Fc.prototype.interfaces_=function(){return[]},Fc.prototype.getClass=function(){return Fc};var Bc=function(){},qc={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Bc.prototype.interfaces_=function(){return[]},Bc.prototype.getClass=function(){return Bc},Bc.isNorthern=function(t){return t===Bc.NE||t===Bc.NW},Bc.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},Bc.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var i=t<e?t:e;return 0===i&&3===(t>e?t:e)?3:i},Bc.isInHalfPlane=function(t,e){return e===Bc.SE?t===Bc.SE||t===Bc.SW:t===e||t===e+1},Bc.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new mu("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Bc.NE:Bc.SE:e>=0?Bc.NW:Bc.SW}if(arguments[0]instanceof Eu&&arguments[1]instanceof Eu){var i=arguments[0],r=arguments[1];if(r.x===i.x&&r.y===i.y)throw new mu("Cannot compute the quadrant for two identical points "+i);return r.x>=i.x?r.y>=i.y?Bc.NE:Bc.SE:r.y>=i.y?Bc.NW:Bc.SW}},qc.NE.get=function(){return 0},qc.NW.get=function(){return 1},qc.SW.get=function(){return 2},qc.SE.get=function(){return 3},Object.defineProperties(Bc,qc);var Uc=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],i=arguments[1],r=arguments[2];this._edge=e,this.init(i,r),this._label=null}else if(4===arguments.length){var n=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this._edge=n,this.init(o,a),this._label=s}};Uc.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:al.computeOrientation(t._p0,t._p1,this._p1)},Uc.prototype.getDy=function(){return this._dy},Uc.prototype.getCoordinate=function(){return this._p0},Uc.prototype.setNode=function(t){this._node=t},Uc.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),i=this.getClass().getName(),r=i.lastIndexOf("."),n=i.substring(r+1);t.print("  "+n+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Uc.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Uc.prototype.getDirectedCoordinate=function(){return this._p1},Uc.prototype.getDx=function(){return this._dx},Uc.prototype.getLabel=function(){return this._label},Uc.prototype.getEdge=function(){return this._edge},Uc.prototype.getQuadrant=function(){return this._quadrant},Uc.prototype.getNode=function(){return this._node},Uc.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),i=e.lastIndexOf(".");return"  "+e.substring(i+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Uc.prototype.computeLabel=function(t){},Uc.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Bc.quadrant(this._dx,this._dy),tl.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Uc.prototype.interfaces_=function(){return[bu]},Uc.prototype.getClass=function(){return Uc};var Vc=function(t){function e(){var e=arguments[0],i=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=i,i)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new kc(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Pc("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Ic.LEFT)===Cu.INTERIOR&&this._label.getLocation(e,Ic.RIGHT)===Cu.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Ic.LEFT]+"/"+this._depth[Ic.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,Cu.EXTERIOR),i=!this._label.isArea(1)||this._label.allPositionsEqual(1,Cu.EXTERIOR);return t&&e&&i},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var i=this.getEdge().getDepthDelta();this._isForward||(i=-i);var r=1;t===Ic.LEFT&&(r=-1);var n=Ic.opposite(t),o=e+i*r;this.setDepth(t,e),this.setDepth(n,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===Cu.EXTERIOR&&e===Cu.INTERIOR?1:t===Cu.INTERIOR&&e===Cu.EXTERIOR?-1:0},e}(Uc),Gc=function(){};Gc.prototype.createNode=function(t){return new zc(t,null)},Gc.prototype.interfaces_=function(){return[]},Gc.prototype.getClass=function(){return Gc};var jc=function(){if(this._edges=new El,this._nodes=null,this._edgeEndList=new El,0===arguments.length)this._nodes=new Fc(new Gc);else if(1===arguments.length){var t=arguments[0];this._nodes=new Fc(t)}};jc.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var i=this._edges.get(e);i.print(t),i.eiList.print(t)}},jc.prototype.find=function(t){return this._nodes.find(t)},jc.prototype.addNode=function(){if(arguments[0]instanceof zc){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof Eu){var e=arguments[0];return this._nodes.addNode(e)}},jc.prototype.getNodeIterator=function(){return this._nodes.iterator()},jc.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},jc.prototype.debugPrintln=function(t){Gu.out.println(t)},jc.prototype.isBoundaryNode=function(t,e){var i=this._nodes.find(e);if(null===i)return!1;var r=i.getLabel();return null!==r&&r.getLocation(t)===Cu.BOUNDARY},jc.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},jc.prototype.matchInSameDirection=function(t,e,i,r){return!!t.equals(i)&&al.computeOrientation(t,e,r)===al.COLLINEAR&&Bc.quadrant(t,e)===Bc.quadrant(i,r)},jc.prototype.getEdgeEnds=function(){return this._edgeEndList},jc.prototype.debugPrint=function(t){Gu.out.print(t)},jc.prototype.getEdgeIterator=function(){return this._edges.iterator()},jc.prototype.findEdgeInSameDirection=function(t,e){for(var i=0;i<this._edges.size();i++){var r=this._edges.get(i),n=r.getCoordinates();if(this.matchInSameDirection(t,e,n[0],n[1]))return r;if(this.matchInSameDirection(t,e,n[n.length-1],n[n.length-2]))return r}return null},jc.prototype.insertEdge=function(t){this._edges.add(t)},jc.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var i=e.next();if(i.getEdge()===t)return i}return null},jc.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var i=e.next();this._edges.add(i);var r=new Vc(i,!0),n=new Vc(i,!1);r.setSym(n),n.setSym(r),this.add(r),this.add(n)}},jc.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},jc.prototype.getNodes=function(){return this._nodes.values()},jc.prototype.findEdge=function(t,e){for(var i=0;i<this._edges.size();i++){var r=this._edges.get(i),n=r.getCoordinates();if(t.equals(n[0])&&e.equals(n[1]))return r}return null},jc.prototype.interfaces_=function(){return[]},jc.prototype.getClass=function(){return jc},jc.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Kc=function(){this._geometryFactory=null,this._shellList=new El;var t=arguments[0];this._geometryFactory=t};Kc.prototype.sortShellsAndHoles=function(t,e,i){for(var r=t.iterator();r.hasNext();){var n=r.next();n.isHole()?i.add(n):e.add(n)}},Kc.prototype.computePolygons=function(t){for(var e=new El,i=t.iterator();i.hasNext();){var r=i.next().toPolygon(this._geometryFactory);e.add(r)}return e},Kc.prototype.placeFreeHoles=function(t,e){for(var i=e.iterator();i.hasNext();){var r=i.next();if(null===r.getShell()){var n=this.findEdgeRingContaining(r,t);if(null===n)throw new Pc("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(n)}}},Kc.prototype.buildMinimalEdgeRings=function(t,e,i){for(var r=new El,n=t.iterator();n.hasNext();){var o=n.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):i.addAll(a)}else r.add(o)}return r},Kc.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Kc.prototype.buildMaximalEdgeRings=function(t){for(var e=new El,i=t.iterator();i.hasNext();){var r=i.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var n=new Dc(r,this._geometryFactory);e.add(n),n.setInResult()}}return e},Kc.prototype.placePolygonHoles=function(t,e){for(var i=e.iterator();i.hasNext();){var r=i.next();r.isHole()&&r.setShell(t)}},Kc.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Kc.prototype.findEdgeRingContaining=function(t,e){for(var i=t.getLinearRing(),r=i.getEnvelopeInternal(),n=i.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var u=s.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var p=!1;c.contains(r)&&al.isPointInRing(n,l.getCoordinates())&&(p=!0),p&&(null===o||a.contains(c))&&(o=u)}return o},Kc.prototype.findShell=function(t){for(var e=0,i=null,r=t.iterator();r.hasNext();){var n=r.next();n.isHole()||(i=n,e++)}return tl.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),i},Kc.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],i=arguments[1];jc.linkResultDirectedEdges(i);var r=this.buildMaximalEdgeRings(e),n=new El,o=this.buildMinimalEdgeRings(r,this._shellList,n);this.sortShellsAndHoles(o,this._shellList,n),this.placeFreeHoles(this._shellList,n)}},Kc.prototype.interfaces_=function(){return[]},Kc.prototype.getClass=function(){return Kc};var Xc=function(){};Xc.prototype.getBounds=function(){},Xc.prototype.interfaces_=function(){return[]},Xc.prototype.getClass=function(){return Xc};var Zc=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};Zc.prototype.getItem=function(){return this._item},Zc.prototype.getBounds=function(){return this._bounds},Zc.prototype.interfaces_=function(){return[Xc,Tn]},Zc.prototype.getClass=function(){return Zc};var Yc=function(){this._size=null,this._items=null,this._size=0,this._items=new El,this._items.add(null)};Yc.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Yc.prototype.size=function(){return this._size},Yc.prototype.reorder=function(t){for(var e=null,i=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(i)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,i)},Yc.prototype.clear=function(){this._size=0,this._items.clear()},Yc.prototype.isEmpty=function(){return 0===this._size},Yc.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Yc.prototype.interfaces_=function(){return[]},Yc.prototype.getClass=function(){return Yc};var Hc=function(){};Hc.prototype.visitItem=function(t){},Hc.prototype.interfaces_=function(){return[]},Hc.prototype.getClass=function(){return Hc};var Wc=function(){};Wc.prototype.insert=function(t,e){},Wc.prototype.remove=function(t,e){},Wc.prototype.query=function(){},Wc.prototype.interfaces_=function(){return[]},Wc.prototype.getClass=function(){return Wc};var Qc=function(){if(this._childBoundables=new El,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Jc={serialVersionUID:{configurable:!0}};Qc.prototype.getLevel=function(){return this._level},Qc.prototype.size=function(){return this._childBoundables.size()},Qc.prototype.getChildBoundables=function(){return this._childBoundables},Qc.prototype.addChildBoundable=function(t){tl.isTrue(null===this._bounds),this._childBoundables.add(t)},Qc.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Qc.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Qc.prototype.interfaces_=function(){return[Xc,Tn]},Qc.prototype.getClass=function(){return Qc},Jc.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Qc,Jc);var $c=function(){};$c.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},$c.min=function(t){return $c.sort(t),t.get(0)},$c.sort=function(t,e){var i=t.toArray();e?zl.sort(i,e):zl.sort(i);for(var r=t.iterator(),n=0,o=i.length;n<o;n++)r.next(),r.set(i[n])},$c.singletonList=function(t){var e=new El;return e.add(t),e};var tp=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],i=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=i,this._distance=this.distance()};tp.prototype.expandToQueue=function(t,e){var i=tp.isComposite(this._boundable1),r=tp.isComposite(this._boundable2);if(i&&r)return tp.area(this._boundable1)>tp.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(i)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new mu("neither boundable is composite")},tp.prototype.isLeaves=function(){return!(tp.isComposite(this._boundable1)||tp.isComposite(this._boundable2))},tp.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},tp.prototype.expand=function(t,e,i,r){for(var n=t.getChildBoundables().iterator();n.hasNext();){var o=n.next(),a=new tp(o,e,this._itemDistance);a.getDistance()<r&&i.add(a)}},tp.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},tp.prototype.getDistance=function(){return this._distance},tp.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},tp.prototype.interfaces_=function(){return[bu]},tp.prototype.getClass=function(){return tp},tp.area=function(t){return t.getBounds().getArea()},tp.isComposite=function(t){return t instanceof Qc};var ep=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new El,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var i=arguments[0];tl.isTrue(i>1,"Node capacity must be greater than 1"),this._nodeCapacity=i}},ip={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};ep.prototype.getNodeCapacity=function(){return this._nodeCapacity},ep.prototype.lastNode=function(t){return t.get(t.size()-1)},ep.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var i=e.next();i instanceof Qc?t+=this.size(i):i instanceof Zc&&(t+=1)}return t}},ep.prototype.removeItem=function(t,e){for(var i=null,r=t.getChildBoundables().iterator();r.hasNext();){var n=r.next();n instanceof Zc&&n.getItem()===e&&(i=n)}return null!==i&&(t.getChildBoundables().remove(i),!0)},ep.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new El:t}if(1===arguments.length){for(var e=arguments[0],i=new El,r=e.getChildBoundables().iterator();r.hasNext();){var n=r.next();if(n instanceof Qc){var o=this.itemsTree(n);null!==o&&i.add(o)}else n instanceof Zc?i.add(n.getItem()):tl.shouldNeverReachHere()}return i.size()<=0?null:i}},ep.prototype.insert=function(t,e){tl.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Zc(t,e))},ep.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new El;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var i=arguments[0],r=arguments[1],n=arguments[2];if(tl.isTrue(i>-2),r.getLevel()===i)return n.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof Qc?this.boundablesAtLevel(i,a,n):(tl.isTrue(a instanceof Zc),-1===i&&n.add(a))}return null}},ep.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new El;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var i=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),i)&&this.query(i,this._root,r)}else if(3===arguments.length)if(Tu(arguments[2],Hc)&&arguments[0]instanceof Object&&arguments[1]instanceof Qc)for(var n=arguments[0],o=arguments[2],a=arguments[1].getChildBoundables(),s=0;s<a.size();s++){var u=a.get(s);this.getIntersectsOp().intersects(u.getBounds(),n)&&(u instanceof Qc?this.query(n,u,o):u instanceof Zc?o.visitItem(u.getItem()):tl.shouldNeverReachHere())}else if(Tu(arguments[2],wl)&&arguments[0]instanceof Object&&arguments[1]instanceof Qc)for(var l=arguments[0],c=arguments[2],p=arguments[1].getChildBoundables(),h=0;h<p.size();h++){var d=p.get(h);this.getIntersectsOp().intersects(d.getBounds(),l)&&(d instanceof Qc?this.query(l,d,c):d instanceof Zc?c.add(d.getItem()):tl.shouldNeverReachHere())}},ep.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},ep.prototype.getRoot=function(){return this.build(),this._root},ep.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var i=arguments[0],r=arguments[1],n=arguments[2],o=this.removeItem(r,n);if(o)return!0;for(var a=null,s=r.getChildBoundables().iterator();s.hasNext();){var u=s.next();if(this.getIntersectsOp().intersects(u.getBounds(),i)&&u instanceof Qc&&(o=this.remove(i,u,n))){a=u;break}}return null!==a&&a.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(a),o}},ep.prototype.createHigherLevels=function(t,e){tl.isTrue(!t.isEmpty());var i=this.createParentBoundables(t,e+1);return 1===i.size()?i.get(0):this.createHigherLevels(i,e+1)},ep.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var i=e.next();if(i instanceof Qc){var r=this.depth(i);r>t&&(t=r)}}return t+1}},ep.prototype.createParentBoundables=function(t,e){tl.isTrue(!t.isEmpty());var i=new El;i.add(this.createNode(e));var r=new El(t);$c.sort(r,this.getComparator());for(var n=r.iterator();n.hasNext();){var o=n.next();this.lastNode(i).getChildBoundables().size()===this.getNodeCapacity()&&i.add(this.createNode(e)),this.lastNode(i).addChildBoundable(o)}return i},ep.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},ep.prototype.interfaces_=function(){return[Tn]},ep.prototype.getClass=function(){return ep},ep.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},ip.IntersectsOp.get=function(){return rp},ip.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},ip.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(ep,ip);var rp=function(){},np=function(){};np.prototype.distance=function(t,e){},np.prototype.interfaces_=function(){return[]},np.prototype.getClass=function(){return np};var op=function(t){function e(i){i=i||e.DEFAULT_NODE_CAPACITY,t.call(this,i)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){tl.isTrue(t.length>0);for(var i=new El,r=0;r<t.length;r++)i.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return i},e.prototype.createNode=function(t){return new ap(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],i=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,i)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var i=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),n=t.iterator(),o=0;o<e;o++){r[o]=new El;for(var a=0;n.hasNext()&&a<i;){var s=n.next();r[o].add(s),a++}}return r},e.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var i=arguments[0],r=arguments[1];t.prototype.query.call(this,i,r)}else if(3===arguments.length)if(Tu(arguments[2],Hc)&&arguments[0]instanceof Object&&arguments[1]instanceof Qc){var n=arguments[0],o=arguments[1],a=arguments[2];t.prototype.query.call(this,n,o,a)}else if(Tu(arguments[2],wl)&&arguments[0]instanceof Object&&arguments[1]instanceof Qc){var s=arguments[0],u=arguments[1],l=arguments[2];t.prototype.query.call(this,s,u,l)}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,i){return t.prototype.createParentBoundables.call(this,e,i)},e.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],i=arguments[1];return t.prototype.remove.call(this,e,i)}return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,i){tl.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),n=new El(t);$c.sort(n,e.xComparator);var o=this.verticalSlices(n,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,i)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(Tu(arguments[0],np)){var t=arguments[0],i=new tp(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(i)}if(arguments[0]instanceof tp){var r=arguments[0];return this.nearestNeighbour(r,yu.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&Tu(arguments[1],np)){var n=arguments[0],o=arguments[1],a=new tp(this.getRoot(),n.getRoot(),o);return this.nearestNeighbour(a)}if(arguments[0]instanceof tp&&"number"==typeof arguments[1]){var s=arguments[0],u=arguments[1],l=null,c=new Yc;for(c.add(s);!c.isEmpty()&&u>0;){var p=c.poll(),h=p.getDistance();if(h>=u)break;p.isLeaves()?(u=h,l=p):p.expandToQueue(c,u)}return[l.getBoundable(0).getItem(),l.getBoundable(1).getItem()]}}else if(3===arguments.length){var d=arguments[2],f=new Zc(arguments[0],arguments[1]),_=new tp(this.getRoot(),f,d);return this.nearestNeighbour(_)[0]}},e.prototype.interfaces_=function(){return[Wc,Tn]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},i.STRtreeNode.get=function(){return ap},i.serialVersionUID.get=function(){return 0x39920f7d5f261e0},i.xComparator.get=function(){return{interfaces_:function(){return[wu]},compare:function(i,r){return t.compareDoubles(e.centreX(i.getBounds()),e.centreX(r.getBounds()))}}},i.yComparator.get=function(){return{interfaces_:function(){return[wu]},compare:function(i,r){return t.compareDoubles(e.centreY(i.getBounds()),e.centreY(r.getBounds()))}}},i.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},i.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,i),e}(ep),ap=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var i=e.next();null===t?t=new Ku(i.getBounds()):t.expandToInclude(i.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Qc),sp=function(){};sp.prototype.interfaces_=function(){return[]},sp.prototype.getClass=function(){return sp},sp.relativeSign=function(t,e){return t<e?-1:t>e?1:0},sp.compare=function(t,e,i){if(e.equals2D(i))return 0;var r=sp.relativeSign(e.x,i.x),n=sp.relativeSign(e.y,i.y);switch(t){case 0:return sp.compareValue(r,n);case 1:return sp.compareValue(n,r);case 2:return sp.compareValue(n,-r);case 3:return sp.compareValue(-r,n);case 4:return sp.compareValue(-r,-n);case 5:return sp.compareValue(-n,-r);case 6:return sp.compareValue(-n,r);case 7:return sp.compareValue(r,-n)}return tl.shouldNeverReachHere("invalid octant value"),0},sp.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var up=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],i=arguments[2],r=arguments[3];this._segString=t,this.coord=new Eu(e),this.segmentIndex=i,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(i))};up.prototype.getCoordinate=function(){return this.coord},up.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},up.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:sp.compare(this._segmentOctant,this.coord,e.coord)},up.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},up.prototype.isInterior=function(){return this._isInterior},up.prototype.interfaces_=function(){return[bu]},up.prototype.getClass=function(){return up};var lp=function(){this._nodeMap=new Fn,this._edge=null;var t=arguments[0];this._edge=t};lp.prototype.getSplitCoordinates=function(){var t=new Il;this.addEndpoints();for(var e=this.iterator(),i=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(i,r,t),i=r}return t.toCoordinateArray()},lp.prototype.addCollapsedNodes=function(){var t=new El;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var i=e.next().intValue();this.add(this._edge.getCoordinate(i),i)}},lp.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},lp.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var i=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);i.equals2D(r)&&t.add(new Ru(e+1))}},lp.prototype.addEdgeCoordinates=function(t,e,i){var r=this._edge.getCoordinate(e.segmentIndex),n=e.isInterior()||!e.coord.equals2D(r);i.add(new Eu(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)i.add(this._edge.getCoordinate(o));n&&i.add(new Eu(e.coord))},lp.prototype.iterator=function(){return this._nodeMap.values().iterator()},lp.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),i=e.next();e.hasNext();){var r=e.next(),n=this.createSplitEdge(i,r);t.add(n),i=r}},lp.prototype.findCollapseIndex=function(t,e,i){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(i[0]=t.segmentIndex+1,!0)},lp.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),i=this.iterator(),r=i.next();i.hasNext();){var n=i.next();this.findCollapseIndex(r,n,e)&&t.add(new Ru(e[0])),r=n}},lp.prototype.getEdge=function(){return this._edge},lp.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},lp.prototype.createSplitEdge=function(t,e){var i=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),n=e.isInterior()||!e.coord.equals2D(r);n||i--;var o=new Array(i).fill(null),a=0;o[a++]=new Eu(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return n&&(o[a]=new Eu(e.coord)),new dp(o,this._edge.getData())},lp.prototype.add=function(t,e){var i=new up(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(i);return null!==r?(tl.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(i,i),i)},lp.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),i=t.get(0).getCoordinate(0);if(!i.equals2D(e[0]))throw new Ju("bad split edge start point at "+i);var r=t.get(t.size()-1).getCoordinates(),n=r[r.length-1];if(!n.equals2D(e[e.length-1]))throw new Ju("bad split edge end point at "+n)},lp.prototype.interfaces_=function(){return[]},lp.prototype.getClass=function(){return lp};var cp=function(){};cp.prototype.interfaces_=function(){return[]},cp.prototype.getClass=function(){return cp},cp.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new mu("Cannot compute the octant for point ( "+t+", "+e+" )");var i=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?i>=r?0:1:i>=r?7:6:e>=0?i>=r?3:2:i>=r?4:5}if(arguments[0]instanceof Eu&&arguments[1]instanceof Eu){var n=arguments[0],o=arguments[1],a=o.x-n.x,s=o.y-n.y;if(0===a&&0===s)throw new mu("Cannot compute the octant for two identical points "+n);return cp.octant(a,s)}};var pp=function(){};pp.prototype.getCoordinates=function(){},pp.prototype.size=function(){},pp.prototype.getCoordinate=function(t){},pp.prototype.isClosed=function(){},pp.prototype.setData=function(t){},pp.prototype.getData=function(){},pp.prototype.interfaces_=function(){return[]},pp.prototype.getClass=function(){return pp};var hp=function(){};hp.prototype.addIntersection=function(t,e){},hp.prototype.interfaces_=function(){return[pp]},hp.prototype.getClass=function(){return hp};var dp=function(){this._nodeList=new lp(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};dp.prototype.getCoordinates=function(){return this._pts},dp.prototype.size=function(){return this._pts.length},dp.prototype.getCoordinate=function(t){return this._pts[t]},dp.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},dp.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},dp.prototype.setData=function(t){this._data=t},dp.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:cp.octant(t,e)},dp.prototype.getData=function(){return this._data},dp.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var i=arguments[1],r=arguments[3],n=new Eu(arguments[0].getIntersection(r));this.addIntersection(n,i)}},dp.prototype.toString=function(){return Qu.toLineString(new uc(this._pts))},dp.prototype.getNodeList=function(){return this._nodeList},dp.prototype.addIntersectionNode=function(t,e){var i=e,r=i+1;if(r<this._pts.length){var n=this._pts[r];t.equals2D(n)&&(i=r)}return this._nodeList.add(t,i)},dp.prototype.addIntersections=function(t,e,i){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,i,r)},dp.prototype.interfaces_=function(){return[hp]},dp.prototype.getClass=function(){return dp},dp.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new El;return dp.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var i=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(i)};var fp=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new Eu,this.p1=new Eu;else if(1===arguments.length){var t=arguments[0];this.p0=new Eu(t.p0),this.p1=new Eu(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],i=arguments[1],r=arguments[2],n=arguments[3];this.p0=new Eu(e,i),this.p1=new Eu(r,n)}},_p={serialVersionUID:{configurable:!0}};fp.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},fp.prototype.orientationIndex=function(){if(arguments[0]instanceof fp){var t=arguments[0],e=al.orientationIndex(this.p0,this.p1,t.p0),i=al.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&i>=0||e<=0&&i<=0?Math.max(e,i):0}if(arguments[0]instanceof Eu){var r=arguments[0];return al.orientationIndex(this.p0,this.p1,r)}},fp.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},fp.prototype.isVertical=function(){return this.p0.x===this.p1.x},fp.prototype.equals=function(t){if(!(t instanceof fp))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},fp.prototype.intersection=function(t){var e=new rl;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},fp.prototype.project=function(){if(arguments[0]instanceof Eu){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new Eu(t);var e=this.projectionFactor(t),i=new Eu;return i.x=this.p0.x+e*(this.p1.x-this.p0.x),i.y=this.p0.y+e*(this.p1.y-this.p0.y),i}if(arguments[0]instanceof fp){var r=arguments[0],n=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(n>=1&&o>=1)return null;if(n<=0&&o<=0)return null;var a=this.project(r.p0);n<0&&(a=this.p0),n>1&&(a=this.p1);var s=this.project(r.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new fp(a,s)}},fp.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},fp.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},fp.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},fp.prototype.distancePerpendicular=function(t){return al.distancePointLinePerpendicular(t,this.p0,this.p1)},fp.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},fp.prototype.midPoint=function(){return fp.midPoint(this.p0,this.p1)},fp.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,i=this.p1.y-this.p0.y,r=e*e+i*i;return r<=0?yu.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*i)/r},fp.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var i=new Array(2).fill(null),r=yu.MAX_VALUE,n=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),i[0]=o,i[1]=t.p0;var a=this.closestPoint(t.p1);(n=a.distance(t.p1))<r&&(r=n,i[0]=a,i[1]=t.p1);var s=t.closestPoint(this.p0);(n=s.distance(this.p0))<r&&(r=n,i[0]=this.p0,i[1]=s);var u=t.closestPoint(this.p1);return(n=u.distance(this.p1))<r&&(r=n,i[0]=this.p1,i[1]=u),i},fp.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},fp.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},fp.prototype.getLength=function(){return this.p0.distance(this.p1)},fp.prototype.compareTo=function(t){var e=t,i=this.p0.compareTo(e.p0);return 0!==i?i:this.p1.compareTo(e.p1)},fp.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},fp.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},fp.prototype.lineIntersection=function(t){try{return ju.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof Vu))throw t}return null},fp.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},fp.prototype.pointAlongOffset=function(t,e){var i=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),n=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(n*n+o*o),s=0,u=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*n/a,u=e*o/a}return new Eu(i-u,r+s)},fp.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=i.x,this.p1.y=i.y}},fp.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||yu.isNaN(e))&&(e=1),e},fp.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},fp.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},fp.prototype.distance=function(){if(arguments[0]instanceof fp){var t=arguments[0];return al.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof Eu){var e=arguments[0];return al.distancePointLine(e,this.p0,this.p1)}},fp.prototype.pointAlong=function(t){var e=new Eu;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},fp.prototype.hashCode=function(){var t=yu.doubleToLongBits(this.p0.x);t^=31*yu.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),i=yu.doubleToLongBits(this.p1.x);return i^=31*yu.doubleToLongBits(this.p1.y),e^Math.trunc(i)^Math.trunc(i>>32)},fp.prototype.interfaces_=function(){return[bu,Tn]},fp.prototype.getClass=function(){return fp},fp.midPoint=function(t,e){return new Eu((t.x+e.x)/2,(t.y+e.y)/2)},_p.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(fp,_p);var gp=function(){this.tempEnv1=new Ku,this.tempEnv2=new Ku,this._overlapSeg1=new fp,this._overlapSeg2=new fp};gp.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],i=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(i,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},gp.prototype.interfaces_=function(){return[]},gp.prototype.getClass=function(){return gp};var mp=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],i=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=i,this._context=r};mp.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},mp.prototype.computeSelect=function(t,e,i,r){var n=this._pts[e],o=this._pts[i];if(r.tempEnv1.init(n,o),i-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var a=Math.trunc((e+i)/2);e<a&&this.computeSelect(t,e,a,r),a<i&&this.computeSelect(t,a,i,r)},mp.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,i=this._start;i<=this._end;i++)t[e++]=this._pts[i];return t},mp.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},mp.prototype.setId=function(t){this._id=t},mp.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},mp.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new Ku(t,e)}return this._env},mp.prototype.getEndIndex=function(){return this._end},mp.prototype.getStartIndex=function(){return this._start},mp.prototype.getContext=function(){return this._context},mp.prototype.getId=function(){return this._id},mp.prototype.computeOverlapsInternal=function(t,e,i,r,n,o){var a=this._pts[t],s=this._pts[e],u=i._pts[r],l=i._pts[n];if(e-t==1&&n-r==1)return o.overlap(this,t,i,r),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),p=Math.trunc((r+n)/2);t<c&&(r<p&&this.computeOverlapsInternal(t,c,i,r,p,o),p<n&&this.computeOverlapsInternal(t,c,i,p,n,o)),c<e&&(r<p&&this.computeOverlapsInternal(c,e,i,r,p,o),p<n&&this.computeOverlapsInternal(c,e,i,p,n,o))},mp.prototype.interfaces_=function(){return[]},mp.prototype.getClass=function(){return mp};var yp=function(){};yp.prototype.interfaces_=function(){return[]},yp.prototype.getClass=function(){return yp},yp.getChainStartIndices=function(t){var e=0,i=new El;i.add(new Ru(e));do{var r=yp.findChainEnd(t,e);i.add(new Ru(r)),e=r}while(e<t.length-1);return yp.toIntArray(i)},yp.findChainEnd=function(t,e){for(var i=e;i<t.length-1&&t[i].equals2D(t[i+1]);)i++;if(i>=t.length-1)return t.length-1;for(var r=Bc.quadrant(t[i],t[i+1]),n=e+1;n<t.length&&(t[n-1].equals2D(t[n])||Bc.quadrant(t[n-1],t[n])===r);)n++;return n-1},yp.getChains=function(){if(1===arguments.length){var t=arguments[0];return yp.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],i=arguments[1],r=new El,n=yp.getChainStartIndices(e),o=0;o<n.length-1;o++){var a=new mp(e,n[o],n[o+1],i);r.add(a)}return r}},yp.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),i=0;i<e.length;i++)e[i]=t.get(i).intValue();return e};var vp=function(){};vp.prototype.computeNodes=function(t){},vp.prototype.getNodedSubstrings=function(){},vp.prototype.interfaces_=function(){return[]},vp.prototype.getClass=function(){return vp};var bp=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};bp.prototype.setSegmentIntersector=function(t){this._segInt=t},bp.prototype.interfaces_=function(){return[vp]},bp.prototype.getClass=function(){return bp};var xp=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new El,this._index=new op,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return dp.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=yp.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var i=e.next();i.setId(this._idCounter++),this._index.insert(i.getEnvelope(),i),this._monoChains.add(i)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new wp(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var i=e.next(),r=this._index.query(i.getEnvelope()).iterator();r.hasNext();){var n=r.next();if(n.getId()>i.getId()&&(i.computeOverlaps(n,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},i.SegmentOverlapAction.get=function(){return wp},Object.defineProperties(e,i),e}(bp),wp=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[1],i=arguments[2],r=arguments[3],n=arguments[0].getContext(),o=i.getContext();this._si.processIntersections(n,e,o,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(gp),Ep=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.setQuadrantSegments(i),this.setEndCapStyle(r)}else if(4===arguments.length){var n=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(n),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},Sp={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Ep.prototype.getEndCapStyle=function(){return this._endCapStyle},Ep.prototype.isSingleSided=function(){return this._isSingleSided},Ep.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Ep.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Ep.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Ep.JOIN_ROUND&&(this._quadrantSegments=Ep.DEFAULT_QUADRANT_SEGMENTS)},Ep.prototype.getJoinStyle=function(){return this._joinStyle},Ep.prototype.setJoinStyle=function(t){this._joinStyle=t},Ep.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Ep.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Ep.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Ep.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Ep.prototype.getMitreLimit=function(){return this._mitreLimit},Ep.prototype.setMitreLimit=function(t){this._mitreLimit=t},Ep.prototype.setSingleSided=function(t){this._isSingleSided=t},Ep.prototype.interfaces_=function(){return[]},Ep.prototype.getClass=function(){return Ep},Ep.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Sp.CAP_ROUND.get=function(){return 1},Sp.CAP_FLAT.get=function(){return 2},Sp.CAP_SQUARE.get=function(){return 3},Sp.JOIN_ROUND.get=function(){return 1},Sp.JOIN_MITRE.get=function(){return 2},Sp.JOIN_BEVEL.get=function(){return 3},Sp.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Sp.DEFAULT_MITRE_LIMIT.get=function(){return 5},Sp.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Ep,Sp);var Ip=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=al.COUNTERCLOCKWISE,this._inputLine=t||null},Ap={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Ip.prototype.isDeletable=function(t,e,i,r){var n=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[i];return!!this.isConcave(n,o,a)&&!!this.isShallow(n,o,a,r)&&this.isShallowSampled(n,o,t,i,r)},Ip.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),i=this.findNextNonDeletedIndex(e),r=!1;i<this._inputLine.length;){var n=!1;this.isDeletable(t,e,i,this._distanceTol)&&(this._isDeleted[e]=Ip.DELETE,n=!0,r=!0),t=n?i:e,e=this.findNextNonDeletedIndex(t),i=this.findNextNonDeletedIndex(e)}return r},Ip.prototype.isShallowConcavity=function(t,e,i,r){return al.computeOrientation(t,e,i)===this._angleOrientation&&al.distancePointLine(e,t,i)<r},Ip.prototype.isShallowSampled=function(t,e,i,r,n){var o=Math.trunc((r-i)/Ip.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=i;a<r;a+=o)if(!this.isShallow(t,e,this._inputLine[a],n))return!1;return!0},Ip.prototype.isConcave=function(t,e,i){return al.computeOrientation(t,e,i)===this._angleOrientation},Ip.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=al.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Ip.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Ip.DELETE;)e++;return e},Ip.prototype.isShallow=function(t,e,i,r){return al.distancePointLine(e,t,i)<r},Ip.prototype.collapseLine=function(){for(var t=new Il,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Ip.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Ip.prototype.interfaces_=function(){return[]},Ip.prototype.getClass=function(){return Ip},Ip.simplify=function(t,e){return new Ip(t).simplify(e)},Ap.INIT.get=function(){return 0},Ap.DELETE.get=function(){return 1},Ap.KEEP.get=function(){return 1},Ap.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Ip,Ap);var Cp=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new El},Pp={COORDINATE_ARRAY_TYPE:{configurable:!0}};Cp.prototype.getCoordinates=function(){return this._ptList.toArray(Cp.COORDINATE_ARRAY_TYPE)},Cp.prototype.setPrecisionModel=function(t){this._precisionModel=t},Cp.prototype.addPt=function(t){var e=new Eu(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Cp.prototype.revere=function(){},Cp.prototype.addPts=function(t,e){if(e)for(var i=0;i<t.length;i++)this.addPt(t[i]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},Cp.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Cp.prototype.toString=function(){return(new mc).createLineString(this.getCoordinates()).toString()},Cp.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new Eu(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Cp.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Cp.prototype.interfaces_=function(){return[]},Cp.prototype.getClass=function(){return Cp},Pp.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Cp,Pp);var Tp=function(){},Lp={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Tp.prototype.interfaces_=function(){return[]},Tp.prototype.getClass=function(){return Tp},Tp.toDegrees=function(t){return 180*t/Math.PI},Tp.normalize=function(t){for(;t>Math.PI;)t-=Tp.PI_TIMES_2;for(;t<=-Math.PI;)t+=Tp.PI_TIMES_2;return t},Tp.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],i=arguments[1],r=i.x-e.x,n=i.y-e.y;return Math.atan2(n,r)}},Tp.isAcute=function(t,e,i){var r=t.x-e.x,n=t.y-e.y;return r*(i.x-e.x)+n*(i.y-e.y)>0},Tp.isObtuse=function(t,e,i){var r=t.x-e.x,n=t.y-e.y;return r*(i.x-e.x)+n*(i.y-e.y)<0},Tp.interiorAngle=function(t,e,i){var r=Tp.angle(e,t),n=Tp.angle(e,i);return Math.abs(n-r)},Tp.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Tp.PI_TIMES_2;t>=Tp.PI_TIMES_2&&(t=0)}else{for(;t>=Tp.PI_TIMES_2;)t-=Tp.PI_TIMES_2;t<0&&(t=0)}return t},Tp.angleBetween=function(t,e,i){var r=Tp.angle(e,t),n=Tp.angle(e,i);return Tp.diff(r,n)},Tp.diff=function(t,e){var i=null;return(i=t<e?e-t:t-e)>Math.PI&&(i=2*Math.PI-i),i},Tp.toRadians=function(t){return t*Math.PI/180},Tp.getTurn=function(t,e){var i=Math.sin(e-t);return i>0?Tp.COUNTERCLOCKWISE:i<0?Tp.CLOCKWISE:Tp.NONE},Tp.angleBetweenOriented=function(t,e,i){var r=Tp.angle(e,t),n=Tp.angle(e,i)-r;return n<=-Math.PI?n+Tp.PI_TIMES_2:n>Math.PI?n-Tp.PI_TIMES_2:n},Lp.PI_TIMES_2.get=function(){return 2*Math.PI},Lp.PI_OVER_2.get=function(){return Math.PI/2},Lp.PI_OVER_4.get=function(){return Math.PI/4},Lp.COUNTERCLOCKWISE.get=function(){return al.COUNTERCLOCKWISE},Lp.CLOCKWISE.get=function(){return al.CLOCKWISE},Lp.NONE.get=function(){return al.COLLINEAR},Object.defineProperties(Tp,Lp);var Mp=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new fp,this._seg1=new fp,this._offset0=new fp,this._offset1=new fp,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],i=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=i,this._li=new rl,this._filletAngleQuantum=Math.PI/2/i.getQuadrantSegments(),i.getQuadrantSegments()>=8&&i.getJoinStyle()===Ep.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},kp={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Mp.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var i=al.computeOrientation(this._s0,this._s1,this._s2),r=i===al.CLOCKWISE&&this._side===Ic.LEFT||i===al.COUNTERCLOCKWISE&&this._side===Ic.RIGHT;0===i?this.addCollinear(e):r?this.addOutsideTurn(i,e):this.addInsideTurn(i,e)},Mp.prototype.addLineEndCap=function(t,e){var i=new fp(t,e),r=new fp;this.computeOffsetSegment(i,Ic.LEFT,this._distance,r);var n=new fp;this.computeOffsetSegment(i,Ic.RIGHT,this._distance,n);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case Ep.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,al.CLOCKWISE,this._distance),this._segList.addPt(n.p1);break;case Ep.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(n.p1);break;case Ep.CAP_SQUARE:var u=new Eu;u.x=Math.abs(this._distance)*Math.cos(s),u.y=Math.abs(this._distance)*Math.sin(s);var l=new Eu(r.p1.x+u.x,r.p1.y+u.y),c=new Eu(n.p1.x+u.x,n.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(c)}},Mp.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Mp.prototype.addMitreJoin=function(t,e,i,r){var n=!0,o=null;try{o=ju.intersection(e.p0,e.p1,i.p0,i.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(n=!1)}catch(t){if(!(t instanceof Vu))throw t;o=new Eu(0,0),n=!1}n?this._segList.addPt(o):this.addLimitedMitreJoin(e,i,r,this._bufParams.getMitreLimit())},Mp.prototype.addFilletCorner=function(t,e,i,r,n){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),u=i.x-t.x,l=i.y-t.y,c=Math.atan2(l,u);r===al.CLOCKWISE?s<=c&&(s+=2*Math.PI):s>=c&&(s-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,s,c,r,n),this._segList.addPt(i)},Mp.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Mp.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Ep.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Ep.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Mp.prototype.createSquare=function(t){this._segList.addPt(new Eu(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new Eu(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new Eu(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new Eu(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Mp.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Mp.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Mp.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Mp.prototype.initSideSegments=function(t,e,i){this._s1=t,this._s2=e,this._side=i,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,i,this._distance,this._offset1)},Mp.prototype.addLimitedMitreJoin=function(t,e,i,r){var n=this._seg0.p1,o=Tp.angle(n,this._seg0.p0),a=Tp.angleBetweenOriented(this._seg0.p0,n,this._seg1.p1)/2,s=Tp.normalize(o+a),u=Tp.normalize(s+Math.PI),l=r*i,c=i-l*Math.abs(Math.sin(a)),p=n.x+l*Math.cos(u),h=n.y+l*Math.sin(u),d=new Eu(p,h),f=new fp(n,d),_=f.pointAlongOffset(1,c),g=f.pointAlongOffset(1,-c);this._side===Ic.LEFT?(this._segList.addPt(_),this._segList.addPt(g)):(this._segList.addPt(g),this._segList.addPt(_))},Mp.prototype.computeOffsetSegment=function(t,e,i,r){var n=e===Ic.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),u=n*i*o/s,l=n*i*a/s;r.p0.x=t.p0.x-l,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-l,r.p1.y=t.p1.y+u},Mp.prototype.addFilletArc=function(t,e,i,r,n){var o=r===al.CLOCKWISE?-1:1,a=Math.abs(e-i),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var u=a/s,l=0,c=new Eu;l<a;){var p=e+o*l;c.x=t.x+n*Math.cos(p),c.y=t.y+n*Math.sin(p),this._segList.addPt(c),l+=u}},Mp.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Mp.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var i=new Eu((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i);var r=new Eu((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Mp.prototype.createCircle=function(t){var e=new Eu(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Mp.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Mp.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Cp,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Mp.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Mp.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Ep.JOIN_BEVEL||this._bufParams.getJoinStyle()===Ep.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,al.CLOCKWISE,this._distance))},Mp.prototype.closeRing=function(){this._segList.closeRing()},Mp.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Mp.prototype.interfaces_=function(){return[]},Mp.prototype.getClass=function(){return Mp},kp.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},kp.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},kp.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},kp.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Mp,kp);var Rp=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Rp.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var i=e<0,r=Math.abs(e),n=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],n):this.computeOffsetCurve(t,i,n);var o=n.getCoordinates();return i&&Al.reverse(o),o},Rp.prototype.computeSingleSidedBufferCurve=function(t,e,i){var r=this.simplifyTolerance(this._distance);if(e){i.addSegments(t,!0);var n=Ip.simplify(t,-r),o=n.length-1;i.initSideSegments(n[o],n[o-1],Ic.LEFT),i.addFirstSegment();for(var a=o-2;a>=0;a--)i.addNextSegment(n[a],!0)}else{i.addSegments(t,!1);var s=Ip.simplify(t,r),u=s.length-1;i.initSideSegments(s[0],s[1],Ic.LEFT),i.addFirstSegment();for(var l=2;l<=u;l++)i.addNextSegment(s[l],!0)}i.addLastSegment(),i.closeRing()},Rp.prototype.computeRingBufferCurve=function(t,e,i){var r=this.simplifyTolerance(this._distance);e===Ic.RIGHT&&(r=-r);var n=Ip.simplify(t,r),o=n.length-1;i.initSideSegments(n[o-1],n[0],e);for(var a=1;a<=o;a++){var s=1!==a;i.addNextSegment(n[a],s)}i.closeRing()},Rp.prototype.computeLineBufferCurve=function(t,e){var i=this.simplifyTolerance(this._distance),r=Ip.simplify(t,i),n=r.length-1;e.initSideSegments(r[0],r[1],Ic.LEFT);for(var o=2;o<=n;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[n-1],r[n]);var a=Ip.simplify(t,-i),s=a.length-1;e.initSideSegments(a[s],a[s-1],Ic.LEFT);for(var u=s-2;u>=0;u--)e.addNextSegment(a[u],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},Rp.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Ep.CAP_ROUND:e.createCircle(t);break;case Ep.CAP_SQUARE:e.createSquare(t)}},Rp.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var i=Math.abs(e),r=this.getSegGen(i);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var n=e<0;this.computeSingleSidedBufferCurve(t,n,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},Rp.prototype.getBufferParameters=function(){return this._bufParams},Rp.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Rp.prototype.getRingCurve=function(t,e,i){if(this._distance=i,t.length<=2)return this.getLineCurve(t,i);if(0===i)return Rp.copyCoordinates(t);var r=this.getSegGen(i);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},Rp.prototype.computeOffsetCurve=function(t,e,i){var r=this.simplifyTolerance(this._distance);if(e){var n=Ip.simplify(t,-r),o=n.length-1;i.initSideSegments(n[o],n[o-1],Ic.LEFT),i.addFirstSegment();for(var a=o-2;a>=0;a--)i.addNextSegment(n[a],!0)}else{var s=Ip.simplify(t,r),u=s.length-1;i.initSideSegments(s[0],s[1],Ic.LEFT),i.addFirstSegment();for(var l=2;l<=u;l++)i.addNextSegment(s[l],!0)}i.addLastSegment()},Rp.prototype.getSegGen=function(t){return new Mp(this._precisionModel,this._bufParams,t)},Rp.prototype.interfaces_=function(){return[]},Rp.prototype.getClass=function(){return Rp},Rp.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),i=0;i<e.length;i++)e[i]=new Eu(t[i]);return e};var Np=function(){this._subgraphs=null,this._seg=new fp,this._cga=new al;var t=arguments[0];this._subgraphs=t},Dp={DepthSegment:{configurable:!0}};Np.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new El,i=this._subgraphs.iterator();i.hasNext();){var r=i.next(),n=r.getEnvelope();t.y<n.getMinY()||t.y>n.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(Tu(arguments[2],wl)&&arguments[0]instanceof Eu&&arguments[1]instanceof Vc){for(var o=arguments[0],a=arguments[1],s=arguments[2],u=a.getEdge().getCoordinates(),l=0;l<u.length-1;l++)if(this._seg.p0=u[l],this._seg.p1=u[l+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||al.computeOrientation(this._seg.p0,this._seg.p1,o)===al.RIGHT)){var c=a.getDepth(Ic.LEFT);this._seg.p0.equals(u[l])||(c=a.getDepth(Ic.RIGHT));var p=new Op(this._seg,c);s.add(p)}}else if(Tu(arguments[2],wl)&&arguments[0]instanceof Eu&&Tu(arguments[1],wl))for(var h=arguments[0],d=arguments[2],f=arguments[1].iterator();f.hasNext();){var _=f.next();_.isForward()&&this.findStabbedSegments(h,_,d)}},Np.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:$c.min(e)._leftDepth},Np.prototype.interfaces_=function(){return[]},Np.prototype.getClass=function(){return Np},Dp.DepthSegment.get=function(){return Op},Object.defineProperties(Np,Dp);var Op=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new fp(t),this._leftDepth=e};Op.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var i=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==i||0!=(i=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?i:this._upwardSeg.compareTo(e._upwardSeg)},Op.prototype.compareX=function(t,e){var i=t.p0.compareTo(e.p0);return 0!==i?i:t.p1.compareTo(e.p1)},Op.prototype.toString=function(){return this._upwardSeg.toString()},Op.prototype.interfaces_=function(){return[bu]},Op.prototype.getClass=function(){return Op};var zp=function(t,e,i){this.p0=t||null,this.p1=e||null,this.p2=i||null};zp.prototype.area=function(){return zp.area(this.p0,this.p1,this.p2)},zp.prototype.signedArea=function(){return zp.signedArea(this.p0,this.p1,this.p2)},zp.prototype.interpolateZ=function(t){if(null===t)throw new mu("Supplied point is null.");return zp.interpolateZ(t,this.p0,this.p1,this.p2)},zp.prototype.longestSideLength=function(){return zp.longestSideLength(this.p0,this.p1,this.p2)},zp.prototype.isAcute=function(){return zp.isAcute(this.p0,this.p1,this.p2)},zp.prototype.circumcentre=function(){return zp.circumcentre(this.p0,this.p1,this.p2)},zp.prototype.area3D=function(){return zp.area3D(this.p0,this.p1,this.p2)},zp.prototype.centroid=function(){return zp.centroid(this.p0,this.p1,this.p2)},zp.prototype.inCentre=function(){return zp.inCentre(this.p0,this.p1,this.p2)},zp.prototype.interfaces_=function(){return[]},zp.prototype.getClass=function(){return zp},zp.area=function(t,e,i){return Math.abs(((i.x-t.x)*(e.y-t.y)-(e.x-t.x)*(i.y-t.y))/2)},zp.signedArea=function(t,e,i){return((i.x-t.x)*(e.y-t.y)-(e.x-t.x)*(i.y-t.y))/2},zp.det=function(t,e,i,r){return t*r-e*i},zp.interpolateZ=function(t,e,i,r){var n=e.x,o=e.y,a=i.x-n,s=r.x-n,u=i.y-o,l=r.y-o,c=a*l-s*u,p=t.x-n,h=t.y-o,d=(l*p-s*h)/c,f=(-u*p+a*h)/c;return e.z+d*(i.z-e.z)+f*(r.z-e.z)},zp.longestSideLength=function(t,e,i){var r=t.distance(e),n=e.distance(i),o=i.distance(t),a=r;return n>a&&(a=n),o>a&&(a=o),a},zp.isAcute=function(t,e,i){return!!Tp.isAcute(t,e,i)&&!!Tp.isAcute(e,i,t)&&!!Tp.isAcute(i,t,e)},zp.circumcentre=function(t,e,i){var r=i.x,n=i.y,o=t.x-r,a=t.y-n,s=e.x-r,u=e.y-n,l=2*zp.det(o,a,s,u),c=zp.det(a,o*o+a*a,u,s*s+u*u),p=zp.det(o,o*o+a*a,s,s*s+u*u);return new Eu(r-c/l,n+p/l)},zp.perpendicularBisector=function(t,e){var i=e.x-t.x,r=e.y-t.y,n=new ju(t.x+i/2,t.y+r/2,1),o=new ju(t.x-r+i/2,t.y+i+r/2,1);return new ju(n,o)},zp.angleBisector=function(t,e,i){var r=e.distance(t),n=r/(r+e.distance(i)),o=i.x-t.x,a=i.y-t.y;return new Eu(t.x+n*o,t.y+n*a)},zp.area3D=function(t,e,i){var r=e.x-t.x,n=e.y-t.y,o=e.z-t.z,a=i.x-t.x,s=i.y-t.y,u=i.z-t.z,l=n*u-o*s,c=o*a-r*u,p=r*s-n*a,h=l*l+c*c+p*p;return Math.sqrt(h)/2},zp.centroid=function(t,e,i){var r=(t.x+e.x+i.x)/3,n=(t.y+e.y+i.y)/3;return new Eu(r,n)},zp.inCentre=function(t,e,i){var r=e.distance(i),n=t.distance(i),o=t.distance(e),a=r+n+o,s=(r*t.x+n*e.x+o*i.x)/a,u=(r*t.y+n*e.y+o*i.y)/a;return new Eu(s,u)};var Fp=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new El;var t=arguments[0],e=arguments[1],i=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=i};Fp.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),i=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(i,Cu.EXTERIOR,Cu.INTERIOR)},Fp.prototype.addPolygon=function(t){var e=this._distance,i=Ic.LEFT;this._distance<0&&(e=-this._distance,i=Ic.RIGHT);var r=t.getExteriorRing(),n=Al.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&n.length<3)return null;this.addPolygonRing(n,e,i,Cu.EXTERIOR,Cu.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=Al.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,e,Ic.opposite(i),Cu.INTERIOR,Cu.EXTERIOR)}},Fp.prototype.isTriangleErodedCompletely=function(t,e){var i=new zp(t[0],t[1],t[2]),r=i.inCentre();return al.distancePointLine(r,i.p0,i.p1)<Math.abs(e)},Fp.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Al.removeRepeatedPoints(t.getCoordinates()),i=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(i,Cu.EXTERIOR,Cu.INTERIOR)},Fp.prototype.addCurve=function(t,e,i){if(null===t||t.length<2)return null;var r=new dp(t,new kc(0,Cu.BOUNDARY,e,i));this._curveList.add(r)},Fp.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Fp.prototype.addPolygonRing=function(t,e,i,r,n){if(0===e&&t.length<ec.MINIMUM_VALID_SIZE)return null;var o=r,a=n;t.length>=ec.MINIMUM_VALID_SIZE&&al.isCCW(t)&&(o=n,a=r,i=Ic.opposite(i));var s=this._curveBuilder.getRingCurve(t,i,e);this.addCurve(s,o,a)},Fp.prototype.add=function(t){if(t.isEmpty())return null;t instanceof $l?this.addPolygon(t):t instanceof Hl?this.addLineString(t):t instanceof Ql?this.addPoint(t):(t instanceof tc||t instanceof Gl||t instanceof ic||t instanceof Vl)&&this.addCollection(t)},Fp.prototype.isErodedCompletely=function(t,e){var i=t.getCoordinates();if(i.length<4)return e<0;if(4===i.length)return this.isTriangleErodedCompletely(i,e);var r=t.getEnvelopeInternal(),n=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>n},Fp.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var i=t.getGeometryN(e);this.add(i)}},Fp.prototype.interfaces_=function(){return[]},Fp.prototype.getClass=function(){return Fp};var Bp=function(){};Bp.prototype.locate=function(t){},Bp.prototype.interfaces_=function(){return[]},Bp.prototype.getClass=function(){return Bp};var qp=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};qp.prototype.next=function(){if(this._atStart)return this._atStart=!1,qp.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Ln;var t=this._parent.getGeometryN(this._index++);return t instanceof Vl?(this._subcollectionIterator=new qp(t),this._subcollectionIterator.next()):t},qp.prototype.remove=function(){throw new Error(this.getClass().getName())},qp.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},qp.prototype.interfaces_=function(){return[xl]},qp.prototype.getClass=function(){return qp},qp.isAtomic=function(t){return!(t instanceof Vl)};var Up=function(){this._geom=null;var t=arguments[0];this._geom=t};Up.prototype.locate=function(t){return Up.locate(t,this._geom)},Up.prototype.interfaces_=function(){return[Bp]},Up.prototype.getClass=function(){return Up},Up.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&al.isPointInRing(t,e.getCoordinates())},Up.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var i=e.getExteriorRing();if(!Up.isPointInRing(t,i))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var n=e.getInteriorRingN(r);if(Up.isPointInRing(t,n))return!1}return!0},Up.containsPoint=function(t,e){if(e instanceof $l)return Up.containsPointInPolygon(t,e);if(e instanceof Vl)for(var i=new qp(e);i.hasNext();){var r=i.next();if(r!==e&&Up.containsPoint(t,r))return!0}return!1},Up.locate=function(t,e){return e.isEmpty()?Cu.EXTERIOR:Up.containsPoint(t,e)?Cu.INTERIOR:Cu.EXTERIOR};var Vp=function(){this._edgeMap=new Fn,this._edgeList=null,this._ptInAreaLocation=[Cu.NONE,Cu.NONE]};Vp.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),i=e-1;return 0===e&&(i=this._edgeList.size()-1),this._edgeList.get(i)},Vp.prototype.propagateSideLabels=function(t){for(var e=Cu.NONE,i=this.iterator();i.hasNext();){var r=i.next().getLabel();r.isArea(t)&&r.getLocation(t,Ic.LEFT)!==Cu.NONE&&(e=r.getLocation(t,Ic.LEFT))}if(e===Cu.NONE)return null;for(var n=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,Ic.ON)===Cu.NONE&&s.setLocation(t,Ic.ON,n),s.isArea(t)){var u=s.getLocation(t,Ic.LEFT),l=s.getLocation(t,Ic.RIGHT);if(l!==Cu.NONE){if(l!==n)throw new Pc("side location conflict",a.getCoordinate());u===Cu.NONE&&tl.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),n=u}else tl.isTrue(s.getLocation(t,Ic.LEFT)===Cu.NONE,"found single null side"),s.setLocation(t,Ic.RIGHT,n),s.setLocation(t,Ic.LEFT,n)}}},Vp.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Vp.prototype.print=function(t){Gu.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},Vp.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Vp.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var i=e.size()-1,r=e.get(i).getLabel().getLocation(t,Ic.LEFT);tl.isTrue(r!==Cu.NONE,"Found unlabelled area edge");for(var n=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();tl.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,Ic.LEFT),u=a.getLocation(t,Ic.RIGHT);if(s===u)return!1;if(u!==n)return!1;n=s}return!0},Vp.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},Vp.prototype.iterator=function(){return this.getEdges().iterator()},Vp.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new El(this._edgeMap.values())),this._edgeList},Vp.prototype.getLocation=function(t,e,i){return this._ptInAreaLocation[t]===Cu.NONE&&(this._ptInAreaLocation[t]=Up.locate(e,i[t].getGeometry())),this._ptInAreaLocation[t]},Vp.prototype.toString=function(){var t=new ku;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var i=e.next();t.append(i),t.append("\n")}return t.toString()},Vp.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Vp.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],i=this.iterator();i.hasNext();)for(var r=i.next().getLabel(),n=0;n<2;n++)r.isLine(n)&&r.getLocation(n)===Cu.BOUNDARY&&(e[n]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),u=0;u<2;u++)if(s.isAnyNull(u)){var l=Cu.NONE;if(e[u])l=Cu.EXTERIOR;else{var c=a.getCoordinate();l=this.getLocation(u,c,t)}s.setAllLocationsIfNull(u,l)}},Vp.prototype.getDegree=function(){return this._edgeMap.size()},Vp.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Vp.prototype.interfaces_=function(){return[]},Vp.prototype.getClass=function(){return Vp};var Gp=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,i=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var n=this._resultAreaEdgeList.get(r),o=n.getSym();if(n.getLabel().isArea())switch(null===t&&n.isInResult()&&(t=n),i){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,i=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!n.isInResult())continue;e.setNext(n),i=this._SCANNING_FOR_INCOMING}}if(i===this._LINKING_TO_OUTGOING){if(null===t)throw new Pc("no outgoing dirEdge found",this.getCoordinate());tl.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var i=t.get(0);if(1===e)return i;var r=t.get(e-1),n=i.getQuadrant(),o=r.getQuadrant();return Bc.isNorthern(n)&&Bc.isNorthern(o)?i:Bc.isNorthern(n)||Bc.isNorthern(o)?0!==i.getDy()?i:0!==r.getDy()?r:(tl.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){Gu.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var i=e.next();t.print("out "),i.print(t),t.println(),t.print("in "),i.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new El;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var i=e.next().getLabel();i.setAllLocationsIfNull(0,t.getLocation(0)),i.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,i=this._edgeList.size()-1;i>=0;i--){var r=this._edgeList.get(i),n=r.getSym();null===e&&(e=n),null!==t&&n.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),i=t.getDepth(Ic.LEFT),r=t.getDepth(Ic.RIGHT),n=this.computeDepths(e+1,this._edgeList.size(),i);if(this.computeDepths(0,e,n)!==r)throw new Pc("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],a=arguments[2],s=arguments[0];s<o;s++){var u=this._edgeList.get(s);u.setEdgeDepths(Ic.RIGHT,a),a=u.getDepth(Ic.LEFT)}return a}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,i=null,r=this._SCANNING_FOR_INCOMING,n=this._resultAreaEdgeList.size()-1;n>=0;n--){var o=this._resultAreaEdgeList.get(n),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;i=a,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;i.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(tl.isTrue(null!==e,"found null for first outgoing dirEdge"),tl.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),i.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var i=arguments[0],r=0,n=this.iterator();n.hasNext();)n.next().getEdgeRing()===i&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=Cu.NONE,e=this.iterator();e.hasNext();){var i=e.next(),r=i.getSym();if(!i.isLineEdge()){if(i.isInResult()){t=Cu.INTERIOR;break}if(r.isInResult()){t=Cu.EXTERIOR;break}}}if(t===Cu.NONE)return null;for(var n=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(n===Cu.INTERIOR):(a.isInResult()&&(n=Cu.EXTERIOR),s.isInResult()&&(n=Cu.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new kc(Cu.NONE);for(var i=this.iterator();i.hasNext();)for(var r=i.next().getEdge().getLabel(),n=0;n<2;n++){var o=r.getLocation(n);o!==Cu.INTERIOR&&o!==Cu.BOUNDARY||this._label.setLocation(n,Cu.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Vp),jp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new zc(t,new Gp)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Gc),Kp=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Kp.prototype.compareTo=function(t){var e=t;return Kp.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Kp.prototype.interfaces_=function(){return[bu]},Kp.prototype.getClass=function(){return Kp},Kp.orientation=function(t){return 1===Al.increasingDirection(t)},Kp.compareOriented=function(t,e,i,r){for(var n=e?1:-1,o=r?1:-1,a=e?t.length:-1,s=r?i.length:-1,u=e?0:t.length-1,l=r?0:i.length-1;;){var c=t[u].compareTo(i[l]);if(0!==c)return c;var p=(u+=n)===a,h=(l+=o)===s;if(p&&!h)return-1;if(!p&&h)return 1;if(p&&h)return 0}};var Xp=function(){this._edges=new El,this._ocaMap=new Fn};Xp.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var i=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=i.getCoordinates(),n=0;n<r.length;n++)n>0&&t.print(","),t.print(r[n].x+" "+r[n].y);t.println(")")}t.print(")  ")},Xp.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Xp.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Xp.prototype.iterator=function(){return this._edges.iterator()},Xp.prototype.getEdges=function(){return this._edges},Xp.prototype.get=function(t){return this._edges.get(t)},Xp.prototype.findEqualEdge=function(t){var e=new Kp(t.getCoordinates());return this._ocaMap.get(e)},Xp.prototype.add=function(t){this._edges.add(t);var e=new Kp(t.getCoordinates());this._ocaMap.put(e,t)},Xp.prototype.interfaces_=function(){return[]},Xp.prototype.getClass=function(){return Xp};var Zp=function(){};Zp.prototype.processIntersections=function(t,e,i,r){},Zp.prototype.isDone=function(){},Zp.prototype.interfaces_=function(){return[]},Zp.prototype.getClass=function(){return Zp};var Yp=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Yp.prototype.isTrivialIntersection=function(t,e,i,r){if(t===i&&1===this._li.getIntersectionNum()){if(Yp.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var n=t.size()-1;if(0===e&&r===n||0===r&&e===n)return!0}}return!1},Yp.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Yp.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Yp.prototype.getLineIntersector=function(){return this._li},Yp.prototype.hasProperIntersection=function(){return this._hasProper},Yp.prototype.processIntersections=function(t,e,i,r){if(t===i&&e===r)return null;this.numTests++;var n=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=i.getCoordinates()[r],s=i.getCoordinates()[r+1];this._li.computeIntersection(n,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,i,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),i.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Yp.prototype.hasIntersection=function(){return this._hasIntersection},Yp.prototype.isDone=function(){return!1},Yp.prototype.hasInteriorIntersection=function(){return this._hasInterior},Yp.prototype.interfaces_=function(){return[Zp]},Yp.prototype.getClass=function(){return Yp},Yp.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Hp=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],i=arguments[2];this.coord=new Eu(t),this.segmentIndex=e,this.dist=i};Hp.prototype.getSegmentIndex=function(){return this.segmentIndex},Hp.prototype.getCoordinate=function(){return this.coord},Hp.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Hp.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Hp.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Hp.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Hp.prototype.getDistance=function(){return this.dist},Hp.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Hp.prototype.interfaces_=function(){return[bu]},Hp.prototype.getClass=function(){return Hp};var Wp=function(){this._nodeMap=new Fn,this.edge=null;var t=arguments[0];this.edge=t};Wp.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Wp.prototype.iterator=function(){return this._nodeMap.values().iterator()},Wp.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),i=e.next();e.hasNext();){var r=e.next(),n=this.createSplitEdge(i,r);t.add(n),i=r}},Wp.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Wp.prototype.createSplitEdge=function(t,e){var i=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],n=e.dist>0||!e.coord.equals2D(r);n||i--;var o=new Array(i).fill(null),a=0;o[a++]=new Eu(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return n&&(o[a]=e.coord),new eh(o,new kc(this.edge._label))},Wp.prototype.add=function(t,e,i){var r=new Hp(t,e,i),n=this._nodeMap.get(r);return null!==n?n:(this._nodeMap.put(r,r),r)},Wp.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Wp.prototype.interfaces_=function(){return[]},Wp.prototype.getClass=function(){return Wp};var Qp=function(){};Qp.prototype.getChainStartIndices=function(t){var e=0,i=new El;i.add(new Ru(e));do{var r=this.findChainEnd(t,e);i.add(new Ru(r)),e=r}while(e<t.length-1);return Qp.toIntArray(i)},Qp.prototype.findChainEnd=function(t,e){for(var i=Bc.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&Bc.quadrant(t[r-1],t[r])===i;)r++;return r-1},Qp.prototype.interfaces_=function(){return[]},Qp.prototype.getClass=function(){return Qp},Qp.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),i=0;i<e.length;i++)e[i]=t.get(i).intValue();return e};var Jp=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Ku,this.env2=new Ku;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Qp;this.startIndex=e.getChainStartIndices(this.pts)};Jp.prototype.getCoordinates=function(){return this.pts},Jp.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,i=this.pts[this.startIndex[t+1]].x;return e>i?e:i},Jp.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,i=this.pts[this.startIndex[t+1]].x;return e<i?e:i},Jp.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],i=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[i],e.startIndex[i+1],r)}else if(6===arguments.length){var n=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=arguments[4],l=arguments[5],c=this.pts[n],p=this.pts[o],h=a.pts[s],d=a.pts[u];if(o-n==1&&u-s==1)return l.addIntersections(this.e,n,a.e,s),null;if(this.env1.init(c,p),this.env2.init(h,d),!this.env1.intersects(this.env2))return null;var f=Math.trunc((n+o)/2),_=Math.trunc((s+u)/2);n<f&&(s<_&&this.computeIntersectsForChain(n,f,a,s,_,l),_<u&&this.computeIntersectsForChain(n,f,a,_,u,l)),f<o&&(s<_&&this.computeIntersectsForChain(f,o,a,s,_,l),_<u&&this.computeIntersectsForChain(f,o,a,_,u,l))}},Jp.prototype.getStartIndexes=function(){return this.startIndex},Jp.prototype.computeIntersects=function(t,e){for(var i=0;i<this.startIndex.length-1;i++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(i,t,r,e)},Jp.prototype.interfaces_=function(){return[]},Jp.prototype.getClass=function(){return Jp};var $p=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var i=0;i<3;i++)this._depth[e][i]=t.NULL_VALUE},th={NULL_VALUE:{configurable:!0}};$p.prototype.getDepth=function(t,e){return this._depth[t][e]},$p.prototype.setDepth=function(t,e,i){this._depth[t][e]=i},$p.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==$p.NULL_VALUE)return!1;return!0}if(1===arguments.length){var i=arguments[0];return this._depth[i][1]===$p.NULL_VALUE}if(2===arguments.length){var r=arguments[0],n=arguments[1];return this._depth[r][n]===$p.NULL_VALUE}},$p.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var i=1;i<3;i++){var r=0;this._depth[t][i]>e&&(r=1),this._depth[t][i]=r}}},$p.prototype.getDelta=function(t){return this._depth[t][Ic.RIGHT]-this._depth[t][Ic.LEFT]},$p.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?Cu.EXTERIOR:Cu.INTERIOR},$p.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},$p.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var i=1;i<3;i++){var r=t.getLocation(e,i);r!==Cu.EXTERIOR&&r!==Cu.INTERIOR||(this.isNull(e,i)?this._depth[e][i]=$p.depthAtLocation(r):this._depth[e][i]+=$p.depthAtLocation(r))}else if(3===arguments.length){var n=arguments[0],o=arguments[1];arguments[2]===Cu.INTERIOR&&this._depth[n][o]++}},$p.prototype.interfaces_=function(){return[]},$p.prototype.getClass=function(){return $p},$p.depthAtLocation=function(t){return t===Cu.EXTERIOR?0:t===Cu.INTERIOR?1:$p.NULL_VALUE},th.NULL_VALUE.get=function(){return-1},Object.defineProperties($p,th);var eh=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Wp(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new $p,this._depthDelta=0,1===arguments.length){var i=arguments[0];e.call(this,i,null)}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this.pts=r,this._label=n}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,kc.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var i=t;if(this.pts.length!==i.pts.length)return!1;for(var r=!0,n=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(i.pts[a])||(r=!1),this.pts[a].equals2D(i.pts[--o])||(n=!1),!r&&!n)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Jp(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new Ku;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,i,r){var n=new Eu(t.getIntersection(r)),o=e,a=t.getEdgeDistance(i,r),s=o+1;if(s<this.pts.length){var u=this.pts[s];n.equals2D(u)&&(o=s,a=0)}this.eiList.add(n,o,a)},e.prototype.toString=function(){var t=new ku;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,i){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,i,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],i=arguments[1];i.setAtLeastIfValid(e.getLocation(0,Ic.ON),e.getLocation(1,Ic.ON),1),e.isArea()&&(i.setAtLeastIfValid(e.getLocation(0,Ic.LEFT),e.getLocation(1,Ic.LEFT),2),i.setAtLeastIfValid(e.getLocation(0,Ic.RIGHT),e.getLocation(1,Ic.RIGHT),2))},e}(Oc),ih=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Xp,this._bufParams=t||null};ih.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},ih.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var i=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new kc(t.getLabel())).flip(),i.merge(r);var n=ih.depthDelta(r),o=e.getDepthDelta()+n;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(ih.depthDelta(t.getLabel()))},ih.prototype.buildSubgraphs=function(t,e){for(var i=new El,r=t.iterator();r.hasNext();){var n=r.next(),o=n.getRightmostCoordinate(),a=new Np(i).getDepth(o);n.computeDepth(a),n.findResultEdges(),i.add(n),e.add(n.getDirectedEdges(),n.getNodes())}},ih.prototype.createSubgraphs=function(t){for(var e=new El,i=t.getNodes().iterator();i.hasNext();){var r=i.next();if(!r.isVisited()){var n=new Lc;n.create(r),e.add(n)}}return $c.sort(e,$c.reverseOrder()),e},ih.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},ih.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new xp,i=new rl;return i.setPrecisionModel(t),e.setSegmentIntersector(new Yp(i)),e},ih.prototype.buffer=function(t,e){var i=this._workingPrecisionModel;null===i&&(i=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new Rp(i,this._bufParams),n=new Fp(t,e,r).getCurves();if(n.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(n,i),this._graph=new jc(new jp),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new Kc(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},ih.prototype.computeNodedEdges=function(t,e){var i=this.getNoder(e);i.computeNodes(t);for(var r=i.getNodedSubstrings().iterator();r.hasNext();){var n=r.next(),o=n.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=n.getData(),s=new eh(n.getCoordinates(),new kc(a));this.insertUniqueEdge(s)}}},ih.prototype.setNoder=function(t){this._workingNoder=t},ih.prototype.interfaces_=function(){return[]},ih.prototype.getClass=function(){return ih},ih.depthDelta=function(t){var e=t.getLocation(0,Ic.LEFT),i=t.getLocation(0,Ic.RIGHT);return e===Cu.INTERIOR&&i===Cu.EXTERIOR?1:e===Cu.EXTERIOR&&i===Cu.INTERIOR?-1:0},ih.convertSegStrings=function(t){for(var e=new mc,i=new El;t.hasNext();){var r=t.next(),n=e.createLineString(r.getCoordinates());i.add(n)}return e.buildGeometry(i)};var rh=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var i=arguments[0],r=arguments[1],n=arguments[2],o=arguments[3];this._noder=i,this._scaleFactor=r,this._offsetX=n,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};rh.prototype.rescale=function(){if(Tu(arguments[0],vl))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var i=arguments[0],r=0;r<i.length;r++)i[r].x=i[r].x/this._scaleFactor+this._offsetX,i[r].y=i[r].y/this._scaleFactor+this._offsetY;2===i.length&&i[0].equals2D(i[1])&&Gu.out.println(i)}},rh.prototype.scale=function(){if(Tu(arguments[0],vl)){for(var t=arguments[0],e=new El,i=t.iterator();i.hasNext();){var r=i.next();e.add(new dp(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var n=arguments[0],o=new Array(n.length).fill(null),a=0;a<n.length;a++)o[a]=new Eu(Math.round((n[a].x-this._offsetX)*this._scaleFactor),Math.round((n[a].y-this._offsetY)*this._scaleFactor),n[a].z);return Al.removeRepeatedPoints(o)}},rh.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},rh.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},rh.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},rh.prototype.interfaces_=function(){return[vp]},rh.prototype.getClass=function(){return rh};var nh=function(){this._li=new rl,this._segStrings=null;var t=arguments[0];this._segStrings=t},oh={fact:{configurable:!0}};nh.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var i=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var n=r.next().getCoordinates(),o=1;o<n.length-1;o++)if(n[o].equals(i))throw new Ju("found endpt/interior pt intersection at index "+o+" :pt "+i)},nh.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),i=this._segStrings.iterator();i.hasNext();){var r=i.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var n=arguments[0],o=arguments[1],a=n.getCoordinates(),s=o.getCoordinates(),u=0;u<a.length-1;u++)for(var l=0;l<s.length-1;l++)this.checkInteriorIntersections(n,u,o,l);else if(4===arguments.length){var c=arguments[0],p=arguments[1],h=arguments[2],d=arguments[3];if(c===h&&p===d)return null;var f=c.getCoordinates()[p],_=c.getCoordinates()[p+1],g=h.getCoordinates()[d],m=h.getCoordinates()[d+1];if(this._li.computeIntersection(f,_,g,m),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,f,_)||this.hasInteriorIntersection(this._li,g,m)))throw new Ju("found non-noded intersection at "+f+"-"+_+" and "+g+"-"+m)}},nh.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},nh.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var i=arguments[0].getCoordinates(),r=0;r<i.length-2;r++)this.checkCollapse(i[r],i[r+1],i[r+2])},nh.prototype.hasInteriorIntersection=function(t,e,i){for(var r=0;r<t.getIntersectionNum();r++){var n=t.getIntersection(r);if(!n.equals(e)&&!n.equals(i))return!0}return!1},nh.prototype.checkCollapse=function(t,e,i){if(t.equals(i))throw new Ju("found non-noded collapse at "+nh.fact.createLineString([t,e,i]))},nh.prototype.interfaces_=function(){return[]},nh.prototype.getClass=function(){return nh},oh.fact.get=function(){return new mc},Object.defineProperties(nh,oh);var ah=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],i=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=i,e<=0)throw new mu("Scale factor must be non-zero");1!==e&&(this._pt=new Eu(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new Eu,this._p1Scaled=new Eu),this.initCorners(this._pt)},sh={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};ah.prototype.intersectsScaled=function(t,e){var i=Math.min(t.x,e.x),r=Math.max(t.x,e.x),n=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<i||this._minx>r||this._maxy<n||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return tl.isTrue(!(a&&s),"Found bad envelope test"),s},ah.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new Eu(this._maxx,this._maxy),this._corner[1]=new Eu(this._minx,this._maxy),this._corner[2]=new Eu(this._minx,this._miny),this._corner[3]=new Eu(this._maxx,this._miny)},ah.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},ah.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},ah.prototype.getCoordinate=function(){return this._originalPt},ah.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},ah.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=ah.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Ku(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},ah.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},ah.prototype.intersectsToleranceSquare=function(t,e){var i=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||i&&r||t.equals(this._pt)||e.equals(this._pt)))))},ah.prototype.addSnappedNode=function(t,e){var i=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(i,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},ah.prototype.interfaces_=function(){return[]},ah.prototype.getClass=function(){return ah},sh.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(ah,sh);var uh=function(){this.tempEnv1=new Ku,this.selectedSegment=new fp};uh.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}},uh.prototype.interfaces_=function(){return[]},uh.prototype.getClass=function(){return uh};var lh=function(){this._index=null;var t=arguments[0];this._index=t},ch={HotPixelSnapAction:{configurable:!0}};lh.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],i=arguments[1],r=arguments[2],n=e.getSafeEnvelope(),o=new ph(e,i,r);return this._index.query(n,{interfaces_:function(){return[Hc]},visitItem:function(t){t.select(n,o)}}),o.isNodeAdded()}},lh.prototype.interfaces_=function(){return[]},lh.prototype.getClass=function(){return lh},ch.HotPixelSnapAction.get=function(){return ph},Object.defineProperties(lh,ch);var ph=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],i=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=i,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[1],i=arguments[0].getContext();if(null!==this._parentEdge&&i===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(i,e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(uh),hh=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new El};hh.prototype.processIntersections=function(t,e,i,r){if(t===i&&e===r)return null;var n=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=i.getCoordinates()[r],s=i.getCoordinates()[r+1];if(this._li.computeIntersection(n,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),i.addIntersections(this._li,r,1)}},hh.prototype.isDone=function(){return!1},hh.prototype.getInteriorIntersections=function(){return this._interiorIntersections},hh.prototype.interfaces_=function(){return[Zp]},hh.prototype.getClass=function(){return hh};var dh=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new rl,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};dh.prototype.checkCorrectness=function(t){var e=dp.getNodedSubstrings(t),i=new nh(e);try{i.checkValid()}catch(t){if(!(t instanceof Uu))throw t;t.printStackTrace()}},dh.prototype.getNodedSubstrings=function(){return dp.getNodedSubstrings(this._nodedSegStrings)},dh.prototype.snapRound=function(t,e){var i=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(i),this.computeVertexSnaps(t)},dh.prototype.findInteriorIntersections=function(t,e){var i=new hh(e);return this._noder.setSegmentIntersector(i),this._noder.computeNodes(t),i.getInteriorIntersections()},dh.prototype.computeVertexSnaps=function(){if(Tu(arguments[0],vl))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof dp)for(var i=arguments[0],r=i.getCoordinates(),n=0;n<r.length;n++){var o=new ah(r[n],this._scaleFactor,this._li);this._pointSnapper.snap(o,i,n)&&i.addIntersection(r[n],n)}},dh.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new xp,this._pointSnapper=new lh(this._noder.getIndex()),this.snapRound(t,this._li)},dh.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var i=e.next(),r=new ah(i,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},dh.prototype.interfaces_=function(){return[vp]},dh.prototype.getClass=function(){return dh};var fh=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Ep,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this._argGeom=e,this._bufParams=i}},_h={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};fh.prototype.bufferFixedPrecision=function(t){var e=new rh(new dh(new dc(1)),t.getScale()),i=new ih(this._bufParams);i.setWorkingPrecisionModel(t),i.setNoder(e),this._resultGeometry=i.buffer(this._argGeom,this._distance)},fh.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=fh.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Pc))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var i=arguments[0],r=fh.precisionScaleFactor(this._argGeom,this._distance,i),n=new dc(r);this.bufferFixedPrecision(n)}},fh.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===dc.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},fh.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},fh.prototype.bufferOriginalPrecision=function(){try{var t=new ih(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Ju))throw t;this._saveException=t}},fh.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},fh.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},fh.prototype.interfaces_=function(){return[]},fh.prototype.getClass=function(){return fh},fh.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new fh(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ll&&"number"==typeof arguments[1]){var e=arguments[1],i=arguments[2],r=new fh(arguments[0]);return r.setQuadrantSegments(i),r.getResultGeometry(e)}if(arguments[2]instanceof Ep&&arguments[0]instanceof ll&&"number"==typeof arguments[1]){var n=arguments[1];return new fh(arguments[0],arguments[2]).getResultGeometry(n)}}else if(4===arguments.length){var o=arguments[1],a=arguments[2],s=arguments[3],u=new fh(arguments[0]);return u.setQuadrantSegments(a),u.setEndCapStyle(s),u.getResultGeometry(o)}},fh.precisionScaleFactor=function(t,e,i){var r=t.getEnvelopeInternal(),n=Lu.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=i-Math.trunc(Math.log(n)/Math.log(10)+1);return Math.pow(10,o)},_h.CAP_ROUND.get=function(){return Ep.CAP_ROUND},_h.CAP_BUTT.get=function(){return Ep.CAP_FLAT},_h.CAP_FLAT.get=function(){return Ep.CAP_FLAT},_h.CAP_SQUARE.get=function(){return Ep.CAP_SQUARE},_h.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(fh,_h);var gh=function(){this._pt=[new Eu,new Eu],this._distance=yu.NaN,this._isNull=!0};gh.prototype.getCoordinates=function(){return this._pt},gh.prototype.getCoordinate=function(t){return this._pt[t]},gh.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],i=arguments[1];if(this._isNull)return this.initialize(e,i),null;var r=e.distance(i);r<this._distance&&this.initialize(e,i,r)}},gh.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var i=arguments[0],r=arguments[1],n=arguments[2];this._pt[0].setCoordinate(i),this._pt[1].setCoordinate(r),this._distance=n,this._isNull=!1}},gh.prototype.getDistance=function(){return this._distance},gh.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],i=arguments[1];if(this._isNull)return this.initialize(e,i),null;var r=e.distance(i);r>this._distance&&this.initialize(e,i,r)}},gh.prototype.interfaces_=function(){return[]},gh.prototype.getClass=function(){return gh};var mh=function(){};mh.prototype.interfaces_=function(){return[]},mh.prototype.getClass=function(){return mh},mh.computeDistance=function(){if(arguments[2]instanceof gh&&arguments[0]instanceof Hl&&arguments[1]instanceof Eu)for(var t=arguments[1],e=arguments[2],i=arguments[0].getCoordinates(),r=new fp,n=0;n<i.length-1;n++){r.setCoordinates(i[n],i[n+1]);var o=r.closestPoint(t);e.setMinimum(o,t)}else if(arguments[2]instanceof gh&&arguments[0]instanceof $l&&arguments[1]instanceof Eu){var a=arguments[0],s=arguments[1],u=arguments[2];mh.computeDistance(a.getExteriorRing(),s,u);for(var l=0;l<a.getNumInteriorRing();l++)mh.computeDistance(a.getInteriorRingN(l),s,u)}else if(arguments[2]instanceof gh&&arguments[0]instanceof ll&&arguments[1]instanceof Eu){var c=arguments[0],p=arguments[1],h=arguments[2];if(c instanceof Hl)mh.computeDistance(c,p,h);else if(c instanceof $l)mh.computeDistance(c,p,h);else if(c instanceof Vl)for(var d=c,f=0;f<d.getNumGeometries();f++){var _=d.getGeometryN(f);mh.computeDistance(_,p,h)}else h.setMinimum(c.getCoordinate(),p)}else if(arguments[2]instanceof gh&&arguments[0]instanceof fp&&arguments[1]instanceof Eu){var g=arguments[1],m=arguments[2],y=arguments[0].closestPoint(g);m.setMinimum(y,g)}};var yh=function(t){this._maxPtDist=new gh,this._inputGeom=t||null},vh={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};yh.prototype.computeMaxMidpointDistance=function(t){var e=new xh(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},yh.prototype.computeMaxVertexDistance=function(t){var e=new bh(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},yh.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},yh.prototype.getDistancePoints=function(){return this._maxPtDist},yh.prototype.interfaces_=function(){return[]},yh.prototype.getClass=function(){return yh},vh.MaxPointDistanceFilter.get=function(){return bh},vh.MaxMidpointDistanceFilter.get=function(){return xh},Object.defineProperties(yh,vh);var bh=function(t){this._maxPtDist=new gh,this._minPtDist=new gh,this._geom=t||null};bh.prototype.filter=function(t){this._minPtDist.initialize(),mh.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},bh.prototype.getMaxPointDistance=function(){return this._maxPtDist},bh.prototype.interfaces_=function(){return[hl]},bh.prototype.getClass=function(){return bh};var xh=function(t){this._maxPtDist=new gh,this._minPtDist=new gh,this._geom=t||null};xh.prototype.filter=function(t,e){if(0===e)return null;var i=t.getCoordinate(e-1),r=t.getCoordinate(e),n=new Eu((i.x+r.x)/2,(i.y+r.y)/2);this._minPtDist.initialize(),mh.computeDistance(this._geom,n,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},xh.prototype.isDone=function(){return!1},xh.prototype.isGeometryChanged=function(){return!1},xh.prototype.getMaxPointDistance=function(){return this._maxPtDist},xh.prototype.interfaces_=function(){return[Ul]},xh.prototype.getClass=function(){return xh};var wh=function(t){this._comps=t||null};wh.prototype.filter=function(t){t instanceof $l&&this._comps.add(t)},wh.prototype.interfaces_=function(){return[ql]},wh.prototype.getClass=function(){return wh},wh.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return wh.getPolygons(t,new El)}if(2===arguments.length){var e=arguments[0],i=arguments[1];return e instanceof $l?i.add(e):e instanceof Vl&&e.apply(new wh(i)),i}};var Eh=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this._lines=e,this._isForcedToLineString=i}};Eh.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ec){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Hl&&this._lines.add(t)},Eh.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Eh.prototype.interfaces_=function(){return[ul]},Eh.prototype.getClass=function(){return Eh},Eh.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Eh.getLines(t))}if(2===arguments.length){var e=arguments[0],i=arguments[1];return e.getFactory().buildGeometry(Eh.getLines(e,i))}},Eh.getLines=function(){if(1===arguments.length){var t=arguments[0];return Eh.getLines(t,!1)}if(2===arguments.length){if(Tu(arguments[0],vl)&&Tu(arguments[1],vl)){for(var e=arguments[1],i=arguments[0].iterator();i.hasNext();){var r=i.next();Eh.getLines(r,e)}return e}if(arguments[0]instanceof ll&&"boolean"==typeof arguments[1]){var n=arguments[0],o=arguments[1],a=new El;return n.apply(new Eh(a,o)),a}if(arguments[0]instanceof ll&&Tu(arguments[1],vl)){var s=arguments[0],u=arguments[1];return s instanceof Hl?u.add(s):s.apply(new Eh(u)),u}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&Tu(arguments[0],vl)&&Tu(arguments[1],vl)){for(var l=arguments[1],c=arguments[2],p=arguments[0].iterator();p.hasNext();){var h=p.next();Eh.getLines(h,l,c)}return l}if("boolean"==typeof arguments[2]&&arguments[0]instanceof ll&&Tu(arguments[1],vl)){var d=arguments[1],f=arguments[2];return arguments[0].apply(new Eh(d,f)),d}}};var Sh=function(){if(this._boundaryRule=dl.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new mu("Rule must be non-null");this._boundaryRule=t}};Sh.prototype.locateInternal=function(){if(arguments[0]instanceof Eu&&arguments[1]instanceof $l){var t=arguments[0],e=arguments[1];if(e.isEmpty())return Cu.EXTERIOR;var i=e.getExteriorRing(),r=this.locateInPolygonRing(t,i);if(r===Cu.EXTERIOR)return Cu.EXTERIOR;if(r===Cu.BOUNDARY)return Cu.BOUNDARY;for(var n=0;n<e.getNumInteriorRing();n++){var o=e.getInteriorRingN(n),a=this.locateInPolygonRing(t,o);if(a===Cu.INTERIOR)return Cu.EXTERIOR;if(a===Cu.BOUNDARY)return Cu.BOUNDARY}return Cu.INTERIOR}if(arguments[0]instanceof Eu&&arguments[1]instanceof Hl){var s=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(s))return Cu.EXTERIOR;var l=u.getCoordinates();return u.isClosed()||!s.equals(l[0])&&!s.equals(l[l.length-1])?al.isOnLine(s,l)?Cu.INTERIOR:Cu.EXTERIOR:Cu.BOUNDARY}if(arguments[0]instanceof Eu&&arguments[1]instanceof Ql){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?Cu.INTERIOR:Cu.EXTERIOR}},Sh.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?al.locatePointInRing(t,e.getCoordinates()):Cu.EXTERIOR},Sh.prototype.intersects=function(t,e){return this.locate(t,e)!==Cu.EXTERIOR},Sh.prototype.updateLocationInfo=function(t){t===Cu.INTERIOR&&(this._isIn=!0),t===Cu.BOUNDARY&&this._numBoundaries++},Sh.prototype.computeLocation=function(t,e){if(e instanceof Ql&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Hl)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof $l)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Gl)for(var i=e,r=0;r<i.getNumGeometries();r++){var n=i.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,n))}else if(e instanceof ic)for(var o=e,a=0;a<o.getNumGeometries();a++){var s=o.getGeometryN(a);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof Vl)for(var u=new qp(e);u.hasNext();){var l=u.next();l!==e&&this.computeLocation(t,l)}},Sh.prototype.locate=function(t,e){return e.isEmpty()?Cu.EXTERIOR:e instanceof Hl||e instanceof $l?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?Cu.BOUNDARY:this._numBoundaries>0||this._isIn?Cu.INTERIOR:Cu.EXTERIOR)},Sh.prototype.interfaces_=function(){return[]},Sh.prototype.getClass=function(){return Sh};var Ih=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var e=arguments[0],i=arguments[1],r=arguments[2];this._component=e,this._segIndex=i,this._pt=r}},Ah={INSIDE_AREA:{configurable:!0}};Ih.prototype.isInsideArea=function(){return this._segIndex===Ih.INSIDE_AREA},Ih.prototype.getCoordinate=function(){return this._pt},Ih.prototype.getGeometryComponent=function(){return this._component},Ih.prototype.getSegmentIndex=function(){return this._segIndex},Ih.prototype.interfaces_=function(){return[]},Ih.prototype.getClass=function(){return Ih},Ah.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Ih,Ah);var Ch=function(t){this._pts=t||null};Ch.prototype.filter=function(t){t instanceof Ql&&this._pts.add(t)},Ch.prototype.interfaces_=function(){return[ql]},Ch.prototype.getClass=function(){return Ch},Ch.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Ql?$c.singletonList(t):Ch.getPoints(t,new El)}if(2===arguments.length){var e=arguments[0],i=arguments[1];return e instanceof Ql?i.add(e):e instanceof Vl&&e.apply(new Ch(i)),i}};var Ph=function(){this._locations=null;var t=arguments[0];this._locations=t};Ph.prototype.filter=function(t){(t instanceof Ql||t instanceof Hl||t instanceof $l)&&this._locations.add(new Ih(t,0,t.getCoordinate()))},Ph.prototype.interfaces_=function(){return[ql]},Ph.prototype.getClass=function(){return Ph},Ph.getLocations=function(t){var e=new El;return t.apply(new Ph(e)),e};var Th=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Sh,this._minDistanceLocation=null,this._minDistance=yu.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var i=arguments[0],r=arguments[1],n=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=i,this._geom[1]=r,this._terminateDistance=n}};Th.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],i=arguments[1],r=1-e,n=wh.getPolygons(this._geom[e]);if(n.size()>0){var o=Ph.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,n,i),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=i[0],this._minDistanceLocation[e]=i[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&Tu(arguments[0],wl)&&Tu(arguments[1],wl)){for(var a=arguments[0],s=arguments[1],u=arguments[2],l=0;l<a.size();l++)for(var c=a.get(l),p=0;p<s.size();p++)if(this.computeContainmentDistance(c,s.get(p),u),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Ih&&arguments[1]instanceof $l){var h=arguments[0],d=arguments[1],f=arguments[2],_=h.getCoordinate();if(Cu.EXTERIOR!==this._ptLocator.locate(_,d))return this._minDistance=0,f[0]=h,f[1]=new Ih(d,_),null}},Th.prototype.computeMinDistanceLinesPoints=function(t,e,i){for(var r=0;r<t.size();r++)for(var n=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(n,a,i),this._minDistance<=this._terminateDistance)return null}},Th.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Eh.getLines(this._geom[0]),i=Eh.getLines(this._geom[1]),r=Ch.getPoints(this._geom[0]),n=Ch.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(i,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,n,t),void this.updateMinDistance(t,!1))))},Th.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Th.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Th.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Th.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Hl&&arguments[1]instanceof Ql){var t=arguments[0],e=arguments[1],i=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),n=e.getCoordinate(),o=0;o<r.length-1;o++){var a=al.distancePointLine(n,r[o],r[o+1]);if(a<this._minDistance){this._minDistance=a;var s=new fp(r[o],r[o+1]).closestPoint(n);i[0]=new Ih(t,o,s),i[1]=new Ih(e,0,n)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Hl&&arguments[1]instanceof Hl){var u=arguments[0],l=arguments[1],c=arguments[2];if(u.getEnvelopeInternal().distance(l.getEnvelopeInternal())>this._minDistance)return null;for(var p=u.getCoordinates(),h=l.getCoordinates(),d=0;d<p.length-1;d++)for(var f=0;f<h.length-1;f++){var _=al.distanceLineLine(p[d],p[d+1],h[f],h[f+1]);if(_<this._minDistance){this._minDistance=_;var g=new fp(p[d],p[d+1]),m=new fp(h[f],h[f+1]),y=g.closestPoints(m);c[0]=new Ih(u,d,y[0]),c[1]=new Ih(l,f,y[1])}if(this._minDistance<=this._terminateDistance)return null}}},Th.prototype.computeMinDistancePoints=function(t,e,i){for(var r=0;r<t.size();r++)for(var n=t.get(r),o=0;o<e.size();o++){var a=e.get(o),s=n.getCoordinate().distance(a.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,i[0]=new Ih(n,0,n.getCoordinate()),i[1]=new Ih(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Th.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new mu("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Th.prototype.computeMinDistanceLines=function(t,e,i){for(var r=0;r<t.size();r++)for(var n=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(n,a,i),this._minDistance<=this._terminateDistance)return null}},Th.prototype.interfaces_=function(){return[]},Th.prototype.getClass=function(){return Th},Th.distance=function(t,e){return new Th(t,e).distance()},Th.isWithinDistance=function(t,e,i){return new Th(t,e,i).distance()<=i},Th.nearestPoints=function(t,e){return new Th(t,e).nearestPoints()};var Lh=function(){this._pt=[new Eu,new Eu],this._distance=yu.NaN,this._isNull=!0};Lh.prototype.getCoordinates=function(){return this._pt},Lh.prototype.getCoordinate=function(t){return this._pt[t]},Lh.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],i=arguments[1];if(this._isNull)return this.initialize(e,i),null;var r=e.distance(i);r<this._distance&&this.initialize(e,i,r)}},Lh.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var i=arguments[0],r=arguments[1],n=arguments[2];this._pt[0].setCoordinate(i),this._pt[1].setCoordinate(r),this._distance=n,this._isNull=!1}},Lh.prototype.toString=function(){return Qu.toLineString(this._pt[0],this._pt[1])},Lh.prototype.getDistance=function(){return this._distance},Lh.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],i=arguments[1];if(this._isNull)return this.initialize(e,i),null;var r=e.distance(i);r>this._distance&&this.initialize(e,i,r)}},Lh.prototype.interfaces_=function(){return[]},Lh.prototype.getClass=function(){return Lh};var Mh=function(){};Mh.prototype.interfaces_=function(){return[]},Mh.prototype.getClass=function(){return Mh},Mh.computeDistance=function(){if(arguments[2]instanceof Lh&&arguments[0]instanceof Hl&&arguments[1]instanceof Eu)for(var t=arguments[0],e=arguments[1],i=arguments[2],r=new fp,n=t.getCoordinates(),o=0;o<n.length-1;o++){r.setCoordinates(n[o],n[o+1]);var a=r.closestPoint(e);i.setMinimum(a,e)}else if(arguments[2]instanceof Lh&&arguments[0]instanceof $l&&arguments[1]instanceof Eu){var s=arguments[0],u=arguments[1],l=arguments[2];Mh.computeDistance(s.getExteriorRing(),u,l);for(var c=0;c<s.getNumInteriorRing();c++)Mh.computeDistance(s.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof Lh&&arguments[0]instanceof ll&&arguments[1]instanceof Eu){var p=arguments[0],h=arguments[1],d=arguments[2];if(p instanceof Hl)Mh.computeDistance(p,h,d);else if(p instanceof $l)Mh.computeDistance(p,h,d);else if(p instanceof Vl)for(var f=p,_=0;_<f.getNumGeometries();_++){var g=f.getGeometryN(_);Mh.computeDistance(g,h,d)}else d.setMinimum(p.getCoordinate(),h)}else if(arguments[2]instanceof Lh&&arguments[0]instanceof fp&&arguments[1]instanceof Eu){var m=arguments[1],y=arguments[2],v=arguments[0].closestPoint(m);y.setMinimum(v,m)}};var kh=function(){this._g0=null,this._g1=null,this._ptDist=new Lh,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Rh={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};kh.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},kh.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new mu("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},kh.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},kh.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},kh.prototype.computeOrientedDistance=function(t,e,i){var r=new Nh(e);if(t.apply(r),i.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var n=new Dh(e,this._densifyFrac);t.apply(n),i.setMaximum(n.getMaxPointDistance())}},kh.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},kh.prototype.interfaces_=function(){return[]},kh.prototype.getClass=function(){return kh},kh.distance=function(){if(2===arguments.length)return new kh(arguments[0],arguments[1]).distance();if(3===arguments.length){var t=arguments[2],e=new kh(arguments[0],arguments[1]);return e.setDensifyFraction(t),e.distance()}},Rh.MaxPointDistanceFilter.get=function(){return Nh},Rh.MaxDensifiedByFractionDistanceFilter.get=function(){return Dh},Object.defineProperties(kh,Rh);var Nh=function(){this._maxPtDist=new Lh,this._minPtDist=new Lh,this._euclideanDist=new Mh,this._geom=null;var t=arguments[0];this._geom=t};Nh.prototype.filter=function(t){this._minPtDist.initialize(),Mh.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Nh.prototype.getMaxPointDistance=function(){return this._maxPtDist},Nh.prototype.interfaces_=function(){return[hl]},Nh.prototype.getClass=function(){return Nh};var Dh=function(){this._maxPtDist=new Lh,this._minPtDist=new Lh,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Dh.prototype.filter=function(t,e){if(0===e)return null;for(var i=t.getCoordinate(e-1),r=t.getCoordinate(e),n=(r.x-i.x)/this._numSubSegs,o=(r.y-i.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=i.x+a*n,u=i.y+a*o,l=new Eu(s,u);this._minPtDist.initialize(),Mh.computeDistance(this._geom,l,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Dh.prototype.isDone=function(){return!1},Dh.prototype.isGeometryChanged=function(){return!1},Dh.prototype.getMaxPointDistance=function(){return this._maxPtDist},Dh.prototype.interfaces_=function(){return[Ul]},Dh.prototype.getClass=function(){return Dh};var Oh=function(t,e,i){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=i||null},zh={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Oh.prototype.checkMaximumDistance=function(t,e,i){var r=new kh(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>i){this._isValid=!1;var n=r.getCoordinates();this._errorLocation=n[1],this._errorIndicator=t.getFactory().createLineString(n),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Qu.toLineString(n[0],n[1])+")"}},Oh.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Oh.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Oh.VERBOSE&&Gu.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Oh.prototype.checkNegativeValid=function(){if(!(this._input instanceof $l||this._input instanceof ic||this._input instanceof Vl))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Oh.prototype.getErrorIndicator=function(){return this._errorIndicator},Oh.prototype.checkMinimumDistance=function(t,e,i){var r=new Th(t,e,i);if(this._minDistanceFound=r.distance(),this._minDistanceFound<i){this._isValid=!1;var n=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(n),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Qu.toLineString(n[0],n[1])+" )"}},Oh.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Oh.prototype.getErrorLocation=function(){return this._errorLocation},Oh.prototype.getPolygonLines=function(t){for(var e=new El,i=new Eh(e),r=wh.getPolygons(t).iterator();r.hasNext();)r.next().apply(i);return t.getFactory().buildGeometry(e)},Oh.prototype.getErrorMessage=function(){return this._errMsg},Oh.prototype.interfaces_=function(){return[]},Oh.prototype.getClass=function(){return Oh},zh.VERBOSE.get=function(){return!1},zh.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Oh,zh);var Fh=function(t,e,i){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=i||null},Bh={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Fh.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Fh.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Fh.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new Ku(this._input.getEnvelopeInternal());e.expandBy(this._distance);var i=new Ku(this._result.getEnvelopeInternal());i.expandBy(t),i.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(i)),this.report("Envelope")},Fh.prototype.checkDistance=function(){var t=new Oh(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Fh.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Fh.prototype.checkPolygonal=function(){this._result instanceof $l||this._result instanceof ic||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Fh.prototype.getErrorIndicator=function(){return this._errorIndicator},Fh.prototype.getErrorLocation=function(){return this._errorLocation},Fh.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Fh.prototype.report=function(t){if(!Fh.VERBOSE)return null;Gu.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Fh.prototype.getErrorMessage=function(){return this._errorMsg},Fh.prototype.interfaces_=function(){return[]},Fh.prototype.getClass=function(){return Fh},Fh.isValidMsg=function(t,e,i){var r=new Fh(t,e,i);return r.isValid()?null:r.getErrorMessage()},Fh.isValid=function(t,e,i){return!!new Fh(t,e,i).isValid()},Bh.VERBOSE.get=function(){return!1},Bh.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Fh,Bh);var qh=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};qh.prototype.getCoordinates=function(){return this._pts},qh.prototype.size=function(){return this._pts.length},qh.prototype.getCoordinate=function(t){return this._pts[t]},qh.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},qh.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:cp.octant(this.getCoordinate(t),this.getCoordinate(t+1))},qh.prototype.setData=function(t){this._data=t},qh.prototype.getData=function(){return this._data},qh.prototype.toString=function(){return Qu.toLineString(new uc(this._pts))},qh.prototype.interfaces_=function(){return[pp]},qh.prototype.getClass=function(){return qh};var Uh=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new El,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};Uh.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Uh.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Uh.prototype.getIntersectionSegments=function(){return this._intSegments},Uh.prototype.count=function(){return this._intersectionCount},Uh.prototype.getIntersections=function(){return this._intersections},Uh.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Uh.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Uh.prototype.processIntersections=function(t,e,i,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===i&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(i,r))return null;var n=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=i.getCoordinates()[r],s=i.getCoordinates()[r+1];this._li.computeIntersection(n,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=n,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Uh.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Uh.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Uh.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Uh.prototype.interfaces_=function(){return[Zp]},Uh.prototype.getClass=function(){return Uh},Uh.createAllIntersectionsFinder=function(t){var e=new Uh(t);return e.setFindAllIntersections(!0),e},Uh.createAnyIntersectionFinder=function(t){return new Uh(t)},Uh.createIntersectionCounter=function(t){var e=new Uh(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Vh=function(){this._li=new rl,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Vh.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Vh.prototype.getIntersections=function(){return this._segInt.getIntersections()},Vh.prototype.isValid=function(){return this.execute(),this._isValid},Vh.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Vh.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Uh(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new xp;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Vh.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Pc(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Vh.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Qu.toLineString(t[0],t[1])+" and "+Qu.toLineString(t[2],t[3])},Vh.prototype.interfaces_=function(){return[]},Vh.prototype.getClass=function(){return Vh},Vh.computeIntersections=function(t){var e=new Vh(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Gh=function t(){this._nv=null;var e=arguments[0];this._nv=new Vh(t.toSegmentStrings(e))};Gh.prototype.checkValid=function(){this._nv.checkValid()},Gh.prototype.interfaces_=function(){return[]},Gh.prototype.getClass=function(){return Gh},Gh.toSegmentStrings=function(t){for(var e=new El,i=t.iterator();i.hasNext();){var r=i.next();e.add(new qh(r.getCoordinates(),r))}return e},Gh.checkValid=function(t){new Gh(t).checkValid()};var jh=function(t){this._mapOp=t};jh.prototype.map=function(t){for(var e=new El,i=0;i<t.getNumGeometries();i++){var r=this._mapOp.map(t.getGeometryN(i));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(mc.toGeometryArray(e))},jh.prototype.interfaces_=function(){return[]},jh.prototype.getClass=function(){return jh},jh.map=function(t,e){return new jh(e).map(t)};var Kh=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new El,this._resultLineList=new El;var t=arguments[0],e=arguments[1],i=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=i};Kh.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var i=e.next();this.collectLineEdge(i,t,this._lineEdgesList),this.collectBoundaryTouchEdge(i,t,this._lineEdgesList)}},Kh.prototype.labelIsolatedLine=function(t,e){var i=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,i)},Kh.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Kh.prototype.collectLineEdge=function(t,e,i){var r=t.getLabel(),n=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Id.isResultOfOp(r,e)||n.isCovered()||(i.add(n),t.setVisitedEdge(!0)))},Kh.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var i=e.next(),r=i.getEdge();if(i.isLineEdge()&&!r.isCoveredSet()){var n=this._op.isCoveredByA(i.getCoordinate());r.setCovered(n)}}},Kh.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var i=e.next(),r=i.getLabel();i.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(i,0):this.labelIsolatedLine(i,1))}},Kh.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var i=e.next(),r=this._geometryFactory.createLineString(i.getCoordinates());this._resultLineList.add(r),i.setInResult(!0)}},Kh.prototype.collectBoundaryTouchEdge=function(t,e,i){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(tl.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Id.isResultOfOp(r,e)&&e===Id.INTERSECTION&&(i.add(t.getEdge()),t.setVisitedEdge(!0))))},Kh.prototype.interfaces_=function(){return[]},Kh.prototype.getClass=function(){return Kh};var Xh=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new El;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Xh.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var i=this._geometryFactory.createPoint(e);this._resultPointList.add(i)}},Xh.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var i=e.next();if(!(i.isInResult()||i.isIncidentEdgeInResult()||0!==i.getEdges().getDegree()&&t!==Id.INTERSECTION)){var r=i.getLabel();Id.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(i)}}},Xh.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Xh.prototype.interfaces_=function(){return[]},Xh.prototype.getClass=function(){return Xh};var Zh=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Zh.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Zh.prototype.transformPolygon=function(t,e){var i=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof ec&&!r.isEmpty()||(i=!1);for(var n=new El,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof ec||(i=!1),n.add(a))}if(i)return this._factory.createPolygon(r,n.toArray([]));var s=new El;return null!==r&&s.add(r),s.addAll(n),this._factory.buildGeometry(s)},Zh.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Zh.prototype.getInputGeometry=function(){return this._inputGeom},Zh.prototype.transformMultiLineString=function(t,e){for(var i=new El,r=0;r<t.getNumGeometries();r++){var n=this.transformLineString(t.getGeometryN(r),t);null!==n&&(n.isEmpty()||i.add(n))}return this._factory.buildGeometry(i)},Zh.prototype.transformCoordinates=function(t,e){return this.copy(t)},Zh.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Zh.prototype.transformMultiPoint=function(t,e){for(var i=new El,r=0;r<t.getNumGeometries();r++){var n=this.transformPoint(t.getGeometryN(r),t);null!==n&&(n.isEmpty()||i.add(n))}return this._factory.buildGeometry(i)},Zh.prototype.transformMultiPolygon=function(t,e){for(var i=new El,r=0;r<t.getNumGeometries();r++){var n=this.transformPolygon(t.getGeometryN(r),t);null!==n&&(n.isEmpty()||i.add(n))}return this._factory.buildGeometry(i)},Zh.prototype.copy=function(t){return t.copy()},Zh.prototype.transformGeometryCollection=function(t,e){for(var i=new El,r=0;r<t.getNumGeometries();r++){var n=this.transform(t.getGeometryN(r));null!==n&&(this._pruneEmptyGeometry&&n.isEmpty()||i.add(n))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(mc.toGeometryArray(i)):this._factory.buildGeometry(i)},Zh.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Ql)return this.transformPoint(t,null);if(t instanceof tc)return this.transformMultiPoint(t,null);if(t instanceof ec)return this.transformLinearRing(t,null);if(t instanceof Hl)return this.transformLineString(t,null);if(t instanceof Gl)return this.transformMultiLineString(t,null);if(t instanceof $l)return this.transformPolygon(t,null);if(t instanceof ic)return this.transformMultiPolygon(t,null);if(t instanceof Vl)return this.transformGeometryCollection(t,null);throw new mu("Unknown Geometry subtype: "+t.getClass().getName())},Zh.prototype.transformLinearRing=function(t,e){var i=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===i)return this._factory.createLinearRing(null);var r=i.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(i):this._factory.createLinearRing(i)},Zh.prototype.interfaces_=function(){return[]},Zh.prototype.getClass=function(){return Zh};var Yh=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new fp,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Hl&&"number"==typeof arguments[1]){var e=arguments[1];t.call(this,arguments[0].getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var i=arguments[0],r=arguments[1];this._srcPts=i,this._isClosed=t.isClosed(i),this._snapTolerance=r}};Yh.prototype.snapVertices=function(t,e){for(var i=this._isClosed?t.size()-1:t.size(),r=0;r<i;r++){var n=t.get(r),o=this.findSnapForVertex(n,e);null!==o&&(t.set(r,new Eu(o)),0===r&&this._isClosed&&t.set(t.size()-1,new Eu(o)))}},Yh.prototype.findSnapForVertex=function(t,e){for(var i=0;i<e.length;i++){if(t.equals2D(e[i]))return null;if(t.distance(e[i])<this._snapTolerance)return e[i]}return null},Yh.prototype.snapTo=function(t){var e=new Il(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Yh.prototype.snapSegments=function(t,e){if(0===e.length)return null;var i=e.length;e[0].equals2D(e[e.length-1])&&(i=e.length-1);for(var r=0;r<i;r++){var n=e[r],o=this.findSegmentIndexToSnap(n,t);o>=0&&t.add(o+1,new Eu(n),!1)}},Yh.prototype.findSegmentIndexToSnap=function(t,e){for(var i=yu.MAX_VALUE,r=-1,n=0;n<e.size()-1;n++){if(this._seg.p0=e.get(n),this._seg.p1=e.get(n+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<i&&(i=o,r=n)}return r},Yh.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Yh.prototype.interfaces_=function(){return[]},Yh.prototype.getClass=function(){return Yh},Yh.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Hh=function(t){this._srcGeom=t||null},Wh={SNAP_PRECISION_FACTOR:{configurable:!0}};Hh.prototype.snapTo=function(t,e){var i=this.extractTargetCoordinates(t);return new Qh(e,i).transform(this._srcGeom)},Hh.prototype.snapToSelf=function(t,e){var i=this.extractTargetCoordinates(this._srcGeom),r=new Qh(t,i,!0).transform(this._srcGeom),n=r;return e&&Tu(n,Jl)&&(n=r.buffer(0)),n},Hh.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Hh.prototype.extractTargetCoordinates=function(t){for(var e=new qn,i=t.getCoordinates(),r=0;r<i.length;r++)e.add(i[r]);return e.toArray(new Array(0).fill(null))},Hh.prototype.computeMinimumSegmentLength=function(t){for(var e=yu.MAX_VALUE,i=0;i<t.length-1;i++){var r=t[i].distance(t[i+1]);r<e&&(e=r)}return e},Hh.prototype.interfaces_=function(){return[]},Hh.prototype.getClass=function(){return Hh},Hh.snap=function(t,e,i){var r=new Array(2).fill(null),n=new Hh(t);r[0]=n.snapTo(e,i);var o=new Hh(e);return r[1]=o.snapTo(r[0],i),r},Hh.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Hh.computeSizeBasedSnapTolerance(t),i=t.getPrecisionModel();if(i.getType()===dc.FIXED){var r=1/i.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var n=arguments[0],o=arguments[1];return Math.min(Hh.computeOverlaySnapTolerance(n),Hh.computeOverlaySnapTolerance(o))}},Hh.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Hh.SNAP_PRECISION_FACTOR},Hh.snapToSelf=function(t,e,i){return new Hh(t).snapToSelf(e,i)},Wh.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Hh,Wh);var Qh=function(t){function e(e,i,r){t.call(this),this._snapTolerance=e||null,this._snapPts=i||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var i=new Yh(t,this._snapTolerance);return i.setAllowSnappingToSourceVertices(this._isSelfSnap),i.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var i=t.toCoordinateArray(),r=this.snapLine(i,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Zh),Jh=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Jh.prototype.getCommon=function(){return yu.longBitsToDouble(this._commonBits)},Jh.prototype.add=function(t){var e=yu.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=Jh.signExpBits(this._commonBits),this._isFirst=!1,null):Jh.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Jh.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Jh.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Jh.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=yu.longBitsToDouble(t),i="0000000000000000000000000000000000000000000000000000000000000000"+yu.toBinaryString(t),r=i.substring(i.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},Jh.prototype.interfaces_=function(){return[]},Jh.prototype.getClass=function(){return Jh},Jh.getBit=function(t,e){return 0!=(t&1<<e)?1:0},Jh.signExpBits=function(t){return t>>52},Jh.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Jh.numCommonMostSigMantissaBits=function(t,e){for(var i=0,r=52;r>=0;r--){if(Jh.getBit(t,r)!==Jh.getBit(e,r))return i;i++}return 52};var $h=function(){this._commonCoord=null,this._ccFilter=new ed},td={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};$h.prototype.addCommonBits=function(t){var e=new id(this._commonCoord);t.apply(e),t.geometryChanged()},$h.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new Eu(this._commonCoord);e.x=-e.x,e.y=-e.y;var i=new id(e);return t.apply(i),t.geometryChanged(),t},$h.prototype.getCommonCoordinate=function(){return this._commonCoord},$h.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},$h.prototype.interfaces_=function(){return[]},$h.prototype.getClass=function(){return $h},td.CommonCoordinateFilter.get=function(){return ed},td.Translater.get=function(){return id},Object.defineProperties($h,td);var ed=function(){this._commonBitsX=new Jh,this._commonBitsY=new Jh};ed.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},ed.prototype.getCommonCoordinate=function(){return new Eu(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},ed.prototype.interfaces_=function(){return[hl]},ed.prototype.getClass=function(){return ed};var id=function(){this.trans=null;var t=arguments[0];this.trans=t};id.prototype.filter=function(t,e){var i=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,i),t.setOrdinate(e,1,r)},id.prototype.isDone=function(){return!1},id.prototype.isGeometryChanged=function(){return!0},id.prototype.interfaces_=function(){return[Ul]},id.prototype.getClass=function(){return id};var rd=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};rd.prototype.selfSnap=function(t){return new Hh(t).snapTo(t,this._snapTolerance)},rd.prototype.removeCommonBits=function(t){this._cbr=new $h,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},rd.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},rd.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),i=Id.overlayOp(e[0],e[1],t);return this.prepareResult(i)},rd.prototype.checkValid=function(t){t.isValid()||Gu.out.println("Snapped geometry is invalid")},rd.prototype.computeSnapTolerance=function(){this._snapTolerance=Hh.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},rd.prototype.snap=function(t){var e=this.removeCommonBits(t);return Hh.snap(e[0],e[1],this._snapTolerance)},rd.prototype.interfaces_=function(){return[]},rd.prototype.getClass=function(){return rd},rd.overlayOp=function(t,e,i){return new rd(t,e).getResultGeometry(i)},rd.union=function(t,e){return rd.overlayOp(t,e,Id.UNION)},rd.intersection=function(t,e){return rd.overlayOp(t,e,Id.INTERSECTION)},rd.symDifference=function(t,e){return rd.overlayOp(t,e,Id.SYMDIFFERENCE)},rd.difference=function(t,e){return rd.overlayOp(t,e,Id.DIFFERENCE)};var nd=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};nd.prototype.getResultGeometry=function(t){var e=null,i=!1,r=null;try{e=Id.overlayOp(this._geom[0],this._geom[1],t),i=!0}catch(t){if(!(t instanceof Ju))throw t;r=t}if(!i)try{e=rd.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof Ju?r:t}return e},nd.prototype.interfaces_=function(){return[]},nd.prototype.getClass=function(){return nd},nd.overlayOp=function(t,e,i){return new nd(t,e).getResultGeometry(i)},nd.union=function(t,e){return nd.overlayOp(t,e,Id.UNION)},nd.intersection=function(t,e){return nd.overlayOp(t,e,Id.INTERSECTION)},nd.symDifference=function(t,e){return nd.overlayOp(t,e,Id.SYMDIFFERENCE)},nd.difference=function(t,e){return nd.overlayOp(t,e,Id.DIFFERENCE)};var od=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};od.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},od.prototype.interfaces_=function(){return[]},od.prototype.getClass=function(){return od};var ad=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],i=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=i}else if(3===arguments.length){var r=arguments[0],n=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=n,this._obj=o}},sd={INSERT:{configurable:!0},DELETE:{configurable:!0}};ad.prototype.isDelete=function(){return this._eventType===ad.DELETE},ad.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},ad.prototype.getObject=function(){return this._obj},ad.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},ad.prototype.getInsertEvent=function(){return this._insertEvent},ad.prototype.isInsert=function(){return this._eventType===ad.INSERT},ad.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},ad.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},ad.prototype.interfaces_=function(){return[bu]},ad.prototype.getClass=function(){return ad},sd.INSERT.get=function(){return 1},sd.DELETE.get=function(){return 2},Object.defineProperties(ad,sd);var ud=function(){};ud.prototype.interfaces_=function(){return[]},ud.prototype.getClass=function(){return ud};var ld=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],i=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=i};ld.prototype.isTrivialIntersection=function(t,e,i,r){if(t===i&&1===this._li.getIntersectionNum()){if(ld.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var n=t.getNumPoints()-1;if(0===e&&r===n||0===r&&e===n)return!0}}return!1},ld.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ld.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},ld.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ld.prototype.isBoundaryPointInternal=function(t,e){for(var i=e.iterator();i.hasNext();){var r=i.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},ld.prototype.hasProperIntersection=function(){return this._hasProper},ld.prototype.hasIntersection=function(){return this._hasIntersection},ld.prototype.isDone=function(){return this._isDone},ld.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},ld.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},ld.prototype.addIntersections=function(t,e,i,r){if(t===i&&e===r)return null;this.numTests++;var n=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=i.getCoordinates()[r],s=i.getCoordinates()[r+1];this._li.computeIntersection(n,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),i.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,i,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),i.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},ld.prototype.interfaces_=function(){return[]},ld.prototype.getClass=function(){return ld},ld.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var cd=function(t){function e(){t.call(this),this.events=new El,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){$c.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var i=this.events.get(e);if(i.isInsert()&&this.processOverlaps(e,i.getDeleteEventIndex(),i,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof ld&&Tu(arguments[0],wl)&&Tu(arguments[1],wl)){var r=arguments[0],n=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(n,n),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&Tu(arguments[0],wl)&&arguments[1]instanceof ld){var a=arguments[0],s=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}},e.prototype.addEdge=function(t,e){for(var i=t.getMonotoneChainEdge(),r=i.getStartIndexes(),n=0;n<r.length-1;n++){var o=new od(i,n),a=new ad(e,i.getMinX(n),o);this.events.add(a),this.events.add(new ad(i.getMaxX(n),a))}},e.prototype.processOverlaps=function(t,e,i,r){for(var n=i.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();i.isSameLabel(a)||(n.computeIntersections(s,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var i=arguments[1],r=arguments[0].iterator();r.hasNext();){var n=r.next();this.addEdge(n,i)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ud),pd=function(){this._min=yu.POSITIVE_INFINITY,this._max=yu.NEGATIVE_INFINITY},hd={NodeComparator:{configurable:!0}};pd.prototype.getMin=function(){return this._min},pd.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},pd.prototype.getMax=function(){return this._max},pd.prototype.toString=function(){return Qu.toLineString(new Eu(this._min,0),new Eu(this._max,0))},pd.prototype.interfaces_=function(){return[]},pd.prototype.getClass=function(){return pd},hd.NodeComparator.get=function(){return dd},Object.defineProperties(pd,hd);var dd=function(){};dd.prototype.compare=function(t,e){var i=t,r=e,n=(i._min+i._max)/2,o=(r._min+r._max)/2;return n<o?-1:n>o?1:0},dd.prototype.interfaces_=function(){return[wu]},dd.prototype.getClass=function(){return dd};var fd=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],i=arguments[1],r=arguments[2];this._min=e,this._max=i,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,i){if(!this.intersects(t,e))return null;i.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pd),_d=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],i=arguments[1];this._node1=e,this._node2=i,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,i){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,i),null!==this._node2&&this._node2.query(t,e,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pd),gd=function(){this._leaves=new El,this._root=null,this._level=0};gd.prototype.buildTree=function(){$c.sort(this._leaves,new pd.NodeComparator);for(var t=this._leaves,e=null,i=new El;;){if(this.buildLevel(t,i),1===i.size())return i.get(0);e=t,t=i,i=e}},gd.prototype.insert=function(t,e,i){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new fd(t,e,i))},gd.prototype.query=function(t,e,i){this.init(),this._root.query(t,e,i)},gd.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},gd.prototype.printNode=function(t){Gu.out.println(Qu.toLineString(new Eu(t._min,this._level),new Eu(t._max,this._level)))},gd.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},gd.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var i=0;i<t.size();i+=2){var r=t.get(i);if(null===(i+1<t.size()?t.get(i):null))e.add(r);else{var n=new _d(t.get(i),t.get(i+1));e.add(n)}}},gd.prototype.interfaces_=function(){return[]},gd.prototype.getClass=function(){return gd};var md=function(){this._items=new El};md.prototype.visitItem=function(t){this._items.add(t)},md.prototype.getItems=function(){return this._items},md.prototype.interfaces_=function(){return[Hc]},md.prototype.getClass=function(){return md};var yd=function(){this._index=null;var t=arguments[0];if(!Tu(t,Jl))throw new mu("Argument must be Polygonal");this._index=new xd(t)},vd={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};yd.prototype.locate=function(t){var e=new ol(t),i=new bd(e);return this._index.query(t.y,t.y,i),e.getLocation()},yd.prototype.interfaces_=function(){return[Bp]},yd.prototype.getClass=function(){return yd},vd.SegmentVisitor.get=function(){return bd},vd.IntervalIndexedGeometry.get=function(){return xd},Object.defineProperties(yd,vd);var bd=function(){this._counter=null;var t=arguments[0];this._counter=t};bd.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},bd.prototype.interfaces_=function(){return[Hc]},bd.prototype.getClass=function(){return bd};var xd=function(){this._index=new gd;var t=arguments[0];this.init(t)};xd.prototype.init=function(t){for(var e=Eh.getLines(t).iterator();e.hasNext();){var i=e.next().getCoordinates();this.addLine(i)}},xd.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var i=new fp(t[e-1],t[e]),r=Math.min(i.p0.y,i.p1.y),n=Math.max(i.p0.y,i.p1.y);this._index.insert(r,n,i)}},xd.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],i=new md;return this._index.query(t,e,i),i.getItems()}if(3===arguments.length){var r=arguments[0],n=arguments[1],o=arguments[2];this._index.query(r,n,o)}},xd.prototype.interfaces_=function(){return[]},xd.prototype.getClass=function(){return xd};var wd=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new hc,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Sh,2===arguments.length){var e=arguments[0],i=arguments[1],r=dl.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=i,this._boundaryNodeRule=r,null!==i&&this.add(i)}else if(3===arguments.length){var n=arguments[0],o=arguments[1],a=arguments[2];this._argIndex=n,this._parentGeom=o,this._boundaryNodeRule=a,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,i){var r=this._nodes.addNode(i).getLabel(),n=1;r.getLocation(t,Ic.ON)===Cu.BOUNDARY&&n++;var o=e.determineBoundary(this._boundaryNodeRule,n);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var i=arguments[1],r=arguments[2],n=new ld(arguments[0],!0,!1);n.setIsDoneIfProperInt(r);var o=this.createEdgeSetIntersector(),a=this._parentGeom instanceof ec||this._parentGeom instanceof $l||this._parentGeom instanceof ic,s=i||!a;return o.computeIntersections(this._edges,n,s),this.addSelfIntersectionNodes(this._argIndex),n}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,i){var r=new ld(e,i,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Ql){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,Cu.INTERIOR)}else if(arguments[0]instanceof Eu){var e=arguments[0];this.insertPoint(this._argIndex,e,Cu.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),Cu.EXTERIOR,Cu.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var i=t.getInteriorRingN(e);this.addPolygonRing(i,Cu.INTERIOR,Cu.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],Cu.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],Cu.BOUNDARY)},e.prototype.addLineString=function(t){var e=Al.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var i=new eh(e,new kc(this._argIndex,Cu.INTERIOR));this._lineEdgeMap.put(t,i),this.insertEdge(i),tl.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),i=0,r=t.iterator();r.hasNext();){var n=r.next();e[i++]=n.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,i){if(this.isBoundaryNode(t,e))return null;i===Cu.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,i)},e.prototype.addPolygonRing=function(t,e,i){if(t.isEmpty())return null;var r=Al.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var n=e,o=i;al.isCCW(r)&&(n=i,o=e);var a=new eh(r,new kc(this._argIndex,Cu.BOUNDARY,n,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,r[0],Cu.BOUNDARY)},e.prototype.insertPoint=function(t,e,i){var r=this._nodes.addNode(e),n=r.getLabel();null===n?r._label=new kc(t,i):n.setLocation(t,i)},e.prototype.createEdgeSetIntersector=function(){return new cd},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var i=e.next(),r=i.getLabel().getLocation(t),n=i.eiList.iterator();n.hasNext();){var o=n.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ic&&(this._useBoundaryDeterminationRule=!1),e instanceof $l)this.addPolygon(e);else if(e instanceof Hl)this.addLineString(e);else if(e instanceof Ql)this.addPoint(e);else if(e instanceof tc)this.addCollection(e);else if(e instanceof Gl)this.addCollection(e);else if(e instanceof ic)this.addCollection(e);else{if(!(e instanceof Vl))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var i=t.getGeometryN(e);this.add(i)}},e.prototype.locate=function(t){return Tu(this._parentGeom,Jl)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new yd(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?Cu.BOUNDARY:Cu.INTERIOR},e}(jc),Ed=function(){if(this._li=new rl,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new wd(0,t)}else if(2===arguments.length){var e=arguments[0],i=arguments[1],r=dl.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(i.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(i.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new wd(0,e,r),this._arg[1]=new wd(1,i,r)}else if(3===arguments.length){var n=arguments[0],o=arguments[1],a=arguments[2];n.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(n.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new wd(0,n,a),this._arg[1]=new wd(1,o,a)}};Ed.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Ed.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Ed.prototype.interfaces_=function(){return[]},Ed.prototype.getClass=function(){return Ed};var Sd=function(){};Sd.prototype.interfaces_=function(){return[]},Sd.prototype.getClass=function(){return Sd},Sd.map=function(){if(arguments[0]instanceof ll&&Tu(arguments[1],Sd.MapOp)){for(var t=arguments[0],e=arguments[1],i=new El,r=0;r<t.getNumGeometries();r++){var n=e.map(t.getGeometryN(r));null!==n&&i.add(n)}return t.getFactory().buildGeometry(i)}if(Tu(arguments[0],vl)&&Tu(arguments[1],Sd.MapOp)){for(var o=arguments[0],a=arguments[1],s=new El,u=o.iterator();u.hasNext();){var l=u.next(),c=a.map(l);null!==c&&s.add(c)}return s}},Sd.MapOp=function(){};var Id=function(t){function e(){var e=arguments[0],i=arguments[1];t.call(this,e,i),this._ptLocator=new Sh,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Xp,this._resultPolyList=new El,this._resultLineList=new El,this._resultPointList=new El,this._graph=new jc(new jp),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var i=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new kc(t.getLabel())).flip();var n=e.getDepth();n.isNull()&&n.add(i),n.add(r),i.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),i=e.getSym();e.isInResult()&&i.isInResult()&&(e.setInResult(!1),i.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,i,r,n){var o=new El;return o.addAll(t),o.addAll(i),o.addAll(r),o.isEmpty()?e.createEmptyResult(n,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var i=e.iterator();i.hasNext();){var r=i.next();if(this._ptLocator.locate(t,r)!==Cu.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new El,e=this._edgeList.iterator();e.hasNext();){var i=e.next();i.isCollapsed()&&(e.remove(),t.add(i.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),i=e.getEdges().getLabel();e.getLabel().merge(i)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var i=e.next();this.insertUniqueEdge(i)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new El;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Gh.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var i=new Kc(this._geomFact);i.add(this._graph),this._resultPolyList=i.getPolygons();var r=new Kh(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var n=new Xh(this,this._geomFact,this._ptLocator);this._resultPointList=n.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var i=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,i)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var i=e.next();this._graph.addNode(i.getCoordinate()).setLabel(t,i.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var i=this._graph.getEdgeEnds().iterator();i.hasNext();){var r=i.next(),n=r.getLabel();n.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(n.getLocation(0,Ic.RIGHT),n.getLocation(1,Ic.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),i=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var n=0;n<2;n++)i.isNull(n)||!i.isArea()||r.isNull(n)||(0===r.getDelta(n)?i.toLine(n):(tl.isTrue(!r.isNull(n,Ic.LEFT),"depth of LEFT side has not been initialized"),i.setLocation(n,Ic.LEFT,r.getLocation(n,Ic.LEFT)),tl.isTrue(!r.isNull(n,Ic.RIGHT),"depth of RIGHT side has not been initialized"),i.setLocation(n,Ic.RIGHT,r.getLocation(n,Ic.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),i=e.getLabel();e.isIsolated()&&(i.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(i)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ed);Id.overlayOp=function(t,e,i){return new Id(t,e).getResultGeometry(i)},Id.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Id.createEmptyResult(Id.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var i=e;return jh.map(t,{interfaces_:function(){return[Sd.MapOp]},map:function(t){return t.intersection(i)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),nd.overlayOp(t,e,Id.INTERSECTION)},Id.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Id.createEmptyResult(Id.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),nd.overlayOp(t,e,Id.SYMDIFFERENCE)},Id.resultDimension=function(t,e,i){var r=e.getDimension(),n=i.getDimension(),o=-1;switch(t){case Id.INTERSECTION:o=Math.min(r,n);break;case Id.UNION:o=Math.max(r,n);break;case Id.DIFFERENCE:o=r;break;case Id.SYMDIFFERENCE:o=Math.max(r,n)}return o},Id.createEmptyResult=function(t,e,i,r){var n=null;switch(Id.resultDimension(t,e,i)){case-1:n=r.createGeometryCollection(new Array(0).fill(null));break;case 0:n=r.createPoint();break;case 1:n=r.createLineString();break;case 2:n=r.createPolygon()}return n},Id.difference=function(t,e){return t.isEmpty()?Id.createEmptyResult(Id.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),nd.overlayOp(t,e,Id.DIFFERENCE))},Id.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],i=t.getLocation(0),r=t.getLocation(1);return Id.isResultOfOp(i,r,e)}if(3===arguments.length){var n=arguments[0],o=arguments[1],a=arguments[2];switch(n===Cu.BOUNDARY&&(n=Cu.INTERIOR),o===Cu.BOUNDARY&&(o=Cu.INTERIOR),a){case Id.INTERSECTION:return n===Cu.INTERIOR&&o===Cu.INTERIOR;case Id.UNION:return n===Cu.INTERIOR||o===Cu.INTERIOR;case Id.DIFFERENCE:return n===Cu.INTERIOR&&o!==Cu.INTERIOR;case Id.SYMDIFFERENCE:return n===Cu.INTERIOR&&o!==Cu.INTERIOR||n!==Cu.INTERIOR&&o===Cu.INTERIOR}return!1}},Id.INTERSECTION=1,Id.UNION=2,Id.DIFFERENCE=3,Id.SYMDIFFERENCE=4;var Ad=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Sh,this._seg=new fp;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Ad.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var i=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<i.size()-1;r++)if(i.getCoordinate(r,this._seg.p0),i.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Ad.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?Cu.BOUNDARY:this._ptLocator.locate(t,this._g)},Ad.prototype.extractLinework=function(t){var e=new Cd;t.apply(e);var i=e.getLinework(),r=mc.toLineStringArray(i);return t.getFactory().createMultiLineString(r)},Ad.prototype.interfaces_=function(){return[]},Ad.prototype.getClass=function(){return Ad};var Cd=function(){this._linework=null,this._linework=new El};Cd.prototype.getLinework=function(){return this._linework},Cd.prototype.filter=function(t){if(t instanceof $l){var e=t;this._linework.add(e.getExteriorRing());for(var i=0;i<e.getNumInteriorRing();i++)this._linework.add(e.getInteriorRingN(i))}},Cd.prototype.interfaces_=function(){return[ql]},Cd.prototype.getClass=function(){return Cd};var Pd=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Pd.prototype.extractPoints=function(t,e,i){for(var r=t.getCoordinates(),n=0;n<r.length-1;n++)this.computeOffsetPoints(r[n],r[n+1],e,i)},Pd.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Pd.prototype.getPoints=function(t){for(var e=new El,i=Eh.getLines(this._g).iterator();i.hasNext();){var r=i.next();this.extractPoints(r,t,e)}return e},Pd.prototype.computeOffsetPoints=function(t,e,i,r){var n=e.x-t.x,o=e.y-t.y,a=Math.sqrt(n*n+o*o),s=i*n/a,u=i*o/a,l=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var p=new Eu(l-u,c+s);r.add(p)}if(this._doRight){var h=new Eu(l+u,c-s);r.add(h)}},Pd.prototype.interfaces_=function(){return[]},Pd.prototype.getClass=function(){return Pd};var Td=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new El;var e=arguments[0],i=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,i),this._geom=[e,i,r],this._locFinder=[new Ad(this._geom[0],this._boundaryDistanceTolerance),new Ad(this._geom[1],this._boundaryDistanceTolerance),new Ad(this._geom[2],this._boundaryDistanceTolerance)]},Ld={TOLERANCE:{configurable:!0}};Td.prototype.reportResult=function(t,e,i){Gu.out.println("Overlay result invalid - A:"+Cu.toLocationSymbol(e[0])+" B:"+Cu.toLocationSymbol(e[1])+" expected:"+(i?"i":"e")+" actual:"+Cu.toLocationSymbol(e[2]))},Td.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Td.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var i=this._testCoords.get(e);if(!this.checkValid(t,i))return this._invalidLocation=i,!1}return!0}if(2===arguments.length){var r=arguments[0],n=arguments[1];return this._location[0]=this._locFinder[0].getLocation(n),this._location[1]=this._locFinder[1].getLocation(n),this._location[2]=this._locFinder[2].getLocation(n),!!Td.hasLocation(this._location,Cu.BOUNDARY)||this.isValidResult(r,this._location)}},Td.prototype.addTestPts=function(t){var e=new Pd(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Td.prototype.isValidResult=function(t,e){var i=Id.isResultOfOp(e[0],e[1],t),r=!(i^e[2]===Cu.INTERIOR);return r||this.reportResult(t,e,i),r},Td.prototype.getInvalidLocation=function(){return this._invalidLocation},Td.prototype.interfaces_=function(){return[]},Td.prototype.getClass=function(){return Td},Td.hasLocation=function(t,e){for(var i=0;i<3;i++)if(t[i]===e)return!0;return!1},Td.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Hh.computeSizeBasedSnapTolerance(t),Hh.computeSizeBasedSnapTolerance(e))},Td.isValid=function(t,e,i,r){return new Td(t,e,r).isValid(i)},Ld.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Td,Ld);var Md=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Md.prototype.extractElements=function(t,e){if(null===t)return null;for(var i=0;i<t.getNumGeometries();i++){var r=t.getGeometryN(i);this._skipEmpty&&r.isEmpty()||e.add(r)}},Md.prototype.combine=function(){for(var t=new El,e=this._inputGeoms.iterator();e.hasNext();){var i=e.next();this.extractElements(i,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Md.prototype.interfaces_=function(){return[]},Md.prototype.getClass=function(){return Md},Md.combine=function(){if(1===arguments.length)return new Md(arguments[0]).combine();if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Md(Md.createList(t,e)).combine()}if(3===arguments.length){var i=arguments[0],r=arguments[1],n=arguments[2];return new Md(Md.createList(i,r,n)).combine()}},Md.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Md.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],i=new El;return i.add(t),i.add(e),i}if(3===arguments.length){var r=arguments[0],n=arguments[1],o=arguments[2],a=new El;return a.add(r),a.add(n),a.add(o),a}};var kd=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new El)},Rd={STRTREE_NODE_CAPACITY:{configurable:!0}};kd.prototype.reduceToGeometries=function(t){for(var e=new El,i=t.iterator();i.hasNext();){var r=i.next(),n=null;Tu(r,wl)?n=this.unionTree(r):r instanceof ll&&(n=r),e.add(n)}return e},kd.prototype.extractByEnvelope=function(t,e,i){for(var r=new El,n=0;n<e.getNumGeometries();n++){var o=e.getGeometryN(n);o.getEnvelopeInternal().intersects(t)?r.add(o):i.add(o)}return this._geomFactory.buildGeometry(r)},kd.prototype.unionOptimized=function(t,e){var i=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!i.intersects(r))return Md.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var n=i.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,n)},kd.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new op(kd.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var i=e.next();t.insert(i.getEnvelopeInternal(),i)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},kd.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],i=arguments[1],r=arguments[2];if(r-i<=1){var n=kd.getGeometry(e,i);return this.unionSafe(n,null)}if(r-i==2)return this.unionSafe(kd.getGeometry(e,i),kd.getGeometry(e,i+1));var o=Math.trunc((r+i)/2),a=this.binaryUnion(e,i,o),s=this.binaryUnion(e,o,r);return this.unionSafe(a,s)}},kd.prototype.repeatedUnion=function(t){for(var e=null,i=t.iterator();i.hasNext();){var r=i.next();e=null===e?r.copy():e.union(r)}return e},kd.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},kd.prototype.unionActual=function(t,e){return kd.restrictToPolygons(t.union(e))},kd.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},kd.prototype.unionUsingEnvelopeIntersection=function(t,e,i){var r=new El,n=this.extractByEnvelope(i,t,r),o=this.extractByEnvelope(i,e,r),a=this.unionActual(n,o);return r.add(a),Md.combine(r)},kd.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],i=arguments[1];return e.getFactory().createGeometryCollection([e,i]).buffer(0)}},kd.prototype.interfaces_=function(){return[]},kd.prototype.getClass=function(){return kd},kd.restrictToPolygons=function(t){if(Tu(t,Jl))return t;var e=wh.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(mc.toPolygonArray(e))},kd.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},kd.union=function(t){return new kd(t).union()},Rd.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(kd,Rd);var Nd=function(){};Nd.prototype.interfaces_=function(){return[]},Nd.prototype.getClass=function(){return Nd},Nd.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Id.createEmptyResult(Id.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),nd.overlayOp(t,e,Id.UNION)};var Dd=function(){return new Kn};Kn.prototype={constructor:Kn,reset:function(){this.s=this.t=0},add:function(t){Xn(Od,t,this.t),Xn(this,Od.s,this.s),this.s?this.t+=Od.t:this.s=Od.t},valueOf:function(){return this.s}};var Od=new Kn,zd=1e-6,Fd=Math.PI,Bd=Fd/2,qd=Fd/4,Ud=2*Fd,Vd=180/Fd,Gd=Fd/180,jd=Math.abs,Kd=Math.atan,Xd=Math.atan2,Zd=Math.cos,Yd=Math.exp,Hd=Math.log,Wd=Math.sin,Qd=Math.sqrt,Jd=Math.tan,$d={Feature:function(t,e){Hn(t.geometry,e)},FeatureCollection:function(t,e){for(var i=t.features,r=-1,n=i.length;++r<n;)Hn(i[r].geometry,e)}},tf={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var i=t.coordinates,r=-1,n=i.length;++r<n;)t=i[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Wn(t.coordinates,e,0)},MultiLineString:function(t,e){for(var i=t.coordinates,r=-1,n=i.length;++r<n;)Wn(i[r],e,0)},Polygon:function(t,e){Qn(t.coordinates,e)},MultiPolygon:function(t,e){for(var i=t.coordinates,r=-1,n=i.length;++r<n;)Qn(i[r],e)},GeometryCollection:function(t,e){for(var i=t.geometries,r=-1,n=i.length;++r<n;)Hn(i[r],e)}},ef=function(t,e){t&&$d.hasOwnProperty(t.type)?$d[t.type](t,e):Hn(t,e)},rf=(Dd(),Dd(),Dd(),function(t,e){function i(i,r){return i=t(i,r),e(i[0],i[1])}return t.invert&&e.invert&&(i.invert=function(i,r){return(i=e.invert(i,r))&&t.invert(i[0],i[1])}),i});oo.invert=oo;var nf=function(t){function e(e){return(e=t(e[0]*Gd,e[1]*Gd))[0]*=Vd,e[1]*=Vd,e}return t=ao(t[0]*Gd,t[1]*Gd,t.length>2?t[2]*Gd:0),e.invert=function(e){return(e=t.invert(e[0]*Gd,e[1]*Gd))[0]*=Vd,e[1]*=Vd,e},e},of=function(){var t,e=[];return{point:function(e,i){t.push([e,i])},lineStart:function(){e.push(t=[])},lineEnd:Yn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var i=e;return e=[],t=null,i}}},af=function(t,e,i,r,n,o){var a,s=t[0],u=t[1],l=0,c=1,p=e[0]-s,h=e[1]-u;if(a=i-s,p||!(a>0)){if(a/=p,p<0){if(a<l)return;a<c&&(c=a)}else if(p>0){if(a>c)return;a>l&&(l=a)}if(a=n-s,p||!(a<0)){if(a/=p,p<0){if(a>c)return;a>l&&(l=a)}else if(p>0){if(a<l)return;a<c&&(c=a)}if(a=r-u,h||!(a>0)){if(a/=h,h<0){if(a<l)return;a<c&&(c=a)}else if(h>0){if(a>c)return;a>l&&(l=a)}if(a=o-u,h||!(a<0)){if(a/=h,h<0){if(a>c)return;a>l&&(l=a)}else if(h>0){if(a<l)return;a<c&&(c=a)}return l>0&&(t[0]=s+l*p,t[1]=u+l*h),c<1&&(e[0]=s+c*p,e[1]=u+c*h),!0}}}}},sf=function(t,e){return jd(t[0]-e[0])<zd&&jd(t[1]-e[1])<zd},uf=function(t,e,i,r,n){var o,a,s=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,i,r=t[0],a=t[e];if(sf(r,a)){for(n.lineStart(),o=0;o<e;++o)n.point((r=t[o])[0],r[1]);n.lineEnd()}else s.push(i=new po(r,t,null,!0)),u.push(i.o=new po(r,null,i,!1)),s.push(i=new po(a,t,null,!1)),u.push(i.o=new po(a,null,i,!0))}})),s.length){for(u.sort(e),ho(s),ho(u),o=0,a=u.length;o<a;++o)u[o].e=i=!i;for(var l,c,p=s[0];;){for(var h=p,d=!0;h.v;)if((h=h.n)===p)return;l=h.z,n.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(o=0,a=l.length;o<a;++o)n.point((c=l[o])[0],c[1]);else r(h.x,h.n.x,1,n);h=h.n}else{if(d)for(l=h.p.z,o=l.length-1;o>=0;--o)n.point((c=l[o])[0],c[1]);else r(h.x,h.p.x,-1,n);h=h.p}l=(h=h.o).z,d=!d}while(!h.v);n.lineEnd()}}},lf=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},cf=(function(t){1===t.length&&(t=function(t){return function(e,i){return lf(t(e),i)}}(t))}(lf),function(t){for(var e,i,r,n=t.length,o=-1,a=0;++o<n;)a+=t[o].length;for(i=new Array(a);--n>=0;)for(e=(r=t[n]).length;--e>=0;)i[--a]=r[e];return i}),pf=1e9,hf=-pf,df=Dd(),ff=(Dd(),function(t){return t}),_f=(Dd(),Dd(),1/0),gf=_f,mf=-_f,yf=mf,vf={point:function(t,e){t<_f&&(_f=t),t>mf&&(mf=t),e<gf&&(gf=e),e>yf&&(yf=e)},lineStart:Yn,lineEnd:Yn,polygonStart:Yn,polygonEnd:Yn,result:function(){var t=[[_f,gf],[mf,yf]];return mf=yf=-(gf=_f=1/0),t}},bf=(Dd(),function(t,e,i,r){return function(n,o){function a(e,i){var r=n(e,i);t(e=r[0],i=r[1])&&o.point(e,i)}function s(t,e){var i=n(t,e);g.point(i[0],i[1])}function u(){x.point=s,g.lineStart()}function l(){x.point=a,g.lineEnd()}function c(t,e){_.push([t,e]);var i=n(t,e);v.point(i[0],i[1])}function p(){v.lineStart(),_=[]}function h(){c(_[0][0],_[0][1]),v.lineEnd();var t,e,i,r,n=v.clean(),a=y.result(),s=a.length;if(_.pop(),d.push(_),_=null,s)if(1&n){if((e=(i=a[0]).length-1)>0){for(b||(o.polygonStart(),b=!0),o.lineStart(),t=0;t<e;++t)o.point((r=i[t])[0],r[1]);o.lineEnd()}}else s>1&&2&n&&a.push(a.pop().concat(a.shift())),f.push(a.filter(_o))}var d,f,_,g=e(o),m=n.invert(r[0],r[1]),y=of(),v=e(y),b=!1,x={point:a,lineStart:u,lineEnd:l,polygonStart:function(){x.point=c,x.lineStart=p,x.lineEnd=h,f=[],d=[]},polygonEnd:function(){x.point=a,x.lineStart=u,x.lineEnd=l,f=cf(f);var t=function(t,e){var i=e[0],r=e[1],n=[Wd(i),-Zd(i),0],o=0,a=0;df.reset();for(var s=0,u=t.length;s<u;++s)if(c=(l=t[s]).length)for(var l,c,p=l[c-1],h=p[0],d=p[1]/2+qd,f=Wd(d),_=Zd(d),g=0;g<c;++g,h=y,f=b,_=x,p=m){var m=l[g],y=m[0],v=m[1]/2+qd,b=Wd(v),x=Zd(v),w=y-h,E=w>=0?1:-1,S=E*w,I=S>Fd,A=f*b;if(df.add(Xd(A*E*Wd(S),_*x+A*Zd(S))),o+=I?w+E*Ud:w,I^h>=i^y>=i){var C=eo($n(p),$n(m));no(C);var P=eo(n,C);no(P);var T=(I^w>=0?-1:1)*Zn(P[2]);(r>T||r===T&&(C[0]||C[1]))&&(a+=I^w>=0?1:-1)}}return(o<-zd||o<zd&&df<-zd)^1&a}(d,m);f.length?(b||(o.polygonStart(),b=!0),uf(f,go,t,i,o)):t&&(b||(o.polygonStart(),b=!0),o.lineStart(),i(null,null,1,o),o.lineEnd()),b&&(o.polygonEnd(),b=!1),f=d=null},sphere:function(){o.polygonStart(),o.lineStart(),i(null,null,1,o),o.lineEnd(),o.polygonEnd()}};return x}}),xf=bf((function(){return!0}),(function(t){var e,i=NaN,r=NaN,n=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?Fd:-Fd,u=jd(o-i);jd(u-Fd)<zd?(t.point(i,r=(r+a)/2>0?Bd:-Bd),t.point(n,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):n!==s&&u>=Fd&&(jd(i-n)<zd&&(i-=n*zd),jd(o-s)<zd&&(o-=s*zd),r=function(t,e,i,r){var n,o,a=Wd(t-i);return jd(a)>zd?Kd((Wd(e)*(o=Zd(r))*Wd(i)-Wd(r)*(n=Zd(e))*Wd(t))/(n*o*a)):(e+r)/2}(i,r,o,a),t.point(n,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(i=o,r=a),n=s},lineEnd:function(){t.lineEnd(),i=r=NaN},clean:function(){return 2-e}}}),(function(t,e,i,r){var n;if(null==t)n=i*Bd,r.point(-Fd,n),r.point(0,n),r.point(Fd,n),r.point(Fd,0),r.point(Fd,-n),r.point(0,-n),r.point(-Fd,-n),r.point(-Fd,0),r.point(-Fd,n);else if(jd(t[0]-e[0])>zd){var o=t[0]<e[0]?Fd:-Fd;n=i*o/2,r.point(-o,n),r.point(0,n),r.point(o,n)}else r.point(e[0],e[1])}),[-Fd,-Bd]),wf=function(t,e){function i(t,e){return Zd(t)*Zd(e)>o}function r(t,e,i){var r=[1,0,0],n=eo($n(t),$n(e)),a=to(n,n),s=n[0],u=a-s*s;if(!u)return!i&&t;var l=o*a/u,c=-o*s/u,p=eo(r,n),h=ro(r,l);io(h,ro(n,c));var d=p,f=to(h,d),_=to(d,d),g=f*f-_*(to(h,h)-1);if(!(g<0)){var m=Qd(g),y=ro(d,(-f-m)/_);if(io(y,h),y=Jn(y),!i)return y;var v,b=t[0],x=e[0],w=t[1],E=e[1];x<b&&(v=b,b=x,x=v);var S=x-b,I=jd(S-Fd)<zd;if(!I&&E<w&&(v=w,w=E,E=v),I||S<zd?I?w+E>0^y[1]<(jd(y[0]-b)<zd?w:E):w<=y[1]&&y[1]<=E:S>Fd^(b<=y[0]&&y[0]<=x)){var A=ro(d,(-f+m)/_);return io(A,h),[y,Jn(A)]}}}function n(e,i){var r=a?t:Fd-t,n=0;return e<-r?n|=1:e>r&&(n|=2),i<-r?n|=4:i>r&&(n|=8),n}var o=Zd(t),a=o>0,s=jd(o)>zd;return bf(i,(function(t){var e,o,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(p,h){var d,f=[p,h],_=i(p,h),g=a?_?0:n(p,h):_?n(p+(p<0?Fd:-Fd),h):0;if(!e&&(l=u=_)&&t.lineStart(),_!==u&&(!(d=r(e,f))||sf(e,d)||sf(f,d))&&(f[0]+=zd,f[1]+=zd,_=i(f[0],f[1])),_!==u)c=0,_?(t.lineStart(),d=r(f,e),t.point(d[0],d[1])):(d=r(e,f),t.point(d[0],d[1]),t.lineEnd()),e=d;else if(s&&e&&a^_){var m;g&o||!(m=r(f,e,!0))||(c=0,a?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!_||e&&sf(e,f)||t.point(f[0],f[1]),e=f,u=_,o=g},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return c|(l&&u)<<1}}}),(function(i,r,n,o){!function(t,e,i,r,n,o){if(i){var a=Zd(e),s=Wd(e),u=r*i;null==n?(n=e+r*Ud,o=e-u/2):(n=co(a,n),o=co(a,o),(r>0?n<o:n>o)&&(n+=r*Ud));for(var l,c=n;r>0?c>o:c<o;c-=u)l=Jn([a,-s*Zd(c),-s*Wd(c)]),t.point(l[0],l[1])}}(o,t,e,n,i,r)}),a?[0,-t]:[-Fd,t-Fd])};yo.prototype={constructor:yo,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Ef=16,Sf=Zd(30*Gd),If=function(t,e){return+e?function(t,e){function i(r,n,o,a,s,u,l,c,p,h,d,f,_,g){var m=l-r,y=c-n,v=m*m+y*y;if(v>4*e&&_--){var b=a+h,x=s+d,w=u+f,E=Qd(b*b+x*x+w*w),S=Zn(w/=E),I=jd(jd(w)-1)<zd||jd(o-p)<zd?(o+p)/2:Xd(x,b),A=t(I,S),C=A[0],P=A[1],T=C-r,L=P-n,M=y*T-m*L;(M*M/v>e||jd((m*T+y*L)/v-.5)>.3||a*h+s*d+u*f<Sf)&&(i(r,n,o,a,s,u,C,P,I,b/=E,x/=E,w,_,g),g.point(C,P),i(C,P,I,b,x,w,l,c,p,h,d,f,_,g))}}return function(e){function r(i,r){i=t(i,r),e.point(i[0],i[1])}function n(){m=NaN,w.point=o,e.lineStart()}function o(r,n){var o=$n([r,n]),a=t(r,n);i(m,y,g,v,b,x,m=a[0],y=a[1],g=r,v=o[0],b=o[1],x=o[2],Ef,e),e.point(m,y)}function a(){w.point=r,e.lineEnd()}function s(){n(),w.point=u,w.lineEnd=l}function u(t,e){o(c=t,e),p=m,h=y,d=v,f=b,_=x,w.point=o}function l(){i(m,y,g,v,b,x,p,h,c,d,f,_,Ef,e),w.lineEnd=a,a()}var c,p,h,d,f,_,g,m,y,v,b,x,w={point:r,lineStart:n,lineEnd:a,polygonStart:function(){e.polygonStart(),w.lineStart=s},polygonEnd:function(){e.polygonEnd(),w.lineStart=n}};return w}}(t,e):function(t){return mo({point:function(e,i){e=t(e,i),this.stream.point(e[0],e[1])}})}(t)},Af=mo({point:function(t,e){this.stream.point(t*Gd,e*Gd)}});xo.invert=function(t,e){return[t,2*Kd(Yd(e))-Bd]},wo.invert=function(t,e){return[-e,2*Kd(Yd(t))-Bd]};var Cf=function(){var t=function(t){function e(){var e=Fd*s(),a=o(nf(o.rotate()).invert([0,0]));return l(null==c?[[a[0]-e,a[1]-e],[a[0]+e,a[1]+e]]:t===xo?[[Math.max(a[0]-e,c),i],[Math.min(a[0]+e,r),n]]:[[c,Math.max(a[1]-e,i)],[r,Math.min(a[1]+e,n)]])}var i,r,n,o=bo(t),a=o.center,s=o.scale,u=o.translate,l=o.clipExtent,c=null;return o.scale=function(t){return arguments.length?(s(t),e()):s()},o.translate=function(t){return arguments.length?(u(t),e()):u()},o.center=function(t){return arguments.length?(a(t),e()):a()},o.clipExtent=function(t){return arguments.length?(null==t?c=i=r=n=null:(c=+t[0][0],i=+t[0][1],r=+t[1][0],n=+t[1][1]),e()):null==c?null:[[c,i],[r,n]]},e()}(wo),e=t.center,i=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?i([t[0],t[1],t.length>2?t[2]+90:90]):[(t=i())[0],t[1],t[2]-90]},i([0,0,90]).scale(159.155)};t.projection=Aa,t.random=fu,t.clusters=_u,t.helpers=qo,t.invariant=Vo,t.meta=Uo,t.isolines=function(t,e,i){if(!S(i=i||{}))throw new Error("options is invalid");var r=i.zProperty||"elevation",n=i.commonProperties||{},o=i.breaksProperties||[];if(Y(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!S(n))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var a=rt(t,{zProperty:r,flip:!0});return l(function(t,e,i){var r=V(i),n=r[2]-r[0],o=r[3]-r[1],a=r[0],s=r[1],u=e[0].length-1,l=e.length-1,c=n/u,p=o/l,h=function(t){t[0]=t[0]*c+a,t[1]=t[1]*p+s};return t.forEach((function(t){C(t,h)})),t}(function(t,e,i,r,n){for(var o=[],a=1;a<e.length;a++){var s=+e[a],u=Object.assign({},r,n[a]);u[i]=s;var l=c(J(t,s),u);o.push(l)}return o}(a,e,r,n,o),a,t))},t.convex=Tt,t.pointsWithinPolygon=kt,t.concave=function(t,i){if(!S(i=i||{}))throw new Error("options is invalid");if(!t)throw new Error("points is required");var r=i.maxEdge||1/0;if(!E(r))throw new Error("maxEdge is invalid");var n=Rt(function(t){var e=[],i={};return M(t,(function(t){if(t.geometry){var r=t.geometry.coordinates.join("-");i.hasOwnProperty(r)||(e.push(t),i[r]=!0)}})),l(e)}(t));if(n.features=n.features.filter((function(t){var e=t.geometry.coordinates[0][0],n=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],a=zt(e,n,i),s=zt(n,o,i),u=zt(e,o,i);return a<=r&&s<=r&&u<=r})),n.features.length<1)return null;var o=$t(n,i);return 1===o.coordinates.length&&(o.coordinates=o.coordinates[0],o.type="Polygon"),e(o)},t.collect=function(t,e,i,r){var n=Xo(6),o=e.features.map((function(t){return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:t.properties[i]}}));return n.load(o),t.features.forEach((function(t){t.properties||(t.properties={});var e=V(t),i=[];n.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}).forEach((function(e){Lt([e.minX,e.minY],t)&&i.push(e.property)})),t.properties[r]=i})),t},t.flip=function(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var i=e.mutate;if(!t)throw new Error("geojson is required");return!1!==i&&void 0!==i||(t=Ft(t)),C(t,(function(t){var e=t[0],i=t[1];t[0]=i,t[1]=e})),t},t.simplify=function(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var i=void 0!==e.tolerance?e.tolerance:1,r=e.highQuality||!1,n=e.mutate||!1;if(!t)throw new Error("geojson is required");if(i&&i<0)throw new Error("invalid tolerance");return!0!==n&&(t=Ft(t)),N(t,(function(t){!function(t,e,i){var r=t.type;if("Point"===r||"MultiPoint"===r)return t;te(t,!0);var n=t.coordinates;switch(r){case"LineString":t.coordinates=ae(n,e,i);break;case"MultiLineString":t.coordinates=n.map((function(t){return ae(t,e,i)}));break;case"Polygon":t.coordinates=se(n,e,i);break;case"MultiPolygon":t.coordinates=n.map((function(t){return se(t,e,i)}))}}(t,i,r)})),t},t.bezierSpline=ue,t.tag=function(t,e,i,r){return t=Ft(t),e=Ft(e),M(t,(function(t){t.properties||(t.properties={}),M(e,(function(e){void 0===t.properties[r]&&Lt(t,e)&&(t.properties[r]=e.properties[i])}))})),t},t.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null==e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return l(function(t,e){for(var i,r,n=t.slice(0),o=t.length,a=o-e;o-- >a;)i=n[r=Math.floor((o+1)*Math.random())],n[r]=n[o],n[o]=i;return n.slice(a)}(t.features,e))},t.envelope=ce,t.square=pe,t.circle=de,t.midpoint=function(t,e){return he(t,zt(t,e)/2,fe(t,e))},t.center=_e,t.centerOfMass=me,t.centroid=ge,t.combine=function(t){function i(t,e,i){i?r[e].coordinates=r[e].coordinates.concat(t.geometry.coordinates):r[e].coordinates.push(t.geometry.coordinates),r[e].properties.push(t.properties)}var r={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},n=Object.keys(r).reduce((function(t,e){return t[e.replace("Multi","")]=e,t}),{});return M(t,(function(t){t.geometry&&(r[t.geometry.type]?i(t,t.geometry.type,!0):n[t.geometry.type]&&i(t,n[t.geometry.type],!1))})),l(Object.keys(r).filter((function(t){return r[t].coordinates.length})).sort().map((function(t){return e({type:t,coordinates:r[t].coordinates},{collectedProperties:r[t].properties})})))},t.distance=zt,t.explode=ye,t.bbox=V,t.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=De(t.geometry.coordinates):t.geometry.coordinates.forEach((function(t){e.features=e.features.concat(De(t))})),e},t.bboxPolygon=le,t.booleanPointInPolygon=Lt,t.nearestPoint=Oe,t.nearestPointOnLine=ni,t.nearestPointToLine=function(t,e,i){if(!S(i=i||{}))throw new Error("options is invalid");var r=i.units,n=i.properties||{};if(!t)throw new Error("points is required");if(!(t=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return N(t,(function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})})),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter((function(t){return"Point"===t.geometry.type})),t;default:throw new Error("points must be a Point Collection")}}(t)).features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==Q(e))throw new Error("line must be a LineString");var o=1/0,a=null;return M(t,(function(t){var i=di(t,e,{units:r});i<o&&(o=i,a=t)})),a&&(a.properties=Object.assign({dist:o},a.properties,n)),a},t.planepoint=function(t,e){var i=G(t),r=H(e).coordinates[0];if(r.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var n=e.properties||{},o=n.a,a=n.b,s=n.c,u=i[0],l=i[1],c=r[0][0],p=r[0][1],h=void 0!==o?o:r[0][2],d=r[1][0],f=r[1][1],_=void 0!==a?a:r[1][2],g=r[2][0],m=r[2][1],y=void 0!==s?s:r[2][2];return(y*(u-c)*(l-f)+h*(u-d)*(l-m)+_*(u-g)*(l-p)-_*(u-c)*(l-m)-y*(u-d)*(l-p)-h*(u-g)*(l-f))/((u-c)*(l-f)+(u-d)*(l-m)+(u-g)*(l-p)-(u-c)*(l-m)-(u-d)*(l-p)-(u-g)*(l-f))},t.tin=Rt,t.bearing=fe,t.destination=he,t.kinks=function(t){var e,i,n={type:"FeatureCollection",features:[]};if("LineString"===(i="Feature"===t.type?t.geometry:t).type)e=[i.coordinates];else if("MultiLineString"===i.type)e=i.coordinates;else if("MultiPolygon"===i.type)e=[].concat.apply([],i.coordinates);else{if("Polygon"!==i.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=i.coordinates}return e.forEach((function(t){e.forEach((function(e){for(var i=0;i<t.length-1;i++)for(var o=i;o<e.length-1;o++){if(t===e){if(1===Math.abs(i-o))continue;if(0===i&&o===t.length-2&&t[i][0]===t[t.length-1][0]&&t[i][1]===t[t.length-1][1])continue}var a=function(t,e,i,r,n,o,a,s){var u,l,c,p,h={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(u=(s-o)*(i-t)-(a-n)*(r-e))?null!==h.x&&null!==h.y&&h:(p=(i-t)*(l=e-o)-(r-e)*(c=t-n),l=((a-n)*l-(s-o)*c)/u,c=p/u,h.x=t+l*(i-t),h.y=e+l*(r-e),l>=0&&l<=1&&(h.onLine1=!0),c>=0&&c<=1&&(h.onLine2=!0),!(!h.onLine1||!h.onLine2)&&[h.x,h.y])}(t[i][0],t[i][1],t[i+1][0],t[i+1][1],e[o][0],e[o][1],e[o+1][0],e[o+1][1]);a&&n.features.push(r([a[0],a[1]]))}}))})),n},t.pointOnFeature=_i,t.area=mi,t.along=function(t,e,i){if(!S(i=i||{}))throw new Error("options is invalid");var n;if("Feature"===t.type)n=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");n=t.coordinates}if(!E(e))throw new Error("distance must be a number");for(var o=0,a=0;a<n.length&&!(e>=o&&a===n.length-1);a++){if(o>=e){var s=e-o;if(s){var u=fe(n[a],n[a-1])-180;return he(n[a],s,u,i)}return r(n[a])}o+=zt(n[a],n[a+1],i)}return r(n[n.length-1])},t.length=wi,t.lineSlice=function(t,e,i){var r=j(i);if("LineString"!==Q(i))throw new Error("line must be a LineString");for(var n,o=ni(i,t),a=ni(i,e),u=[(n=o.properties.index<=a.properties.index?[o,a]:[a,o])[0].geometry.coordinates],l=n[0].properties.index+1;l<n[1].properties.index+1;l++)u.push(r[l]);return u.push(n[1].geometry.coordinates),s(u,i.properties)},t.lineSliceAlong=Ei,t.pointGrid=Pi,t.truncate=Ti,t.flatten=function(t){if(!t)throw new Error("geojson is required");var e=[];return O(t,(function(t){e.push(t)})),l(e)},t.lineIntersect=ii,t.lineChunk=function(t,e,i){if(!S(i=i||{}))throw new Error("options is invalid");var r=i.units,n=i.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return O(t,(function(t){n&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,i,r){var n=wi(t,{units:i});if(n<=e)return r(t);var o=n/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var a=0;a<o;a++)r(Ei(t,e*a,e*(a+1),{units:i}),a)}(t,e,r,(function(t){o.push(t)}))})),l(o)},t.unkinkPolygon=function(t){var e=[];return O(t,(function(t){"Polygon"===t.geometry.type&&M(Ta(t),(function(i){e.push(o(i.geometry.coordinates,t.properties))}))})),l(e)},t.greatCircle=function(t,e,i){if("object"!=typeof(i=i||{}))throw new Error("options is invalid");var r=i.properties,n=i.npoints,o=i.offset;return t=G(t),e=G(e),r=r||{},n=n||100,o=o||10,new za({x:t[0],y:t[1]},{x:e[0],y:e[1]},r).Arc(n,{offset:o}).json()},t.lineSegment=ei,t.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var i=Q(t),r=Q(e);if("LineString"!==i)throw new Error("line must be LineString");if("FeatureCollection"===r)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw new Error("splitter cannot be a GeometryCollection");var n=Ti(e,{precision:7});switch(r){case"Point":return Ni(t,n);case"MultiPoint":return Ri(t,n);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Ri(t,ii(t,n))}},t.lineArc=zi,t.polygonToLine=Bi,t.lineToPolygon=Ui,t.bboxClip=function(t,e){var i=function(t){return t.geometry?t.geometry.type:t.type}(t),r=j(t),n=t.properties;switch(i){case"LineString":case"MultiLineString":var a=[];return"LineString"===i&&(r=[r]),r.forEach((function(t){Fa(t,e,a)})),1===a.length?s(a[0],n):c(a,n);case"Polygon":return o(Zi(r,e),n);case"MultiPolygon":return h(r.map((function(t){return Zi(t,e)})),n);default:throw new Error("geometry "+i+" not supported")}},t.lineOverlap=Ji,t.sector=function(t,e,i,r,n){if(!S(n=n||{}))throw new Error("options is invalid");if(!t)throw new Error("center is required");if(null==i)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof n)throw new Error("options must be an object");if(tr(i)===tr(r))return de(t,e,n);var a=j(t),s=[[a]];return C(zi(t,e,i,r,n),(function(t){s[0].push(t)})),s[0].push(a),o(s)},t.rhumbBearing=oi,t.rhumbDistance=si,t.rhumbDestination=er,t.polygonTangents=function(t,e){var i,n,o,a=j(t),s=j(e);switch(Q(e)){case"Polygon":i=s[0][0],n=s[0][0],o=rr(s[0][0],s[0][s[0].length-1],a);var u=ir(s[0],a,o,void 0,i,n);i=u[0],n=u[1];break;case"MultiPolygon":i=s[0][0][0],n=s[0][0][0],o=rr(s[0][0][0],s[0][0][s[0][0].length-1],a),s.forEach((function(t){var e=ir(t[0],a,o,void 0,i,n);i=e[0],n=e[1]}))}return l([r(i),r(n)])},t.rewind=function(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var i=e.reverse||!1,r=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof i)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw new Error("<mutate> must be a boolean");!1===r&&(t=Ft(t));var n=[];switch(t.type){case"GeometryCollection":return N(t,(function(t){or(t,i)})),t;case"FeatureCollection":return M(t,(function(t){M(or(t,i),(function(t){n.push(t)}))})),l(n)}return or(t,i)},t.isobands=function(t,e,i){if(!S(i=i||{}))throw new Error("options is invalid");var r=i.zProperty||"elevation",n=i.commonProperties||{},a=i.breaksProperties||[];if(Y(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!S(n))throw new Error("commonProperties is not an Object");if(!Array.isArray(a))throw new Error("breaksProperties is not an Array");var s=ur(t,{zProperty:r,flip:!0}),u=function(t,e,i){for(var r=[],n=1;n<e.length;n++){var a=+e[n-1],s=+e[n],u=function(t){for(var e=t.map((function(t){return{lrCoordinates:t,grouped:!1}})),i=[];!function(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}(e);)for(var r=0;r<e.length;r++)if(!e[r].grouped){var n=[];n.push(e[r].lrCoordinates),e[r].grouped=!0;for(var a=o([e[r].lrCoordinates]),s=r+1;s<e.length;s++)e[s].grouped||function(t,e){for(var i=ye(t),r=0;r<i.features.length;r++)if(!Lt(i.features[r],e))return!1;return!0}(o([e[s].lrCoordinates]),a)&&(n.push(e[s].lrCoordinates),e[s].grouped=!0);i.push(n)}return i}(function(t){var e=[],i=[];t.forEach((function(t){var r=mi(o([t]));i.push(r),e.push({ring:t,area:r})})),i.sort((function(t,e){return e-t}));var r=[];return i.forEach((function(t){for(var i=0;i<e.length;i++)if(e[i].area===t){r.push(e[i].ring),e.splice(i,1);break}})),r}(lr(t,a,s-a))),l={};l.groupedRings=u,l[i]=a+"-"+s,r.push(l)}return r}(s,e,r);return l((u=function(t,e,i){var r=V(i),n=r[2]-r[0],o=r[3]-r[1],a=r[0],s=r[1],u=e[0].length-1,l=e.length-1,c=n/u,p=o/l,h=function(t){t[0]=t[0]*c+a,t[1]=t[1]*p+s};return t.forEach((function(t){t.groupedRings.forEach((function(t){t.forEach((function(t){t.forEach(h)}))}))})),t}(u,s,t)).map((function(t,e){if(a[e]&&!S(a[e]))throw new Error("Each mappedProperty is required to be an Object");var i=Object.assign({},n,a[e]);return i[r]=t[r],h(t.groupedRings,i)})))},t.transformRotate=hr,t.transformScale=dr,t.transformTranslate=function(t,e,i,r){if(!S(r=r||{}))throw new Error("options is invalid");var n=r.units,o=r.zTranslation,a=r.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(null==i||isNaN(i))throw new Error("direction is required");return e<0&&(e=-e,i=-i),!1!==a&&void 0!==a||(t=Ft(t)),C(t,(function(t){var r=j(er(t,e,i,{units:n}));t[0]=r[0],t[1]=r[1],o&&3===t.length&&(t[2]+=o)})),t},t.lineOffset=function(t,e,i){if(!S(i=i||{}))throw new Error("options is invalid");var r=i.units;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");var n=Q(t),o=t.properties;switch(n){case"LineString":return yr(t,e,r);case"MultiLineString":var a=[];return O(t,(function(t){a.push(yr(t,e,r).geometry.coordinates)})),c(a,o);default:throw new Error("geometry "+n+" is not supported")}},t.polygonize=function(t){var e=zs.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var i=[],r=[];return e.getEdgeRings().filter((function(t){return t.isValid()})).forEach((function(t){t.isHole()?i.push(t):r.push(t)})),i.forEach((function(t){Ds.findEdgeRingContaining(t,r)&&r.push(t)})),l(r.map((function(t){return t.toPolygon()})))},t.booleanDisjoint=function(t,e){var i;return O(t,(function(t){O(e,(function(e){if(!1===i)return!1;i=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(t.coordinates,e.coordinates);case"LineString":return!xr(e,t);case"Polygon":return!Lt(t,e)}break;case"LineString":switch(e.type){case"Point":return!xr(t,e);case"LineString":return!function(t,e){return ii(t,e).features.length>0}(t,e);case"Polygon":return!wr(e,t)}break;case"Polygon":switch(e.type){case"Point":return!Lt(e,t);case"LineString":return!wr(t,e);case"Polygon":return!function(t,e){for(var i=0;i<t.coordinates[0].length;i++)if(Lt(t.coordinates[0][i],e))return!0;for(var r=0;r<e.coordinates[0].length;r++)if(Lt(e.coordinates[0][r],t))return!0;return!1}(e,t)}}}(t.geometry,e.geometry)}))})),i},t.booleanContains=function(t,e){var i=Q(t),r=Q(e),n=H(t),o=H(e),a=j(t),s=j(e);switch(i){case"Point":switch(r){case"Point":return Sr(a,s);default:throw new Error("feature2 "+r+" geometry not supported")}case"MultiPoint":switch(r){case"Point":return function(t,e){var i,r=!1;for(i=0;i<t.coordinates.length;i++)if(Sr(t.coordinates[i],e.coordinates)){r=!0;break}return r}(n,o);case"MultiPoint":return function(t,e){for(var i=0;i<e.coordinates.length;i++){for(var r=!1,n=0;n<t.coordinates.length;n++)if(Sr(e.coordinates[i],t.coordinates[n])){r=!0;break}if(!r)return!1}return!0}(n,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"Point":return Si(o,n,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var i=!1,r=0;r<e.coordinates.length;r++)if(Si({type:"Point",coordinates:e.coordinates[r]},t,{ignoreEndVertices:!0})&&(i=!0),!Si({type:"Point",coordinates:e.coordinates[r]},t,{ignoreEndVertices:!1}))return!1;return i}(n,o);case"MultiPoint":return function(t,e){for(var i=!1,r=0;r<e.coordinates.length;r++)if(Si(e.coordinates[r],t,{ignoreEndVertices:!0})&&(i=!0),!Si(e.coordinates[r],t))return!1;return!!i}(n,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"Point":return Lt(o,n,{ignoreBoundary:!0});case"LineString":return function(t,e){var i=!1,r=0;if(!Er(V(t),V(e)))return!1;for(;r<e.coordinates.length-1;r++)if(Lt({type:"Point",coordinates:function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(e.coordinates[r],e.coordinates[r+1])},t,{ignoreBoundary:!0})){i=!0;break}return i}(n,o);case"Polygon":return function(t,e){if(!Er(V(t),V(e)))return!1;for(var i=0;i<e.coordinates[0].length;i++)if(!Lt(e.coordinates[0][i],t))return!1;return!0}(n,o);case"MultiPoint":return function(t,e){for(var i=0;i<e.coordinates.length;i++)if(!Lt(e.coordinates[i],t,{ignoreBoundary:!0}))return!1;return!0}(n,o);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},t.booleanCrosses=function(t,e){var i=Q(t),r=Q(e),n=H(t),o=H(e);switch(i){case"MultiPoint":switch(r){case"LineString":return Ir(n,o);case"Polygon":return Cr(n,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"MultiPoint":return Ir(o,n);case"LineString":return function(t,e){if(ii(t,e).features.length>0)for(var i=0;i<t.coordinates.length-1;i++)for(var r=0;r<e.coordinates.length-1;r++){var n=!0;if(0!==r&&r!==e.coordinates.length-2||(n=!1),Pr(t.coordinates[i],t.coordinates[i+1],e.coordinates[r],n))return!0}return!1}(n,o);case"Polygon":return Ar(n,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"MultiPoint":return Cr(o,n);case"LineString":return Ar(o,n);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},t.booleanClockwise=nr,t.booleanOverlap=kr,t.booleanPointOnLine=Si,t.booleanEqual=function(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");return Q(t)===Q(e)&&new Vs({precision:6}).compare(te(t),te(e))},t.booleanWithin=Ii,t.clone=Ft,t.cleanCoords=te,t.clustersDbscan=function(t,e,i){if("object"!=typeof(i=i||{}))throw new Error("options is invalid");var r=i.minPoints,n=i.units;if(Y(t,"Point","Input must contain Points"),null==e)throw new Error("maxDistance is required");if(!(Math.sign(e)>0))throw new Error("Invalid maxDistance");if(!(null==r||Math.sign(r)>0))throw new Error("Invalid minPoints");t=Ft(t),r=r||3;var o=new Zs.DBSCAN,a=-1;return o.run(R(t),x(e,n),r,zt).forEach((function(e){a++,e.forEach((function(e){var i=t.features[e];i.properties||(i.properties={}),i.properties.cluster=a,i.properties.dbscan="core"}))})),o.noise.forEach((function(e){var i=t.features[e];i.properties||(i.properties={}),i.properties.cluster?i.properties.dbscan="edge":i.properties.dbscan="noise"})),t},t.clustersKmeans=function(t,e){if("object"!=typeof(e=e||{}))throw new Error("options is invalid");var i=e.numberOfClusters,r=e.mutate;Y(t,"Point","Input must contain Points");var n=t.features.length;(i=i||Math.round(Math.sqrt(n/2)))>n&&(i=n),!1!==r&&void 0!==r||(t=Ft(t));var o=R(t),a=o.slice(0,i),s=eu(o,i,a),u={};return s.centroids.forEach((function(t,e){u[e]=t})),M(t,(function(t,e){var i=s.idxs[e];t.properties.cluster=i,t.properties.centroid=u[i]})),t},t.pointToLineDistance=di,t.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==Nr(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==Nr(e,"line2"))throw new Error("line2 must be a LineString");for(var i=ei(te(t)).features,r=ei(te(e)).features,n=0;n<i.length;n++){var o=i[n].geometry.coordinates;if(!r[n])break;if(!function(t,e){return y(oi(t[0],t[1]))===y(oi(e[0],e[1]))}(o,r[n].geometry.coordinates))return!1}return!0},t.shortestPath=function(t,i,n){if(!S(n=n||{}))throw new Error("options is invalid");var o=n.resolution,a=n.minDistance,u=n.obstacles||l([]);if(!t)throw new Error("start is required");if(!i)throw new Error("end is required");if(o&&!E(o)||o<=0)throw new Error("options.resolution must be a number, greater than 0");if(a)throw new Error("options.minDistance is not yet implemented");var c=G(t),p=G(i);switch(t=r(c),i=r(p),Q(u)){case"FeatureCollection":if(0===u.features.length)return s([c,p]);break;case"Polygon":u=l([e(H(u))]);break;default:throw new Error("invalid obstacles")}var h=u;h.features.push(t),h.features.push(i);var d=V(dr(le(V(h)),1.15));o||(o=zt([d[0],d[1]],[d[2],d[1]],n)/100),h.features.pop(),h.features.pop();for(var f=d[0],_=d[1],g=d[2],m=d[3],y=o/zt([f,_],[g,_],n)*(g-f),v=o/zt([f,_],[f,m],n)*(m-_),b=g-f,x=m-_,w=(b-Math.floor(b/y)*y)/2,I=[],A=[],C=[],P=[],T=1/0,L=1/0,M=m-(x-Math.floor(x/v)*v)/2,k=0;M>=_;){for(var R=[],N=[],D=f+w,O=0;D<=g;){var z=r([D,M]),F=function(t,e){for(var i=0;i<e.features.length;i++)if(Lt(t,e.features[i]))return!0;return!1}(z,u);R.push(F?0:1),N.push(D+"|"+M);var B=zt(z,t);!F&&B<T&&(T=B,C={x:O,y:k});var q=zt(z,i);!F&&q<L&&(L=q,P={x:O,y:k}),D+=y,O++}A.push(R),I.push(N),M-=v,k++}var U=new Or(A,{diagonal:!0}),j=U.grid[C.y][C.x],K=U.grid[P.y][P.x],X=[c];return iu.search(U,j,K).forEach((function(t){var e=I[t.x][t.y].split("|");X.push([+e[0],+e[1]])})),X.push(p),te(s(X))},t.voronoi=function(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var i=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(i))throw new Error("bbox is invalid");return Y(t,"Point","points"),l(du().x((function(t){return t.geometry.coordinates[0]})).y((function(t){return t.geometry.coordinates[1]})).extent([[i[0],i[1]],[i[2],i[3]]]).polygons(t.features).map(pn))},t.ellipse=hn,t.centerMean=fn,t.centerMedian=function(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var i=e.counter||10;if(!E(i))throw new Error("counter must be a number");var r=e.weight,n=fn(t,{weight:e.weight}),o=l([]);return M(t,(function(t){o.features.push(ge(t,{weight:t.properties[r]}))})),o.properties={tolerance:e.tolerance,medianCandidates:[]},_n(n.geometry.coordinates,[0,0],o,i)},t.standardDeviationalEllipse=function(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var i=e.steps||64,r=e.weight,n=e.properties||{};if(!E(i))throw new Error("steps must be a number");if(!S(n))throw new Error("properties must be a number");var o=R(t).length,a=fn(t,{weight:r}),s=0,u=0,c=0;M(t,(function(t){var e=t.properties[r]||1,i=gn(j(t),j(a));s+=Math.pow(i.x,2)*e,u+=Math.pow(i.y,2)*e,c+=i.x*i.y*e}));var p=s-u,h=Math.sqrt(Math.pow(p,2)+4*Math.pow(c,2)),d=2*c,f=Math.atan((p+h)/d),_=180*f/Math.PI,g=0,m=0,y=0;M(t,(function(t){var e=t.properties[r]||1,i=gn(j(t),j(a));g+=Math.pow(i.x*Math.cos(f)-i.y*Math.sin(f),2)*e,m+=Math.pow(i.x*Math.sin(f)+i.y*Math.cos(f),2)*e,y+=e}));var v=Math.sqrt(2*g/y),b=Math.sqrt(2*m/y),x=hn(a,v,b,{units:"degrees",angle:_,steps:i,properties:n}),w=kt(t,l([x])),I={meanCenterCoordinates:j(a),semiMajorAxis:v,semiMinorAxis:b,numberOfFeatures:o,angle:_,percentageWithinEllipse:100*R(w).length/o};return x.properties.standardDeviationalEllipse=I,x},t.difference=function(t,i){var r=H(t),n=H(i),o=t.properties||{};if(r=jn(r),n=jn(n),!r)return null;if(!n)return e(r,o);var a=new Ec,s=a.read(r),u=a.read(n),l=Id.difference(s,u);return l.isEmpty()?null:e((new Sc).write(l),o)},t.buffer=function(t,e,i){var r=(i=i||{}).units,n=i.steps||64;if(!t)throw new Error("geojson is required");if("object"!=typeof i)throw new Error("options must be an object");if("number"!=typeof n)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(n<=0)throw new Error("steps must be greater than 0");n=n||64,r=r||"kilometers";var o=[];switch(t.type){case"GeometryCollection":return N(t,(function(t){var i=Eo(t,e,r);i&&o.push(i)})),l(o);case"FeatureCollection":return M(t,(function(t){var i=Eo(t,e,r);i&&M(i,(function(t){t&&o.push(t)}))})),l(o)}return Eo(t,e,r)},t.union=Po,t.intersect=To,t.dissolve=function(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var i=e.propertyName;Y(t,"Polygon","dissolve");var r=Ft(t),n=r.features,o=[];n.forEach((function(t,e){t.properties.origIndexPosition=e}));var a=Je();for(var u in a.load(r),n){var l=n[u],c=!1;if(a.search(l).features.forEach((function(t){l=n[u];var e=t.properties.origIndexPosition;if(o.length>0&&0!==e)if(e>o[o.length-1])e-=o.length;else{var r=Lo(e,o);0!==r&&(e-=r)}if(e!==+u){var p=n[e];p&&l&&(void 0!==i&&p.properties[i]!==l.properties[i]||kr(l,p)&&function(t,e){return ii(s(R(t)),s(R(e))).features.length>0}(l,p)&&(n[u]=Po(l,p),o.push(t.properties.origIndexPosition),o.sort((function(t,e){return t-e})),a.remove(t),n.splice(e,1),l.properties.origIndexPosition=u,a.remove(l,(function(t,e){return t.properties.origIndexPosition===e.properties.origIndexPosition})),c=!0))}})),c){if(!l)continue;l.properties.origIndexPosition=u,a.insert(l),u--}}return n.forEach((function(t){delete t.properties.origIndexPosition,delete t.bbox})),r},t.hexGrid=Mo,t.mask=function(t,e){var i=function(t){return o(t&&t.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}(e),r=function(t){var e=[],i=[];return O(t,(function(t){var r=t.geometry.coordinates,n=r[0],a=r.slice(1);e.push(o([n])),a.forEach((function(t){i.push(o([t]))}))})),[l(e),l(i)]}(t),n=r[0],a=r[1];return function(t,e,i){var r=[];return r.push(t.geometry.coordinates[0]),O(e,(function(t){r.push(t.geometry.coordinates[0])})),O(i,(function(t){r.push(t.geometry.coordinates[0])})),o(r)}(i,n=ko(n),a=ko(a))},t.squareGrid=No,t.triangleGrid=Do,t.interpolate=function(t,e,i){if("object"!=typeof(i=i||{}))throw new Error("options is invalid");var r=i.gridType,n=i.property,o=i.weight;if(!t)throw new Error("points is required");if(Y(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");n=n||"elevation",r=r||"square",o=o||1;var a,s=V(t);switch(r){case"point":case"points":a=Pi(s,e,i);break;case"square":case"squares":a=No(s,e,i);break;case"hex":case"hexes":a=Mo(s,e,i);break;case"triangle":case"triangles":a=Do(s,e,i);break;default:throw new Error("invalid gridType")}var u=[];return M(a,(function(e){var a=0,s=0;M(t,(function(t){var u,l=zt("point"===r?e:ge(e),t,i);if(void 0!==n&&(u=t.properties[n]),void 0===u&&(u=t.geometry.coordinates[2]),void 0===u)throw new Error("zValue is missing");0===l&&(a=u);var c=1/Math.pow(l,o);s+=c,a+=c*u}));var l=Ft(e);l.properties[n]=a/s,u.push(l)})),l(u)},t.pointOnSurface=_i,t.polygonToLineString=Bi,t.lineStringToPolygon=Ui,t.inside=Lt,t.within=kt,t.bezier=ue,t.nearest=Oe,t.pointOnLine=ni,t.lineDistance=wi,t.radians2degrees=v,t.degrees2radians=b,t.distanceToDegrees=m,t.distanceToRadians=g,t.radiansToDistance=_,t.bearingToAngle=y,t.convertDistance=x,t.toMercator=ui,t.toWgs84=li,t.randomPosition=mn,t.randomPoint=yn,t.randomPolygon=vn,t.randomLineString=bn,t.getCluster=wn,t.clusterEach=En,t.clusterReduce=Sn,t.createBins=In,t.applyFilter=An,t.propertiesContainsFilter=Cn,t.filterProperties=Pn,t.earthRadius=Oo,t.factors=zo,t.unitsFactors=Fo,t.areaFactors=Bo,t.feature=e,t.geometry=i,t.point=r,t.points=n,t.polygon=o,t.polygons=a,t.lineString=s,t.lineStrings=u,t.featureCollection=l,t.multiLineString=c,t.multiPoint=p,t.multiPolygon=h,t.geometryCollection=d,t.round=f,t.radiansToLength=_,t.lengthToRadians=g,t.lengthToDegrees=m,t.bearingToAzimuth=y,t.radiansToDegrees=v,t.degreesToRadians=b,t.convertLength=x,t.convertArea=w,t.isNumber=E,t.isObject=S,t.validateBBox=I,t.validateId=A,t.getCoord=G,t.getCoords=j,t.containsNumber=K,t.geojsonType=X,t.featureOf=Z,t.collectionOf=Y,t.getGeom=H,t.getGeomType=W,t.getType=Q,t.coordEach=C,t.coordReduce=P,t.propEach=T,t.propReduce=L,t.featureEach=M,t.featureReduce=k,t.coordAll=R,t.geomEach=N,t.geomReduce=D,t.flattenEach=O,t.flattenReduce=z,t.segmentEach=F,t.segmentReduce=B,t.lineEach=q,t.lineReduce=U,Object.defineProperty(t,"__esModule",{value:!0})}(e)}));const J=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,$=new RegExp("^"+J.source+"(\\s"+J.source+"){1,}");function tt(t){var e,i=t.split(";"),r=i.pop(),n=(i.shift()||"").split("=").pop(),o=0;function a(t){var e=r.substring(o).match(t);return e?(o+=e[0].length,e[0]):null}function s(){a(/^\s*/)}function u(){s();for(var t,e=0,i=[],r=[i],n=i;t=a(/^(\()/)||a(/^(\))/)||a(/^(,)/)||a($);){if("("===t)r.push(n),n=[],r[r.length-1].push(n),e++;else if(")"===t){if(0===n.length)return null;if(!(n=r.pop()))return null;if(0===--e)break}else if(","===t)n=[],r[r.length-1].push(n);else{if(t.split(/\s/g).some(isNaN))return null;Array.prototype.push.apply(n,t.split(/\s/g).map(parseFloat))}s()}return 0!==e?null:i}function l(){for(var t,e,i=[];e=a($)||a(/^(,)/);)","===e?(i.push(t),t=[]):e.split(/\s/g).some(isNaN)||(t||(t=[]),Array.prototype.push.apply(t,e.split(/\s/g).map(parseFloat))),s();return t?(i.push(t),i.length?i:null):null}function c(){return function(){if(!a(/^(point(\sz)?)/i))return null;if(s(),!a(/^(\()/))return null;var t=l();return t?(s(),a(/^(\))/)?{type:"Point",coordinates:t[0]}:null):null}()||function(){if(!a(/^(linestring(\sz)?)/i))return null;if(s(),!a(/^(\()/))return null;var t=l();return t&&a(/^(\))/)?{type:"LineString",coordinates:t}:null}()||function(){if(!a(/^(polygon(\sz)?)/i))return null;s();var t=u();return t?{type:"Polygon",coordinates:t}:null}()||function(){if(!a(/^(multipoint)/i))return null;s();var t=r.substring(r.indexOf("(")+1,r.length-1).replace(/\(/g,"").replace(/\)/g,"");r="MULTIPOINT ("+t+")";var e=u();return e?(s(),{type:"MultiPoint",coordinates:e}):null}()||function(){if(!a(/^(multilinestring)/i))return null;s();var t=u();return t?(s(),{type:"MultiLineString",coordinates:t}):null}()||function(){if(!a(/^(multipolygon)/i))return null;s();var t=u();return t?{type:"MultiPolygon",coordinates:t}:null}()||function(){var t,e=[];if(!a(/^(geometrycollection)/i))return null;if(s(),!a(/^(\()/))return null;for(;t=c();)e.push(t),s(),a(/^(,)/),s();return a(/^(\))/)?{type:"GeometryCollection",geometries:e}:null}()}return(e=c())&&n.match(/\d+/)&&(e.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+n}}),e}async function et(t){let e=await fetch("https://query.wikidata.org/sparql?query="+encodeURIComponent(t),{headers:{accept:"application/sparql-results+json"}});return(await e.json()).results.bindings}function it(t,e){let i=JSON.parse(JSON.stringify(t));void 0!==e&&Object.keys(i).forEach((t=>{e(i[t])||delete i[t]}));var r=Object.keys(i);return i[r[r.length*Math.random()<<0]]}var rt=[{feature_id:"11145394",description:"state",worldview:"IN",iso_3166_1:"PK",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PAK",wikidata_id:"Q843",centroid:"[70.1995,30.5986]",bounds:"[60.8738,23.7046,75.3843,36.9115]",area_sqkm:"906726",region:"Asia",subregion:"Southern Asia",name:"پاكِستان - Pakistan",name_en:"Pakistan",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Pakistan", "🇵🇰", "pk", "Islamic Republic of Pakistan" ], "ps": [ "پاکستان" ], "sd": [ "پاڪستان", "اسلامي جمھوريہ پاڪستان" ], "ur": [ "پاکستان", "اسلامی جمہوریہ پاکستان" ], "pnb": [ "پاکستان" ] }'},{feature_id:"2494581",description:"state",worldview:"all",iso_3166_1:"KH",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"KHM",wikidata_id:"Q424",centroid:"[105.133,12.558]",bounds:"[102.3341,10.3531,107.6316,14.69]",area_sqkm:"187279",region:"Asia",subregion:"South-eastern Asia",name:"Cambodia",name_en:"Cambodia",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Cambodia", "Kingdom of Cambodia", "kh", "🇰🇭", "Kampuchea", "Camboya", "Campuchia", "Kamboja", "Kambodzha" ], "km": [ "កម្ពុជា", "ព្រះរាជាណាចក្រកម្ពុជា" ] }'},{feature_id:"2363413",description:"state",worldview:"all",iso_3166_1:"BF",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BFA",wikidata_id:"Q965",centroid:"[-1.1849,12.2601]",bounds:"[-5.5119,9.408799999999999,2.4048,15.0855]",area_sqkm:"281258",region:"Africa",subregion:"Sub-Saharan Africa",name:"Burkina Faso",name_en:"Burkina Faso",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Burkina Faso", "bf", "🇧🇫" ], "fr": [ "Burkina Faso", "Burkina" ] }'},{feature_id:"13635833",description:"state",worldview:"all",iso_3166_1:"ZA",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ZAF",wikidata_id:"Q258",centroid:"[23.9312,-28.6718]",bounds:"[16.4519,-34.8341,32.8941,-22.125]",area_sqkm:"1408737",region:"Africa",subregion:"Sub-Saharan Africa",name:"South Africa",name_en:"South Africa",disputed:"FALSE",color_group:"2",names:'{ "af": [ "Suid-Afrika", "Republiek van Suid-Afrika" ], "en": [ "South Africa", "Republic of South Africa", "RSA", "SA", "za", "🇿🇦" ], "xh": [ "UMzantsi Afrika", "IRiphabliki yaseMzantsi Afrika" ], "zu": [ "IRiphabliki yaseNingizimu Afrika" ] }'},{feature_id:"12783820",description:"state",worldview:"all",iso_3166_1:"SM",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SMR",wikidata_id:"Q238",centroid:"[12.4611,43.942]",bounds:"[12.4038,43.8938,12.5161,43.9919]",area_sqkm:"84",region:"Europe",subregion:"Southern Europe",name:"San Marino",name_en:"San Marino",disputed:"FALSE",color_group:"2",names:'{ "en": [ "San Marino", "sm", "🇸🇲", "Most Serene Republic of San Marino", "SMR" ], "it": [ "San Marino", "Serenissima Repubblica di San Marino", "Repubblica di San Marino" ] }'},{feature_id:"1118708",description:"disputed area",worldview:"JP",iso_3166_1:"D0CNIN3",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[79.3519,32.8792]",bounds:"[79.1397,32.5191,79.5613,33.2379]",area_sqkm:"1768",region:"",subregion:"",name:"Demchok disputed area",name_en:"Demchok disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"1905140",description:"disputed area",worldview:"JP",iso_3166_1:"D0KESS4",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[35.7462,4.6551]",bounds:"[35.703,4.6247,35.7813,4.6854]",area_sqkm:"47",region:"",subregion:"",name:"Ilemi Triangle",name_en:"Ilemi Triangle",disputed:"TRUE",color_group:"",names:""},{feature_id:"2429428",description:"disputed area",worldview:"JP",iso_3166_1:"D0CNTW1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[116.7287,20.7035]",bounds:"[116.7069,20.6972,116.7349,20.7097]",area_sqkm:"1",region:"",subregion:"",name:"Pratas Island",name_en:"Pratas Island",disputed:"TRUE",color_group:"",names:""},{feature_id:"1053172",description:"disputed area",worldview:"US",iso_3166_1:"D0CNIN2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[79.1217,34.697]",bounds:"[77.9097,33.3858,80.4217,35.9879]",area_sqkm:"37463",region:"",subregion:"",name:"Aksai Chin disputed area",name_en:"Aksai Chin disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"2036212",description:"disputed area",worldview:"JP",iso_3166_1:"D0INNP1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[80.7744,30.3206]",bounds:"[80.5254,30.1691,81.04519999999999,30.4716]",area_sqkm:"468",region:"",subregion:"",name:"Kalapani-Lympiadhura disputed area",name_en:"Kalapani-Lympiadhura disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"13832400",description:"state",worldview:"US",iso_3166_1:"SS",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SSD",wikidata_id:"Q958",centroid:"[29.1116,7.8795]",bounds:"[24.1507,3.4803,35.9353,12.2322]",area_sqkm:"636626",region:"Africa",subregion:"Sub-Saharan Africa",name:"South Sudan",name_en:"South Sudan",disputed:"FALSE",color_group:"1",names:'{ "ar": [ "جنوب السودان", "جمهورية جنوب السودان", "قائمة جزر جنوب السودان", "بانتيو (مدينة)", "يامبيو (مدينة)", "رمبيك (مدينة)", "أويل (مدينة)", "اويل", "جوبا (مدينة)", "ملكال (مدينة)", "كودوك", "فاشودا", "فاشودة", "ياي", "عاصمة جنوب السودان" ], "en": [ "South Sudan", "Republic of South Sudan", "Southern Sudan", "ss", "🇸🇸", "SSD" ] }'},{feature_id:"11931835",description:"state",worldview:"all",iso_3166_1:"QA",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"QAT",wikidata_id:"Q846",centroid:"[51.1522,25.3174]",bounds:"[50.7501,24.4701,51.6622,26.1833]",area_sqkm:"12848",region:"Asia",subregion:"Western Asia",name:"قطر",name_en:"Qatar",disputed:"FALSE",color_group:"3",names:'{ "ar": [ "قطر", "دولة قطر" ], "en": [ "Qatar", "qa", "State of Qatar", "🇶🇦" ], "fa": [ "قطر" ] }'},{feature_id:"11145394",description:"state",worldview:"JP",iso_3166_1:"PK",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PAK",wikidata_id:"Q843",centroid:"[70.2714,30.6947]",bounds:"[60.8738,23.7046,77.1204,37.0919]",area_sqkm:"1007923",region:"Asia",subregion:"Southern Asia",name:"پاكِستان - Pakistan",name_en:"Pakistan",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Pakistan", "🇵🇰", "pk", "Islamic Republic of Pakistan" ], "ps": [ "پاکستان" ], "sd": [ "پاڪستان", "اسلامي جمھوريہ پاڪستان" ], "ur": [ "پاکستان", "اسلامی جمہوریہ پاکستان" ], "pnb": [ "پاکستان" ] }'},{feature_id:"13963394",description:"state",worldview:"all",iso_3166_1:"LK",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"LKA",wikidata_id:"Q854",centroid:"[80.6383,7.8836]",bounds:"[79.65049999999999,5.9216,81.8789,9.835800000000001]",area_sqkm:"66658",region:"Asia",subregion:"Southern Asia",name:"Sri Lanka",name_en:"Sri Lanka",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Sri Lanka", "Democratic Socialist Republic of Sri Lanka", "Ceylon", "Taprobane", "Serendib", "Ceylan", "🇱🇰", "lk", "Lanka, Sri", "sri", "lke", "ce", "Srilanka", "SRI" ], "si": [ "ශ්‍රී ලංකාව", "ලංකාව" ], "ta": [ "இலங்கை", "இலங்கை சனநாயக சோசலிசக் குடியரசு", "ஈழம்", "இலங்கை சனநாயக சோஷலிசக் குடியரசு" ] }'},{feature_id:"1904675",description:"state",worldview:"all",iso_3166_1:"BW",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BWA",wikidata_id:"Q963",centroid:"[24.4745,-22.4181]",bounds:"[19.998,-26.9073,29.3714,-17.7782]",area_sqkm:"627274",region:"Africa",subregion:"Sub-Saharan Africa",name:"Botswana",name_en:"Botswana",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Botswana", "Republic of Botswana", "Lefatshe la Botswana", "bw", "🇧🇼", "BOT" ], "tn": [ "Botswana" ] }'},{feature_id:"14422228",description:"state",worldview:"all",iso_3166_1:"SY",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SYR",wikidata_id:"Q858",centroid:"[38.5585,34.8522]",bounds:"[35.7167,32.3116,42.3764,37.3188]",area_sqkm:"228968",region:"Asia",subregion:"Western Asia",name:"سورية",name_en:"Syria",disputed:"FALSE",color_group:"2",names:'{ "ar": [ "سوريا", "سورية", "الجمهورية العربية السورية", "الجمهوريّة العربيّة السّوريّة" ], "en": [ "Syria", "sy", "🇸🇾", "Syrian Arab Republic", "SYR" ] }'},{feature_id:"14028996",description:"state",worldview:"all",iso_3166_1:"SD",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SDN",wikidata_id:"Q1049",centroid:"[29.7844,15.4506]",bounds:"[21.8143,8.683,38.8492,22.0065]",area_sqkm:"1953663",region:"Africa",subregion:"Northern Africa",name:"السودان",name_en:"Sudan",disputed:"FALSE",color_group:"2",names:'{ "ar": [ "السودان", "جمهورية السودان" ], "en": [ "Sudan", "Republic of the Sudan", "as-Sūdān", "sd", "North Sudan", "the Sudan", "🇸🇩", "Republic of Sudan", "SUD" ] }'},{feature_id:"8786062",description:"state",worldview:"all",iso_3166_1:"MG",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MDG",wikidata_id:"Q1019",centroid:"[46.6872,-18.9175]",bounds:"[43.1885,-25.6062,50.4861,-11.9488]",area_sqkm:"634137",region:"Africa",subregion:"Sub-Saharan Africa",name:"Madagascar",name_en:"Madagascar",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Madagascar", "mg", "🇲🇬", "Republic of Madagascar", "MAD" ], "fr": [ "Madagascar" ], "mg": [ "Madagasikara", "Repoblikan\'i Madagasikara" ] }'},{feature_id:"4198458",description:"state",worldview:"all",iso_3166_1:"DJ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"DJI",wikidata_id:"Q977",centroid:"[42.5037,11.8131]",bounds:"[41.7719,10.9157,43.4537,12.7067]",area_sqkm:"22281",region:"Africa",subregion:"Sub-Saharan Africa",name:"Djibouti",name_en:"Djibouti",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Djibouti", "Republic of Djibouti", "Jabuuti", "Gabuuti", "Jībūtī", "dj", "🇩🇯", "DJI" ], "so": [ "Jabuuti" ] }'},{feature_id:"7344238",description:"state",worldview:"all",iso_3166_1:"IT",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ITA",wikidata_id:"Q38",centroid:"[12.5138,42.6725]",bounds:"[6.6266,35.493,18.5205,47.0919]",area_sqkm:"412408",region:"Europe",subregion:"Southern Europe",name:"Italia",name_en:"Italy",disputed:"FALSE",color_group:"6",names:'{ "de": [ "Italien", "Italienische Republik" ], "en": [ "Italy", "Italia", "Italian Republic", "IT", "it", "🇮🇹", "ITA" ], "fr": [ "Italie", "République Italienne", "Italia", "IT", "ITA" ], "it": [ "Italia", "ITA", "IT", "Repubblica italiana", "it", "🇮🇹" ] }'},{feature_id:"2232820",description:"disputed area",worldview:"CN",iso_3166_1:"D0INNP2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[83.8659,27.3922]",bounds:"[83.8167,27.3464,83.9084,27.438]",area_sqkm:"37",region:"",subregion:"",name:"Susta disputed area",name_en:"Susta disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"14618853",description:"state",worldview:"all",iso_3166_1:"TZ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TZA",wikidata_id:"Q924",centroid:"[34.2541,-6.4017]",bounds:"[29.3908,-11.7613,40.4451,-0.9853]",area_sqkm:"954271",region:"Africa",subregion:"Sub-Saharan Africa",name:"Tanzania",name_en:"Tanzania",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Tanzania", "United Republic of Tanzania", "tz", "🇹🇿", "United Republic of Tanganyika and Zanzibar" ], "sw": [ "Tanzania", "Jamhuri ya Muungano wa Tanzania" ] }'},{feature_id:"2429428",description:"disputed area",worldview:"US",iso_3166_1:"D0CNTW1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[116.7287,20.7035]",bounds:"[116.7069,20.6972,116.7349,20.7097]",area_sqkm:"1",region:"",subregion:"",name:"Pratas Island",name_en:"Pratas Island",disputed:"TRUE",color_group:"",names:""},{feature_id:"791028",description:"disputed area",worldview:"US",iso_3166_1:"D0CNIN9",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[80.02800000000001,30.7827]",bounds:"[79.69880000000001,30.5589,80.24930000000001,31.0058]",area_sqkm:"942",region:"",subregion:"",name:"Lapthal-Bara Hoti disputed area",name_en:"Lapthal-Bara Hoti disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"1642996",description:"disputed area",worldview:"CN",iso_3166_1:"D0GFSR1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[-54.1343,2.7239]",bounds:"[-54.6024,2.1443,-53.9703,3.3029]",area_sqkm:"3444",region:"",subregion:"",name:"French Guiana–Suriname disputed area",name_en:"French Guiana–Suriname disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"2363892",description:"disputed area",worldview:"US",iso_3166_1:"D0CNTWVN1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[111.7015,16.2212]",bounds:"[111.1905,15.7749,112.7456,17.1141]",area_sqkm:"489",region:"",subregion:"",name:"Paracel Islands",name_en:"Paracel Islands",disputed:"TRUE",color_group:"",names:""},{feature_id:"2232348",description:"state",worldview:"all",iso_3166_1:"BN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BRN",wikidata_id:"Q921",centroid:"[114.5238,4.5256]",bounds:"[114.0758,4.0023,115.3634,5.0459]",area_sqkm:"5898",region:"Asia",subregion:"South-eastern Asia",name:"Brunei Darussalam بروني دارالسلام",name_en:"Brunei",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Brunei", "Nation of Brunei, the Abode of Peace", "bn", "Brunei Darussalam", "🇧🇳", "BRN", "BRU" ], "ms": [ "Brunei", "Negara Brunei Darussalam", "Brunei Darussalam" ], "zh-hant": [ "汶萊", "汶萊和平之國", "汶萊達魯薩蘭國" ] }'},{feature_id:"10096786",description:"state",worldview:"all",iso_3166_1:"MM",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MMR",wikidata_id:"Q836",centroid:"[95.9058,19.5274]",bounds:"[92.1721,9.597899999999999,101.1703,28.5484]",area_sqkm:"731508",region:"Asia",subregion:"South-eastern Asia",name:"မြန်မာ",name_en:"Myanmar",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Myanmar", "Burma", "Republic of the Union of Myanmar", "Union of Burma", "MM", "🇲🇲", "BUR", "MYA" ], "my": [ "မြန်မာနိုင်ငံ", "ပြည်ထောင်စု သမ္မတ မြန်မာနိုင်ငံတော်", "Burma" ] }'},{feature_id:"12325063",description:"dependent territory",worldview:"all",iso_3166_1:"SH",sovereign_iso_3166_1:"UK",iso_3166_1_alpha_3:"SHN",wikidata_id:"Q34497",centroid:"[-12.2823,-37.1159]",bounds:"[-14.421,-40.3714,-5.6341,-7.8892]",area_sqkm:"428",region:"Africa",subregion:"Sub-Saharan Africa",name:"Saint Helena, Ascension and Tristan da Cunha",name_en:"Saint Helena, Ascension and Tristan da Cunha",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Saint Helena", "St Helena" ] }'},{feature_id:"8917150",description:"state",worldview:"all",iso_3166_1:"MY",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MYS",wikidata_id:"Q833",centroid:"[114.6579,3.9511]",bounds:"[99.6407,0.8546,119.2697,7.3806]",area_sqkm:"333082",region:"Asia",subregion:"South-eastern Asia",name:"Malaysia",name_en:"Malaysia",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Malaysia", "my", "🇲🇾", "Federation of Malaysia", "Malaysia Federation", "MAS" ], "ms": [ "Malaysia", "مليسيا", "Persekutuan Malaysia", "ڤرسکوتوان مليسيا" ], "zh-hant": [ "馬來西亞" ] }'},{feature_id:"4591704",description:"state",worldview:"all",iso_3166_1:"GQ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GNQ",wikidata_id:"Q983",centroid:"[10.4695,1.6342]",bounds:"[5.5989,-1.4676,11.3654,3.7887]",area_sqkm:"27152",region:"Africa",subregion:"Sub-Saharan Africa",name:"Guinée équatoriale - Guinea Ecuatorial · Guiné Equatorial",name_en:"Equatorial Guinea",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Equatorial Guinea", "Republic of Equatorial Guinea", "gq", "🇬🇶", "GEQ" ], "es": [ "Guinea Ecuatorial", "República de Guinea Ecuatorial", "Republica de Guinea Ecuatorial" ] }'},{feature_id:"14225621",description:"state",worldview:"all",iso_3166_1:"SZ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SWZ",wikidata_id:"Q1050",centroid:"[31.4607,-26.5203]",bounds:"[30.7908,-27.3175,32.1322,-25.7188]",area_sqkm:"19452",region:"Africa",subregion:"Sub-Saharan Africa",name:"eSwatini",name_en:"Eswatini",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Eswatini", "Umbuso weSwatini", "eSwatini", "🇸🇿", "Kingdom of Swaziland", "sz", "Swaziland", "Kingdom of Eswatini", "SWZ" ], "ss": [ "Umbuso weSwatini" ] }'},{feature_id:"6754404",description:"state",worldview:"all",iso_3166_1:"HU",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"HUN",wikidata_id:"Q28",centroid:"[19.1493,47.1813]",bounds:"[16.1141,45.7372,22.8974,48.5854]",area_sqkm:"136736",region:"Europe",subregion:"Eastern Europe",name:"Magyarország",name_en:"Hungary",disputed:"FALSE",color_group:"4",names:'{ "de": [ "Ungarn" ], "en": [ "Hungary", "hu", "🇭🇺", "HUN" ], "hu": [ "Magyarország", "Mo.", "hu", "🇭🇺", "harmadik magyar köztársaság", "Magyar Köztársaság" ] }'},{feature_id:"1773598",description:"state",worldview:"all",iso_3166_1:"BQ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BES",wikidata_id:"Q27561",centroid:"[-68.2465,12.1671]",bounds:"[-68.4207,12.0243,-62.9459,17.6501]",area_sqkm:"325",region:"Americas",subregion:"Latin America and the Caribbean",name:"Bonaire, Sint Eustatius and Saba",name_en:"Bonaire, Sint Eustatius and Saba",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Caribbean Netherlands", "BES islands", "🇧🇶" ] }'},{feature_id:"4722752",description:"state",worldview:"all",iso_3166_1:"EE",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"EST",wikidata_id:"Q191",centroid:"[25.3668,58.6092]",bounds:"[21.7643,57.5093,28.2099,59.822]",area_sqkm:"84155",region:"Europe",subregion:"Northern Europe",name:"Eesti",name_en:"Estonia",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Estonia", "Republic of Estonia", "Estland", "Eesti", "ee", "EST", "🇪🇪" ], "et": [ "Eesti", "Eesti Vabariik" ], "fi": [ "Viro", "Eesti", "Viron tasavalta" ], "ru": [ "Эстония", "Эстонская Республика", "Республика Эстония", "Ээсти" ] }'},{feature_id:"14946528",description:"state",worldview:"all",iso_3166_1:"TO",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TON",wikidata_id:"Q678",centroid:"[-175.2735,-21.168]",bounds:"[-176.2137,-22.3497,-173.7351,-15.5659]",area_sqkm:"808",region:"Oceania",subregion:"Polynesia",name:"Tonga",name_en:"Tonga",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Tonga", "🇹🇴", "to", "Kingdom of Tonga", "TGA" ], "to": [ "Tonga" ] }'},{feature_id:"7475312",description:"state",worldview:"all",iso_3166_1:"JM",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"JAM",wikidata_id:"Q766",centroid:"[-77.1598,18.1156]",bounds:"[-78.3687,17.7057,-76.1824,18.5249]",area_sqkm:"11611",region:"Americas",subregion:"Latin America and the Caribbean",name:"Jamaica",name_en:"Jamaica",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Jamaica", "JA", "Commonwealth of Jamaica", "Jamdung", "jm", "🇯🇲", "JAM" ], "jam": [ "Jumieka" ] }'},{feature_id:"15143137",description:"state",worldview:"all",iso_3166_1:"TR",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TUR",wikidata_id:"Q43",centroid:"[35.5135,39.0251]",bounds:"[25.6652,35.8129,44.8264,42.1046]",area_sqkm:"1007665",region:"Asia",subregion:"Western Asia",name:"Türkiye",name_en:"Turkey",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Turkey", "Republic of Turkey", "tr", "🇹🇷", "TUR" ], "tr": [ "Türkiye", "Türkiye Cumhuriyeti", "T.C.", "TC", "tr", "🇹🇷" ] }'},{feature_id:"5378124",description:"state",worldview:"all",iso_3166_1:"GA",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GAB",wikidata_id:"Q1000",centroid:"[11.6604,-0.8204]",bounds:"[8.6991,-3.956,14.5281,2.318]",area_sqkm:"265120",region:"Africa",subregion:"Sub-Saharan Africa",name:"Gabon",name_en:"Gabon",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Gabon", "Gabonese Republic", "République Gabonaise", "ga", "🇬🇦", "Republique Gabonaise", "GAB" ], "fr": [ "Gabon", "République gabonaise" ] }'},{feature_id:"12128447",description:"state",worldview:"all",iso_3166_1:"RU",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"RUS",wikidata_id:"Q159",centroid:"[110.0304,65.09690000000001]",bounds:"[-180,41.1853,180,81.8574]",area_sqkm:"34911957",region:"Europe",subregion:"Eastern Europe",name:"Россия",name_en:"Russia",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Russia", "Rossiya", "Rossija", "RU", "ru", "Rossijskaja Federatsija", "Russian Federation", "Rossiyskaya Federatsiya", "Rus", "RUS" ], "ru": [ "Россия", "Российская Федерация", "РФ", "Русь" ] }'},{feature_id:"66064479",description:"state",worldview:"US",iso_3166_1:"HK",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"HKG",wikidata_id:"Q8646",centroid:"[114.0599,22.4114]",bounds:"[113.8351,22.1539,114.4417,22.562]",area_sqkm:"1214",region:"Asia",subregion:"Eastern Asia",name:"香港",name_en:"Hong Kong",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Hong Kong", "HKSAR", "HKG", "HK", "Hong Kong SAR", "China Hong Kong", "Hong Kong, China", "hk", "Hong Kong SAR, China", "🇭🇰", "Hong Kong Special Administrative Region" ], "yue": [ "香港", "香港特別行政區", "香港特區", "中國香港" ], "zh-hant": [ "香港", "香港特別行政區", "香港特區", "中國香港" ] }'},{feature_id:"16584881",description:"state",worldview:"all",iso_3166_1:"PH",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PHL",wikidata_id:"Q928",centroid:"[120.7409,15.6149]",bounds:"[116.9283,4.5869,126.6053,21.0701]",area_sqkm:"300397",region:"Asia",subregion:"South-eastern Asia",name:"Philippines",name_en:"Philippines",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Philippines", "Republic of the Philippines", "PH", "ph", "the Philippines", "Philippine Islands", "PHL", "RP", "🇵🇭", "PHI" ], "es": [ "Filipinas", "República de Filipinas", "Republica de Filipinas" ], "ceb": [ "Pilipinas", "Republika sa Pilipinas" ] }'},{feature_id:"1642529",description:"state",worldview:"JP",iso_3166_1:"BT",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BTN",wikidata_id:"Q917",centroid:"[90.3415,27.473]",bounds:"[88.7683,26.6948,92.124,28.2458]",area_sqkm:"43846",region:"Asia",subregion:"Southern Asia",name:"འབྲུགཡུལ་",name_en:"Bhutan",disputed:"FALSE",color_group:"5",names:'{ "dz": [ "འབྲུག་ཡུལ་", "འབྲུགཡུལ་་" ], "en": [ "Bhutan", "Kingdom of Bhutan", "bt", "🇧🇹", "BHU" ], "ne": [ "भुटान" ] }'},{feature_id:"66064479",description:"state",worldview:"JP",iso_3166_1:"HK",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"HKG",wikidata_id:"Q8646",centroid:"[114.0599,22.4114]",bounds:"[113.8351,22.1539,114.4417,22.562]",area_sqkm:"1214",region:"Asia",subregion:"Eastern Asia",name:"香港",name_en:"Hong Kong",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Hong Kong", "HKSAR", "HKG", "HK", "Hong Kong SAR", "China Hong Kong", "Hong Kong, China", "hk", "Hong Kong SAR, China", "🇭🇰", "Hong Kong Special Administrative Region" ], "yue": [ "香港", "香港特別行政區", "香港特區", "中國香港" ], "zh-hant": [ "香港", "香港特別行政區", "香港特區", "中國香港" ] }'},{feature_id:"6295638",description:"state",worldview:"all",iso_3166_1:"GN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GIN",wikidata_id:"Q1006",centroid:"[-9.662000000000001,9.945]",bounds:"[-15.0761,7.1905,-7.6374,12.6756]",area_sqkm:"251048",region:"Africa",subregion:"Sub-Saharan Africa",name:"Guinée",name_en:"Guinea",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Guinea", "Guinea-Conakry", "Republic of Guinea", "République de Guinée", "gn", "🇬🇳", "Republique de Guinee", "GUI" ], "ff": [ "Gine" ], "fr": [ "Guinée", "Guinée-Conakry", "République de Guinée" ] }'},{feature_id:"10883193",description:"state",worldview:"all",iso_3166_1:"KP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PRK",wikidata_id:"Q423",centroid:"[126.8405,40.3963]",bounds:"[124.1813,37.6769,130.6998,43.009]",area_sqkm:"160141",region:"Asia",subregion:"Eastern Asia",name:"북조선",name_en:"North Korea",disputed:"FALSE",color_group:"3",names:'{ "en": [ "North Korea", "🇰🇵", "Democratic People\'s Republic of Korea", "DPRK", "PRK", "kp", "Dem. Rep. Korea", "N. Korea" ], "ko": [ "조선민주주의인민공화국", "공화국", "조선" ] }'},{feature_id:"3084336",description:"state",worldview:"CN",iso_3166_1:"CN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CHN",wikidata_id:"Q148",centroid:"[100.5057,38.8017]",bounds:"[73.5013,7.3643,134.7734,53.5604]",area_sqkm:"11717970",region:"Asia",subregion:"Eastern Asia",name:"中国",name_en:"China",disputed:"FALSE",color_group:"4",names:'{ "en": [ "People\'s Republic of China", "China", "CN", "PR China", "PRC", "cn", "CHN", "Communist China", "🇨🇳" ], "zh": [ "中华人民共和国", "中国", "中國", "中華人民共和國", "共产中国", "新中国", "中華人民共和國／中华人民共和国", "中" ] }'},{feature_id:"66130068",description:"state",worldview:"US",iso_3166_1:"MO",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MAC",wikidata_id:"Q14773",centroid:"[113.5643,22.1404]",bounds:"[113.5287,22.1097,113.5983,22.217]",area_sqkm:"34",region:"Asia",subregion:"Eastern Asia",name:"澳门",name_en:"Macau",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Macau", "Macao", "Macau Special Administrative Region", "Macau Special Administrative Region of the People\'s Republic of China", "Aomen", "mo", "Macao Special Administrative Region", "Macao Special Administrative Region of the People\'s Republic of China", "Macau SAR", "Macau SAR, China", "Macao SAR", "Macao SAR, China", "🇲🇴" ], "zh-hant": [ "澳門", "澳門特別行政區", "馬交" ] }'},{feature_id:"5902420",description:"state",worldview:"all",iso_3166_1:"GL",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GRL",wikidata_id:"Q223",centroid:"[-40.4109,76.068]",bounds:"[-73.26349999999999,59.7773,-11.3123,83.62739999999999]",area_sqkm:"8511107",region:"Americas",subregion:"Northern America",name:"Kalaallit Nunaat",name_en:"Greenland",disputed:"FALSE",color_group:"4",names:'{ "da": [ "Grønland" ], "en": [ "Greenland", "gl", "🇬🇱" ], "kl": [ "Kalaallit Nunaat" ] }'},{feature_id:"11014311",description:"state",worldview:"all",iso_3166_1:"NO",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"NOR",wikidata_id:"Q20",centroid:"[13.6065,65.3651]",bounds:"[4.4976,57.9599,31.1681,71.1855]",area_sqkm:"745444",region:"Europe",subregion:"Northern Europe",name:"Norge",name_en:"Norway",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Norway", "Kingdom of Norway", "Norge", "Norvège‏", "NO", "NOR", "no", "Noreg", "🇳🇴", "Norwegen‏" ], "nb": [ "Norge", "Kongeriket Norge", "Noreg", "Kongeriket Norge\\/Noreg" ], "nn": [ "Noreg", "Kongeriket Noreg", "Norge" ] }'},{feature_id:"16519419",description:"state",worldview:"all",iso_3166_1:"ZW",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ZWE",wikidata_id:"Q954",centroid:"[29.4113,-19.0547]",bounds:"[25.2374,-22.422,33.054,-15.6099]",area_sqkm:"415447",region:"Africa",subregion:"Sub-Saharan Africa",name:"Zimbabwe",name_en:"Zimbabwe",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Zimbabwe", "Republic of Zimbabwe", "Southern Rhodesia", "Rhodesia", "Zimbabwe Rhodesia", "🇿🇼", "zw", "ZIM" ], "sn": [ "Zimbabwe" ] }'},{feature_id:"8327300",description:"state",worldview:"all",iso_3166_1:"LS",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"LSO",wikidata_id:"Q1013",centroid:"[28.1745,-29.6285]",bounds:"[27.0113,-30.6755,29.4557,-28.5708]",area_sqkm:"35232",region:"Africa",subregion:"Sub-Saharan Africa",name:"Lesotho",name_en:"Lesotho",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Lesotho", "Kingdom of Lesotho", "ls", "🇱🇸", "LES" ], "st": [ "Lesotho", "Mmuso wa Lesotho" ], "zu": [ "OSotho" ] }'},{feature_id:"14094543",description:"state",worldview:"all",iso_3166_1:"SR",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SUR",wikidata_id:"Q730",centroid:"[-56.1089,3.923]",bounds:"[-58.0547,1.834,-53.9802,6.0088]",area_sqkm:"146569",region:"Americas",subregion:"Latin America and the Caribbean",name:"Suriname",name_en:"Suriname",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Suriname", "Surinam", "Republic of Suriname", "Republic of Surinam", "Dutch Guiana", "sr", "🇸🇷", "SUR" ], "nl": [ "Suriname", "Republiek Suriname", "SR", "SUR" ], "srn": [ "Sranankondre" ] }'},{feature_id:"10424481",description:"state",worldview:"all",iso_3166_1:"NC",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"NCL",wikidata_id:"Q33788",centroid:"[165.2478,-21.24]",bounds:"[158.2487,-22.848,172.09,-18.0264]",area_sqkm:"20324",region:"Oceania",subregion:"Melanesia",name:"Nouvelle-Calédonie",name_en:"New Caledonia",disputed:"FALSE",color_group:"7",names:'{ "en": [ "New Caledonia", "nc", "🇳🇨", "Nouvelle-Calédonie" ], "fr": [ "Nouvelle-Calédonie", "La nouvelle caledonie", "Nouvelle caledonie", "Nouvelle Calédonie", "Nouvelle-Caledonie", "New Caledonia", "988" ] }'},{feature_id:"1446388",description:"disputed area",worldview:"IN",iso_3166_1:"D0BTCN2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[89.0081,27.5135]",bounds:"[88.9483,27.3998,89.1622,27.6271]",area_sqkm:"187",region:"",subregion:"",name:"Doklam Plateau",name_en:"Doklam Plateau",disputed:"TRUE",color_group:"",names:""},{feature_id:"463348",description:"disputed area",worldview:"all",iso_3166_1:"D0BRUY1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[-55.9486,-30.9757]",bounds:"[-56.0185,-31.0871,-55.8127,-30.8647]",area_sqkm:"290",region:"",subregion:"",name:"Rincón de Artigas",name_en:"Rincón de Artigas",disputed:"TRUE",color_group:"",names:""},{feature_id:"1249780",description:"disputed area",worldview:"US",iso_3166_1:"D0CNIN5",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[78.6045,32.6215]",bounds:"[78.5668,32.6004,78.64109999999999,32.6423]",area_sqkm:"25",region:"",subregion:"",name:"Chumar disputed area",name_en:"Chumar disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"2036212",description:"disputed area",worldview:"US",iso_3166_1:"D0INNP1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[80.7744,30.3206]",bounds:"[80.5254,30.1691,81.04519999999999,30.4716]",area_sqkm:"468",region:"",subregion:"",name:"Kalapani-Lympiadhura disputed area",name_en:"Kalapani-Lympiadhura disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"9703562",description:"state",worldview:"all",iso_3166_1:"MC",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MCO",wikidata_id:"Q235",centroid:"[7.4243,43.7384]",bounds:"[7.409,43.7246,7.44,43.7519]",area_sqkm:"2",region:"Europe",subregion:"Western Europe",name:"Monaco",name_en:"Monaco",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Monaco", "Principality of Monaco", "mc", "🇲🇨", "MON" ], "fr": [ "Monaco", "Principauté de Monaco", "MON", "mc" ] }'},{feature_id:"1970676",description:"disputed area",worldview:"IN",iso_3166_1:"D0ILPS1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[35.2419,31.7959]",bounds:"[35.1507,31.7092,35.2654,31.8829]",area_sqkm:"83",region:"",subregion:"",name:"East Jerusalem",name_en:"East Jerusalem",disputed:"TRUE",color_group:"",names:""},{feature_id:"66130068",description:"state",worldview:"IN",iso_3166_1:"MO",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MAC",wikidata_id:"Q14773",centroid:"[113.5643,22.1404]",bounds:"[113.5287,22.1097,113.5983,22.217]",area_sqkm:"34",region:"Asia",subregion:"Eastern Asia",name:"澳门",name_en:"Macau",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Macau", "Macao", "Macau Special Administrative Region", "Macau Special Administrative Region of the People\'s Republic of China", "Aomen", "mo", "Macao Special Administrative Region", "Macao Special Administrative Region of the People\'s Republic of China", "Macau SAR", "Macau SAR, China", "Macao SAR", "Macao SAR, China", "🇲🇴" ], "zh-hant": [ "澳門", "澳門特別行政區", "馬交" ] }'},{feature_id:"16650295",description:"state",worldview:"all",iso_3166_1:"CY",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CYP",wikidata_id:"Q229",centroid:"[33.3986,35.1661]",bounds:"[32.2692,34.6323,34.6066,35.7109]",area_sqkm:"10996",region:"Asia",subregion:"Western Asia",name:"Κύπρος",name_en:"Cyprus",disputed:"FALSE",color_group:"1",names:'{ "el": [ "Κύπρος", "Κυπριακή Δημοκρατία" ], "en": [ "Cyprus", "Republic of Cyprus", "cy", "🇨🇾" ], "tr": [ "Kıbrıs Cumhuriyeti", "Kıbrıs" ] }'},{feature_id:"12587188",description:"dependent territory",worldview:"all",iso_3166_1:"PM",sovereign_iso_3166_1:"FR",iso_3166_1_alpha_3:"SPM",wikidata_id:"Q34617",centroid:"[-56.3267,46.9642]",bounds:"[-56.406,46.7489,-56.1266,47.145]",area_sqkm:"331",region:"Americas",subregion:"Northern America",name:"Saint-Pierre-et-Miquelon",name_en:"Saint Pierre and Miquelon",disputed:"FALSE",color_group:"7",names:'{ "en": [ "Saint Pierre and Miquelon", "Saint-Pierre-et-Miquelon", "Saint-Pierre et Miquelon", "pm", "St. Pierre and Miquelon", "St Pierre and Miquelon", "🇵🇲" ], "fr": [ "Saint-Pierre-et-Miquelon", "Îles Saint-Pierre-et-Miquelon", "975" ] }'},{feature_id:"1970210",description:"state",worldview:"all",iso_3166_1:"BV",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BVT",wikidata_id:"Q23408",centroid:"[3.3595,-54.4197]",bounds:"[3.2845,-54.4549,3.4333,-54.3864]",area_sqkm:"86",region:"Americas",subregion:"Latin America and the Caribbean",name:"Bouvet Island",name_en:"Bouvet Island",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Bouvet Island", "bv", "🇧🇻", "Bouvetøya" ] }'},{feature_id:"528884",description:"disputed area",worldview:"US",iso_3166_1:"D0BTCN1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[90.2383,28.2113]",bounds:"[89.8182,28.0606,90.61490000000001,28.3608]",area_sqkm:"1440",region:"",subregion:"",name:"Kula Kangri",name_en:"Kula Kangri",disputed:"TRUE",color_group:"",names:""},{feature_id:"1183763",description:"state",worldview:"all",iso_3166_1:"BD",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BGD",wikidata_id:"Q902",centroid:"[89.8601,23.7235]",bounds:"[88.0004,20.5751,92.6795,26.6395]",area_sqkm:"155617",region:"Asia",subregion:"Southern Asia",name:"বাংলাদেশ",name_en:"Bangladesh",disputed:"FALSE",color_group:"3",names:'{ "bn": [ "বাংলাদেশ", "গণপ্রজাতন্ত্রী বাংলাদেশ", "bd" ], "en": [ "Bangladesh", "bd", "🇧🇩", "BAN" ] }'},{feature_id:"5640274",description:"state",worldview:"all",iso_3166_1:"GH",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GHA",wikidata_id:"Q117",centroid:"[-1.0593,7.9674]",bounds:"[-3.2551,4.7392,1.2001,11.1683]",area_sqkm:"242806",region:"Africa",subregion:"Sub-Saharan Africa",name:"Ghana",name_en:"Ghana",disputed:"FALSE",color_group:"5",names:'{ "ak": [ "Ghana" ], "ee": [ "Ghana" ], "en": [ "Ghana", "Republic of Ghana", "🇬🇭", "gh", "GHA" ] }'},{feature_id:"922100",description:"disputed area",worldview:"US",iso_3166_1:"D0CNIN8",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[79.1259,31.2045]",bounds:"[78.8826,30.9496,79.4173,31.459]",area_sqkm:"1714",region:"",subregion:"",name:"Jadh-Nelang disputed area",name_en:"Jadh-Nelang disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"14160073",description:"dependent territory",worldview:"all",iso_3166_1:"SJ",sovereign_iso_3166_1:"NO",iso_3166_1_alpha_3:"SJM",wikidata_id:"Q25231",centroid:"[18.5821,78.4378]",bounds:"[-9.086399999999999,70.8278,37.0668,80.8212]",area_sqkm:"336616",region:"Europe",subregion:"Northern Europe",name:"Svalbard and Jan Mayen",name_en:"Svalbard and Jan Mayen",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Svalbard", "Svaldbard", "Spitsburgen", "Svalbard Archipelago", "Svaalbard", "Svalbard Islands", "Sval\'bard", "Spitzburgen", "Svalbard Island", "Spitzbergen" ], "nb": [ "Svalbard", "Svalbardianer", "Svalbardianar" ], "ru": [ "Шпицберген", "Свалбард", "Свальбард", "Грумант" ] }'},{feature_id:"10555557",description:"state",worldview:"all",iso_3166_1:"NI",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"NIC",wikidata_id:"Q811",centroid:"[-85.5806,12.8787]",bounds:"[-87.69029999999999,10.7094,-82.7346,15.0294]",area_sqkm:"132107",region:"Americas",subregion:"Latin America and the Caribbean",name:"Nicaragua",name_en:"Nicaragua",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Nicaragua", "ni", "🇳🇮", "Republic of Nicaragua", "NIC", "NI", "NCA" ], "es": [ "Nicaragua", "República de Nicaragua", "Republica de Nicaragua", "Salve a ti, Nicaragua" ] }'},{feature_id:"397812",description:"disputed area",worldview:"US",iso_3166_1:"D0GYSR1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[-57.3612,2.4457]",bounds:"[-58.3309,1.4976,-56.4851,3.3943]",area_sqkm:"14492",region:"",subregion:"",name:"Tigri Area",name_en:"Tigri Area",disputed:"TRUE",color_group:"",names:""},{feature_id:"14487780",description:"state",worldview:"US",iso_3166_1:"TW",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TWN",wikidata_id:"Q865",centroid:"[120.8354,23.609]",bounds:"[114.3593,10.3713,122.1091,26.3853]",area_sqkm:"40091",region:"Asia",subregion:"Eastern Asia",name:"台灣",name_en:"Taiwan",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Taiwan", "ROC", "Chunghwa Minkwo", "Chunghwa Minkuo", "Formosa", "Republic of China", "Nationalist China", "Free China", "Free area of the Republic of China", "Republic of China (Taiwan)", "Chinese Taipei", "🇹🇼", "tw" ], "zh-hant": [ "中華民國", "自由中國", "臺灣", "臺澎金馬", "中華台北", "ROC", "台灣", "民國", "中華民國臺灣" ] }'},{feature_id:"856564",description:"disputed area",worldview:"JP",iso_3166_1:"D0CNIN7",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[78.791,31.3804]",bounds:"[78.7495,31.294,78.86020000000001,31.4674]",area_sqkm:"106",region:"",subregion:"",name:"Shipki Pass disputed area",name_en:"Shipki Pass disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"1446388",description:"disputed area",worldview:"JP",iso_3166_1:"D0BTCN2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[89.0081,27.5135]",bounds:"[88.9483,27.3998,89.1622,27.6271]",area_sqkm:"187",region:"",subregion:"",name:"Doklam Plateau",name_en:"Doklam Plateau",disputed:"TRUE",color_group:"",names:""},{feature_id:"3084336",description:"state",worldview:"IN",iso_3166_1:"CN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CHN",wikidata_id:"Q148",centroid:"[100.5057,38.8017]",bounds:"[73.5013,7.3643,134.7734,53.5604]",area_sqkm:"11603523",region:"Asia",subregion:"Eastern Asia",name:"中国",name_en:"China",disputed:"FALSE",color_group:"4",names:'{ "en": [ "People\'s Republic of China", "China", "CN", "PR China", "PRC", "cn", "CHN", "Communist China", "🇨🇳" ], "zh": [ "中华人民共和国", "中国", "中國", "中華人民共和國", "共产中国", "新中国", "中華人民共和國／中华人民共和国", "中" ] }'},{feature_id:"1511449",description:"state",worldview:"all",iso_3166_1:"BJ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BEN",wikidata_id:"Q962",centroid:"[2.283,9.333299999999999]",bounds:"[0.7798,6.2347,3.8534,12.4092]",area_sqkm:"118068",region:"Africa",subregion:"Sub-Saharan Africa",name:"Bénin",name_en:"Benin",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Benin", "Republic of Benin", "Dahomey", "bj", "🇧🇯", "BEN" ], "fr": [ "Bénin", "La République du Bénin" ] }'},{feature_id:"8458376",description:"state",worldview:"all",iso_3166_1:"LY",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"LBY",wikidata_id:"Q1016",centroid:"[17.4446,26.5832]",bounds:"[9.392300000000001,19.5087,25.1471,33.1669]",area_sqkm:"1835729",region:"Africa",subregion:"Northern Africa",name:"ليبيا",name_en:"Libya",disputed:"FALSE",color_group:"1",names:'{ "ar": [ "ليبيا", "ليبية", "ليبي", "ليببيا", "الليبية", "الليبي", "الليبين", "الجمهورية الليبية", "دولة ليبيا", "لوبيا (دولة)", "لوبية (دولة)", "لوبيا (ليبيا)", "لوبية (ليبيا)" ], "en": [ "Libya", "State of Libya", "ly", "🇱🇾", "LBA" ] }'},{feature_id:"7934197",description:"state",worldview:"US",iso_3166_1:"XK",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"XKS",wikidata_id:"Q1246",centroid:"[20.9131,42.5637]",bounds:"[20.0164,41.8511,21.7907,43.2681]",area_sqkm:"14823",region:"Europe",subregion:"Southern Europe",name:"Kosovë - Косово",name_en:"Kosovo",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Kosovo", "Republic of Kosovo", "XK", "KOS", "XKX", "KV", "🇽🇰" ], "sq": [ "Kosovë", "Republika e Kosovës", "RKS", "KS", "Kosova" ] }'},{feature_id:"10490027",description:"state",worldview:"all",iso_3166_1:"NZ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"NZL",wikidata_id:"Q664",centroid:"[171.0074,-43.6656]",bounds:"[-176.8931,-52.6088,178.8243,-34.1292]",area_sqkm:"352083",region:"Oceania",subregion:"Australia and New Zealand",name:"New Zealand",name_en:"New Zealand",disputed:"FALSE",color_group:"3",names:'{ "en": [ "New Zealand", "NZ", "NZL", "Dominion of New Zealand", "Aotearoa", "nz", "🇳🇿" ] }'},{feature_id:"10031263",description:"state",worldview:"all",iso_3166_1:"MZ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MOZ",wikidata_id:"Q1029",centroid:"[34.3703,-18.8696]",bounds:"[30.2167,-26.8681,40.8393,-10.4709]",area_sqkm:"826132",region:"Africa",subregion:"Sub-Saharan Africa",name:"Mozambique",name_en:"Mozambique",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Mozambique", "Moçambique", "República de Moçambique", "MZ", "MOZ", "mz", "🇲🇿", "Republic of Mozambique" ], "pt": [ "Moçambique", "República de Moçambique", "Republica de Mocambique", "Mocambique" ] }'},{feature_id:"10358950",description:"state",worldview:"all",iso_3166_1:"NL",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"NLD",wikidata_id:"Q55",centroid:"[5.5869,52.1287]",bounds:"[3.3583,50.7502,7.2275,53.555]",area_sqkm:"57203",region:"Europe",subregion:"Western Europe",name:"Nederland",name_en:"Netherlands",disputed:"FALSE",color_group:"4",names:'{ "de": [ "Niederlande", "Holland", "NL", "nl" ], "en": [ "Netherlands", "Holland", "the Netherlands", "NL", "NED", "Nederland", "nl", "🇳🇱", "Netherlands (after 1945)" ], "fr": [ "Pays-Bas", "Hollande", "NL", "nl", "Les Pays-Bas", "NED", "🇳🇱" ], "nl": [ "Nederland", "NL", "NED", "nl", "NLD" ], "nds": [ "Nedderlannen" ] }'},{feature_id:"1708532",description:"disputed area",worldview:"IN",iso_3166_1:"D0KESS1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[35.3474,5.0562]",bounds:"[34.4136,4.6246,35.9353,5.5039]",area_sqkm:"6286",region:"",subregion:"",name:"Ilemi Triangle",name_en:"Ilemi Triangle",disputed:"TRUE",color_group:"",names:""},{feature_id:"6885481",description:"state",worldview:"CN",iso_3166_1:"IN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"IND",wikidata_id:"Q668",centroid:"[79.5556,22.5605]",bounds:"[68.17449999999999,6.756,97.176,35.6733]",area_sqkm:"3403202",region:"Asia",subregion:"Southern Asia",name:"India",name_en:"India",disputed:"FALSE",color_group:"1",names:'{ "en": [ "India", "Bharat", "Hindustan", "Bharatvarsh", "in", "IN", "Republic of India", "🇮🇳", "IND" ], "hi": [ "भारत", "हिंदुस्तान", "भारतवर्ष", "इंडिया", "भारत गणराज्य", "इण्डिया", "हिन्दोस्तान", "हिन्दुस्तान", "आर्यवर्त" ] }'},{feature_id:"13045950",description:"state",worldview:"CN",iso_3166_1:"RS",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SRB",wikidata_id:"Q403",centroid:"[21.0101,44.2456]",bounds:"[18.838,42.2357,23.006,46.1898]",area_sqkm:"108170",region:"Europe",subregion:"Southern Europe",name:"Србија",name_en:"Serbia",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Serbia", "🇷🇸", "Republic of Serbia", "Republika Srbija", "rs", "Srbija", "SRB" ], "sq": [ "Serbia", "Republika e Serbisë" ], "sr": [ "Србија", "Република Србија", "rs", "Republika Srbija" ], "sr-ec": [ "Србија" ], "sr-el": [ "Srbija" ] }'},{feature_id:"266251",description:"dependent territory",worldview:"all",iso_3166_1:"AS",sovereign_iso_3166_1:"US",iso_3166_1_alpha_3:"ASM",wikidata_id:"Q16641",centroid:"[-170.7511,-14.3018]",bounds:"[-171.0902,-14.5488,-168.1432,-11.0478]",area_sqkm:"216",region:"Oceania",subregion:"Polynesia",name:"American Samoa",name_en:"American Samoa",disputed:"FALSE",color_group:"4",names:'{ "en": [ "American Samoa", "as", "East Samoa", "Samoa (American)", "Territory of American Samoa", "🇦🇸", "U.S. Samoa", "US Samoa", "ASA" ], "sm": [ "Amerika Sāmoa" ] }'},{feature_id:"66130068",description:"state",worldview:"JP",iso_3166_1:"MO",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MAC",wikidata_id:"Q14773",centroid:"[113.5643,22.1404]",bounds:"[113.5287,22.1097,113.5983,22.217]",area_sqkm:"34",region:"Asia",subregion:"Eastern Asia",name:"澳门",name_en:"Macau",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Macau", "Macao", "Macau Special Administrative Region", "Macau Special Administrative Region of the People\'s Republic of China", "Aomen", "mo", "Macao Special Administrative Region", "Macao Special Administrative Region of the People\'s Republic of China", "Macau SAR", "Macau SAR, China", "Macao SAR", "Macao SAR, China", "🇲🇴" ], "zh-hant": [ "澳門", "澳門特別行政區", "馬交" ] }'},{feature_id:"6819949",description:"state",worldview:"all",iso_3166_1:"IS",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ISL",wikidata_id:"Q189",centroid:"[-18.32,65.0123]",bounds:"[-24.5327,63.2958,-13.4946,66.5664]",area_sqkm:"241784",region:"Europe",subregion:"Northern Europe",name:"Ísland",name_en:"Iceland",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Iceland", "Republic of Iceland", "is", "Island", "🇮🇸", "ISL" ], "is": [ "Ísland", "Lýðveldið Ísland" ] }'},{feature_id:"3084336",description:"state",worldview:"JP",iso_3166_1:"CN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CHN",wikidata_id:"Q148",centroid:"[100.5057,38.8017]",bounds:"[73.5013,7.3643,134.7734,53.5604]",area_sqkm:"11649405",region:"Asia",subregion:"Eastern Asia",name:"中国",name_en:"China",disputed:"FALSE",color_group:"4",names:'{ "en": [ "People\'s Republic of China", "China", "CN", "PR China", "PRC", "cn", "CHN", "Communist China", "🇨🇳" ], "zh": [ "中华人民共和国", "中国", "中國", "中華人民共和國", "共产中国", "新中国", "中華人民共和國／中华人民共和国", "中" ] }'},{feature_id:"987152",description:"state",worldview:"all",iso_3166_1:"AZ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"AZE",wikidata_id:"Q227",centroid:"[47.7228,40.176]",bounds:"[44.7645,38.3929,50.6248,41.913]",area_sqkm:"113049",region:"Asia",subregion:"Western Asia",name:"Azərbaycan",name_en:"Azerbaijan",disputed:"FALSE",color_group:"1",names:'{ "az": [ "Azərbaycan", "Azərbaycan Respublikası" ], "en": [ "Azerbaijan", "Republic of Azerbaijan", "az", "🇦🇿", "AZE" ] }'},{feature_id:"2297878",description:"state",worldview:"all",iso_3166_1:"BG",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BGR",wikidata_id:"Q219",centroid:"[25.195,42.7429]",bounds:"[22.3564,41.2354,28.6119,44.2153]",area_sqkm:"151322",region:"Europe",subregion:"Eastern Europe",name:"България",name_en:"Bulgaria",disputed:"FALSE",color_group:"4",names:'{ "bg": [ "България", "Република България" ], "en": [ "Bulgaria", "Republic of Bulgaria", "bg", "🇧🇬", "BUL" ], "ru": [ "Болгария", "България", "Республика Болгария" ], "tr": [ "Bulgaristan", "Bulgaristan Cumhuriyeti" ] }'},{feature_id:"15929579",description:"state",worldview:"all",iso_3166_1:"UZ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"UZB",wikidata_id:"Q265",centroid:"[63.3577,41.5182]",bounds:"[55.9742,37.1818,73.1521,45.5821]",area_sqkm:"605881",region:"Asia",subregion:"Central Asia",name:"O’zbekiston",name_en:"Uzbekistan",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Uzbekistan", "Republic of Uzbekistan", "uz", "🇺🇿", "UZB" ], "ru": [ "Узбекистан", "Республика Узбекистан" ], "uz": [ "Oʻzbekiston", "Oʻzbekiston Respublikasi" ] }'},{feature_id:"921612",description:"state",worldview:"all",iso_3166_1:"AT",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"AUT",wikidata_id:"Q40",centroid:"[14.7915,47.713]",bounds:"[9.5307,46.3721,17.1584,49.0204]",area_sqkm:"124043",region:"Europe",subregion:"Western Europe",name:"Österreich",name_en:"Austria",disputed:"FALSE",color_group:"3",names:'{ "de": [ "Österreich", "Republik Österreich" ], "en": [ "Austria", "Österreich", "Republic of Austria", "Republik Österreich", "AT", "at", "AUT", "🇦🇹" ], "fr": [ "Autriche", "AUT" ], "bar": [ "Östareich" ] }'},{feature_id:"10817699",description:"state",worldview:"all",iso_3166_1:"NF",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"NFK",wikidata_id:"Q31057",centroid:"[167.9588,-29.0289]",bounds:"[167.9149,-29.1318,167.997,-28.9952]",area_sqkm:"43",region:"Oceania",subregion:"Australia and New Zealand",name:"Norfolk Island",name_en:"Norfolk Island",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Norfolk Island", "🇳🇫", "Norfolk Island, Other Territories, Australia", "Norfolk Island, Other Territories" ] }'},{feature_id:"13766778",description:"state",worldview:"all",iso_3166_1:"KR",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"KOR",wikidata_id:"Q884",centroid:"[127.9592,36.4849]",bounds:"[124.6096,33.1121,131.873,38.6175]",area_sqkm:"124983",region:"Asia",subregion:"Eastern Asia",name:"대한민국",name_en:"South Korea",disputed:"FALSE",color_group:"4",names:'{ "en": [ "South Korea", "Republic of Korea", "ROK", "Daehan Minguk", "The Republic of Great Han", "Republic of Great Han", "kr", "Rep. Korea", "S. Korea", "Korea Republic", "Republic of South Korea", "🇰🇷", "KOR" ], "ko": [ "대한민국", "한국", "남한", "남조선", "코리아", "대한" ] }'},{feature_id:"922100",description:"disputed area",worldview:"JP",iso_3166_1:"D0CNIN8",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[79.1259,31.2045]",bounds:"[78.8826,30.9496,79.4173,31.459]",area_sqkm:"1714",region:"",subregion:"",name:"Jadh-Nelang disputed area",name_en:"Jadh-Nelang disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"594420",description:"disputed area",worldview:"all",iso_3166_1:"D0JPRU1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[147.8445,44.9901]",bounds:"[145.3993,43.3607,148.9003,45.5493]",area_sqkm:"7154",region:"",subregion:"",name:"Kuril Islands",name_en:"Kuril Islands",disputed:"TRUE",color_group:"",names:""},{feature_id:"1446388",description:"disputed area",worldview:"US",iso_3166_1:"D0BTCN2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[89.0081,27.5135]",bounds:"[88.9483,27.3998,89.1622,27.6271]",area_sqkm:"187",region:"",subregion:"",name:"Doklam Plateau",name_en:"Doklam Plateau",disputed:"TRUE",color_group:"",names:""},{feature_id:"1380852",description:"disputed area",worldview:"JP",iso_3166_1:"D0CNIN0",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[94.0334,28.1416]",bounds:"[91.56229999999999,26.8862,97.3954,29.3827]",area_sqkm:"77393",region:"",subregion:"",name:"Arunachal Pradash",name_en:"Arunachal Pradash",disputed:"TRUE",color_group:"",names:""},{feature_id:"16716022",description:"state",worldview:"all",iso_3166_1:"XS",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"XSB",wikidata_id:"Q37362",centroid:"[33.7622,35.0331]",bounds:"[32.7549,34.5623,33.9166,35.1237]",area_sqkm:"311",region:"Asia",subregion:"Western Asia",name:"Sovereign Base Areas of Akrotiri and Dhekelia",name_en:"Sovereign Base Areas of Akrotiri and Dhekelia",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Akrotiri and Dhekelia", "Sovereign Base Areas of Akrotiri and Dhekelia" ] }'},{feature_id:"12849361",description:"state",worldview:"all",iso_3166_1:"ST",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"STP",wikidata_id:"Q1039",centroid:"[6.595,0.216]",bounds:"[6.4605,-0.0138,7.4624,1.7015]",area_sqkm:"1009",region:"Africa",subregion:"Sub-Saharan Africa",name:"São Tomé e Príncipe",name_en:"São Tomé and Príncipe",disputed:"FALSE",color_group:"1",names:'{ "en": [ "São Tomé and Príncipe", "Democratic Republic of São Tomé and Príncipe", "São Tomé og Príncipe", "Sao Tome and Principe", "st", "🇸🇹", "STP" ], "pt": [ "São Tomé e Príncipe", "Sao Tome e Principe" ] }'},{feature_id:"7016556",description:"state",worldview:"all",iso_3166_1:"IR",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"IRN",wikidata_id:"Q794",centroid:"[53.7474,32.719]",bounds:"[44.0319,25.0591,63.3209,39.7831]",area_sqkm:"1936614",region:"Asia",subregion:"Southern Asia",name:"ایران",name_en:"Iran",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Iran", "Islamic Republic of Iran", "Persia", "ir", "Islamic Rep. Iran", "🇮🇷", "Republic of Iran" ], "fa": [ "ایران", "جمهوری اسلامی ایران", "ایران‌زمین", "پارس", "جمهوری ایران" ], "azb": [ "ایران" ] }'},{feature_id:"5181520",description:"dependent territory",worldview:"all",iso_3166_1:"GF",sovereign_iso_3166_1:"FR",iso_3166_1_alpha_3:"GUF",wikidata_id:"Q3769",centroid:"[-53.0359,3.9351]",bounds:"[-54.53,2.1229,-51.6202,5.7517]",area_sqkm:"84341",region:"Americas",subregion:"Latin America and the Caribbean",name:"Guyane",name_en:"French Guiana",disputed:"FALSE",color_group:"7",names:'{ "en": [ "French Guiana", "gf", "🇬🇫", "Guyane", "Guiana (France)", "Guyane française" ], "fr": [ "Guyane", "973" ] }'},{feature_id:"4067368",description:"state",worldview:"all",iso_3166_1:"CD",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"COD",wikidata_id:"Q974",centroid:"[22.4374,-4.0875]",bounds:"[12.2003,-13.4548,31.3328,5.3922]",area_sqkm:"2360347",region:"Africa",subregion:"Sub-Saharan Africa",name:"République Démocratique du Congo",name_en:"Democratic Republic of the Congo",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Democratic Republic of the Congo", "DRC", "DR Congo", "Congo-Kinshasa", "Zaire", "Congo", "Democratic Republic of Congo", "cd", "Dem. Republic of the Congo", "Dem. Republic of Congo", "Dem. Rep. Congo", "🇨🇩", "Congo (Kinshasa)", "COD" ], "sw": [ "Jamhuri ya Kidemokrasia ya Kongo" ] }'},{feature_id:"9113753",description:"state",worldview:"all",iso_3166_1:"MT",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MLT",wikidata_id:"Q233",centroid:"[14.4137,35.9024]",bounds:"[14.1834,35.8062,14.5765,36.0824]",area_sqkm:"392",region:"Europe",subregion:"Southern Europe",name:"Malta",name_en:"Malta",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Malta", "Republic of Malta", "mt", "🇲🇹", "MLT" ], "fr": [ "Malte" ], "it": [ "Malta", "Repubblica di Malta" ], "mt": [ "Malta" ] }'},{feature_id:"15667434",description:"state",worldview:"all",iso_3166_1:"UY",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"URY",wikidata_id:"Q77",centroid:"[-55.7992,-32.5631]",bounds:"[-58.4891,-34.9735,-53.1014,-30.0855]",area_sqkm:"213064",region:"Americas",subregion:"Latin America and the Caribbean",name:"Uruguay",name_en:"Uruguay",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Uruguay", "República Oriental del Uruguay", "uy", "🇺🇾", "Republica Oriental del Uruguay", "URU" ], "es": [ "Uruguay", "República Oriental de Uruguay" ] }'},{feature_id:"15077599",description:"state",worldview:"all",iso_3166_1:"TN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TUN",wikidata_id:"Q948",centroid:"[8.841200000000001,33.8627]",bounds:"[7.5227,30.2303,11.6112,37.5597]",area_sqkm:"188995",region:"Africa",subregion:"Northern Africa",name:"تونس",name_en:"Tunisia",disputed:"FALSE",color_group:"4",names:'{ "ar": [ "تونس", "الجمهورية التونسية", "تونس الخضراء", "تُوْنِس" ], "en": [ "Tunisia", "Republic of Tunisia", "Tūnis", "Tunisian Republic", "al-Jumhūriyyah at-Tūnisiyyah", "tn", "🇹🇳", "TUN" ], "fr": [ "Tunisie" ] }'},{feature_id:"13373642",description:"state",worldview:"all",iso_3166_1:"SK",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SVK",wikidata_id:"Q214",centroid:"[19.6543,48.6813]",bounds:"[16.8334,47.7312,22.5665,49.6138]",area_sqkm:"74312",region:"Europe",subregion:"Eastern Europe",name:"Slovensko",name_en:"Slovakia",disputed:"FALSE",color_group:"2",names:'{ "cs": [ "Slovensko", "Slovenská republika", "Slovenský štát" ], "de": [ "Slowakei", "Slowakische Republik", "Slowakien" ], "en": [ "Slovakia", "Slovak Republic", "sk", "🇸🇰", "SVK" ], "hu": [ "Szlovákia", "Szlovák Köztársaság", "Felvidék" ], "sk": [ "Slovensko", "Slovenská republika" ] }'},{feature_id:"2035743",description:"state",worldview:"all",iso_3166_1:"BR",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BRA",wikidata_id:"Q155",centroid:"[-49.7742,-15.1216]",bounds:"[-73.9901,-33.7504,-28.8483,5.2724]",area_sqkm:"8734596",region:"Americas",subregion:"Latin America and the Caribbean",name:"Brasil",name_en:"Brazil",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Brazil", "Federative Republic of Brazil", "Brasil", "República Federativa do Brasil", "Federativa República do Brasil", "Republic Federative of Brasil", "Estados Unidos del Brazil", "BR", "BRA", "Republica Federativa do Brasil", "Federativa Republica do Brasil", "br", "🇧🇷" ], "pt": [ "Brasil", "República Federativa do Brasil", "Brazil" ] }'},{feature_id:"8589445",description:"state",worldview:"all",iso_3166_1:"LT",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"LTU",wikidata_id:"Q37",centroid:"[24.1282,55.195]",bounds:"[20.9539,53.8988,26.8354,56.4502]",area_sqkm:"114290",region:"Europe",subregion:"Northern Europe",name:"Lietuva",name_en:"Lithuania",disputed:"FALSE",color_group:"6",names:'{ "de": [ "Litauen" ], "en": [ "Lithuania", "Republic of Lithuania", "lt", "Lietuva", "🇱🇹", "LTU" ], "lt": [ "Lietuva", "Lietuvos Respublika" ], "ru": [ "Литва", "Lietuva", "Литовская Республика" ] }'},{feature_id:"12914881",description:"state",worldview:"all",iso_3166_1:"SA",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SAU",wikidata_id:"Q851",centroid:"[44.1943,24.5136]",bounds:"[34.4953,16.3795,55.6666,32.1537]",area_sqkm:"2121348",region:"Asia",subregion:"Western Asia",name:"السعودية",name_en:"Saudi Arabia",disputed:"FALSE",color_group:"6",names:'{ "ar": [ "السعودية", "المملكة العربية", "بلاد الحرمين", "السعوديه", "المملكة العربية السعودية" ], "en": [ "Saudi Arabia", "Kingdom of Saudi Arabia", "🇸🇦", "KSA", "sa" ] }'},{feature_id:"13045950",description:"state",worldview:"US",iso_3166_1:"RS",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SRB",wikidata_id:"Q403",centroid:"[21.0101,44.2456]",bounds:"[18.838,42.2357,23.006,46.1898]",area_sqkm:"108170",region:"Europe",subregion:"Southern Europe",name:"Србија",name_en:"Serbia",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Serbia", "🇷🇸", "Republic of Serbia", "Republika Srbija", "rs", "Srbija", "SRB" ], "sq": [ "Serbia", "Republika e Serbisë" ], "sr": [ "Србија", "Република Србија", "rs", "Republika Srbija" ], "sr-ec": [ "Србија" ], "sr-el": [ "Srbija" ] }'},{feature_id:"8851612",description:"state",worldview:"all",iso_3166_1:"MW",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MWI",wikidata_id:"Q1020",centroid:"[33.7428,-13.2731]",bounds:"[32.6748,-17.1259,35.9173,-9.3622]",area_sqkm:"122428",region:"Africa",subregion:"Sub-Saharan Africa",name:"Malawi",name_en:"Malawi",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Malawi", "Republic of Malawi", "mw", "🇲🇼", "MAW" ], "ny": [ "Malaŵi" ] }'},{feature_id:"14356523",description:"state",worldview:"all",iso_3166_1:"CH",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CHE",wikidata_id:"Q39",centroid:"[8.4481,46.8224]",bounds:"[5.9559,45.818,10.4921,47.8085]",area_sqkm:"59508",region:"Europe",subregion:"Western Europe",name:"Switzerland",name_en:"Switzerland",disputed:"FALSE",color_group:"5",names:'{ "de": [ "Schweiz", "Schweizerische Eidgenossenschaft", "Eidgenossenschaft", "CH", "SUI", "CHE" ], "en": [ "Switzerland", "Swiss Confederation", "CH", "SUI", "Suisse", "Schweiz", "Svizzera", "🇨🇭", "Swiss" ], "fr": [ "Suisse", "Confédération helvétique", "Confédération suisse", "CH", "SUI", "Helvétie", "🇨🇭" ], "gsw": [ "Schwiz", "Schwiiz, Schwyz (aber nöd zverwägsle mit Schwyz, wo e Gmaind, en Bezirk und en Kanton bedüte chan)", "Eidgenosseschaft", "Helvezie" ] }'},{feature_id:"12652781",description:"state",worldview:"all",iso_3166_1:"VC",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"VCT",wikidata_id:"Q757",centroid:"[-61.1949,13.2528]",bounds:"[-61.4611,12.5829,-61.1148,13.3829]",area_sqkm:"401",region:"Americas",subregion:"Latin America and the Caribbean",name:"Saint Vincent and the Grenadines",name_en:"Saint Vincent and the Grenadines",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Saint Vincent and the Grenadines", "vc", "St. Vincent and the Grenadines", "St Vincent and the Grenadines", "Saint Vincent", "St. Vincent", "St Vincent", "🇻🇨" ] }'},{feature_id:"16322626",description:"state",worldview:"all",iso_3166_1:"EH",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ESH",wikidata_id:"Q6250",centroid:"[-13.686,24.2721]",bounds:"[-17.1033,20.7697,-8.6663,27.6837]",area_sqkm:"298478",region:"Africa",subregion:"Northern Africa",name:"الصحراء الغربية",name_en:"Western Sahara",disputed:"FALSE",color_group:"4",names:'{ "ar": [ "الصحراء الغربية", "صحراء غربية" ], "en": [ "Western Sahara", "eh", "West Sahara", "Spanish Sahara", "West-Sahara", "🇪🇭" ] }'},{feature_id:"15274198",description:"dependent territory",worldview:"all",iso_3166_1:"TC",sovereign_iso_3166_1:"UK",iso_3166_1_alpha_3:"TCA",wikidata_id:"Q18221",centroid:"[-71.75920000000001,21.7779]",bounds:"[-72.48220000000001,21.1774,-71.0819,21.9624]",area_sqkm:"1041",region:"Americas",subregion:"Latin America and the Caribbean",name:"Turks and Caicos Islands",name_en:"Turks and Caicos Islands",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Turks and Caicos Islands", "TCI", "🇹🇨", "tc", "Turks & Caicos" ] }'},{feature_id:"6230097",description:"state",worldview:"all",iso_3166_1:"GG",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GGY",wikidata_id:"Q25230",centroid:"[-2.5827,49.4632]",bounds:"[-2.6751,49.4002,-2.1586,49.7328]",area_sqkm:"124",region:"Europe",subregion:"Northern Europe",name:"Guernsey",name_en:"Guernsey",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Guernsey", "Bailliage de Guernesey", "Bailiwick of Guernsey", "gg", "🇬🇬", "XA-GG", "Lisia", "GGY", "GB-GSY", "GBG", "Great Britain Guernsey" ] }'},{feature_id:"2560047",description:"state",worldview:"all",iso_3166_1:"CM",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CMR",wikidata_id:"Q1009",centroid:"[13.6386,7.4045]",bounds:"[8.498699999999999,1.6514,16.1912,13.0809]",area_sqkm:"470320",region:"Africa",subregion:"Sub-Saharan Africa",name:"Cameroun - Cameroon",name_en:"Cameroon",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Cameroon", "Republic of Cameroon", "cm", "🇨🇲", "CMR", "CAM" ], "fr": [ "Cameroun", "République du Cameroun", "CMR" ] }'},{feature_id:"13045950",description:"state",worldview:"IN",iso_3166_1:"RS",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SRB",wikidata_id:"Q403",centroid:"[21.0101,44.2456]",bounds:"[18.838,42.2357,23.006,46.1898]",area_sqkm:"108170",region:"Europe",subregion:"Southern Europe",name:"Србија",name_en:"Serbia",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Serbia", "🇷🇸", "Republic of Serbia", "Republika Srbija", "rs", "Srbija", "SRB" ], "sq": [ "Serbia", "Republika e Serbisë" ], "sr": [ "Србија", "Република Србија", "rs", "Republika Srbija" ], "sr-ec": [ "Србија" ], "sr-el": [ "Srbija" ] }'},{feature_id:"10948757",description:"dependent territory",worldview:"all",iso_3166_1:"MP",sovereign_iso_3166_1:"US",iso_3166_1_alpha_3:"MNP",wikidata_id:"Q16644",centroid:"[145.7471,15.1905]",bounds:"[144.885,14.1101,146.066,20.555]",area_sqkm:"515",region:"Oceania",subregion:"Micronesia",name:"Northern Mariana Islands",name_en:"Northern Mariana Islands",disputed:"FALSE",color_group:"4",names:'{ "ch": [ "Notte Mariånas", "Sankattan Siha Na Islas Mariånas" ], "en": [ "Northern Mariana Islands", "MP", "NMI", "Commonwealth of the Northern Maria Islands", "CNMI", "🇲🇵" ] }'},{feature_id:"6885481",description:"state",worldview:"IN",iso_3166_1:"IN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"IND",wikidata_id:"Q668",centroid:"[78.64960000000001,23.3717]",bounds:"[68.17449999999999,6.756,97.3954,37.0919]",area_sqkm:"3626444",region:"Asia",subregion:"Southern Asia",name:"India",name_en:"India",disputed:"FALSE",color_group:"1",names:'{ "en": [ "India", "Bharat", "Hindustan", "Bharatvarsh", "in", "IN", "Republic of India", "🇮🇳", "IND" ], "hi": [ "भारत", "हिंदुस्तान", "भारतवर्ष", "इंडिया", "भारत गणराज्य", "इण्डिया", "हिन्दोस्तान", "हिन्दुस्तान", "आर्यवर्त" ] }'},{feature_id:"7278695",description:"state",worldview:"all",iso_3166_1:"IL",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ISR",wikidata_id:"Q801",centroid:"[34.665,31.434]",bounds:"[34.2678,29.4956,35.8945,33.333]",area_sqkm:"25871",region:"Asia",subregion:"Western Asia",name:"ישראל",name_en:"Israel",disputed:"FALSE",color_group:"3",names:'{ "ar": [ "إسرائيل", "الدولة العبرية", "دولة إسرائيل" ], "en": [ "Israel", "State of Israel", "il", "🇮🇱", "Holy Land", "the Jewish state", "ISR" ], "he": [ "ישראל", "מדינת ישראל", "מְדִינַת יִשְׂרָאֵל" ], "ru": [ "Израиль", "Государство Израиль" ] }'},{feature_id:"593924",description:"state",worldview:"all",iso_3166_1:"AG",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ATG",wikidata_id:"Q781",centroid:"[-61.7945,17.0856]",bounds:"[-62.3473,16.9323,-61.657,17.7294]",area_sqkm:"443",region:"Americas",subregion:"Latin America and the Caribbean",name:"Antigua and Barbuda",name_en:"Antigua and Barbuda",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Antigua and Barbuda", "ag", "🇦🇬", "ANT" ] }'},{feature_id:"6099036",description:"dependent territory",worldview:"all",iso_3166_1:"GU",sovereign_iso_3166_1:"US",iso_3166_1_alpha_3:"GUM",wikidata_id:"Q16635",centroid:"[144.7579,13.45]",bounds:"[144.618,13.2343,144.9569,13.6542]",area_sqkm:"568",region:"Oceania",subregion:"Micronesia",name:"Guam",name_en:"Guam",disputed:"FALSE",color_group:"4",names:'{ "ch": [ "Guåhån" ], "en": [ "Guam", "GU", "🇬🇺", "Territory of Guam" ] }'},{feature_id:"9048209",description:"state",worldview:"all",iso_3166_1:"ML",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MLI",wikidata_id:"Q912",centroid:"[-0.7247,17.4996]",bounds:"[-12.2403,10.1521,4.2493,24.9999]",area_sqkm:"1310878",region:"Africa",subregion:"Sub-Saharan Africa",name:"Mali",name_en:"Mali",disputed:"FALSE",color_group:"1",names:'{ "bm": [ "Mali" ], "en": [ "Mali", "Republic of Mali", "République du Mali", "ml", "🇲🇱", "Republique du Mali", "MLI" ], "fr": [ "Mali", "République du Mali" ] }'},{feature_id:"9834636",description:"state",worldview:"all",iso_3166_1:"ME",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MNE",wikidata_id:"Q236",centroid:"[19.2878,42.7151]",bounds:"[18.4354,41.8468,20.3555,43.5518]",area_sqkm:"19002",region:"Europe",subregion:"Southern Europe",name:"Crna Gora",name_en:"Montenegro",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Montenegro", "me", "🇲🇪", "MNE" ], "sr": [ "Црна Гора" ], "sr-el": [ "Crna Gora" ] }'},{feature_id:"15864041",description:"state",worldview:"all",iso_3166_1:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"USA",wikidata_id:"Q30",centroid:"[-99.5889,38.1815]",bounds:"[-179.1448,18.9107,179.7749,71.3904]",area_sqkm:"16834531",region:"Americas",subregion:"Northern America",name:"United States",name_en:"United States",disputed:"FALSE",color_group:"4",names:'{ "en": [ "United States of America", "the United States", "the United States of America", "United States", "America", "the States", "U.S.A.", "USA", "U.S.", "US", "the US", "the USA", "US of A", "🇺🇸" ] }'},{feature_id:"13308115",description:"state",worldview:"all",iso_3166_1:"SX",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SXM",wikidata_id:"Q26273",centroid:"[-63.0544,18.034]",bounds:"[-63.138,18.0054,-63.0132,18.0626]",area_sqkm:"34",region:"Americas",subregion:"Latin America and the Caribbean",name:"Sint Maarten",name_en:"Sint Maarten",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Sint Maarten", "St. Maarten", "Saint Martin (Dutch part)", "Sint Maarten (Dutch part)", "🇸🇽", "St Martin", "SX", "NL-SX", "Saint Martin" ], "es": [ "Sint Maarten", "San Martín", "San Martin" ] }'},{feature_id:"2363892",description:"disputed area",worldview:"JP",iso_3166_1:"D0CNTWVN1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[111.7015,16.2212]",bounds:"[111.1905,15.7749,112.7456,17.1141]",area_sqkm:"489",region:"",subregion:"",name:"Paracel Islands",name_en:"Paracel Islands",disputed:"TRUE",color_group:"",names:""},{feature_id:"10227881",description:"state",worldview:"all",iso_3166_1:"NR",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"NRU",wikidata_id:"Q697",centroid:"[166.9315,-0.5286999999999999]",bounds:"[166.9096,-0.5542,166.9593,-0.5021]",area_sqkm:"22",region:"Oceania",subregion:"Micronesia",name:"Nauru",name_en:"Nauru",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Nauru", "Republic of Nauru", "Pleasant Island", "Naoero", "nr", "🇳🇷" ], "na": [ "Naoero" ] }'},{feature_id:"1511924",description:"disputed area",worldview:"CN",iso_3166_1:"D0INPK1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[75.4564,34.957]",bounds:"[72.5081,32.7649,77.1204,37.0919]",area_sqkm:"97311",region:"",subregion:"",name:"Pakistan-administered Kashmir",name_en:"Pakistan-administered Kashmir",disputed:"TRUE",color_group:"",names:""},{feature_id:"397812",description:"disputed area",worldview:"CN",iso_3166_1:"D0GYSR1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[-57.3612,2.4457]",bounds:"[-58.3309,1.4976,-56.4851,3.3943]",area_sqkm:"14492",region:"",subregion:"",name:"Tigri Area",name_en:"Tigri Area",disputed:"TRUE",color_group:"",names:""},{feature_id:"2298356",description:"disputed area",worldview:"US",iso_3166_1:"D0CNPHTWVN1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[113.3158,8.1846]",bounds:"[111.6427,7.3643,116.9354,11.4694]",area_sqkm:"647",region:"",subregion:"",name:"Spratly Islands",name_en:"Spratly Islands",disputed:"TRUE",color_group:"",names:""},{feature_id:"2232820",description:"disputed area",worldview:"JP",iso_3166_1:"D0INNP2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[83.8659,27.3922]",bounds:"[83.8167,27.3464,83.9084,27.438]",area_sqkm:"37",region:"",subregion:"",name:"Susta disputed area",name_en:"Susta disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"16060652",description:"state",worldview:"all",iso_3166_1:"VA",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"VAT",wikidata_id:"Q237",centroid:"[12.4532,41.9039]",bounds:"[12.4457,41.9003,12.4585,41.9076]",area_sqkm:"0",region:"Europe",subregion:"Southern Europe",name:"Vatican City",name_en:"Vatican City",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Vatican City", "Vatican City State", "Papal State", "Vatican", "va", "🇻🇦", "The Vatican", "vat", "Status Civitatis Vaticanae", "Stato della Città del Vaticano", "Città del Vaticano", "Civitas Vaticana", "State of Vatican City" ], "it": [ "Città del Vaticano", "Vaticano", "Stato della Città del Vaticano" ], "la": [ "Civitas Vaticana", "Status Civitatis Vaticanae", "Status Civitatis Vaticanæ" ] }'},{feature_id:"11276471",description:"state",worldview:"all",iso_3166_1:"PS",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PSE",wikidata_id:"Q219060",centroid:"[35.2703,31.9492]",bounds:"[34.2186,31.2199,35.5739,32.5525]",area_sqkm:"7187",region:"Asia",subregion:"Western Asia",name:"قطاع غزة",name_en:"Palestine",disputed:"FALSE",color_group:"3",names:'{ "ar": [ "فلسطين", "دوله فلسطين" ], "en": [ "State of Palestine", "Palestinian Authority", "PA", "🇵🇸", "Palestinian state", "Palestine" ] }'},{feature_id:"13832400",description:"state",worldview:"IN",iso_3166_1:"SS",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SSD",wikidata_id:"Q958",centroid:"[29.1116,7.8795]",bounds:"[24.1507,3.4803,35.9353,12.2322]",area_sqkm:"636626",region:"Africa",subregion:"Sub-Saharan Africa",name:"South Sudan",name_en:"South Sudan",disputed:"FALSE",color_group:"1",names:'{ "ar": [ "جنوب السودان", "جمهورية جنوب السودان", "قائمة جزر جنوب السودان", "بانتيو (مدينة)", "يامبيو (مدينة)", "رمبيك (مدينة)", "أويل (مدينة)", "اويل", "جوبا (مدينة)", "ملكال (مدينة)", "كودوك", "فاشودا", "فاشودة", "ياي", "عاصمة جنوب السودان" ], "en": [ "South Sudan", "Republic of South Sudan", "Southern Sudan", "ss", "🇸🇸", "SSD" ] }'},{feature_id:"13242566",description:"state",worldview:"all",iso_3166_1:"SG",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SGP",wikidata_id:"Q334",centroid:"[103.8297,1.3389]",bounds:"[103.6057,1.1587,104.0855,1.4707]",area_sqkm:"724",region:"Asia",subregion:"South-eastern Asia",name:"Singapore",name_en:"Singapore",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Singapore", "Republic of Singapore", "SG", "sg", "🇸🇬", "Singapore City", "SGP" ], "ms": [ "Singapura" ], "zh": [ "新加坡", "新加坡共和国", "新加坡共和國" ] }'},{feature_id:"8982683",description:"state",worldview:"all",iso_3166_1:"MV",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MDV",wikidata_id:"Q826",centroid:"[73.09999999999999,-0.6321]",bounds:"[72.6392,-0.7037,73.75960000000001,7.1064]",area_sqkm:"226",region:"Asia",subregion:"Southern Asia",name:"Maldives",name_en:"Maldives",disputed:"FALSE",color_group:"2",names:'{ "dv": [ "ދިވެހިރާއްޖެ", "ދިވެހިރާއްޖޭގެ ޖުމުހޫރިއްޔާ", "ދިވެހިރާއްޖޭގެ ޖުމްހޫރިއްޔާ" ], "en": [ "Maldives", "mv", "🇲🇻", "Republic of Maldives", "MDV" ] }'},{feature_id:"397320",description:"state",worldview:"all",iso_3166_1:"AO",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"AGO",wikidata_id:"Q916",centroid:"[18.8562,-12.005]",bounds:"[11.6693,-18.0395,24.0837,-4.3607]",area_sqkm:"1290030",region:"Africa",subregion:"Sub-Saharan Africa",name:"Angola",name_en:"Angola",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Angola", "Republic of Angola", "ao", "🇦🇴", "Ngola", "ANG" ], "pt": [ "Angola" ] }'},{feature_id:"4984903",description:"state",worldview:"all",iso_3166_1:"FJ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"FJI",wikidata_id:"Q712",centroid:"[177.9783,-17.7941]",bounds:"[-180,-21.0424,179.9999,-12.4617]",area_sqkm:"19940",region:"Oceania",subregion:"Melanesia",name:"Fiji",name_en:"Fiji",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Fiji", "Republic of Fiji", "fj", "🇫🇯", "FIJ" ], "fj": [ "Viti", "Matanitu Tugalala o Viti" ], "hi": [ "फ़िजी" ], "hif": [ "Fiji" ] }'},{feature_id:"4853832",description:"dependent territory",worldview:"all",iso_3166_1:"FK",sovereign_iso_3166_1:"UK",iso_3166_1_alpha_3:"FLK",wikidata_id:"Q9648",centroid:"[-58.6015,-51.8]",bounds:"[-61.4563,-52.9191,-57.7147,-50.9967]",area_sqkm:"19459",region:"Americas",subregion:"Latin America and the Caribbean",name:"Falkland Islands (Islas Malvinas)",name_en:"Falkland Islands (Islas Malvinas)",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Falkland Islands", "Falklands", "Malvinas", "Islas Malvinas", "fk", "flk", "🇫🇰" ] }'},{feature_id:"13897796",description:"state",worldview:"all",iso_3166_1:"ES",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ESP",wikidata_id:"Q29",centroid:"[-3.4204,40.0061]",bounds:"[-18.1608,27.6378,4.3277,43.7904]",area_sqkm:"667403",region:"Europe",subregion:"Southern Europe",name:"España",name_en:"Spain",disputed:"FALSE",color_group:"4",names:'{ "ca": [ "Espanya", "Regne d\'Espanya", "ES", "ESP", "Estat espanyol", "🇪🇸" ], "en": [ "Spain", "España", "Kingdom of Spain", "ES", "ESP", "🇪🇸" ], "es": [ "España", "Reino de España", "ES", "ESP", "Estado español", "🇪🇸" ] }'},{feature_id:"528393",description:"state",worldview:"all",iso_3166_1:"AQ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ATA",wikidata_id:"Q51",centroid:"[63.6432,-78.41679999999999]",bounds:"[-180,-85.05110000000001,180,-60.5155]",area_sqkm:"58466582",region:"Antarctica",subregion:"Antarctica",name:"Antarctica",name_en:"Antarctica",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Antarctica" ] }'},{feature_id:"15536130",description:"state",worldview:"all",iso_3166_1:"AE",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ARE",wikidata_id:"Q878",centroid:"[55.1509,24.3653]",bounds:"[51.498,22.6282,56.3816,26.0788]",area_sqkm:"78088",region:"Asia",subregion:"Western Asia",name:"الإمارات العربية المتحدة",name_en:"United Arab Emirates",disputed:"FALSE",color_group:"2",names:'{ "ar": [ "الإمارات العربية المتحدة", "الإمارات", "دولة الإمارات العربية المتحدة" ], "en": [ "United Arab Emirates", "U.A.E.", "🇦🇪", "UAE", "ae", "Emirates", "the United Arab Emirates", "the UAE", "the U.A.E.", "the Emirates" ] }'},{feature_id:"7213160",description:"state",worldview:"all",iso_3166_1:"IM",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"IMN",wikidata_id:"Q9676",centroid:"[-4.5149,54.2362]",bounds:"[-4.8307,54.0431,-4.3079,54.4181]",area_sqkm:"978",region:"Europe",subregion:"Northern Europe",name:"Isle of Man",name_en:"Isle of Man",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Isle of Man", "Ellan Vannin", "Mann", "the Isle of Man", "im", "Manx", "🇮🇲" ] }'},{feature_id:"3018798",description:"state",worldview:"all",iso_3166_1:"CL",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CHL",wikidata_id:"Q298",centroid:"[-72.3188,-37.8958]",bounds:"[-109.4498,-55.982,-66.4148,-17.4986]",area_sqkm:"1020689",region:"Americas",subregion:"Latin America and the Caribbean",name:"Chile",name_en:"Chile",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Chile", "cl", "República de Chile", "🇨🇱", "Republica de Chile", "Republic of Chile", "CHI" ], "es": [ "Chile", "República de Chile", "Republica de Chile" ] }'},{feature_id:"462853",description:"dependent territory",worldview:"all",iso_3166_1:"AI",sovereign_iso_3166_1:"UK",iso_3166_1_alpha_3:"AIA",wikidata_id:"Q25228",centroid:"[-63.0406,18.2177]",bounds:"[-63.4296,18.1491,-62.9244,18.5953]",area_sqkm:"84",region:"Americas",subregion:"Latin America and the Caribbean",name:"Anguilla",name_en:"Anguilla",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Anguilla", "ai", "🇦🇮" ] }'},{feature_id:"266740",description:"disputed area",worldview:"all",iso_3166_1:"D0EGSD1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[35.5497,22.5762]",bounds:"[34.0814,22,36.8944,23.1463]",area_sqkm:"19449",region:"",subregion:"",name:"Hala'ib Triangle",name_en:"Hala'ib Triangle",disputed:"TRUE",color_group:"",names:""},{feature_id:"70132",description:"disputed area",worldview:"all",iso_3166_1:"D0SDSS2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[24.1191,9.260199999999999]",bounds:"[23.4407,8.683,24.8471,9.8377]",area_sqkm:"13301",region:"",subregion:"",name:"Kafia Kingi",name_en:"Kafia Kingi",disputed:"TRUE",color_group:"",names:""},{feature_id:"856077",description:"state",worldview:"all",iso_3166_1:"AU",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"AUS",wikidata_id:"Q408",centroid:"[133.5282,-25.7567]",bounds:"[72.5827,-54.778,167.997,-9.142200000000001]",area_sqkm:"8694425",region:"Oceania",subregion:"Australia and New Zealand",name:"Australia",name_en:"Australia",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Australia", "Commonwealth of Australia", "AU", "AUS", "au", "British Colony of Australia", "🇦🇺", "Straya" ] }'},{feature_id:"11145394",description:"state",worldview:"US",iso_3166_1:"PK",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PAK",wikidata_id:"Q843",centroid:"[70.2714,30.6947]",bounds:"[60.8738,23.7046,77.1204,37.0919]",area_sqkm:"1007923",region:"Asia",subregion:"Southern Asia",name:"پاكِستان - Pakistan",name_en:"Pakistan",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Pakistan", "🇵🇰", "pk", "Islamic Republic of Pakistan" ], "ps": [ "پاکستان" ], "sd": [ "پاڪستان", "اسلامي جمھوريہ پاڪستان" ], "ur": [ "پاکستان", "اسلامی جمہوریہ پاکستان" ], "pnb": [ "پاکستان" ] }'},{feature_id:"16453882",description:"state",worldview:"all",iso_3166_1:"ZM",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ZMB",wikidata_id:"Q953",centroid:"[25.4621,-13.2073]",bounds:"[22,-18.0765,33.703,-8.2415]",area_sqkm:"778428",region:"Africa",subregion:"Sub-Saharan Africa",name:"Zambia",name_en:"Zambia",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Zambia", "Republic of Zambia", "zm", "ZAM", "🇿🇲" ], "ny": [ "Zambia" ] }'},{feature_id:"13832400",description:"state",worldview:"JP",iso_3166_1:"SS",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SSD",wikidata_id:"Q958",centroid:"[29.1116,7.8795]",bounds:"[24.1507,3.4803,35.9353,12.2322]",area_sqkm:"639959",region:"Africa",subregion:"Sub-Saharan Africa",name:"South Sudan",name_en:"South Sudan",disputed:"FALSE",color_group:"1",names:'{ "ar": [ "جنوب السودان", "جمهورية جنوب السودان", "قائمة جزر جنوب السودان", "بانتيو (مدينة)", "يامبيو (مدينة)", "رمبيك (مدينة)", "أويل (مدينة)", "اويل", "جوبا (مدينة)", "ملكال (مدينة)", "كودوك", "فاشودا", "فاشودة", "ياي", "عاصمة جنوب السودان" ], "en": [ "South Sudan", "Republic of South Sudan", "Southern Sudan", "ss", "🇸🇸", "SSD" ] }'},{feature_id:"6688865",description:"state",worldview:"all",iso_3166_1:"HN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"HND",wikidata_id:"Q783",centroid:"[-87.2195,14.5108]",bounds:"[-89.35639999999999,12.9837,-83.1358,17.4177]",area_sqkm:"116438",region:"Americas",subregion:"Latin America and the Caribbean",name:"Honduras",name_en:"Honduras",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Honduras", "hn", "🇭🇳", "Republic of Honduras", "Honduran Republic", "HON" ], "es": [ "Honduras", "República de Honduras" ] }'},{feature_id:"14749917",description:"state",worldview:"all",iso_3166_1:"TL",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TLS",wikidata_id:"Q574",centroid:"[125.7585,-8.891500000000001]",bounds:"[124.043,-9.5036,127.3423,-8.126899999999999]",area_sqkm:"15203",region:"Asia",subregion:"South-eastern Asia",name:"Timor-Leste - Timor Lorosa’e",name_en:"East Timor",disputed:"FALSE",color_group:"2",names:'{ "en": [ "East Timor", "Democratic Republic of Timor-Leste", "Timor-Leste", "tl", "🇹🇱", "Timor Leste", "Democratic Republic of East Timor", "TLS" ], "pt": [ "Timor-Leste", "Timor Leste" ], "tet": [ "Timor-Leste" ] }'},{feature_id:"1380852",description:"disputed area",worldview:"US",iso_3166_1:"D0CNIN0",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[94.0334,28.1416]",bounds:"[91.56229999999999,26.8862,97.3954,29.3827]",area_sqkm:"77393",region:"",subregion:"",name:"Arunachal Pradash",name_en:"Arunachal Pradash",disputed:"TRUE",color_group:"",names:""},{feature_id:"659466",description:"state",worldview:"all",iso_3166_1:"AR",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ARG",wikidata_id:"Q414",centroid:"[-64.9932,-38.6979]",bounds:"[-73.56529999999999,-55.0572,-53.6358,-21.7815]",area_sqkm:"3369093",region:"Americas",subregion:"Latin America and the Caribbean",name:"Argentina",name_en:"Argentina",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Argentina", "AR", "ar", "🇦🇷", "Argentine Republic", "ARG" ], "es": [ "Argentina", "República Argentina", "Provincias Unidas del Río de la Plata", "Confederación Argentina", "Republica Argentina", "Provincias Unidas del Rio de la Plata", "Confederacion Argentina", "🇦🇷" ] }'},{feature_id:"1249780",description:"disputed area",worldview:"JP",iso_3166_1:"D0CNIN5",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[78.6045,32.6215]",bounds:"[78.5668,32.6004,78.64109999999999,32.6423]",area_sqkm:"25",region:"",subregion:"",name:"Chumar disputed area",name_en:"Chumar disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"2298356",description:"disputed area",worldview:"JP",iso_3166_1:"D0CNPHTWVN1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[113.3158,8.1846]",bounds:"[111.6427,7.3643,116.9354,11.4694]",area_sqkm:"647",region:"",subregion:"",name:"Spratly Islands",name_en:"Spratly Islands",disputed:"TRUE",color_group:"",names:""},{feature_id:"1184244",description:"disputed area",worldview:"US",iso_3166_1:"D0CNIN4",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[78.7079,32.683]",bounds:"[78.6656,32.6564,78.746,32.7097]",area_sqkm:"18",region:"",subregion:"",name:"Chumar East disputed area",name_en:"Chumar East disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"1511924",description:"disputed area",worldview:"JP",iso_3166_1:"D0INPK1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[75.4564,34.957]",bounds:"[72.5081,32.7649,77.1204,37.0919]",area_sqkm:"97311",region:"",subregion:"",name:"Pakistan-administered Kashmir",name_en:"Pakistan-administered Kashmir",disputed:"TRUE",color_group:"",names:""},{feature_id:"8392835",description:"state",worldview:"all",iso_3166_1:"LR",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"LBR",wikidata_id:"Q1014",centroid:"[-9.638199999999999,6.456]",bounds:"[-11.4918,4.3535,-7.3672,8.551]",area_sqkm:"97145",region:"Africa",subregion:"Sub-Saharan Africa",name:"Liberia",name_en:"Liberia",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Liberia", "Republic of Liberia", "lr", "🇱🇷", "LBR" ] }'},{feature_id:"9965705",description:"state",worldview:"all",iso_3166_1:"MA",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MAR",wikidata_id:"Q1028",centroid:"[-6.1699,31.8889]",bounds:"[-13.1671,27.6705,-1.0108,35.9222]",area_sqkm:"489286",region:"Africa",subregion:"Northern Africa",name:"المغرب",name_en:"Morocco",disputed:"FALSE",color_group:"2",names:'{ "ar": [ "المغرب", "المملكة المغربية", "المغرب الكبير" ], "en": [ "Morocco", "Kingdom of Morocco", "Arab Maghreb", "Marocco", "al-Maġrib", "Lmaġrib", "Maroc", "ma", "🇲🇦", "MAR" ], "fr": [ "Maroc", "Royaume du Maroc", "ma" ], "ary": [ "لمغريب" ] }'},{feature_id:"1642996",description:"disputed area",worldview:"US",iso_3166_1:"D0GFSR1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[-54.1343,2.7239]",bounds:"[-54.6024,2.1443,-53.9703,3.3029]",area_sqkm:"3444",region:"",subregion:"",name:"French Guiana–Suriname disputed area",name_en:"French Guiana–Suriname disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"2298356",description:"disputed area",worldview:"IN",iso_3166_1:"D0CNPHTWVN1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[113.3158,8.1846]",bounds:"[111.6427,7.3643,116.9354,11.4694]",area_sqkm:"647",region:"",subregion:"",name:"Spratly Islands",name_en:"Spratly Islands",disputed:"TRUE",color_group:"",names:""},{feature_id:"12259354",description:"dependent territory",worldview:"all",iso_3166_1:"BL",sovereign_iso_3166_1:"FR",iso_3166_1_alpha_3:"BLM",wikidata_id:"Q25362",centroid:"[-62.8117,17.9036]",bounds:"[-62.9101,17.8782,-62.7891,17.9608]",area_sqkm:"21",region:"Americas",subregion:"Latin America and the Caribbean",name:"Saint-Barthélemy",name_en:"Saint-Barthélemy",disputed:"FALSE",color_group:"7",names:'{ "en": [ "Saint Barthélemy", "Saint Barthélemy", "Ouanalao", "Collectivité de Saint-Barthélemy", "Saint Barths", "Ile Saint-Barthélemy", "Saint Barthélémy", "St. Barthelemy", "St barths", "St. Barthélemy", "Saint Barts", "Saint-Barthélémy", "St. Barths", "ISO 3166-1:BL", "Île Saint-Barthélemy", "Saint Bartz", "St barts", "St. Barth", "America\\/St Barthelemy", "Collectivity of Saint Barthélemy", "Saint-Barthelemy", "Saint Barthelemy", "St barthelemy", "Saint Barth", "bl", "🇧🇱", "Collectivite de Saint-Barthelemy", "Ile Saint-Barthelemy", "Collectivity of Saint Barthelemy", "St. Barts", "FR-BL" ], "fr": [ "Saint-Barthélemy", "Saint Barthélemy", "St Barth", "Collectivite d\'outre-mer de Saint-Barthelemy", "Collectivité d\'outre-mer de Saint-Barthélemy", "Saint-Barthélémy", "Saint-Barth", "Saint Barth", "977", "bl", "🇧🇱", "ISO 3166-1:BL", "FR-BL" ] }'},{feature_id:"397812",description:"disputed area",worldview:"IN",iso_3166_1:"D0GYSR1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[-57.3612,2.4457]",bounds:"[-58.3309,1.4976,-56.4851,3.3943]",area_sqkm:"14492",region:"",subregion:"",name:"Tigri Area",name_en:"Tigri Area",disputed:"TRUE",color_group:"",names:""},{feature_id:"1249298",description:"state",worldview:"all",iso_3166_1:"BB",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BRB",wikidata_id:"Q244",centroid:"[-59.559,13.1898]",bounds:"[-59.6526,13.0447,-59.4203,13.3348]",area_sqkm:"446",region:"Americas",subregion:"Latin America and the Caribbean",name:"Barbados",name_en:"Barbados",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Barbados", "BB", "bb", "🇧🇧", "BAR" ] }'},{feature_id:"3477553",description:"state",worldview:"all",iso_3166_1:"CO",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"COL",wikidata_id:"Q739",centroid:"[-72.6147,4.1587]",bounds:"[-81.73569999999999,-4.2285,-66.84650000000001,13.3948]",area_sqkm:"1151361",region:"Americas",subregion:"Latin America and the Caribbean",name:"Colombia",name_en:"Colombia",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Colombia", "🇨🇴", "República de Colombia", "Republic of Colombia", "Republica de Colombia", "COL" ], "es": [ "Colombia", "República de Colombia (wayuunaiki)", "República de Colombia", "Republica de Colombia" ] }'},{feature_id:"8654982",description:"state",worldview:"all",iso_3166_1:"LU",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"LUX",wikidata_id:"Q32",centroid:"[6.0814,49.8167]",bounds:"[5.7358,49.4478,6.531,50.1827]",area_sqkm:"4011",region:"Europe",subregion:"Western Europe",name:"Luxembourg",name_en:"Luxembourg",disputed:"FALSE",color_group:"1",names:'{ "de": [ "Luxemburg", "Groussherzogtum Lëtzebuerg", "Grand-Duché de Luxembourg" ], "en": [ "Luxembourg", "Luxemburg", "Grand Duchy of Luxembourg", "LU", "lu", "🇱🇺", "LUX" ], "fr": [ "Luxembourg", "Grand-Duché de Luxembourg", "Grand-duché de Luxembourg", "grand-duché de Luxembourg", "LUX", "LU", "🇱🇺" ], "lb": [ "Lëtzebuerg", "Groussherzogtum Lëtzebuerg", "Lëtzebuerger Land", "Grand-Duché de Luxembourg", "Grand-Duché" ], "pt": [ "Luxemburgo", "Grão-de-bico do Luxemburgo", "de Luxemburgo", "Grão-Ducado de Luxemburgo" ] }'},{feature_id:"8261759",description:"state",worldview:"all",iso_3166_1:"LB",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"LBN",wikidata_id:"Q822",centroid:"[35.9001,33.878]",bounds:"[35.1036,33.0554,36.6233,34.6921]",area_sqkm:"12369",region:"Asia",subregion:"Western Asia",name:"لبنان",name_en:"Lebanon",disputed:"FALSE",color_group:"4",names:'{ "ar": [ "لبنان", "الجمهوريّة اللبنانيّة" ], "en": [ "Lebanon", "Lebanese Republic", "lb", "Republic of Lebanon", "🇱🇧", "LBN" ] }'},{feature_id:"1708061",description:"state",worldview:"all",iso_3166_1:"BO",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BOL",wikidata_id:"Q750",centroid:"[-63.6244,-16.3961]",bounds:"[-69.6444,-22.9004,-57.4526,-9.6669]",area_sqkm:"1143748",region:"Americas",subregion:"Latin America and the Caribbean",name:"Bolivia",name_en:"Bolivia",disputed:"FALSE",color_group:"1",names:'{ "ay": [ "Wuliwya" ], "en": [ "Bolivia", "Plurinational State of Bolivia", "bo", "bol", "🇧🇴", "Republic of Bolivia", "BOL" ], "es": [ "Bolivia", "República de Bolivia", "Estado Plurinacional de Bolivia" ], "qu": [ "Buliwya" ] }'},{feature_id:"724999",description:"state",worldview:"all",iso_3166_1:"AM",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ARM",wikidata_id:"Q399",centroid:"[44.8409,40.0811]",bounds:"[43.4483,38.8402,46.633,41.2999]",area_sqkm:"39160",region:"Asia",subregion:"Western Asia",name:"Հայաստան",name_en:"Armenia",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Armenia", "Republic of Armenia", "🇦🇲", "ARM" ], "hy": [ "Հայաստան", "Հայք", "ՀՀ", "Հայաստանի Հանրապետություն", "🇦🇲" ] }'},{feature_id:"4919370",description:"state",worldview:"all",iso_3166_1:"FO",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"FRO",wikidata_id:"Q4628",centroid:"[-7.0174,62.1252]",bounds:"[-7.6947,61.3921,-6.2572,62.3957]",area_sqkm:"3092",region:"Europe",subregion:"Northern Europe",name:"Føroyar",name_en:"Faroe Islands",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Faroe Islands", "Faeroe Islands", "Atlantic\\/Faroe", "Fareo islands", "Faeroyene", "Far Oer", "Faeroerne", "Faer Oer", "Faroe Isles", "Faroer", "Färöer", "Faeroe Isles", "Faroes", "Faroese Islands", "Foroyar", "Faeroes", "Faeroer", "Føroyar", "Faroe Island", "The Faroe Islands", "Færøer", "Færeyjar", "Fær Øer", "Faeroe Is", "The Faeroe Islands", "Færøyene", "Færøerne", "Faröe Islands", "Sheep Islands", "Færoes", "fo", "🇫🇴" ], "fo": [ "Føroyar", "Føroyum", "Føroya", "Faroe Islands" ] }'},{feature_id:"5443669",description:"state",worldview:"all",iso_3166_1:"GM",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GMB",wikidata_id:"Q1005",centroid:"[-15.9728,13.4365]",bounds:"[-16.8133,13.0458,-13.7917,13.8266]",area_sqkm:"11731",region:"Africa",subregion:"Sub-Saharan Africa",name:"The Gambia",name_en:"Gambia",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Gambia", "gm", "Islamic Republic of the Gambia", "🇬🇲", "Republic of The Gambia", "The Gambia", "GAM" ] }'},{feature_id:"10162336",description:"state",worldview:"all",iso_3166_1:"NA",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"NAM",wikidata_id:"Q1030",centroid:"[17.2133,-23.1061]",bounds:"[11.737,-28.9695,25.2562,-16.9635]",area_sqkm:"890791",region:"Africa",subregion:"Sub-Saharan Africa",name:"Namibia",name_en:"Namibia",disputed:"FALSE",color_group:"4",names:'{ "af": [ "Namibië", "Republiek van Namibië" ], "en": [ "Namibia", "Republic of Namibia", "na", "🇳🇦", "NAM" ] }'},{feature_id:"6951013",description:"state",worldview:"all",iso_3166_1:"ID",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"IDN",wikidata_id:"Q252",centroid:"[113.3193,0.1133]",bounds:"[95.01049999999999,-11.0097,141.0296,6.0769]",area_sqkm:"1914185",region:"Asia",subregion:"South-eastern Asia",name:"Indonesia",name_en:"Indonesia",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Indonesia", "Republic of Indonesia", "NKRI", "Negara Kesatuan Republik Indonesia", "Republik Indonesia", "ID", "IDN", "RI", "id", "🇮🇩", "INA" ], "id": [ "Indonesia", "Republik Indonesia", "Negara Kesatuan Republik Indonesia", "NKRI", "ID", "INA", "IDN" ], "jv": [ "Indonésia" ], "su": [ "Indonésia" ] }'},{feature_id:"9179279",description:"state",worldview:"all",iso_3166_1:"MH",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MHL",wikidata_id:"Q709",centroid:"[171.3717,7.109]",bounds:"[160.7953,4.5725,172.1725,14.7232]",area_sqkm:"314",region:"Oceania",subregion:"Micronesia",name:"Marshall Islands",name_en:"Marshall Islands",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Marshall Islands", "Republic of the Marshall Islands", "Aolepān Aorōkin M̧ajeļ", "mh", "🇲🇭", "MHL" ], "mh": [ "Majõl", "Aolepān Aorōkin M̧ajeļ" ] }'},{feature_id:"10752170",description:"state",worldview:"all",iso_3166_1:"NU",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"NIU",wikidata_id:"Q34020",centroid:"[-169.8494,-19.054]",bounds:"[-169.9508,-19.1561,-169.7737,-18.9523]",area_sqkm:"283",region:"Oceania",subregion:"Polynesia",name:"Niue",name_en:"Niue",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Niue", "Niuē", "nu", "🇳🇺" ] }'},{feature_id:"8523905",description:"state",worldview:"all",iso_3166_1:"LI",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"LIE",wikidata_id:"Q347",centroid:"[9.547000000000001,47.1593]",bounds:"[9.4717,47.0484,9.6356,47.2706]",area_sqkm:"235",region:"Europe",subregion:"Western Europe",name:"Liechtenstein",name_en:"Liechtenstein",disputed:"FALSE",color_group:"2",names:'{ "de": [ "Liechtenstein", "Fürstentum Liechtenstein", "Fürstentum Lichtenstein" ], "en": [ "Liechtenstein", "LI", "Principality of Liechtenstein", "FL", "li", "🇱🇮", "LIE" ], "gsw": [ "Liachtaschta" ] }'},{feature_id:"11866294",description:"dependent territory",worldview:"all",iso_3166_1:"PR",sovereign_iso_3166_1:"US",iso_3166_1_alpha_3:"PRI",wikidata_id:"Q1183",centroid:"[-66.40389999999999,18.2218]",bounds:"[-67.95140000000001,17.8814,-65.22110000000001,18.516]",area_sqkm:"9463",region:"Americas",subregion:"Latin America and the Caribbean",name:"Puerto Rico",name_en:"Puerto Rico",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Puerto Rico", "Estado Libre Asociado de Puerto Rico", "PR", "The Commonwealth of Puerto Rico", "🇵🇷", "Porto Rico", "Territory of Puerto Rico", "Commonwealth of Puerto Rico" ], "es": [ "Puerto Rico", "Estado Libre Asociado de Puerto Rico", "Territorio Estadounidense de Puerto Rico" ] }'},{feature_id:"11407536",description:"state",worldview:"all",iso_3166_1:"PG",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PNG",wikidata_id:"Q691",centroid:"[144.3478,-6.6693]",bounds:"[140.8424,-11.6554,155.9831,-1.3148]",area_sqkm:"468868",region:"Oceania",subregion:"Melanesia",name:"Papua New Guinea",name_en:"Papua New Guinea",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Papua New Guinea", "Independent State of Papua New Guinea", "PNG", "pg", "🇵🇬" ], "tpi": [ "Papua Niugini" ] }'},{feature_id:"7540850",description:"state",worldview:"US",iso_3166_1:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"JPN",wikidata_id:"Q17",centroid:"[139.8855,37.6006]",bounds:"[122.9338,24.0457,145.8175,45.523]",area_sqkm:"473653",region:"Asia",subregion:"Eastern Asia",name:"日本",name_en:"Japan",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Japan", "State of Japan", "Land of the Rising Sun", "Nihon", "Nippon", "JP", "Nippon-koku", "Nihon-koku", "JA", "JPN", "🇯🇵", "jp", "JAP", "🗾" ], "ja": [ "日本", "日本国", "にほん", "にほんこく", "にっぽん", "にっぽんこく" ] }'},{feature_id:"14487780",description:"state",worldview:"IN",iso_3166_1:"TW",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TWN",wikidata_id:"Q865",centroid:"[120.8354,23.609]",bounds:"[114.3593,10.3713,122.1091,26.3853]",area_sqkm:"40091",region:"Asia",subregion:"Eastern Asia",name:"台灣",name_en:"Taiwan",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Taiwan", "ROC", "Chunghwa Minkwo", "Chunghwa Minkuo", "Formosa", "Republic of China", "Nationalist China", "Free China", "Free area of the Republic of China", "Republic of China (Taiwan)", "Chinese Taipei", "🇹🇼", "tw" ], "zh-hant": [ "中華民國", "自由中國", "臺灣", "臺澎金馬", "中華台北", "ROC", "台灣", "民國", "中華民國臺灣" ] }'},{feature_id:"14291141",description:"state",worldview:"all",iso_3166_1:"SE",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SWE",wikidata_id:"Q34",centroid:"[14.9499,62.9927]",bounds:"[10.9577,55.3367,24.1762,69.0599]",area_sqkm:"990948",region:"Europe",subregion:"Northern Europe",name:"Sverige",name_en:"Sweden",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Sweden", "Kingdom of Sweden", "SE", "se", "SWE" ], "sv": [ "Sverige", "Konungariket Sverige", "Kungariket Sverige", "Kungadömet Sverige", "SE", "SWE" ] }'},{feature_id:"3608618",description:"state",worldview:"all",iso_3166_1:"CG",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"COG",wikidata_id:"Q971",centroid:"[16.0718,-0.6664]",bounds:"[11.1466,-5.0375,18.644,3.7122]",area_sqkm:"345037",region:"Africa",subregion:"Sub-Saharan Africa",name:"République du Congo",name_en:"Republic of the Congo",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Republic of the Congo", "Congo-Brazzaville", "Congo Republic", "République du Congo", "Republic of Congo", "cg", "Rep. Congo", "🇨🇬", "Republique du Congo", "Congo (Brazzaville)", "CGO" ], "fr": [ "République du Congo", "Congo", "Congo-Brazzaville" ] }'},{feature_id:"12521613",description:"dependent territory",worldview:"all",iso_3166_1:"MF",sovereign_iso_3166_1:"FR",iso_3166_1_alpha_3:"MAF",wikidata_id:"Q25596",centroid:"[-63.0507,18.0848]",bounds:"[-63.1529,18.0447,-62.9703,18.1253]",area_sqkm:"52",region:"Americas",subregion:"Latin America and the Caribbean",name:"Saint-Martin",name_en:"Saint Martin",disputed:"FALSE",color_group:"7",names:'{ "en": [ "Saint Martin", "St. Martin" ], "fr": [ "Saint-Martin", "Île de Saint-Martin", "Île de Saint Martin" ] }'},{feature_id:"7147622",description:"state",worldview:"all",iso_3166_1:"IE",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"IRL",wikidata_id:"Q27",centroid:"[-8.113200000000001,53.4616]",bounds:"[-10.6613,51.422,-5.9941,55.4367]",area_sqkm:"115782",region:"Europe",subregion:"Northern Europe",name:"Ireland - Éire",name_en:"Ireland",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Ireland", "Éire", "IE", "IRL", "Republic of Ireland", "Hibernia", "Ireland, Republic of", "ie", "ireland", "🇮🇪", "Eire", "Southern Ireland" ], "fr": [ "Irlande", "République d\'Irlande", "Eire", "Éire", "Republic of Ireland", "Ireland" ], "ga": [ "Poblacht na hÉireann", "Éire" ] }'},{feature_id:"135174",description:"state",worldview:"all",iso_3166_1:"AL",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ALB",wikidata_id:"Q222",centroid:"[20.0221,41.1701]",bounds:"[19.2635,39.6449,21.0569,42.6603]",area_sqkm:"38143",region:"Europe",subregion:"Southern Europe",name:"Shqipëria",name_en:"Albania",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Albania", "Republic of Albania", "al", "Republika e Shqipërisë", "Shqipërisë", "🇦🇱", "ALB" ], "sq": [ "Shqipëria", "Republika e Shqipërisë" ] }'},{feature_id:"14553307",description:"state",worldview:"all",iso_3166_1:"TJ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TJK",wikidata_id:"Q863",centroid:"[70.94499999999999,38.8917]",bounds:"[67.34220000000001,36.6718,75.1558,41.0442]",area_sqkm:"181309",region:"Asia",subregion:"Central Asia",name:"Тоҷикистон",name_en:"Tajikistan",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Tajikistan", "Republic of Tajikistan", "tj", "🇹🇯", "TJK" ], "ru": [ "Таджикистан", "Республика Таджикистан" ], "tg": [ "Тоҷикистон", "Ҷумҳурии Тоҷикистон" ] }'},{feature_id:"15798512",description:"dependent territory",worldview:"all",iso_3166_1:"VI",sovereign_iso_3166_1:"US",iso_3166_1_alpha_3:"VIR",wikidata_id:"Q26262",centroid:"[-64.75920000000001,17.7289]",bounds:"[-65.0853,17.674,-64.5652,18.413]",area_sqkm:"370",region:"Americas",subregion:"Latin America and the Caribbean",name:"Virgin Islands",name_en:"Virgin Islands",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Virgin Islands" ] }'},{feature_id:"5115979",description:"state",worldview:"all",iso_3166_1:"FR",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"FRA",wikidata_id:"Q142",centroid:"[2.1592,46.8894]",bounds:"[-5.143,41.3333,9.5603,51.0892]",area_sqkm:"795594",region:"Europe",subregion:"Western Europe",name:"France",name_en:"France",disputed:"FALSE",color_group:"7",names:'{ "en": [ "France", "fr", "FR", "🇫🇷", "République française", "La France", "Republic of France", "French Republic", "FRA" ], "es": [ "Francia", "República Francesa", "Republica Francesa" ], "fr": [ "France", "FR", "République française", "FRA", "RF", "🇫🇷", "fr", "l\'Hexagone" ] }'},{feature_id:"4329533",description:"state",worldview:"all",iso_3166_1:"DO",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"DOM",wikidata_id:"Q786",centroid:"[-70.1246,18.7721]",bounds:"[-72.0094,17.4703,-68.32340000000001,19.9324]",area_sqkm:"51251",region:"Americas",subregion:"Latin America and the Caribbean",name:"República Dominicana",name_en:"Dominican Republic",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Dominican Republic", "República Dominicana", "🇩🇴", "RD", "DR", "Republica Dominicana" ], "es": [ "República Dominicana", "Republica Dominicana" ] }'},{feature_id:"9375898",description:"state",worldview:"all",iso_3166_1:"MU",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MUS",wikidata_id:"Q1027",centroid:"[57.5902,-20.2529]",bounds:"[56.5853,-20.5248,63.5033,-10.3372]",area_sqkm:"2165",region:"Africa",subregion:"Sub-Saharan Africa",name:"Mauritius",name_en:"Mauritius",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Mauritius", "Republic of Mauritius", "Maurice", "Moris", "mu", "🇲🇺", "MRI" ], "bho": [ "मॉरिशस", "मारिशस" ] }'},{feature_id:"3346486",description:"dependent territory",worldview:"all",iso_3166_1:"CX",sovereign_iso_3166_1:"AU",iso_3166_1_alpha_3:"CXR",wikidata_id:"Q31063",centroid:"[105.6169,-10.4914]",bounds:"[105.5333,-10.5705,105.7126,-10.4124]",area_sqkm:"139",region:"Oceania",subregion:"Australia and New Zealand",name:"Christmas Island",name_en:"Christmas Island",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Christmas Island", "cx", "🇨🇽", "Christmas Island, Other Territories", "Christmas Island, Other Territories, Australia" ] }'},{feature_id:"7409708",description:"state",worldview:"all",iso_3166_1:"CI",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CIV",wikidata_id:"Q1008",centroid:"[-5.5573,7.5616]",bounds:"[-8.6029,4.3609,-2.4947,10.7397]",area_sqkm:"327143",region:"Africa",subregion:"Sub-Saharan Africa",name:"Côte d’Ivoire",name_en:"Ivory Coast",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Ivory Coast", "Republic of Côte d\'Ivoire", "ci", "Cote d\'Ivoire", "🇨🇮", "Côte d\'Ivoire", "Republic of Cote d\'Ivoire", "Côte-d\'Ivoire", "Côte D\'Ivoire", "Cote D\'Ivoire", "Cote d\'lvoire", "Ivory coast", "Cote D\' Ivoire", "Cote d\' Ivoire", "Côte d’Ivoire", "Côte d\'Ivorie", "Côte d\'ivoire", "Cote d\'ivoire", "Cote d´Ivoire", "Cote d ivoire", "Cote divoire", "Cote Ivoire", "Cote d’Ivoire", "République de Côte d\'Ivoire", "Republic of Ivory Coast", "Cote Divoire", "Cote-d\'Ivoire", "Cote d\'ivore", "Cote dIvoire", "Côte d´Ivoire", "Côte Divoire", "Côte D\'ivoire", "Republic of the Ivory Coast", "The Ivory Coast", "CIV" ], "fr": [ "Côte d\'Ivoire", "Côte d’Ivoire", "Côte-d’Ivoire", "Côte-d\'Ivoire" ] }'},{feature_id:"1577460",description:"disputed area",worldview:"CN",iso_3166_1:"D0INPK2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[76.503,33.9882]",bounds:"[73.75,32.2722,79.30589999999999,35.6733]",area_sqkm:"128240",region:"",subregion:"",name:"Indian-administered Kashmir",name_en:"Indian-administered Kashmir",disputed:"TRUE",color_group:"",names:""},{feature_id:"9769107",description:"state",worldview:"all",iso_3166_1:"MN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MNG",wikidata_id:"Q711",centroid:"[105.2046,47.1285]",bounds:"[87.7367,41.5827,119.9322,52.1514]",area_sqkm:"2281619",region:"Asia",subregion:"Eastern Asia",name:"Монгол Улс",name_en:"Mongolia",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Mongolia", "mn", "Mongol uls", "MNG", "🇲🇳", "MGL" ], "mn": [ "Монгол улс", "Монгол" ] }'},{feature_id:"6426718",description:"state",worldview:"all",iso_3166_1:"GY",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GUY",wikidata_id:"Q734",centroid:"[-58.9506,4.8622]",bounds:"[-61.3918,1.1701,-56.4917,8.5349]",area_sqkm:"213209",region:"Americas",subregion:"Latin America and the Caribbean",name:"Guyana",name_en:"Guyana",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Guyana", "Co-operative Republic of Guyana", "gy", "Republic of Guyana", "🇬🇾", "GUY" ] }'},{feature_id:"6033495",description:"state",worldview:"all",iso_3166_1:"GP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GLP",wikidata_id:"Q17012",centroid:"[-61.6777,16.1542]",bounds:"[-61.8094,15.8323,-61.0019,16.5145]",area_sqkm:"1711",region:"Americas",subregion:"Latin America and the Caribbean",name:"Guadeloupe",name_en:"Guadeloupe",disputed:"FALSE",color_group:"7",names:'{ "en": [ "Guadeloupe", "gp", "🇬🇵" ], "fr": [ "Guadeloupe", "971" ] }'},{feature_id:"9506973",description:"state",worldview:"all",iso_3166_1:"MX",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MEX",wikidata_id:"Q96",centroid:"[-102.3697,23.9442]",bounds:"[-118.3643,14.53,-86.7105,32.7188]",area_sqkm:"2168490",region:"Americas",subregion:"Latin America and the Caribbean",name:"México",name_en:"Mexico",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Mexico", "MX", "mx", "🇲🇽", "United Mexican States", "Mexican Republic", "MEX" ], "es": [ "México", "mx", "Méjico", "Mejico", "Estados Unidos Mexicanos", "MX", "MEX", "Mexico", "Republica Mexicana", "República Mexicana" ] }'},{feature_id:"11341997",description:"state",worldview:"all",iso_3166_1:"PA",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PAN",wikidata_id:"Q804",centroid:"[-81.4812,8.420199999999999]",bounds:"[-83.05159999999999,7.2042,-77.13939999999999,9.6457]",area_sqkm:"76373",region:"Americas",subregion:"Latin America and the Caribbean",name:"Panama",name_en:"Panama",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Panama", "Republic of Panama", "pa", "🇵🇦" ], "es": [ "Panamá", "República de Panamá" ] }'},{feature_id:"14487780",description:"state",worldview:"JP",iso_3166_1:"TW",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TWN",wikidata_id:"Q865",centroid:"[120.8354,23.609]",bounds:"[114.3593,10.3713,122.1091,26.3853]",area_sqkm:"40091",region:"Asia",subregion:"Eastern Asia",name:"台灣",name_en:"Taiwan",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Taiwan", "ROC", "Chunghwa Minkwo", "Chunghwa Minkuo", "Formosa", "Republic of China", "Nationalist China", "Free China", "Free area of the Republic of China", "Republic of China (Taiwan)", "Chinese Taipei", "🇹🇼", "tw" ], "zh-hant": [ "中華民國", "自由中國", "臺灣", "臺澎金馬", "中華台北", "ROC", "台灣", "民國", "中華民國臺灣" ] }'},{feature_id:"1118231",description:"state",worldview:"all",iso_3166_1:"BH",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BHR",wikidata_id:"Q398",centroid:"[50.5534,26.025]",bounds:"[50.3152,25.5717,50.8245,26.4229]",area_sqkm:"858",region:"Asia",subregion:"Western Asia",name:"البحرين",name_en:"Bahrain",disputed:"FALSE",color_group:"1",names:'{ "ar": [ "البحرين", "مملكة البحرين" ], "en": [ "Bahrain", "bh", "Kingdom of Bahrain", "🇧🇭", "BAH" ] }'},{feature_id:"7868534",description:"state",worldview:"all",iso_3166_1:"KI",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"KIR",wikidata_id:"Q710",centroid:"[-157.371,1.8709]",bounds:"[-174.5434,-11.4479,176.8485,4.6994]",area_sqkm:"1021",region:"Oceania",subregion:"Micronesia",name:"Kiribati",name_en:"Kiribati",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Kiribati", "Republic of Kiribati", "🇰🇮", "ki", "KIR" ] }'},{feature_id:"12980429",description:"state",worldview:"all",iso_3166_1:"SN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SEN",wikidata_id:"Q1041",centroid:"[-14.6562,14.5118]",bounds:"[-17.5301,12.3068,-11.3463,16.6916]",area_sqkm:"203620",region:"Africa",subregion:"Sub-Saharan Africa",name:"Sénégal",name_en:"Senegal",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Senegal", "Republic of Senegal", "République du Sénégal", "sn", "Sénégal", "🇸🇳", "Republique du Senegal", "SEN" ], "ff": [ "Senegaal" ], "fr": [ "Sénégal", "La République du Sénégal" ], "wo": [ "Senegaal" ] }'},{feature_id:"4460609",description:"state",worldview:"all",iso_3166_1:"EG",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"EGY",wikidata_id:"Q79",centroid:"[29.4676,26.9406]",bounds:"[24.6929,21.9993,36.8944,31.6717]",area_sqkm:"1121082",region:"Africa",subregion:"Northern Africa",name:"مصر",name_en:"Egypt",disputed:"FALSE",color_group:"4",names:'{ "ar": [ "مصر", "جمهوريّة مصرالعربيّة", "جمهورية مصر العربية" ], "en": [ "Egypt", "Republic of Egypt", "eg", "EGY", "🇪🇬", "Arab Republic of Egypt", "Arab Rep. Egypt", "Rep. Egypt" ], "arz": [ "مصر" ] }'},{feature_id:"332276",description:"disputed area",worldview:"all",iso_3166_1:"D0ILSY1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[35.749,33.008]",bounds:"[35.6118,32.6823,35.8962,33.333]",area_sqkm:"1370",region:"",subregion:"",name:"Golan Heights",name_en:"Golan Heights",disputed:"TRUE",color_group:"",names:""},{feature_id:"1642529",description:"state",worldview:"CN",iso_3166_1:"BT",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BTN",wikidata_id:"Q917",centroid:"[90.3571,27.473]",bounds:"[88.7683,26.6948,92.124,28.2458]",area_sqkm:"43658",region:"Asia",subregion:"Southern Asia",name:"འབྲུགཡུལ་",name_en:"Bhutan",disputed:"FALSE",color_group:"5",names:'{ "dz": [ "འབྲུག་ཡུལ་", "འབྲུགཡུལ་་" ], "en": [ "Bhutan", "Kingdom of Bhutan", "bt", "🇧🇹", "BHU" ], "ne": [ "भुटान" ] }'},{feature_id:"528884",description:"disputed area",worldview:"JP",iso_3166_1:"D0BTCN1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[90.2383,28.2113]",bounds:"[89.8182,28.0606,90.61490000000001,28.3608]",area_sqkm:"1440",region:"",subregion:"",name:"Kula Kangri",name_en:"Kula Kangri",disputed:"TRUE",color_group:"",names:""},{feature_id:"1315316",description:"disputed area",worldview:"JP",iso_3166_1:"D0CNIN6",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[78.6587,32.0285]",bounds:"[78.4284,31.7806,78.7796,32.2759]",area_sqkm:"494",region:"",subregion:"",name:"Kauirik disputed area",name_en:"Kauirik disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"2428952",description:"state",worldview:"all",iso_3166_1:"BI",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BDI",wikidata_id:"Q967",centroid:"[29.9633,-3.3895]",bounds:"[29.0007,-4.4677,30.8483,-2.31]",area_sqkm:"26936",region:"Africa",subregion:"Sub-Saharan Africa",name:"Burundi",name_en:"Burundi",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Burundi", "Republic of Burundi", "bi", "🇧🇮", "Republika y\'Uburundi", "Gouvernement du Burundi", "BDI" ], "fr": [ "Burundi", "République du Burundi" ], "rn": [ "Uburundi", "Republika y\'Uburundi" ] }'},{feature_id:"1445925",description:"state",worldview:"all",iso_3166_1:"BZ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BLZ",wikidata_id:"Q242",centroid:"[-88.72709999999999,17.1949]",bounds:"[-89.22499999999999,15.8859,-87.486,18.4958]",area_sqkm:"23325",region:"Americas",subregion:"Latin America and the Caribbean",name:"Belize",name_en:"Belize",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Belize", "bz", "🇧🇿" ], "es": [ "Belice" ] }'},{feature_id:"528884",description:"disputed area",worldview:"IN",iso_3166_1:"D0BTCN1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[90.2383,28.2113]",bounds:"[89.8182,28.0606,90.61490000000001,28.3608]",area_sqkm:"1440",region:"",subregion:"",name:"Kula Kangri",name_en:"Kula Kangri",disputed:"TRUE",color_group:"",names:""},{feature_id:"1577460",description:"disputed area",worldview:"US",iso_3166_1:"D0INPK2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[76.503,33.9882]",bounds:"[73.75,32.2722,79.30589999999999,35.6733]",area_sqkm:"128240",region:"",subregion:"",name:"Indian-administered Kashmir",name_en:"Indian-administered Kashmir",disputed:"TRUE",color_group:"",names:""},{feature_id:"3084336",description:"state",worldview:"US",iso_3166_1:"CN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CHN",wikidata_id:"Q148",centroid:"[100.5057,38.8017]",bounds:"[73.5013,7.3643,134.7734,53.5604]",area_sqkm:"11649405",region:"Asia",subregion:"Eastern Asia",name:"中国",name_en:"China",disputed:"FALSE",color_group:"4",names:'{ "en": [ "People\'s Republic of China", "China", "CN", "PR China", "PRC", "cn", "CHN", "Communist China", "🇨🇳" ], "zh": [ "中华人民共和国", "中国", "中國", "中華人民共和國", "共产中国", "新中国", "中華人民共和國／中华人民共和国", "中" ] }'},{feature_id:"856564",description:"disputed area",worldview:"US",iso_3166_1:"D0CNIN7",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[78.791,31.3804]",bounds:"[78.7495,31.294,78.86020000000001,31.4674]",area_sqkm:"106",region:"",subregion:"",name:"Shipki Pass disputed area",name_en:"Shipki Pass disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"5247151",description:"dependent territory",worldview:"all",iso_3166_1:"PF",sovereign_iso_3166_1:"FR",iso_3166_1_alpha_3:"PYF",wikidata_id:"Q30971",centroid:"[-149.4451,-17.688]",bounds:"[-154.7272,-27.9005,-134.4511,-7.895]",area_sqkm:"4633",region:"Oceania",subregion:"Polynesia",name:"Polynésie Française",name_en:"French Polynesia",disputed:"FALSE",color_group:"7",names:'{ "en": [ "French Polynesia", "pf", "🇵🇫" ], "fr": [ "Polynésie française", "Établissements français de l\'Océanie", "Polynésie Francaise", "Établissements français de l’Océanie", "F-OH", "Polynesie francaise", "987" ], "ty": [ "Pōrīnetia farāni" ] }'},{feature_id:"790542",description:"state",worldview:"all",iso_3166_1:"AW",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ABW",wikidata_id:"Q21203",centroid:"[-69.98180000000001,12.5176]",bounds:"[-70.0637,12.4118,-69.8657,12.6234]",area_sqkm:"185",region:"Americas",subregion:"Latin America and the Caribbean",name:"Aruba",name_en:"Aruba",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Aruba", "ISO 3166-1:AW", "America\\/Aruba", "Island of Aruba", "aw", "🇦🇼", "ARU" ], "nl": [ "Aruba", "AW", "ABW" ], "pap": [ "Aruba" ] }'},{feature_id:"7606383",description:"state",worldview:"all",iso_3166_1:"JE",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"JEY",wikidata_id:"Q785",centroid:"[-2.1258,49.213]",bounds:"[-2.2545,49.1631,-2.017,49.2623]",area_sqkm:"186",region:"Europe",subregion:"Northern Europe",name:"Jersey",name_en:"Jersey",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Jersey", "Balliwick of Jersey", "je", "Bailiwick of Jersey", "🇯🇪" ] }'},{feature_id:"13701210",description:"dependent territory",worldview:"all",iso_3166_1:"GS",sovereign_iso_3166_1:"UK",iso_3166_1_alpha_3:"SGS",wikidata_id:"Q35086",centroid:"[-36.4992,-54.4399]",bounds:"[-42.2024,-59.4855,-26.2675,-53.3417]",area_sqkm:"7350",region:"Americas",subregion:"Latin America and the Caribbean",name:"South Georgia and South Sandwich Islands",name_en:"South Georgia and South Sandwich Islands",disputed:"FALSE",color_group:"6",names:'{ "en": [ "South Georgia and the South Sandwich Islands", "South Georgia", "South Sandwich Islands", "gs", "SGSSI", "🇬🇸", "South Georgia and South Sandwich Islands" ] }'},{feature_id:"13177035",description:"state",worldview:"all",iso_3166_1:"SL",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SLE",wikidata_id:"Q1044",centroid:"[-11.875,8.4655]",bounds:"[-13.3064,6.9246,-10.2741,10.0001]",area_sqkm:"73816",region:"Africa",subregion:"Sub-Saharan Africa",name:"Sierra Leone",name_en:"Sierra Leone",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Sierra Leone", "Republic of Sierra Leone", "sl", "🇸🇱", "SLE" ] }'},{feature_id:"1577460",description:"disputed area",worldview:"JP",iso_3166_1:"D0INPK2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[76.503,33.9882]",bounds:"[73.75,32.2722,79.30589999999999,35.6733]",area_sqkm:"128240",region:"",subregion:"",name:"Indian-administered Kashmir",name_en:"Indian-administered Kashmir",disputed:"TRUE",color_group:"",names:""},{feature_id:"12193984",description:"state",worldview:"all",iso_3166_1:"RW",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"RWA",wikidata_id:"Q1037",centroid:"[29.9879,-1.9431]",bounds:"[28.862,-2.8388,30.8993,-1.0479]",area_sqkm:"25346",region:"Africa",subregion:"Sub-Saharan Africa",name:"Rwanda",name_en:"Rwanda",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Rwanda", "Republic of Rwanda", "rw", "🇷🇼" ], "rw": [ "Rwanda", "Repubulika y\'u Rwanda" ] }'},{feature_id:"11210937",description:"state",worldview:"all",iso_3166_1:"PW",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PLW",wikidata_id:"Q695",centroid:"[134.5573,7.5288]",bounds:"[131.1199,2.9715,134.7214,8.094099999999999]",area_sqkm:"492",region:"Oceania",subregion:"Micronesia",name:"Belau",name_en:"Palau",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Palau", "Republic of Palau", "Belau", "Pelew", "pw", "Republic of Belau", "🇵🇼" ] }'},{feature_id:"1642529",description:"state",worldview:"IN",iso_3166_1:"BT",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BTN",wikidata_id:"Q917",centroid:"[90.3415,27.473]",bounds:"[88.7683,26.6948,92.124,28.2458]",area_sqkm:"43846",region:"Asia",subregion:"Southern Asia",name:"འབྲུགཡུལ་",name_en:"Bhutan",disputed:"FALSE",color_group:"5",names:'{ "dz": [ "འབྲུག་ཡུལ་", "འབྲུགཡུལ་་" ], "en": [ "Bhutan", "Kingdom of Bhutan", "bt", "🇧🇹", "BHU" ], "ne": [ "भुटान" ] }'},{feature_id:"66064479",description:"state",worldview:"IN",iso_3166_1:"HK",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"HKG",wikidata_id:"Q8646",centroid:"[114.0599,22.4114]",bounds:"[113.8351,22.1539,114.4417,22.562]",area_sqkm:"1214",region:"Asia",subregion:"Eastern Asia",name:"香港",name_en:"Hong Kong",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Hong Kong", "HKSAR", "HKG", "HK", "Hong Kong SAR", "China Hong Kong", "Hong Kong, China", "hk", "Hong Kong SAR, China", "🇭🇰", "Hong Kong Special Administrative Region" ], "yue": [ "香港", "香港特別行政區", "香港特區", "中國香港" ], "zh-hant": [ "香港", "香港特別行政區", "香港特區", "中國香港" ] }'},{feature_id:"4526290",description:"state",worldview:"all",iso_3166_1:"SV",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SLV",wikidata_id:"Q792",centroid:"[-88.9105,13.802]",bounds:"[-90.1326,13.1524,-87.6905,14.4497]",area_sqkm:"21644",region:"Americas",subregion:"Latin America and the Caribbean",name:"El Salvador",name_en:"El Salvador",disputed:"FALSE",color_group:"1",names:'{ "en": [ "El Salvador", "sv", "🇸🇻", "Republic of El Salvador", "ESA" ], "es": [ "El Salvador", "República de El Salvador", "Republica de El Salvador" ] }'},{feature_id:"2822268",description:"dependent territory",worldview:"all",iso_3166_1:"KY",sovereign_iso_3166_1:"UK",iso_3166_1_alpha_3:"CYM",wikidata_id:"Q5785",centroid:"[-81.17149999999999,19.3299]",bounds:"[-81.42059999999999,19.2632,-79.723,19.7567]",area_sqkm:"284",region:"Americas",subregion:"Latin America and the Caribbean",name:"Cayman Islands",name_en:"Cayman Islands",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Cayman Islands", "ky", "🇰🇾", "CAY" ] }'},{feature_id:"16257267",description:"dependent territory",worldview:"all",iso_3166_1:"WF",sovereign_iso_3166_1:"FR",iso_3166_1_alpha_3:"WLF",wikidata_id:"Q35555",centroid:"[-176.2086,-13.2859]",bounds:"[-178.1824,-14.3622,-176.1242,-13.1828]",area_sqkm:"153",region:"Oceania",subregion:"Polynesia",name:"Wallis-et-Futuna",name_en:"Wallis and Futuna",disputed:"FALSE",color_group:"7",names:'{ "en": [ "Wallis and Futuna", "wf", "🇼🇫" ], "fr": [ "Wallis-et-Futuna", "Wallis et Futuna", "Emeni Simete", "Îles Wallis et Futuna", "Makape Papilio", "Île de Futuna", "986", "Collectivité des Îles Wallis et Futuna" ] }'},{feature_id:"11669685",description:"state",worldview:"all",iso_3166_1:"PN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PCN",wikidata_id:"Q35672",centroid:"[-128.3268,-24.376]",bounds:"[-130.7562,-25.0798,-124.772,-23.9077]",area_sqkm:"59",region:"Oceania",subregion:"Polynesia",name:"Pitcairn Islands",name_en:"Pitcairn Islands",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Pitcairn Islands", "pn", "🇵🇳", "Pitcairn, Henderson, Ducie and Oeno Islands" ] }'},{feature_id:"2167023",description:"dependent territory",worldview:"all",iso_3166_1:"VG",sovereign_iso_3166_1:"UK",iso_3166_1_alpha_3:"VGB",wikidata_id:"Q25305",centroid:"[-64.64,18.4204]",bounds:"[-64.8501,18.3064,-64.2706,18.7497]",area_sqkm:"164",region:"Americas",subregion:"Latin America and the Caribbean",name:"British Virgin Islands",name_en:"British Virgin Islands",disputed:"FALSE",color_group:"6",names:'{ "en": [ "British Virgin Islands", "Virgin Islands", "BVI", "vg", "🇻🇬", "IVB" ] }'},{feature_id:"16126190",description:"state",worldview:"all",iso_3166_1:"VE",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"VEN",wikidata_id:"Q717",centroid:"[-65.43519999999999,6.4568]",bounds:"[-73.35290000000001,0.6514,-59.8065,12.4912]",area_sqkm:"927706",region:"Americas",subregion:"Latin America and the Caribbean",name:"Venezuela",name_en:"Venezuela",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Venezuela", "Bolivarian Republic of Venezuela", "BR Venezuela", "VE", "🇻🇪", "Estados Unidos de Venezuela", "Vzla", "VEN" ], "es": [ "Venezuela", "RB Venezuela", "VE", "La República Bolivarana de Venezuela", "Estados Unidos de Venezuela", "Republica Bolivariana de Venezuela", "La Republica Bolivarana de Venezuela", "La República Bolivariana de Venezuela", "La Republica Bolivariana de Venezuela", "República Bolivariana de Venezuela", "Vzla" ] }'},{feature_id:"6557795",description:"state",worldview:"all",iso_3166_1:"HT",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"HTI",wikidata_id:"Q790",centroid:"[-72.29510000000001,18.9902]",bounds:"[-74.4806,18.0214,-71.622,20.0894]",area_sqkm:"28641",region:"Americas",subregion:"Latin America and the Caribbean",name:"Haïti",name_en:"Haiti",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Haiti", "Republic of Haiti", "ht", "Hayti", "HT", "République d\'Haïti", "Haitian Republic", "Ayiti", "🇭🇹", "HAI" ], "ht": [ "Ayiti", "Repiblik d Ayiti" ] }'},{feature_id:"7082091",description:"state",worldview:"all",iso_3166_1:"IQ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"IRQ",wikidata_id:"Q796",centroid:"[42.461,33.3185]",bounds:"[38.7923,29.0583,48.6128,37.3815]",area_sqkm:"522150",region:"Asia",subregion:"Western Asia",name:"العراق",name_en:"Iraq",disputed:"FALSE",color_group:"1",names:'{ "ar": [ "العراق", "الجمهورية العراقية", "سواره توكه" ], "en": [ "Iraq", "Republic of Iraq", "al-‘Irāq", "Jumhūriyyat al-‘Irāq", "Komar-i ‘Êraq", "iq", "🇮🇶", "IRQ" ], "ckb": [ "عێراق" ] }'},{feature_id:"13439176",description:"state",worldview:"all",iso_3166_1:"SI",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SVN",wikidata_id:"Q215",centroid:"[14.634,46.1541]",bounds:"[13.3757,45.4216,16.6118,46.8768]",area_sqkm:"29228",region:"Europe",subregion:"Southern Europe",name:"Slovenija",name_en:"Slovenia",disputed:"FALSE",color_group:"2",names:'{ "de": [ "Slowenien", "Republik Slowenien" ], "en": [ "Slovenia", "Slovenija", "Republika Slovenija", "si", "🇸🇮", "svn", "slo", "Republic of Slovenia", "SLO" ], "hr": [ "Slovenija" ], "sl": [ "Slovenija", "Republika Slovenija" ] }'},{feature_id:"7802995",description:"state",worldview:"US",iso_3166_1:"KE",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"KEN",wikidata_id:"Q114",centroid:"[37.4854,0.1774]",bounds:"[33.9216,-4.6913,41.9109,5.0334]",area_sqkm:"590477",region:"Africa",subregion:"Sub-Saharan Africa",name:"Kenya",name_en:"Kenya",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Kenya", "Republic of Kenya", "KE", "KEN", "ke", "🇰🇪" ], "ki": [ "Kenya" ], "sw": [ "Kenya", "Jamhuri ya Kenya" ] }'},{feature_id:"10293416",description:"state",worldview:"all",iso_3166_1:"NP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"NPL",wikidata_id:"Q837",centroid:"[83.0746,28.4212]",bounds:"[80.05549999999999,26.3546,88.2016,30.448]",area_sqkm:"168299",region:"Asia",subregion:"Southern Asia",name:"Nepal",name_en:"Nepal",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Nepal", "NPL", "Federal Democratic Republic of Nepal", "NEP", "NP", "🇳🇵" ], "ne": [ "नेपाल", "स‌ंघिय लोकतान्त्रिक गणतन्त्र नेपाल", "संघिय लोकतान्त्रिक गणतन्त्रात्मक नेपाल" ], "mai": [ "नेपाल", "सङ्घीय लोकतान्त्रिक गणतन्त्र नेपाल" ] }'},{feature_id:"13111491",description:"state",worldview:"all",iso_3166_1:"SC",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SYC",wikidata_id:"Q1042",centroid:"[55.4924,-4.6841]",bounds:"[46.2029,-10.2271,56.2947,-3.7129]",area_sqkm:"498",region:"Africa",subregion:"Sub-Saharan Africa",name:"Seychelles",name_en:"Seychelles",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Seychelles", "Republic of Seychelles", "sc", "🇸🇨", "SEY" ], "fr": [ "Seychelles", "République des Seychelles", "Repiblik Sesel", "🇸🇨", "sc", "SEY" ] }'},{feature_id:"200766",description:"state",worldview:"all",iso_3166_1:"DZ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"DZA",wikidata_id:"Q262",centroid:"[0.5969,28.4756]",bounds:"[-8.667999999999999,18.9562,11.9942,37.0897]",area_sqkm:"2639266",region:"Africa",subregion:"Northern Africa",name:"الجزائر",name_en:"Algeria",disputed:"FALSE",color_group:"5",names:'{ "ar": [ "الجزائر", "الجمهورية الجزائرية الديمقراطية الشعبية" ], "en": [ "Algeria", "People’s Democratic Republic of Algeria", "dz", "🇩🇿", "ALG" ], "fr": [ "Algérie", "République algérienne démocratique et populaire", "RADP", "dz", "Algerie" ] }'},{feature_id:"11735219",description:"state",worldview:"all",iso_3166_1:"PL",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"POL",wikidata_id:"Q36",centroid:"[19.1972,52.0136]",bounds:"[14.1229,49.002,24.1458,54.8358]",area_sqkm:"509240",region:"Europe",subregion:"Eastern Europe",name:"Polska",name_en:"Poland",disputed:"FALSE",color_group:"3",names:'{ "de": [ "Polen", "Republik Polen" ], "en": [ "Poland", "POL", "Republic of Poland", "PL", "Polska", "🇵🇱" ], "pl": [ "Polska", "Rzeczpospolita Polska", "RP", "POL", "PL" ], "ru": [ "Польша", "Polska", "Республика Польша" ] }'},{feature_id:"12390520",description:"state",worldview:"all",iso_3166_1:"KN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"KNA",wikidata_id:"Q763",centroid:"[-62.7446,17.3156]",bounds:"[-62.8642,17.094,-62.5394,17.4177]",area_sqkm:"276",region:"Americas",subregion:"Latin America and the Caribbean",name:"Saint Kitts and Nevis",name_en:"Saint Kitts and Nevis",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Saint Kitts and Nevis", "Saint Christopher and Nevis", "Federation of Saint Kitts and Nevis", "kn", "St. Kitts and Nevis", "St Kitts and Nevis", "🇰🇳" ] }'},{feature_id:"13045950",description:"state",worldview:"JP",iso_3166_1:"RS",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SRB",wikidata_id:"Q403",centroid:"[21.0101,44.2456]",bounds:"[18.838,42.2357,23.006,46.1898]",area_sqkm:"108170",region:"Europe",subregion:"Southern Europe",name:"Србија",name_en:"Serbia",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Serbia", "🇷🇸", "Republic of Serbia", "Republika Srbija", "rs", "Srbija", "SRB" ], "sq": [ "Serbia", "Republika e Serbisë" ], "sr": [ "Србија", "Република Србија", "rs", "Republika Srbija" ], "sr-ec": [ "Србија" ], "sr-el": [ "Srbija" ] }'},{feature_id:"6885481",description:"state",worldview:"JP",iso_3166_1:"IN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"IND",wikidata_id:"Q668",centroid:"[79.5556,22.5605]",bounds:"[68.17449999999999,6.756,97.3954,35.6733]",area_sqkm:"3484254",region:"Asia",subregion:"Southern Asia",name:"India",name_en:"India",disputed:"FALSE",color_group:"1",names:'{ "en": [ "India", "Bharat", "Hindustan", "Bharatvarsh", "in", "IN", "Republic of India", "🇮🇳", "IND" ], "hi": [ "भारत", "हिंदुस्तान", "भारतवर्ष", "इंडिया", "भारत गणराज्य", "इण्डिया", "हिन्दोस्तान", "हिन्दुस्तान", "आर्यवर्त" ] }'},{feature_id:"10621090",description:"state",worldview:"all",iso_3166_1:"NE",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"NER",wikidata_id:"Q1032",centroid:"[9.891299999999999,17.5768]",bounds:"[0.1673,11.6961,15.9979,23.518]",area_sqkm:"1248250",region:"Africa",subregion:"Sub-Saharan Africa",name:"Niger",name_en:"Niger",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Niger", "Republic of Niger", "Republic Niger", "ne", "🇳🇪", "The Niger", "Republic of The Niger" ], "fr": [ "Niger", "République du Niger", "NIG", "NE", "ne", "🇳🇪" ], "ha": [ "Nijar" ] }'},{feature_id:"3805282",description:"state",worldview:"all",iso_3166_1:"HR",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"HRV",wikidata_id:"Q224",centroid:"[15.3255,44.7753]",bounds:"[13.4898,42.3922,19.4473,46.5549]",area_sqkm:"80481",region:"Europe",subregion:"Southern Europe",name:"Hrvatska",name_en:"Croatia",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Croatia", "Republic of Croatia", "HR", "HRV", "hr", "🇭🇷", "CRO" ], "hr": [ "Hrvatska", "Republika Hrvatska" ] }'},{feature_id:"15012066",description:"state",worldview:"all",iso_3166_1:"TT",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TTO",wikidata_id:"Q754",centroid:"[-61.2604,10.4435]",bounds:"[-61.9305,10.0424,-60.4924,11.3584]",area_sqkm:"5263",region:"Americas",subregion:"Latin America and the Caribbean",name:"Trinidad and Tobago",name_en:"Trinidad and Tobago",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Trinidad and Tobago", "Republic of Trinidad and Tobago", "tt", "🇹🇹", "TTO" ] }'},{feature_id:"15995122",description:"state",worldview:"all",iso_3166_1:"VU",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"VUT",wikidata_id:"Q686",centroid:"[167.051,-15.1569]",bounds:"[166.5414,-20.2532,170.2402,-13.0725]",area_sqkm:"12996",region:"Oceania",subregion:"Melanesia",name:"Vanuatu",name_en:"Vanuatu",disputed:"FALSE",color_group:"6",names:'{ "bi": [ "Vanuatu" ], "en": [ "Vanuatu", "Republic of Vanuatu", "vu", "🇻🇺", "vut", "van", "VAN" ], "fr": [ "Vanuatu", "République de Vanuatu" ] }'},{feature_id:"7540850",description:"state",worldview:"CN",iso_3166_1:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"JPN",wikidata_id:"Q17",centroid:"[139.8855,37.6006]",bounds:"[122.9338,24.0457,145.8175,45.523]",area_sqkm:"473647",region:"Asia",subregion:"Eastern Asia",name:"日本",name_en:"Japan",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Japan", "State of Japan", "Land of the Rising Sun", "Nihon", "Nippon", "JP", "Nippon-koku", "Nihon-koku", "JA", "JPN", "🇯🇵", "jp", "JAP", "🗾" ], "ja": [ "日本", "日本国", "にほん", "にほんこく", "にっぽん", "にっぽんこく" ] }'},{feature_id:"4395071",description:"state",worldview:"all",iso_3166_1:"EC",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ECU",wikidata_id:"Q736",centroid:"[-78.27249999999999,-1.7987]",bounds:"[-92.0081,-5.0161,-75.1944,1.6817]",area_sqkm:"257928",region:"Americas",subregion:"Latin America and the Caribbean",name:"Ecuador",name_en:"Ecuador",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Ecuador", "Republic of Ecuador", "ec", "ecu", "ECU", "EC", "Republic of the Equator", "The Ecuadorian State", "🇪🇨" ], "es": [ "Ecuador", "Republica del Ecuador", "República del Ecuador", "ECU", "EC", "ecu", "ec", "el Ecuador", "Estado Ecuatoriano" ], "qu": [ "Ecuador", "Ikwayur Runaq Imayka", "ECU", "EC", "ecu", "ec" ] }'},{feature_id:"5836889",description:"state",worldview:"all",iso_3166_1:"GR",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GRC",wikidata_id:"Q41",centroid:"[21.7609,39.1182]",bounds:"[19.3728,34.8006,29.6457,41.7489]",area_sqkm:"170162",region:"Europe",subregion:"Southern Europe",name:"Ελλάδα",name_en:"Greece",disputed:"FALSE",color_group:"2",names:'{ "el": [ "Ελλάδα", "Ελλάς", "Ελληνική Δημοκρατία", "Δημοκρατία της Ελλάδας", "Δημοκρατία της Ελλάδος", "Γραικία" ], "en": [ "Greece", "Hellenic Republic", "Hellas", "gr", "🇬🇷", "Greek Republic", "GRE" ] }'},{feature_id:"8065140",description:"state",worldview:"all",iso_3166_1:"KG",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"KGZ",wikidata_id:"Q813",centroid:"[75.0168,41.2558]",bounds:"[69.26390000000001,39.1824,80.2504,43.2655]",area_sqkm:"265841",region:"Asia",subregion:"Central Asia",name:"Кыргызстан",name_en:"Kyrgyzstan",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Kyrgyzstan", "Kyrgyz Republic", "kg", "Kirgizia", "🇰🇬", "KGZ" ], "ky": [ "Кыргызстан", "Кыргыз Республикасы, Kyrgyz Respublikasy" ], "ru": [ "Киргизия", "Киргизская Республика", "Кыргызская Республика", "Кыргызстан" ] }'},{feature_id:"9441528",description:"dependent territory",worldview:"all",iso_3166_1:"YT",sovereign_iso_3166_1:"FR",iso_3166_1_alpha_3:"MYT",wikidata_id:"Q17063",centroid:"[45.1494,-12.8252]",bounds:"[45.0182,-13.0058,45.2999,-12.636]",area_sqkm:"401",region:"Africa",subregion:"Sub-Saharan Africa",name:"Mayotte",name_en:"Mayotte",disputed:"FALSE",color_group:"7",names:'{ "en": [ "Mayotte", "Department of Mayotte", "yt", "🇾🇹" ], "fr": [ "Mayotte", "976" ] }'},{feature_id:"7737469",description:"state",worldview:"all",iso_3166_1:"KZ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"KAZ",wikidata_id:"Q232",centroid:"[66.572,48.5488]",bounds:"[46.4929,40.5688,87.3147,55.4454]",area_sqkm:"4064264",region:"Asia",subregion:"Central Asia",name:"Қазақстан",name_en:"Kazakhstan",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Kazakhstan", "Republic of Kazakhstan", "kz", "Qazaqstan", "🇰🇿", "KAZ" ], "kk": [ "Қазақстан", "Қазақстан Республикасы", "Қазақстан Республикасы \'" ], "ru": [ "Казахстан", "Республика Казахстан", "РК" ] }'},{feature_id:"5574713",description:"state",worldview:"all",iso_3166_1:"DE",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"DEU",wikidata_id:"Q183",centroid:"[10.5807,51.3283]",bounds:"[5.8663,47.2702,15.0418,55.0568]",area_sqkm:"567005",region:"Europe",subregion:"Western Europe",name:"Deutschland",name_en:"Germany",disputed:"FALSE",color_group:"2",names:'{ "de": [ "Deutschland", "BR Deutschland", "BRD", "Bundesrepublik Deutschland" ], "en": [ "Germany", "FRG", "BRD", "Bundesrepublik Deutschland", "Federal Republic of Germany", "de", "🇩🇪", "Deutschland", "GER" ], "fr": [ "Allemagne", "RFA", "République fédérale allemande", "République fédérale d\'Allemagne" ], "bar": [ "Deitschland" ], "nds": [ "Düütschland" ] }'},{feature_id:"1315316",description:"disputed area",worldview:"US",iso_3166_1:"D0CNIN6",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[78.6587,32.0285]",bounds:"[78.4284,31.7806,78.7796,32.2759]",area_sqkm:"494",region:"",subregion:"",name:"Kauirik disputed area",name_en:"Kauirik disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"1708532",description:"disputed area",worldview:"US",iso_3166_1:"D0KESS1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[35.3474,5.0562]",bounds:"[34.4136,4.6246,35.9353,5.5039]",area_sqkm:"6286",region:"",subregion:"",name:"Ilemi Triangle",name_en:"Ilemi Triangle",disputed:"TRUE",color_group:"",names:""},{feature_id:"5050438",description:"state",worldview:"all",iso_3166_1:"FI",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"FIN",wikidata_id:"Q33",centroid:"[27.5283,65.4504]",bounds:"[20.5471,59.6761,31.5879,70.0924]",area_sqkm:"760676",region:"Europe",subregion:"Northern Europe",name:"Suomi",name_en:"Finland",disputed:"FALSE",color_group:"4",names:'{ "de": [ "Finnland", "Finland", "Suomi", "Republik Finnland", "Suomen tasavalta", "Republiken Finland" ], "en": [ "Finland", "Republic of Finland", "Finlande", "Finlandia", "Finnland", "Finnia", "Land of Thousand Lakes", "fi", "Suomi", "Suomen tasavalta", "Republiken Finland", "🇫🇮", "FIN" ], "fi": [ "Suomi", "Suomen tasavalta", "Finland", "Republiken Finland" ], "sv": [ "Finland", "Republiken Finland", "Suomi", "Suomen tasavalta" ] }'},{feature_id:"1774068",description:"disputed area",worldview:"IN",iso_3166_1:"D0KESS2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[35.1872,4.8288]",bounds:"[34.3988,4.6172,35.597,5.0334]",area_sqkm:"3330",region:"",subregion:"",name:"Ilemi Triangle",name_en:"Ilemi Triangle",disputed:"TRUE",color_group:"",names:""},{feature_id:"5967950",description:"state",worldview:"all",iso_3166_1:"GD",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GRD",wikidata_id:"Q769",centroid:"[-61.6867,12.111]",bounds:"[-61.8026,11.9847,-61.3783,12.5402]",area_sqkm:"365",region:"Americas",subregion:"Latin America and the Caribbean",name:"Grenada",name_en:"Grenada",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Grenada", "gd", "🇬🇩", "GRN" ] }'},{feature_id:"65998863",description:"state",worldview:"all",iso_3166_1:"AX",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ALA",wikidata_id:"Q5689",centroid:"[19.9087,60.1993]",bounds:"[19.2633,59.7333,21.3303,60.6657]",area_sqkm:"3291",region:"Europe",subregion:"Northern Europe",name:"Landskapet Åland",name_en:"Åland Islands",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Åland Islands", "Åland", "Ahvenanmaa", "Aaland", "Aaland Islands", "Åland region", "ax", "Aland", "🇦🇽", "Aland Islands" ], "sv": [ "Åland", "Ahvenanmaa", "Landskapet Åland" ] }'},{feature_id:"9638027",description:"state",worldview:"all",iso_3166_1:"MD",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MDA",wikidata_id:"Q217",centroid:"[28.8269,47.0019]",bounds:"[26.6197,45.4689,30.1628,48.4923]",area_sqkm:"49957",region:"Europe",subregion:"Eastern Europe",name:"Moldova",name_en:"Moldova",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Moldova", "md", "Republic of Moldova", "Moldavia", "Republica Moldova", "🇲🇩", "MDA" ], "ro": [ "Republica Moldova", "R. Moldova", "Moldova", "RM", "Rep. Moldova" ], "uk": [ "Молдова" ] }'},{feature_id:"9310359",description:"state",worldview:"all",iso_3166_1:"MR",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MRT",wikidata_id:"Q1025",centroid:"[-11.4598,21.1503]",bounds:"[-17.0698,14.7202,-4.83,27.3129]",area_sqkm:"1121076",region:"Africa",subregion:"Sub-Saharan Africa",name:"موريتانيا",name_en:"Mauritania",disputed:"FALSE",color_group:"3",names:'{ "ar": [ "موريتانيا", "الجمهورية الإسلامية الموريتانية" ], "en": [ "Mauritania", "Islamic Republic of Mauritania", "Muritanya", "Agawej", "Gànnaar", "Murutaane", "Moritani", "mr", "🇲🇷", "Gannaar", "MTN" ], "fr": [ "Mauritanie", "République islamique de Mauritanie" ] }'},{feature_id:"7540850",description:"state",worldview:"IN",iso_3166_1:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"JPN",wikidata_id:"Q17",centroid:"[139.8855,37.6006]",bounds:"[122.9338,24.0457,145.8175,45.523]",area_sqkm:"473653",region:"Asia",subregion:"Eastern Asia",name:"日本",name_en:"Japan",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Japan", "State of Japan", "Land of the Rising Sun", "Nihon", "Nippon", "JP", "Nippon-koku", "Nihon-koku", "JA", "JPN", "🇯🇵", "jp", "JAP", "🗾" ], "ja": [ "日本", "日本国", "にほん", "にほんこく", "にっぽん", "にっぽんこく" ] }'},{feature_id:"11538606",description:"state",worldview:"all",iso_3166_1:"PE",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PER",wikidata_id:"Q419",centroid:"[-75.8061,-9.3155]",bounds:"[-81.32850000000001,-18.3517,-68.6521,-0.0389]",area_sqkm:"1324621",region:"Americas",subregion:"Latin America and the Caribbean",name:"Perú",name_en:"Peru",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Peru", "pe", "Republic of Peru", "República del Perú", "🇵🇪", "Republica del Peru" ], "es": [ "Perú", "República del Perú", "Peru", "Republica del Peru", "pe" ], "qu": [ "Piruw" ] }'},{feature_id:"69635",description:"state",worldview:"all",iso_3166_1:"AF",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"AFG",wikidata_id:"Q889",centroid:"[65.7792,34.0569]",bounds:"[60.4734,29.3778,74.8857,38.4911]",area_sqkm:"774224",region:"Asia",subregion:"Southern Asia",name:"افغانستان",name_en:"Afghanistan",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Afghanistan", "af", "🇦🇫", "Islamic Republic of Afghanistan", "AFG" ], "fa": [ "افغانستان" ], "ps": [ "افغانستان" ] }'},{feature_id:"1839121",description:"state",worldview:"all",iso_3166_1:"BA",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BIH",wikidata_id:"Q225",centroid:"[17.9371,43.9344]",bounds:"[15.7212,42.5605,19.6235,45.2764]",area_sqkm:"71632",region:"Europe",subregion:"Southern Europe",name:"Bosna i Hercegovina",name_en:"Bosnia and Herzegovina",disputed:"FALSE",color_group:"1",names:'{ "bs": [ "Bosna i Hercegovina", "BiH", "BH", "Bosna" ], "en": [ "Bosnia and Herzegovina", "Bosnia-Herzegovina", "Bosnia", "BiH", "Bosnia & Herzegovina", "B&H", "🇧🇦", "ba", "BIH" ], "hr": [ "Bosna i Hercegovina", "BiH", "BH", "Bosna" ] }'},{feature_id:"3412007",description:"dependent territory",worldview:"all",iso_3166_1:"CC",sovereign_iso_3166_1:"AU",iso_3166_1_alpha_3:"CCK",wikidata_id:"Q36004",centroid:"[96.83029999999999,-12.171]",bounds:"[96.8168,-12.2092,96.9295,-11.8146]",area_sqkm:"14",region:"Oceania",subregion:"Australia and New Zealand",name:"Cocos (Keeling) Islands",name_en:"Cocos (Keeling) Islands",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Cocos Islands", "Cocos Islands", "Keeling Islands", "Territory of the Cocos (Keeling) Islands", "cc", "🇨🇨" ], "ms": [ "Kepulauan Cocos" ] }'},{feature_id:"1314852",description:"state",worldview:"all",iso_3166_1:"BY",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BLR",wikidata_id:"Q184",centroid:"[27.883,53.7747]",bounds:"[23.1783,51.2322,32.7763,56.1721]",area_sqkm:"347178",region:"Europe",subregion:"Eastern Europe",name:"Беларусь",name_en:"Belarus",disputed:"FALSE",color_group:"1",names:'{ "be": [ "Беларусь", "Рэспубліка Беларусь", "Рэспу́бліка Белару́сь" ], "en": [ "Belarus", "🇧🇾", "White Russia", "White Ruthenia", "Republic of Belarus", "by", "Byeloruss", "BLR", "Bielorussia", "Belorussia", "Byelorussia" ], "ru": [ "Белоруссия", "Беларусь", "Белая Русь", "Республика Беларусь", "РБ" ] }'},{feature_id:"1774068",description:"disputed area",worldview:"JP",iso_3166_1:"D0KESS2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[35.1872,4.8288]",bounds:"[34.3988,4.6172,35.597,5.0334]",area_sqkm:"3330",region:"",subregion:"",name:"Ilemi Triangle",name_en:"Ilemi Triangle",disputed:"TRUE",color_group:"",names:""},{feature_id:"987636",description:"disputed area",worldview:"JP",iso_3166_1:"D0CNIN1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[76.45740000000001,35.9527]",bounds:"[75.932,35.462,77.5187,36.4396]",area_sqkm:"5941",region:"",subregion:"",name:"Trans-Karakoram Tract",name_en:"Trans-Karakoram Tract",disputed:"TRUE",color_group:"",names:""},{feature_id:"12062909",description:"state",worldview:"all",iso_3166_1:"RO",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ROU",wikidata_id:"Q218",centroid:"[24.2311,45.9908]",bounds:"[20.262,43.6188,29.7153,48.2654]",area_sqkm:"341465",region:"Europe",subregion:"Eastern Europe",name:"România",name_en:"Romania",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Romania", "Roumania", "Rumania", "România", "ro", "🇷🇴" ], "fr": [ "Roumanie" ], "ro": [ "România", "Romania", "ro", "🇷🇴" ] }'},{feature_id:"791028",description:"disputed area",worldview:"JP",iso_3166_1:"D0CNIN9",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[80.02800000000001,30.7827]",bounds:"[79.69880000000001,30.5589,80.24930000000001,31.0058]",area_sqkm:"942",region:"",subregion:"",name:"Lapthal-Bara Hoti disputed area",name_en:"Lapthal-Bara Hoti disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"14684378",description:"state",worldview:"all",iso_3166_1:"TH",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"THA",wikidata_id:"Q869",centroid:"[101.6544,13.1506]",bounds:"[97.34350000000001,5.612,105.6367,20.4644]",area_sqkm:"541799",region:"Asia",subregion:"South-eastern Asia",name:"ประเทศไทย",name_en:"Thailand",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Thailand", "Kingdom of Thailand", "th", "Siam", "🇹🇭", "Land of Smiles", "THA" ], "th": [ "ประเทศไทย", "Thailand", "ไทยแลนด์", "ราชอาณาจักรไทย", "Kingdom of Thailand", "เมืองไทย" ] }'},{feature_id:"7934197",description:"state",worldview:"IN",iso_3166_1:"XK",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"XKS",wikidata_id:"Q1246",centroid:"[20.9131,42.5637]",bounds:"[20.0164,41.8511,21.7907,43.2681]",area_sqkm:"14823",region:"Europe",subregion:"Southern Europe",name:"Kosovë - Косово",name_en:"Kosovo",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Kosovo", "Republic of Kosovo", "XK", "KOS", "XKX", "KV", "🇽🇰" ], "sq": [ "Kosovë", "Republika e Kosovës", "RKS", "KS", "Kosova" ] }'},{feature_id:"9244822",description:"dependent territory",worldview:"all",iso_3166_1:"MQ",sovereign_iso_3166_1:"FR",iso_3166_1_alpha_3:"MTQ",wikidata_id:"Q17054",centroid:"[-61.0154,14.6366]",bounds:"[-61.2288,14.3887,-60.8101,14.8782]",area_sqkm:"1147",region:"Americas",subregion:"Latin America and the Caribbean",name:"Martinique",name_en:"Martinique",disputed:"FALSE",color_group:"7",names:'{ "en": [ "Martinique", "🇲🇶", "MQ" ], "fr": [ "Martinique", "972" ] }'},{feature_id:"6164571",description:"state",worldview:"all",iso_3166_1:"GT",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GTM",wikidata_id:"Q774",centroid:"[-90.29559999999999,15.7886]",bounds:"[-92.22490000000001,13.7402,-88.2325,17.8166]",area_sqkm:"113759",region:"Americas",subregion:"Latin America and the Caribbean",name:"Guatemala",name_en:"Guatemala",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Guatemala", "gt", "🇬🇹", "Republic of Guatemala", "GUA" ], "es": [ "Guatemala", "República de Guatemala", "Republica de Guatemala" ] }'},{feature_id:"7934197",description:"state",worldview:"JP",iso_3166_1:"XK",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"XKS",wikidata_id:"Q1246",centroid:"[20.9131,42.5637]",bounds:"[20.0164,41.8511,21.7907,43.2681]",area_sqkm:"14823",region:"Europe",subregion:"Southern Europe",name:"Kosovë - Косово",name_en:"Kosovo",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Kosovo", "Republic of Kosovo", "XK", "KOS", "XKX", "KV", "🇽🇰" ], "sq": [ "Kosovë", "Republika e Kosovës", "RKS", "KS", "Kosova" ] }'},{feature_id:"1642529",description:"state",worldview:"US",iso_3166_1:"BT",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BTN",wikidata_id:"Q917",centroid:"[90.3415,27.473]",bounds:"[88.7683,26.6948,92.124,28.2458]",area_sqkm:"43846",region:"Asia",subregion:"Southern Asia",name:"འབྲུགཡུལ་",name_en:"Bhutan",disputed:"FALSE",color_group:"5",names:'{ "dz": [ "འབྲུག་ཡུལ་", "འབྲུགཡུལ་་" ], "en": [ "Bhutan", "Kingdom of Bhutan", "bt", "🇧🇹", "BHU" ], "ne": [ "भुटान" ] }'},{feature_id:"3739698",description:"state",worldview:"all",iso_3166_1:"CR",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CRI",wikidata_id:"Q800",centroid:"[-83.6675,9.6333]",bounds:"[-87.102,5.4991,-82.5514,11.2197]",area_sqkm:"52305",region:"Americas",subregion:"Latin America and the Caribbean",name:"Costa Rica",name_en:"Costa Rica",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Costa Rica", "Republic of Costa Rica", "🇨🇷", "cr", "CRI", "CRC" ], "es": [ "Costa Rica", "CR", "República de Costa Rica", "CRC" ] }'},{feature_id:"7540850",description:"state",worldview:"JP",iso_3166_1:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"JPN",wikidata_id:"Q17",centroid:"[139.8855,37.6006]",bounds:"[122.9338,24.0457,145.8175,45.523]",area_sqkm:"473653",region:"Asia",subregion:"Eastern Asia",name:"日本",name_en:"Japan",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Japan", "State of Japan", "Land of the Rising Sun", "Nihon", "Nippon", "JP", "Nippon-koku", "Nihon-koku", "JA", "JPN", "🇯🇵", "jp", "JAP", "🗾" ], "ja": [ "日本", "日本国", "にほん", "にほんこく", "にっぽん", "にっぽんこく" ] }'},{feature_id:"4001848",description:"state",worldview:"all",iso_3166_1:"CZ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CZE",wikidata_id:"Q213",centroid:"[15.5271,49.8197]",bounds:"[12.0906,48.552,18.8592,51.0557]",area_sqkm:"121734",region:"Europe",subregion:"Eastern Europe",name:"Česko",name_en:"Czechia",disputed:"FALSE",color_group:"1",names:'{ "cs": [ "Česko", "ČR", "cz", "cze", "Česká republika", "Czechia" ], "de": [ "Tschechien", "Tschechische Republik" ], "en": [ "Czech Republic", "CZR", "cz", "Česko", "Česká republika", "ČR", "🇨🇿", "cze", "CZE", "Czechia" ], "sk": [ "Česko", "Česká republika" ] }'},{feature_id:"4263996",description:"state",worldview:"all",iso_3166_1:"DM",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"DMA",wikidata_id:"Q784",centroid:"[-61.3411,15.4238]",bounds:"[-61.4801,15.2074,-61.2402,15.6399]",area_sqkm:"786",region:"Americas",subregion:"Latin America and the Caribbean",name:"Dominica",name_en:"Dominica",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Dominica", "Commonwealth of Dominica", "The Commonwealth of Dominica", "🇩🇲", "dm", "DOM", "DMA" ] }'},{feature_id:"5312728",description:"dependent territory",worldview:"all",iso_3166_1:"TF",sovereign_iso_3166_1:"FR",iso_3166_1_alpha_3:"ATF",wikidata_id:"Q129003",centroid:"[70.21769999999999,-49.1974]",bounds:"[40.3259,-50.0213,77.59569999999999,-11.5678]",area_sqkm:"11927",region:"Africa",subregion:"Sub-Saharan Africa",name:"Terres australes et antarctiques françaises",name_en:"French Southern and Antarctic Lands",disputed:"FALSE",color_group:"7",names:'{ "en": [ "French Southern and Antarctic Lands", "tf", "🇹🇫", "French Southern Territories" ], "fr": [ "Terres australes et antarctiques françaises", "TAAF", "Terres Australes Françaises", "Terres australes et antarctiques francaises", "984" ] }'},{feature_id:"15405287",description:"state",worldview:"all",iso_3166_1:"UG",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"UGA",wikidata_id:"Q1036",centroid:"[32.7123,1.3729]",bounds:"[29.5607,-1.4873,35.0197,4.2266]",area_sqkm:"243407",region:"Africa",subregion:"Sub-Saharan Africa",name:"Uganda",name_en:"Uganda",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Uganda", "Republic of Uganda", "ug", "🇺🇬", "UGA" ], "lg": [ "Yuganda" ], "sw": [ "Uganda", "Jamhuri ya Uganda" ] }'},{feature_id:"15470822",description:"state",worldview:"all",iso_3166_1:"UA",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"UKR",wikidata_id:"Q212",centroid:"[31.0081,48.5409]",bounds:"[22.1376,44.3866,40.2256,52.3794]",area_sqkm:"922375",region:"Europe",subregion:"Eastern Europe",name:"Україна",name_en:"Ukraine",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Ukraine", "UA", "UKR", "ua", "Ukrainia", "🇺🇦" ], "ru": [ "Украина" ], "uk": [ "Україна", "Вкраїна", "🇺🇦", "ua" ] }'},{feature_id:"7671921",description:"state",worldview:"all",iso_3166_1:"JO",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"JOR",wikidata_id:"Q810",centroid:"[36.3091,31.3051]",bounds:"[34.9581,29.1896,39.3001,33.3746]",area_sqkm:"104752",region:"Asia",subregion:"Western Asia",name:"الأردن",name_en:"Jordan",disputed:"FALSE",color_group:"5",names:'{ "ar": [ "الأردن", "المملكة الأردنيّة الهاشميّة", "المملكة الأردنية الهاشمية" ], "en": [ "Jordan", "Hashemite Kingdom of Jordan", "JO", "JOR", "jo", "Kingdom of Jordan", "🇯🇴" ] }'},{feature_id:"14880988",description:"dependent territory",worldview:"all",iso_3166_1:"TK",sovereign_iso_3166_1:"NZ",iso_3166_1_alpha_3:"TKL",wikidata_id:"Q36823",centroid:"[-171.7801,-9.175700000000001]",bounds:"[-172.5208,-9.444000000000001,-171.1814,-8.532]",area_sqkm:"15",region:"Oceania",subregion:"Polynesia",name:"Tokelau",name_en:"Tokelau",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Tokelau", "tk", "🇹🇰" ] }'},{feature_id:"12718324",description:"state",worldview:"all",iso_3166_1:"WS",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"WSM",wikidata_id:"Q683",centroid:"[-172.439,-13.6221]",bounds:"[-172.8041,-14.0772,-171.3978,-13.4398]",area_sqkm:"2956",region:"Oceania",subregion:"Polynesia",name:"Samoa",name_en:"Samoa",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Samoa", "Western Samoa", "Independent State of Samoa", "ws", "🇼🇸" ], "sm": [ "Sāmoa" ] }'},{feature_id:"987636",description:"disputed area",worldview:"US",iso_3166_1:"D0CNIN1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[76.45740000000001,35.9527]",bounds:"[75.932,35.462,77.5187,36.4396]",area_sqkm:"5941",region:"",subregion:"",name:"Trans-Karakoram Tract",name_en:"Trans-Karakoram Tract",disputed:"TRUE",color_group:"",names:""},{feature_id:"659956",description:"disputed area",worldview:"all",iso_3166_1:"D0JPKR1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[131.8648,37.242]",bounds:"[131.8614,37.238,131.8728,37.2477]",area_sqkm:"0",region:"",subregion:"",name:"Liancourt Rocks",name_en:"Liancourt Rocks",disputed:"TRUE",color_group:"",names:""},{feature_id:"2691110",description:"state",worldview:"all",iso_3166_1:"CA",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CAN",wikidata_id:"Q16",centroid:"[-116.9186,60.2273]",bounds:"[-141.016,41.6814,-52.6194,83.13679999999999]",area_sqkm:"25442850",region:"Americas",subregion:"Northern America",name:"Canada",name_en:"Canada",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Canada", "Dominion of Canada", "British North America", "CAN", "CA", "ca", "CDN", "🇨🇦" ], "fr": [ "Canada", "CA" ] }'},{feature_id:"1118708",description:"disputed area",worldview:"US",iso_3166_1:"D0CNIN3",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[79.3519,32.8792]",bounds:"[79.1397,32.5191,79.5613,33.2379]",area_sqkm:"1768",region:"",subregion:"",name:"Demchok disputed area",name_en:"Demchok disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"3870771",description:"state",worldview:"all",iso_3166_1:"CU",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CUB",wikidata_id:"Q241",centroid:"[-77.8291,21.5254]",bounds:"[-84.9521,19.8262,-74.1314,23.2767]",area_sqkm:"120464",region:"Americas",subregion:"Latin America and the Caribbean",name:"Cuba",name_en:"Cuba",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Cuba", "Republic of Cuba", "cu", "🇨🇺", "CUB" ], "es": [ "Cuba", "República de Cuba", "Republica de Cuba" ] }'},{feature_id:"11473082",description:"state",worldview:"all",iso_3166_1:"PY",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PRY",wikidata_id:"Q733",centroid:"[-58.4145,-23.4993]",bounds:"[-62.6415,-27.5759,-54.2591,-19.2928]",area_sqkm:"436149",region:"Americas",subregion:"Latin America and the Caribbean",name:"Paraguay",name_en:"Paraguay",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Paraguay", "Republic of Paraguay", "py", "🇵🇾", "Heart of South America" ], "es": [ "Paraguay", "República del Paraguay", "Republica del Paraguay" ], "gn": [ "Paraguái" ] }'},{feature_id:"1052704",description:"state",worldview:"all",iso_3166_1:"BS",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BHS",wikidata_id:"Q778",centroid:"[-78.0455,24.7032]",bounds:"[-79.30549999999999,20.912,-72.7118,27.2629]",area_sqkm:"14194",region:"Americas",subregion:"Latin America and the Caribbean",name:"Bahamas",name_en:"Bahamas",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Bahamas", "Commonwealth of the Bahamas", "bs", "🇧🇸", "The Bahamas", "Bahama Islands" ] }'},{feature_id:"13570254",description:"state",worldview:"all",iso_3166_1:"SO",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SOM",wikidata_id:"Q1045",centroid:"[46.8166,5.1742]",bounds:"[40.9924,-1.6627,51.4156,11.9893]",area_sqkm:"643601",region:"Africa",subregion:"Sub-Saharan Africa",name:"الصومال",name_en:"Somalia",disputed:"FALSE",color_group:"2",names:'{ "ar": [ "الصومال", "صومال", "جمهورية الصومال", "جمهورية الصومال الديموقراطية" ], "en": [ "Somalia", "Federal Republic of Somalia", "aṣ-Ṣūmāl", "Soomaaliya", "so", "🇸🇴", "SOM" ], "so": [ "Soomaaliya", "Soomaaliyeey toosoo" ] }'},{feature_id:"4657219",description:"state",worldview:"all",iso_3166_1:"ER",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ERI",wikidata_id:"Q986",centroid:"[38.0893,15.2]",bounds:"[36.4282,12.3629,43.1588,17.9992]",area_sqkm:"126770",region:"Africa",subregion:"Sub-Saharan Africa",name:"Eritrea - إريتريا",name_en:"Eritrea",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Eritrea", "State of Eritrea", "Ertrā", "Iritriyā", "er", "🇪🇷", "ERI", "IRI" ], "ti": [ "ኤርትራ", "ሃገረ ኤርትራ", "ኤርትራ ኤርትራ ኤርትራ" ] }'},{feature_id:"15601741",description:"state",worldview:"all",iso_3166_1:"GB",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GBR",wikidata_id:"Q145",centroid:"[-2.1838,54.5475]",bounds:"[-8.6501,49.8668,1.763,60.8608]",area_sqkm:"415318",region:"Europe",subregion:"Northern Europe",name:"United Kingdom",name_en:"United Kingdom",disputed:"FALSE",color_group:"6",names:'{ "en": [ "United Kingdom", "🇬🇧", "UK", "United Kingdom of Great Britain and Northern Ireland", "U.K.", "GBR" ], "fr": [ "Royaume-Uni", "UK", "Royaume-Uni de Grande-Bretagne et d’Irlande du Nord", "Royaume Uni", "GB", "GBR" ] }'},{feature_id:"725492",description:"disputed area",worldview:"IN",iso_3166_1:"D0CNJPTW1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[123.4764,25.743]",bounds:"[123.4579,25.7204,124.5603,25.9289]",area_sqkm:"6",region:"",subregion:"",name:"Senkaku Islands",name_en:"Senkaku Islands",disputed:"TRUE",color_group:"",names:""},{feature_id:"2101354",description:"dependent territory",worldview:"all",iso_3166_1:"IO",sovereign_iso_3166_1:"UK",iso_3166_1_alpha_3:"IOT",wikidata_id:"Q43448",centroid:"[72.4716,-7.3392]",bounds:"[71.23739999999999,-7.4446,72.4957,-5.236]",area_sqkm:"65",region:"Africa",subregion:"Sub-Saharan Africa",name:"British Indian Ocean Territory",name_en:"British Indian Ocean Territory",disputed:"FALSE",color_group:"6",names:'{ "en": [ "British Indian Ocean Territory", "io", "🇮🇴" ] }'},{feature_id:"8196231",description:"state",worldview:"all",iso_3166_1:"LV",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"LVA",wikidata_id:"Q211",centroid:"[24.4397,56.9003]",bounds:"[20.9706,55.6744,28.2422,58.0856]",area_sqkm:"117706",region:"Europe",subregion:"Northern Europe",name:"Latvija",name_en:"Latvia",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Latvia", "Republic of Latvia", "Latvian Republic", "lv", "Latvija", "🇱🇻", "LAT", "LVA" ], "lv": [ "Latvija", "Latvijas Republika", "LAT", "LVA" ], "ru": [ "Латвия", "Latvija", "Латвийская Республика", "Республика Латвия" ] }'},{feature_id:"15339747",description:"state",worldview:"all",iso_3166_1:"TV",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TUV",wikidata_id:"Q672",centroid:"[178.6758,-7.4786]",bounds:"[176.0588,-10.7919,179.4781,-5.6425]",area_sqkm:"38",region:"Oceania",subregion:"Polynesia",name:"Tuvalu",name_en:"Tuvalu",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Tuvalu", "Ellice Islands", "tv", "🇹🇻", "TUV" ] }'},{feature_id:"1642996",description:"disputed area",worldview:"IN",iso_3166_1:"D0GFSR1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[-54.1343,2.7239]",bounds:"[-54.6024,2.1443,-53.9703,3.3029]",area_sqkm:"3444",region:"",subregion:"",name:"French Guiana–Suriname disputed area",name_en:"French Guiana–Suriname disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"135668",description:"disputed area",worldview:"all",iso_3166_1:"D0SDSS1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[28.4279,9.716799999999999]",bounds:"[27.833,9.3348,29.0004,10.1667]",area_sqkm:"10928",region:"",subregion:"",name:"Abyei",name_en:"Abyei",disputed:"TRUE",color_group:"",names:""},{feature_id:"2363892",description:"disputed area",worldview:"IN",iso_3166_1:"D0CNTWVN1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[111.7015,16.2212]",bounds:"[111.1905,15.7749,112.7456,17.1141]",area_sqkm:"489",region:"",subregion:"",name:"Paracel Islands",name_en:"Paracel Islands",disputed:"TRUE",color_group:"",names:""},{feature_id:"201204",description:"disputed area",worldview:"all",iso_3166_1:"D0EGSD2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[33.6971,21.8656]",bounds:"[33.1724,21.7249,34.0814,22.0065]",area_sqkm:"2216",region:"",subregion:"",name:"Bir Tawil",name_en:"Bir Tawil",disputed:"TRUE",color_group:"",names:""},{feature_id:"9572425",description:"state",worldview:"all",iso_3166_1:"FM",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"FSM",wikidata_id:"Q702",centroid:"[158.2402,6.8852]",bounds:"[137.4253,1.0253,163.0356,10.0906]",area_sqkm:"785",region:"Oceania",subregion:"Micronesia",name:"Federated States of Micronesia",name_en:"Federated States of Micronesia",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Federated States of Micronesia", "Micronesia", "FSM", "fm", "Fed. Sts. Micronesia", "Fed. Sts. of Micronesia", "Federated States of Micronesia, FSM", "🇫🇲" ] }'},{feature_id:"13832400",description:"state",worldview:"CN",iso_3166_1:"SS",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SSD",wikidata_id:"Q958",centroid:"[29.1116,7.8795]",bounds:"[24.1507,3.4803,35.9353,12.2322]",area_sqkm:"639959",region:"Africa",subregion:"Sub-Saharan Africa",name:"South Sudan",name_en:"South Sudan",disputed:"FALSE",color_group:"1",names:'{ "ar": [ "جنوب السودان", "جمهورية جنوب السودان", "قائمة جزر جنوب السودان", "بانتيو (مدينة)", "يامبيو (مدينة)", "رمبيك (مدينة)", "أويل (مدينة)", "اويل", "جوبا (مدينة)", "ملكال (مدينة)", "كودوك", "فاشودا", "فاشودة", "ياي", "عاصمة جنوب السودان" ], "en": [ "South Sudan", "Republic of South Sudan", "Southern Sudan", "ss", "🇸🇸", "SSD" ] }'},{feature_id:"8130686",description:"state",worldview:"all",iso_3166_1:"LA",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"LAO",wikidata_id:"Q819",centroid:"[102.1592,18.2605]",bounds:"[100.0818,13.9098,107.635,22.5049]",area_sqkm:"244136",region:"Asia",subregion:"South-eastern Asia",name:"ປະເທດລາວ",name_en:"Laos",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Laos", "Lao People\'s Democratic Republic", "la", "Lao PDR", "🇱🇦", "LAO" ], "lo": [ "ປະເທດລາວ", "ສາທາລະນະລັດ ປະຊາທິປະໄຕ ປະຊາຊົນລາວ" ] }'},{feature_id:"4788293",description:"state",worldview:"all",iso_3166_1:"ET",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ETH",wikidata_id:"Q115",centroid:"[38.9667,9.196999999999999]",bounds:"[32.9975,3.3961,47.9878,14.8942]",area_sqkm:"1150612",region:"Africa",subregion:"Sub-Saharan Africa",name:"Ethiopia",name_en:"Ethiopia",disputed:"FALSE",color_group:"4",names:'{ "am": [ "ኢትዮጵያ" ], "en": [ "Ethiopia", "Federal Democratic Republic of Ethiopia", "et", "🇪🇹", "ETH" ], "om": [ "Itoophiyaa" ] }'},{feature_id:"1839604",description:"disputed area",worldview:"JP",iso_3166_1:"D0KESS3",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[35.6763,4.6062]",bounds:"[35.597,4.5877,35.7068,4.6247]",area_sqkm:"24",region:"",subregion:"",name:"Ilemi Triangle",name_en:"Ilemi Triangle",disputed:"TRUE",color_group:"",names:""},{feature_id:"1053172",description:"disputed area",worldview:"JP",iso_3166_1:"D0CNIN2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[79.1217,34.697]",bounds:"[77.9097,33.3858,80.4217,35.9879]",area_sqkm:"37463",region:"",subregion:"",name:"Aksai Chin disputed area",name_en:"Aksai Chin disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"1839604",description:"disputed area",worldview:"US",iso_3166_1:"D0KESS3",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[35.6763,4.6062]",bounds:"[35.597,4.5877,35.7068,4.6247]",area_sqkm:"24",region:"",subregion:"",name:"Ilemi Triangle",name_en:"Ilemi Triangle",disputed:"TRUE",color_group:"",names:""},{feature_id:"2167284",description:"disputed area",worldview:"all",iso_3166_1:"D0AEIR2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[55.3051,26.2649]",bounds:"[55.2855,26.2475,55.3228,26.2821]",area_sqkm:"12",region:"",subregion:"",name:"Greater Tunb Island",name_en:"Greater Tunb Island",disputed:"TRUE",color_group:"",names:""},{feature_id:"14815449",description:"state",worldview:"all",iso_3166_1:"TG",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TGO",wikidata_id:"Q945",centroid:"[1.0401,8.6357]",bounds:"[-0.1438,6.1126,1.8091,11.1373]",area_sqkm:"57966",region:"Africa",subregion:"Sub-Saharan Africa",name:"Togo",name_en:"Togo",disputed:"FALSE",color_group:"3",names:'{ "ee": [ "Togo" ], "en": [ "Togo", "Togolese Republic", "République Togolaise", "tg", "🇹🇬", "Republique Togolaise", "TOG" ], "fr": [ "Togo", "République togolaise" ] }'},{feature_id:"9900184",description:"dependent territory",worldview:"all",iso_3166_1:"MS",sovereign_iso_3166_1:"UK",iso_3166_1_alpha_3:"MSR",wikidata_id:"Q13353",centroid:"[-62.1928,16.7492]",bounds:"[-62.2417,16.6747,-62.1446,16.8238]",area_sqkm:"106",region:"Americas",subregion:"Latin America and the Caribbean",name:"Montserrat",name_en:"Montserrat",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Montserrat", "ms", "🇲🇸" ] }'},{feature_id:"1970676",description:"disputed area",worldview:"US",iso_3166_1:"D0ILPS1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[35.2419,31.7959]",bounds:"[35.1507,31.7092,35.2654,31.8829]",area_sqkm:"83",region:"",subregion:"",name:"East Jerusalem",name_en:"East Jerusalem",disputed:"TRUE",color_group:"",names:""},{feature_id:"1839604",description:"disputed area",worldview:"IN",iso_3166_1:"D0KESS3",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[35.6763,4.6062]",bounds:"[35.597,4.5877,35.7068,4.6247]",area_sqkm:"24",region:"",subregion:"",name:"Ilemi Triangle",name_en:"Ilemi Triangle",disputed:"TRUE",color_group:"",names:""},{feature_id:"7802995",description:"state",worldview:"CN",iso_3166_1:"KE",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"KEN",wikidata_id:"Q114",centroid:"[37.4758,-0.0219]",bounds:"[33.9216,-4.6913,41.9109,4.6327]",area_sqkm:"587115",region:"Africa",subregion:"Sub-Saharan Africa",name:"Kenya",name_en:"Kenya",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Kenya", "Republic of Kenya", "KE", "KEN", "ke", "🇰🇪" ], "ki": [ "Kenya" ], "sw": [ "Kenya", "Jamhuri ya Kenya" ] }'},{feature_id:"6885481",description:"state",worldview:"US",iso_3166_1:"IN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"IND",wikidata_id:"Q668",centroid:"[79.5556,22.5605]",bounds:"[68.17449999999999,6.756,97.3954,35.6733]",area_sqkm:"3484254",region:"Asia",subregion:"Southern Asia",name:"India",name_en:"India",disputed:"FALSE",color_group:"1",names:'{ "en": [ "India", "Bharat", "Hindustan", "Bharatvarsh", "in", "IN", "Republic of India", "🇮🇳", "IND" ], "hi": [ "भारत", "हिंदुस्तान", "भारतवर्ष", "इंडिया", "भारत गणराज्य", "इण्डिया", "हिन्दोस्तान", "हिन्दुस्तान", "आर्यवर्त" ] }'},{feature_id:"2756660",description:"state",worldview:"all",iso_3166_1:"CV",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CPV",wikidata_id:"Q1011",centroid:"[-23.6351,15.1204]",bounds:"[-25.3616,14.8021,-22.6572,17.2053]",area_sqkm:"4305",region:"Africa",subregion:"Sub-Saharan Africa",name:"Cabo Verde",name_en:"Cape Verde",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Cape Verde", "Republic of Cape Verde", "Cabo Verde", "CV", "CPV", "cv", "🇨🇻" ], "pt": [ "Cabo Verde", "República de Cabo Verde" ], "kea": [ "Kabu Verdi", "Kauberdi", "Kab Verd" ] }'},{feature_id:"2887721",description:"state",worldview:"all",iso_3166_1:"CF",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CAF",wikidata_id:"Q929",centroid:"[20.6627,6.638]",bounds:"[14.4152,2.2227,27.4536,11.017]",area_sqkm:"628505",region:"Africa",subregion:"Sub-Saharan Africa",name:"Centrafrique",name_en:"Central African Republic",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Central African Republic", "CAR", "Ködörösêse tî Bêafrîka", "République centrafricaine", "Centrafrique", "cf", "🇨🇫", "Republique centrafricaine", "CAF" ], "fr": [ "République centrafricaine", "Centrafrique" ], "sg": [ "Ködörösêse tî Bêafrîka" ] }'},{feature_id:"8720528",description:"state",worldview:"all",iso_3166_1:"MK",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MKD",wikidata_id:"Q221",centroid:"[21.7483,41.6182]",bounds:"[20.453,40.8535,23.034,42.3741]",area_sqkm:"34040",region:"Europe",subregion:"Southern Europe",name:"Северна Македонија",name_en:"North Macedonia",disputed:"FALSE",color_group:"5",names:'{ "en": [ "North Macedonia", "Republic of North Macedonia", "MKD", "FYROM", "FYR Macedonia", "Macedonia", "Former Yugoslav Republic of Macedonia", "Republic of Macedonia", "🇲🇰", "mk" ], "mk": [ "Македонија", "Република Северна Македонија", "Северна Македонија", "Република Македонија" ], "sq": [ "Maqedonia e Veriut", "Maqedonia", "IRJM", "Ish Republika Jugosllave e Maqedonisë", "Republika e Maqedonisë së Veriut" ] }'},{feature_id:"7999611",description:"state",worldview:"all",iso_3166_1:"KW",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"KWT",wikidata_id:"Q817",centroid:"[47.4272,29.3169]",bounds:"[46.558,28.5235,48.7781,30.1033]",area_sqkm:"19829",region:"Asia",subregion:"Western Asia",name:"الكويت",name_en:"Kuwait",disputed:"FALSE",color_group:"2",names:'{ "ar": [ "الكويت", "دولة الكويت" ], "en": [ "Kuwait", "🇰🇼", "State of Kuwait", "Dawlat al-Kuwait", "kw", "KUW" ] }'},{feature_id:"5509199",description:"state",worldview:"all",iso_3166_1:"GE",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GEO",wikidata_id:"Q230",centroid:"[43.6774,42.3325]",bounds:"[40.0068,41.0553,46.7365,43.5863]",area_sqkm:"93812",region:"Asia",subregion:"Western Asia",name:"საქართველო",name_en:"Georgia",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Georgia", "Republic of Georgia", "GE", "🇬🇪", "GEO" ], "ka": [ "საქართველო", "საქართველოს რესპუბლიკა" ], "xmf": [ "საქორთუო" ] }'},{feature_id:"6623328",description:"state",worldview:"all",iso_3166_1:"HM",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"HMD",wikidata_id:"Q131198",centroid:"[73.5286,-53.0783]",bounds:"[72.5827,-53.1949,73.8764,-52.9022]",area_sqkm:"612",region:"Oceania",subregion:"Australia and New Zealand",name:"Heard and McDonald Islands",name_en:"Heard and McDonald Islands",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Heard Island and McDonald Islands", "hm", "Territory of Heard Island and McDonald Islands", "HIMI", "🇭🇲", "Heard and McDonald Islands" ] }'},{feature_id:"725492",description:"disputed area",worldview:"US",iso_3166_1:"D0CNJPTW1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[123.4764,25.743]",bounds:"[123.4579,25.7204,124.5603,25.9289]",area_sqkm:"6",region:"",subregion:"",name:"Senkaku Islands",name_en:"Senkaku Islands",disputed:"TRUE",color_group:"",names:""},{feature_id:"1511924",description:"disputed area",worldview:"US",iso_3166_1:"D0INPK1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[75.4564,34.957]",bounds:"[72.5081,32.7649,77.1204,37.0919]",area_sqkm:"97311",region:"",subregion:"",name:"Pakistan-administered Kashmir",name_en:"Pakistan-administered Kashmir",disputed:"TRUE",color_group:"",names:""},{feature_id:"331777",description:"state",worldview:"all",iso_3166_1:"AD",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"AND",wikidata_id:"Q228",centroid:"[1.5893,42.5425]",bounds:"[1.4138,42.4288,1.7865,42.6549]",area_sqkm:"629",region:"Europe",subregion:"Southern Europe",name:"Andorra",name_en:"Andorra",disputed:"FALSE",color_group:"1",names:'{ "ca": [ "Andorra", "el país dels Pirineus", "Principat d\'Andorra", "les Valls d\'Andorra" ], "en": [ "Andorra", "Principality of Andorra", "Principality of the Valleys of Andorra", "ad", "🇦🇩", "AND" ], "es": [ "Andorra", "Principado de Andorra" ] }'},{feature_id:"2036212",description:"disputed area",worldview:"CN",iso_3166_1:"D0INNP1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[80.7744,30.3206]",bounds:"[80.5254,30.1691,81.04519999999999,30.4716]",area_sqkm:"468",region:"",subregion:"",name:"Kalapani-Lympiadhura disputed area",name_en:"Kalapani-Lympiadhura disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"6361181",description:"state",worldview:"all",iso_3166_1:"GW",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GNB",wikidata_id:"Q1007",centroid:"[-14.5964,11.805]",bounds:"[-16.7153,10.8643,-13.6342,12.6855]",area_sqkm:"35004",region:"Africa",subregion:"Sub-Saharan Africa",name:"Guiné-Bissau",name_en:"Guinea-Bissau",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Guinea-Bissau", "Republic of Guinea-Bissau", "🇬🇼", "gw", "GBS" ], "pt": [ "Guiné-Bissau", "República da Guiné-Bissau" ] }'},{feature_id:"7802995",description:"state",worldview:"JP",iso_3166_1:"KE",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"KEN",wikidata_id:"Q114",centroid:"[37.4758,-0.0219]",bounds:"[33.9216,-4.6913,41.9109,4.6327]",area_sqkm:"587115",region:"Africa",subregion:"Sub-Saharan Africa",name:"Kenya",name_en:"Kenya",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Kenya", "Republic of Kenya", "KE", "KEN", "ke", "🇰🇪" ], "ki": [ "Kenya" ], "sw": [ "Kenya", "Jamhuri ya Kenya" ] }'},{feature_id:"11997372",description:"dependent territory",worldview:"all",iso_3166_1:"RE",sovereign_iso_3166_1:"FR",iso_3166_1_alpha_3:"REU",wikidata_id:"Q17070",centroid:"[55.537,-21.1313]",bounds:"[55.2163,-21.3899,55.8371,-20.8718]",area_sqkm:"2707",region:"Africa",subregion:"Sub-Saharan Africa",name:"La Réunion",name_en:"Reunion",disputed:"FALSE",color_group:"7",names:'{ "en": [ "Réunion", "Reunion", "La Réunion", "La Reunion", "re", ".re", "🇷🇪" ], "fr": [ "La Réunion", "974", "Réunion", "Île de La Réunion", "île de la Réunion" ], "ta": [ "ரீயூனியன்", "ரெயூனின்" ] }'},{feature_id:"1576987",description:"dependent territory",worldview:"all",iso_3166_1:"BM",sovereign_iso_3166_1:"UK",iso_3166_1_alpha_3:"BMU",wikidata_id:"Q23635",centroid:"[-64.77370000000001,32.3019]",bounds:"[-64.8871,32.247,-64.64660000000001,32.3908]",area_sqkm:"64",region:"Americas",subregion:"Northern America",name:"Bermuda",name_en:"Bermuda",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Bermuda", "Somers Isles", "Bermuda Islands", "Atlantic\\/Bermuda", "Bermudian Islands", "Bermoothes", "Virgineola", "The Somers Isles", "Summers\' Isles", "Territory of Bermuda", "Bermudas", "Somers Islands", "Colony of Bermuda", "Devil\'s Isles", "Summer\'s Isles", "Isle of Devils", "bm", "🇧🇲" ] }'},{feature_id:"4132923",description:"state",worldview:"all",iso_3166_1:"DK",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"DNK",wikidata_id:"Q35",centroid:"[9.314399999999999,55.9565]",bounds:"[8.0725,54.5591,15.1974,57.7522]",area_sqkm:"76801",region:"Europe",subregion:"Northern Europe",name:"Danmark",name_en:"Denmark",disputed:"FALSE",color_group:"4",names:'{ "da": [ "Danmark", "DK", "dk" ], "de": [ "Dänemark" ], "en": [ "Denmark", "DK", "Danmark", "DNK", "DEK", "dk", "Denmark proper", "metropolitan Denmark", "🇩🇰", "DEN", "TAN" ], "sv": [ "Danmark", "Danska kungariket", "DK", "Kungariket Danmark", "Kungadömet Danmark", "Kongeriget Danmark", "Danska kungadömet" ] }'},{feature_id:"7802995",description:"state",worldview:"IN",iso_3166_1:"KE",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"KEN",wikidata_id:"Q114",centroid:"[37.4854,0.1774]",bounds:"[33.9216,-4.6913,41.9109,5.0334]",area_sqkm:"590477",region:"Africa",subregion:"Sub-Saharan Africa",name:"Kenya",name_en:"Kenya",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Kenya", "Republic of Kenya", "KE", "KEN", "ke", "🇰🇪" ], "ki": [ "Kenya" ], "sw": [ "Kenya", "Jamhuri ya Kenya" ] }'},{feature_id:"3674157",description:"state",worldview:"all",iso_3166_1:"CK",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"COK",wikidata_id:"Q26988",centroid:"[-159.7783,-21.2339]",bounds:"[-165.8794,-21.9591,-157.3206,-8.9147]",area_sqkm:"275",region:"Oceania",subregion:"Polynesia",name:"Cook Islands",name_en:"Cook Islands",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Cook Islands", "ck", "🇨🇰", "COK" ] }'},{feature_id:"5705811",description:"dependent territory",worldview:"all",iso_3166_1:"GI",sovereign_iso_3166_1:"UK",iso_3166_1_alpha_3:"GIB",wikidata_id:"Q1410",centroid:"[-5.3482,36.134]",bounds:"[-5.3677,36.1089,-5.3386,36.159]",area_sqkm:"8",region:"Europe",subregion:"Southern Europe",name:"Gibraltar",name_en:"Gibraltar",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Gibraltar", "gi", "Gib", "The Rock of Gibraltar", "🇬🇮" ], "es": [ "Gibraltar" ] }'},{feature_id:"13504706",description:"state",worldview:"all",iso_3166_1:"SB",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SLB",wikidata_id:"Q685",centroid:"[160.1487,-9.598699999999999]",bounds:"[155.5122,-12.3083,170.1925,-5.0269]",area_sqkm:"28968",region:"Oceania",subregion:"Melanesia",name:"Solomon Islands",name_en:"Solomon Islands",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Solomon Islands", "sb", "🇸🇧", "SOL" ] }'},{feature_id:"1380372",description:"state",worldview:"all",iso_3166_1:"BE",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BEL",wikidata_id:"Q31",centroid:"[4.8641,50.5117]",bounds:"[2.5454,49.4972,6.4082,51.5051]",area_sqkm:"48408",region:"Europe",subregion:"Western Europe",name:"Belgique - België · Belgien",name_en:"Belgium",disputed:"FALSE",color_group:"3",names:'{ "de": [ "Belgien" ], "en": [ "Belgium", "Kingdom of Belgium", "BEL", "be", "🇧🇪" ], "fr": [ "Belgique", "Royaume de Belgique", "BE" ], "nl": [ "België", "Koninkrijk België", "Belgie", "BE", "BEL" ] }'},{feature_id:"2232820",description:"disputed area",worldview:"US",iso_3166_1:"D0INNP2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[83.8659,27.3922]",bounds:"[83.8167,27.3464,83.9084,27.438]",area_sqkm:"37",region:"",subregion:"",name:"Susta disputed area",name_en:"Susta disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"1905140",description:"disputed area",worldview:"IN",iso_3166_1:"D0KESS4",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[35.7462,4.6551]",bounds:"[35.703,4.6247,35.7813,4.6854]",area_sqkm:"47",region:"",subregion:"",name:"Ilemi Triangle",name_en:"Ilemi Triangle",disputed:"TRUE",color_group:"",names:""},{feature_id:"1905140",description:"disputed area",worldview:"US",iso_3166_1:"D0KESS4",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[35.7462,4.6551]",bounds:"[35.703,4.6247,35.7813,4.6854]",area_sqkm:"47",region:"",subregion:"",name:"Ilemi Triangle",name_en:"Ilemi Triangle",disputed:"TRUE",color_group:"",names:""},{feature_id:"2101748",description:"disputed area",worldview:"all",iso_3166_1:"D0AEIR1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[55.0306,25.8779]",bounds:"[55.0093,25.8558,55.0567,25.9]",area_sqkm:"14",region:"",subregion:"",name:"Abu Musa Island",name_en:"Abu Musa Island",disputed:"TRUE",color_group:"",names:""},{feature_id:"10686628",description:"state",worldview:"all",iso_3166_1:"NG",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"NGA",wikidata_id:"Q1033",centroid:"[7.99,9.104900000000001]",bounds:"[2.6732,4.2707,14.6784,13.8789]",area_sqkm:"930279",region:"Africa",subregion:"Sub-Saharan Africa",name:"Nigeria",name_en:"Nigeria",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Nigeria", "Federal Republic of Nigeria", "🇳🇬", "NG", "FRN", "NGA", "NGR", "Naija" ], "ha": [ "Nijeriya" ], "ig": [ "Naijiria" ], "yo": [ "Nàìjíríà", "Nàìjá", "Nigeria", "NG", "🇳🇬", "Orílẹ̀-èdè Olómìniira Aláàpapọ̀ Nàìjíríà" ] }'},{feature_id:"11079852",description:"state",worldview:"all",iso_3166_1:"OM",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"OMN",wikidata_id:"Q842",centroid:"[57.0243,20.8862]",bounds:"[52,16.6501,59.8398,26.4049]",area_sqkm:"331175",region:"Asia",subregion:"Western Asia",name:"عُمان",name_en:"Oman",disputed:"FALSE",color_group:"1",names:'{ "ar": [ "سلطنة عمان", "عُمان", "عمان", "سلطنة عُمان" ], "en": [ "Oman", "om", "🇴🇲", "Sultanate of Oman" ] }'},{feature_id:"1184244",description:"disputed area",worldview:"JP",iso_3166_1:"D0CNIN4",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[78.7079,32.683]",bounds:"[78.6656,32.6564,78.746,32.7097]",area_sqkm:"18",region:"",subregion:"",name:"Chumar East disputed area",name_en:"Chumar East disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"11145394",description:"state",worldview:"CN",iso_3166_1:"PK",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PAK",wikidata_id:"Q843",centroid:"[70.2714,30.6947]",bounds:"[60.8738,23.7046,77.1204,37.0919]",area_sqkm:"1007923",region:"Asia",subregion:"Southern Asia",name:"پاكِستان - Pakistan",name_en:"Pakistan",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Pakistan", "🇵🇰", "pk", "Islamic Republic of Pakistan" ], "ps": [ "پاکستان" ], "sd": [ "پاڪستان", "اسلامي جمھوريہ پاڪستان" ], "ur": [ "پاکستان", "اسلامی جمہوریہ پاکستان" ], "pnb": [ "پاکستان" ] }'},{feature_id:"15208670",description:"state",worldview:"all",iso_3166_1:"TM",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TKM",wikidata_id:"Q874",centroid:"[58.902,39.0689]",bounds:"[52.4511,35.1308,66.6922,42.799]",area_sqkm:"633155",region:"Asia",subregion:"Central Asia",name:"Türkmenistan",name_en:"Turkmenistan",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Turkmenistan", "Turkmenia", "tm", "🇹🇲", "TKM" ], "ru": [ "Туркмения", "Туркменистан" ], "tk": [ "Türkmenistan", "Türkmenistan \\/ Түркменистан" ] }'},{feature_id:"3543159",description:"state",worldview:"all",iso_3166_1:"KM",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"COM",wikidata_id:"Q970",centroid:"[43.3307,-11.6527]",bounds:"[43.2291,-12.4221,44.5406,-11.3649]",area_sqkm:"1720",region:"Africa",subregion:"Sub-Saharan Africa",name:"Comores - ﺍﻟﻘﻤﺮي - Komori",name_en:"Comoros",disputed:"FALSE",color_group:"2",names:'{ "ar": [ "جزر القمر" ], "en": [ "Comoros", "Juzur al-Qumur", "Juzur al-Qamar", "Union of the Comoros", "Udzima wa Komori", "Union des Comores", "al-Ittiḥād al-Qumurī", "km", "🇰🇲", "Massiwa ya komori", "ouvoimoja wakomori", "COM" ], "fr": [ "Comores", "Union des Comores" ] }'},{feature_id:"16191729",description:"state",worldview:"all",iso_3166_1:"VN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"VNM",wikidata_id:"Q881",centroid:"[107.6937,16.115]",bounds:"[102.1448,7.6024,116.6811,23.3923]",area_sqkm:"348204",region:"Asia",subregion:"South-eastern Asia",name:"Việt Nam",name_en:"Vietnam",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Vietnam", "Viet Nam", "Socialist Republic of Vietnam", "🇻🇳", "VN", "VIE" ], "vi": [ "Việt Nam", "VN", "nước Việt", "Việt quốc", "đất Việt", "nước Việt Nam", "quốc gia Việt Nam", "Cộng hòa xã hội chủ nghĩa Việt Nam" ] }'},{feature_id:"15732968",description:"state",worldview:"all",iso_3166_1:"UM",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"UMI",wikidata_id:"Q16645",centroid:"[166.6495,19.2894]",bounds:"[-176.6238,-0.3805,166.6575,19.3187]",area_sqkm:"29",region:"Oceania",subregion:"Micronesia",name:"US Minor Outlying Islands",name_en:"US Minor Outlying Islands",disputed:"FALSE",color_group:"4",names:'{ "en": [ "United States Minor Outlying Islands", "um", "US Minor Outlying Islands", "U.S. Minor Outlying Islands", "🇺🇲" ] }'},{feature_id:"3936309",description:"state",worldview:"all",iso_3166_1:"CW",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CUW",wikidata_id:"Q25279",centroid:"[-69.0407,12.2129]",bounds:"[-69.1623,11.978,-68.6395,12.3924]",area_sqkm:"451",region:"Americas",subregion:"Latin America and the Caribbean",name:"Curaçao",name_en:"Curaçao",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Curaçao", "Island Territory of Curaçao", "Curacau", "Curaçoa", "Curaςao", "Kòrsou", "Korsou", "Curocao", "ISO 3166-1:CW", "CUW", "Curazao", "Curacao", "Country of Curaçao", "🇨🇼", "CW" ], "pap": [ "Kòrsou", "Kurasoleño", "Curacao", "Korsou", "Corsou", "Corsouw", "Kórsou", "Curaçao", "Corsow" ] }'},{feature_id:"16388343",description:"state",worldview:"all",iso_3166_1:"YE",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"YEM",wikidata_id:"Q805",centroid:"[47.4901,15.822]",bounds:"[41.9037,12.1081,54.5343,19]",area_sqkm:"474122",region:"Asia",subregion:"Western Asia",name:"اليَمَن",name_en:"Yemen",disputed:"FALSE",color_group:"5",names:'{ "ar": [ "اليمن", "الجمهورية اليمنية" ], "en": [ "Yemen", "Republic of Yemen", "ye", "Rep. Yemen", "🇾🇪", "YEM" ] }'},{feature_id:"1774068",description:"disputed area",worldview:"US",iso_3166_1:"D0KESS2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[35.1872,4.8288]",bounds:"[34.3988,4.6172,35.597,5.0334]",area_sqkm:"3330",region:"",subregion:"",name:"Ilemi Triangle",name_en:"Ilemi Triangle",disputed:"TRUE",color_group:"",names:""},{feature_id:"2429428",description:"disputed area",worldview:"IN",iso_3166_1:"D0CNTW1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[116.7287,20.7035]",bounds:"[116.7069,20.6972,116.7349,20.7097]",area_sqkm:"1",region:"",subregion:"",name:"Pratas Island",name_en:"Pratas Island",disputed:"TRUE",color_group:"",names:""},{feature_id:"12456064",description:"state",worldview:"all",iso_3166_1:"LC",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"LCA",wikidata_id:"Q760",centroid:"[-60.9776,13.909]",bounds:"[-61.0794,13.708,-60.8728,14.1096]",area_sqkm:"624",region:"Americas",subregion:"Latin America and the Caribbean",name:"Saint Lucia",name_en:"Saint Lucia",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Saint Lucia", "lc", "St. Lucia", "St Lucia", "🇱🇨" ] }'},{feature_id:"11800760",description:"state",worldview:"all",iso_3166_1:"PT",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PRT",wikidata_id:"Q45",centroid:"[-8.296200000000001,39.6065]",bounds:"[-31.2694,30.0305,-6.1892,42.1543]",area_sqkm:"119609",region:"Europe",subregion:"Southern Europe",name:"Portugal",name_en:"Portugal",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Portugal", "Portuguese Republic", "PT", "pt", "🇵🇹" ], "fr": [ "Portugal" ], "pt": [ "Portugal", "República Portuguesa", "República de Portugal", "PT", "pt", "🇵🇹" ] }'},{feature_id:"2953431",description:"state",worldview:"all",iso_3166_1:"TD",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TCD",wikidata_id:"Q657",centroid:"[18.6422,15.5973]",bounds:"[13.4731,7.4418,24.0016,23.4504]",area_sqkm:"1329064",region:"Africa",subregion:"Sub-Saharan Africa",name:"Tchad تشاد",name_en:"Chad",disputed:"FALSE",color_group:"6",names:'{ "ar": [ "تشاد", "جمهورية تشاد", "تَشَاد" ], "en": [ "Chad", "Republic of Chad", "République du Tchad", "جمهورية تشاد", "Ǧumhūriyyat Tšād", "Tchad", "td", "🇹🇩", "Republique du Tchad", "CHA", "GUM" ], "fr": [ "Tchad", "République du Tchad" ] }'}];function nt(t,e,i){const r=t.slice();return r[14]=e[i],r}function ot(t){let e,i,r,n,o,a,s,u,v,b,x,w,E,S,I,A,C,P,T,L,M,k,R,N,D,O,z,F,B,q,U,V,G,j,K,X,Z,Y,H,W,Q,J,$,tt=t[2].correctAnswer.wikidata.hasOwnProperty("flag"),et=t[2].correctAnswer.name_lang+"",it=t[2].correctAnswer.wikidata.hasOwnProperty("website"),rt=t[2].correctAnswer.wikidata.hasOwnProperty("pageBanner"),nt=t[2].correctAnswer.wikidata.hasOwnProperty("coatOfArms"),ot=t[2].correctAnswer.wikidata.hasOwnProperty("pronounciationAudio"),at=t[2].correctAnswer.wikidata.hasOwnProperty("anthemAudio");function st(t,e){return t[2].answerIsCorrect?lt:ut}let ct=st(t),pt=ct(t),It=tt&&ht(t),At=t[2].correctAnswer.name_lang!=t[2].correctAnswer.name&&dt(t),Ct=it&&ft(t),Pt=rt&&_t(t),Tt=nt&&gt(t),Lt=ot&&mt(t),Mt=at&&yt(t);function kt(t,e){return(null==N||4&e)&&(N=!!t[2].correctAnswer.wikidata.hasOwnProperty("capitalLabel")),N?bt:vt}let Rt=kt(t,-1),Nt=Rt(t);function Dt(t,e){return(null==U||4&e)&&(U=!!t[2].correctAnswer.wikidata.hasOwnProperty("officialLanguageLabels")),U?wt:xt}let Ot=Dt(t,-1),zt=Ot(t);function Ft(t,e){return(null==K||4&e)&&(K=!!t[2].correctAnswer.wikidata.hasOwnProperty("otherLanguageLabels")),K?St:Et}let Bt=Ft(t,-1),qt=Bt(t);return{c(){pt.c(),e=f(),i=h("button"),i.innerHTML="Try another country\n        <br/>",r=f(),n=h("div"),o=h("div"),a=h("div"),s=h("div"),It&&It.c(),u=f(),v=h("div"),b=h("h3"),x=d(et),w=f(),At&&At.c(),E=f(),Ct&&Ct.c(),S=f(),Pt&&Pt.c(),I=f(),A=h("div"),C=h("p"),Tt&&Tt.c(),P=f(),T=h("ul"),Lt&&Lt.c(),L=f(),Mt&&Mt.c(),M=f(),k=h("li"),R=d("Capital:\n              "),Nt.c(),D=f(),O=h("h4"),O.textContent="Languages",z=f(),F=h("ul"),B=h("li"),q=d("Official:\n              "),zt.c(),V=f(),G=h("li"),j=d("Other:\n              "),qt.c(),X=f(),Z=h("div"),Y=d("Data source:\n          "),H=h("a"),W=d("Wikidata"),g(i,"class","uk-button uk-button-primary uk-button-large uk-width-1-1"),y(i,"background-color","#1ba3e3"),g(s,"class","uk-width-auto"),g(b,"class","uk-card-title uk-margin-remove-bottom"),g(v,"class","uk-width-expand"),g(a,"class","uk-grid-small uk-flex-middle"),g(a,"uk-grid",""),g(o,"class","uk-card-header"),g(T,"class","uk-list"),g(F,"class","uk-list"),g(A,"class","uk-card-body"),g(H,"href",Q=t[2].correctAnswer.wikidata.country.value),g(H,"class","uk-button uk-button-text"),g(Z,"class","uk-card-footer"),g(n,"class","uk-card uk-card-default uk-margin-top")},m(p,h){pt.m(p,h),c(p,e,h),c(p,i,h),c(p,r,h),c(p,n,h),l(n,o),l(o,a),l(a,s),It&&It.m(s,null),l(a,u),l(a,v),l(v,b),l(b,x),l(v,w),At&&At.m(v,null),l(v,E),Ct&&Ct.m(v,null),l(n,S),Pt&&Pt.m(n,null),l(n,I),l(n,A),l(A,C),Tt&&Tt.m(C,null),l(A,P),l(A,T),Lt&&Lt.m(T,null),l(T,L),Mt&&Mt.m(T,null),l(T,M),l(T,k),l(k,R),Nt.m(k,null),l(A,D),l(A,O),l(A,z),l(A,F),l(F,B),l(B,q),zt.m(B,null),l(F,V),l(F,G),l(G,j),qt.m(G,null),l(n,X),l(n,Z),l(Z,Y),l(Z,H),l(H,W),J||($=_(i,"click",t[4]),J=!0)},p(t,i){ct===(ct=st(t))&&pt?pt.p(t,i):(pt.d(1),pt=ct(t),pt&&(pt.c(),pt.m(e.parentNode,e))),4&i&&(tt=t[2].correctAnswer.wikidata.hasOwnProperty("flag")),tt?It?It.p(t,i):(It=ht(t),It.c(),It.m(s,null)):It&&(It.d(1),It=null),4&i&&et!==(et=t[2].correctAnswer.name_lang+"")&&m(x,et),t[2].correctAnswer.name_lang!=t[2].correctAnswer.name?At?At.p(t,i):(At=dt(t),At.c(),At.m(v,E)):At&&(At.d(1),At=null),4&i&&(it=t[2].correctAnswer.wikidata.hasOwnProperty("website")),it?Ct?Ct.p(t,i):(Ct=ft(t),Ct.c(),Ct.m(v,null)):Ct&&(Ct.d(1),Ct=null),4&i&&(rt=t[2].correctAnswer.wikidata.hasOwnProperty("pageBanner")),rt?Pt?Pt.p(t,i):(Pt=_t(t),Pt.c(),Pt.m(n,I)):Pt&&(Pt.d(1),Pt=null),4&i&&(nt=t[2].correctAnswer.wikidata.hasOwnProperty("coatOfArms")),nt?Tt?Tt.p(t,i):(Tt=gt(t),Tt.c(),Tt.m(C,null)):Tt&&(Tt.d(1),Tt=null),4&i&&(ot=t[2].correctAnswer.wikidata.hasOwnProperty("pronounciationAudio")),ot?Lt?Lt.p(t,i):(Lt=mt(t),Lt.c(),Lt.m(T,L)):Lt&&(Lt.d(1),Lt=null),4&i&&(at=t[2].correctAnswer.wikidata.hasOwnProperty("anthemAudio")),at?Mt?Mt.p(t,i):(Mt=yt(t),Mt.c(),Mt.m(T,M)):Mt&&(Mt.d(1),Mt=null),Rt===(Rt=kt(t,i))&&Nt?Nt.p(t,i):(Nt.d(1),Nt=Rt(t),Nt&&(Nt.c(),Nt.m(k,null))),Ot===(Ot=Dt(t,i))&&zt?zt.p(t,i):(zt.d(1),zt=Ot(t),zt&&(zt.c(),zt.m(B,null))),Bt===(Bt=Ft(t,i))&&qt?qt.p(t,i):(qt.d(1),qt=Bt(t),qt&&(qt.c(),qt.m(G,null))),4&i&&Q!==(Q=t[2].correctAnswer.wikidata.country.value)&&g(H,"href",Q)},d(t){pt.d(t),t&&p(e),t&&p(i),t&&p(r),t&&p(n),It&&It.d(),At&&At.d(),Ct&&Ct.d(),Pt&&Pt.d(),Tt&&Tt.d(),Lt&&Lt.d(),Mt&&Mt.d(),Nt.d(),zt.d(),qt.d(),J=!1,$()}}}function at(t){let e,i,r,n,o,a,s,u,_,y,v,b,x=t[2].score+"",w=t[2].turn+"",E=t[2].choices,S=[];for(let e=0;e<E.length;e+=1)S[e]=At(nt(t,E,e));let I=t[2].turn>0&&Ct(t);return{c(){e=h("div");for(let t=0;t<S.length;t+=1)S[t].c();i=f(),r=h("p"),n=d("Score\n              "),o=d(x),a=d("\n              /\n              "),s=d(w),u=f(),I&&I.c(),_=f(),y=h("progress"),g(e,"class","uk-child-width-expand uk-grid-small uk-grid-match"),g(e,"uk-grid",""),g(y,"class","uk-progress"),y.value=v=t[2].score,g(y,"max",b=t[2].turn)},m(t,p){c(t,e,p);for(let t=0;t<S.length;t+=1)S[t].m(e,null);c(t,i,p),c(t,r,p),l(r,n),l(r,o),l(r,a),l(r,s),l(r,u),I&&I.m(r,null),l(r,_),l(r,y)},p(t,i){if(36&i){let r;for(E=t[2].choices,r=0;r<E.length;r+=1){const n=nt(t,E,r);S[r]?S[r].p(n,i):(S[r]=At(n),S[r].c(),S[r].m(e,null))}for(;r<S.length;r+=1)S[r].d(1);S.length=E.length}4&i&&x!==(x=t[2].score+"")&&m(o,x),4&i&&w!==(w=t[2].turn+"")&&m(s,w),t[2].turn>0?I?I.p(t,i):(I=Ct(t),I.c(),I.m(r,_)):I&&(I.d(1),I=null),4&i&&v!==(v=t[2].score)&&(y.value=v),4&i&&b!==(b=t[2].turn)&&g(y,"max",b)},d(t){t&&p(e),function(t,e){for(let i=0;i<t.length;i+=1)t[i]&&t[i].d(e)}(S,t),t&&p(i),t&&p(r),I&&I.d()}}}function st(t){let e;function i(t,e){return t[2].dataLoaded?Pt:Tt}let r=i(t),n=r(t);return{c(){n.c(),e=d("")},m(t,i){n.m(t,i),c(t,e,i)},p(t,o){r===(r=i(t))&&n?n.p(t,o):(n.d(1),n=r(t),n&&(n.c(),n.m(e.parentNode,e)))},d(t){n.d(t),t&&p(e)}}}function ut(t){let e,i,r,n,o,a,s,u,_,y,v,b,x,w,E,S,I=t[2].correctAnswer.name_lang+"",A=t[2].score+"",C=t[2].turn+"",P=t[2].turn>0&&ct(t);return{c(){e=h("div"),i=h("h3"),r=d("Sorry, it was\n            "),n=d(I),o=d("."),a=f(),s=h("p"),u=d("Score\n                    "),_=d(A),y=d("\n                    /\n                    "),v=d(C),b=f(),P&&P.c(),x=f(),w=h("progress"),g(w,"class","uk-progress"),w.value=E=t[2].score,g(w,"max",S=t[2].turn),g(e,"class","uk-margin-remove"),g(e,"uk-alert","")},m(t,p){c(t,e,p),l(e,i),l(i,r),l(i,n),l(i,o),l(e,a),l(e,s),l(s,u),l(s,_),l(s,y),l(s,v),l(s,b),P&&P.m(s,null),l(s,x),l(s,w)},p(t,e){4&e&&I!==(I=t[2].correctAnswer.name_lang+"")&&m(n,I),4&e&&A!==(A=t[2].score+"")&&m(_,A),4&e&&C!==(C=t[2].turn+"")&&m(v,C),t[2].turn>0?P?P.p(t,e):(P=ct(t),P.c(),P.m(s,x)):P&&(P.d(1),P=null),4&e&&E!==(E=t[2].score)&&(w.value=E),4&e&&S!==(S=t[2].turn)&&g(w,"max",S)},d(t){t&&p(e),P&&P.d()}}}function lt(t){let e,i,r,n,o,a,s,u,_,y,v,b,x,w,E,S,I,A=t[2].correctAnswer.name_lang+"",C=t[2].score+"",P=t[2].turn+"",T=t[2].turn>0&&pt(t);return{c(){e=h("div"),i=h("h3"),r=d(A),n=d("\n            is "),o=h("b"),o.textContent="correct",a=d("!"),s=f(),u=h("p"),_=d("Score\n                    "),y=d(C),v=d("\n                    /\n                    "),b=d(P),x=f(),T&&T.c(),w=f(),E=h("progress"),g(E,"class","uk-progress"),E.value=S=t[2].score,g(E,"max",I=t[2].turn),g(e,"class","uk-margin-remove"),g(e,"uk-alert","")},m(t,p){c(t,e,p),l(e,i),l(i,r),l(i,n),l(i,o),l(i,a),l(e,s),l(e,u),l(u,_),l(u,y),l(u,v),l(u,b),l(u,x),T&&T.m(u,null),l(u,w),l(u,E)},p(t,e){4&e&&A!==(A=t[2].correctAnswer.name_lang+"")&&m(r,A),4&e&&C!==(C=t[2].score+"")&&m(y,C),4&e&&P!==(P=t[2].turn+"")&&m(b,P),t[2].turn>0?T?T.p(t,e):(T=pt(t),T.c(),T.m(u,w)):T&&(T.d(1),T=null),4&e&&S!==(S=t[2].score)&&(E.value=S),4&e&&I!==(I=t[2].turn)&&g(E,"max",I)},d(t){t&&p(e),T&&T.d()}}}function ct(t){let e,i,r,n=Math.round(t[2].score/t[2].turn*100)+"";return{c(){e=d("("),i=d(n),r=d("%)")},m(t,n){c(t,e,n),c(t,i,n),c(t,r,n)},p(t,e){4&e&&n!==(n=Math.round(t[2].score/t[2].turn*100)+"")&&m(i,n)},d(t){t&&p(e),t&&p(i),t&&p(r)}}}function pt(t){let e,i,r,n=Math.round(t[2].score/t[2].turn*100)+"";return{c(){e=d("("),i=d(n),r=d("%)")},m(t,n){c(t,e,n),c(t,i,n),c(t,r,n)},p(t,e){4&e&&n!==(n=Math.round(t[2].score/t[2].turn*100)+"")&&m(i,n)},d(t){t&&p(e),t&&p(i),t&&p(r)}}}function ht(t){let e,i,r,n,o;return{c(){e=h("a"),i=h("img"),g(i,"alt",r="Flag of "+t[2].correctAnswer.wikidata.countryLabel.value),i.src!==(n=t[2].correctAnswer.wikidata.flag.value+"?width=100px")&&g(i,"src",n),g(e,"href",o=t[2].correctAnswer.wikidata.flag.value)},m(t,r){c(t,e,r),l(e,i)},p(t,a){4&a&&r!==(r="Flag of "+t[2].correctAnswer.wikidata.countryLabel.value)&&g(i,"alt",r),4&a&&i.src!==(n=t[2].correctAnswer.wikidata.flag.value+"?width=100px")&&g(i,"src",n),4&a&&o!==(o=t[2].correctAnswer.wikidata.flag.value)&&g(e,"href",o)},d(t){t&&p(e)}}}function dt(t){let e,i,r=t[2].correctAnswer.name+"";return{c(){e=h("p"),i=d(r),g(e,"class","uk-text-meta uk-margin-remove-top")},m(t,r){c(t,e,r),l(e,i)},p(t,e){4&e&&r!==(r=t[2].correctAnswer.name+"")&&m(i,r)},d(t){t&&p(e)}}}function ft(t){let e,i,r,n=t[2].correctAnswer.wikidata.website.value+"";return{c(){e=h("a"),i=d(n),g(e,"href",r=t[2].correctAnswer.wikidata.website.value)},m(t,r){c(t,e,r),l(e,i)},p(t,o){4&o&&n!==(n=t[2].correctAnswer.wikidata.website.value+"")&&m(i,n),4&o&&r!==(r=t[2].correctAnswer.wikidata.website.value)&&g(e,"href",r)},d(t){t&&p(e)}}}function _t(t){let e,i,r,n;return{c(){e=h("div"),i=h("img"),g(i,"alt",r="Header image of "+t[2].correctAnswer.wikidata.countryLabel.value),i.src!==(n=t[2].correctAnswer.wikidata.pageBanner.value+"?width="+document.getElementById("panel").offsetWidth+"px")&&g(i,"src",n),g(e,"class","uk-card-media-top")},m(t,r){c(t,e,r),l(e,i)},p(t,e){4&e&&r!==(r="Header image of "+t[2].correctAnswer.wikidata.countryLabel.value)&&g(i,"alt",r),4&e&&i.src!==(n=t[2].correctAnswer.wikidata.pageBanner.value+"?width="+document.getElementById("panel").offsetWidth+"px")&&g(i,"src",n)},d(t){t&&p(e)}}}function gt(t){let e,i,r,n,o,a;return{c(){e=h("a"),i=h("img"),a=d("\n              Coat of arms"),g(i,"alt",r="Coat of arms of "+t[2].correctAnswer.wikidata.countryLabel.value),i.src!==(n=t[2].correctAnswer.wikidata.coatOfArms.value+"?width=150px")&&g(i,"src",n),g(e,"href",o=t[2].correctAnswer.wikidata.coatOfArms.value)},m(t,r){c(t,e,r),l(e,i),c(t,a,r)},p(t,a){4&a&&r!==(r="Coat of arms of "+t[2].correctAnswer.wikidata.countryLabel.value)&&g(i,"alt",r),4&a&&i.src!==(n=t[2].correctAnswer.wikidata.coatOfArms.value+"?width=150px")&&g(i,"src",n),4&a&&o!==(o=t[2].correctAnswer.wikidata.coatOfArms.value)&&g(e,"href",o)},d(t){t&&p(e),t&&p(a)}}}function mt(t){let e,i,r,n,o;return{c(){e=h("li"),i=d("Native pronounciation\n                "),r=h("audio"),n=h("source"),g(n,"type","audio/ogg"),n.src!==(o=t[2].correctAnswer.wikidata.pronounciationAudio.value.replace("http:","https:"))&&g(n,"src",o),r.controls=!0},m(t,o){c(t,e,o),l(e,i),l(e,r),l(r,n)},p(t,e){4&e&&n.src!==(o=t[2].correctAnswer.wikidata.pronounciationAudio.value.replace("http:","https:"))&&g(n,"src",o)},d(t){t&&p(e)}}}function yt(t){let e,i,r,n,o,a,s,u=t[2].correctAnswer.wikidata.anthemLabel.value+"";return{c(){e=h("li"),i=d("Anthem:\n                "),r=d(u),n=f(),o=h("audio"),a=h("source"),g(a,"type","audio/ogg"),a.src!==(s=t[2].correctAnswer.wikidata.anthemAudio.value.replace("http:","https:"))&&g(a,"src",s),o.controls=!0},m(t,s){c(t,e,s),l(e,i),l(e,r),l(e,n),l(e,o),l(o,a)},p(t,e){4&e&&u!==(u=t[2].correctAnswer.wikidata.anthemLabel.value+"")&&m(r,u),4&e&&a.src!==(s=t[2].correctAnswer.wikidata.anthemAudio.value.replace("http:","https:"))&&g(a,"src",s)},d(t){t&&p(e)}}}function vt(e){let i;return{c(){i=d("None")},m(t,e){c(t,i,e)},p:t,d(t){t&&p(i)}}}function bt(t){let e,i=t[2].correctAnswer.wikidata.capitalLabel.value+"";return{c(){e=d(i)},m(t,i){c(t,e,i)},p(t,r){4&r&&i!==(i=t[2].correctAnswer.wikidata.capitalLabel.value+"")&&m(e,i)},d(t){t&&p(e)}}}function xt(e){let i;return{c(){i=d("Unknown")},m(t,e){c(t,i,e)},p:t,d(t){t&&p(i)}}}function wt(t){let e,i=t[2].correctAnswer.wikidata.officialLanguageLabels.value+"";return{c(){e=d(i)},m(t,i){c(t,e,i)},p(t,r){4&r&&i!==(i=t[2].correctAnswer.wikidata.officialLanguageLabels.value+"")&&m(e,i)},d(t){t&&p(e)}}}function Et(e){let i;return{c(){i=d("Unknown")},m(t,e){c(t,i,e)},p:t,d(t){t&&p(i)}}}function St(t){let e,i=t[2].correctAnswer.wikidata.otherLanguageLabels.value+"";return{c(){e=d(i)},m(t,i){c(t,e,i)},p(t,r){4&r&&i!==(i=t[2].correctAnswer.wikidata.otherLanguageLabels.value+"")&&m(e,i)},d(t){t&&p(e)}}}function It(t){let e,i,r;return{c(){e=h("img"),g(e,"class","uk-float-right"),g(e,"alt",i="Flag of "+t[14].countryLabel.value),e.src!==(r=kt(t[14].flag.value,50))&&g(e,"src",r)},m(t,i){c(t,e,i)},p(t,n){4&n&&i!==(i="Flag of "+t[14].countryLabel.value)&&g(e,"alt",i),4&n&&e.src!==(r=kt(t[14].flag.value,50))&&g(e,"src",r)},d(t){t&&p(e)}}}function At(t){let e,i,r,o,a,s,u,y,v=t[14].countryLabel.value+"",b=t[14].hasOwnProperty("flag"),x=b&&It(t);return{c(){e=h("div"),i=h("div"),r=d(v),o=f(),x&&x.c(),s=f(),g(i,"data-qid",a=t[14].wikidata_id),g(i,"class","uk-card uk-card-default uk-card-body uk-card-hover"),g(e,"class","uk-width-1-1")},m(a,p){c(a,e,p),l(e,i),l(i,r),l(i,o),x&&x.m(i,null),l(e,s),u||(y=_(e,"click",(function(){n(t[5](t[14].countryLabel.value))&&t[5](t[14].countryLabel.value).apply(this,arguments)})),u=!0)},p(e,n){t=e,4&n&&v!==(v=t[14].countryLabel.value+"")&&m(r,v),4&n&&(b=t[14].hasOwnProperty("flag")),b?x?x.p(t,n):(x=It(t),x.c(),x.m(i,null)):x&&(x.d(1),x=null),4&n&&a!==(a=t[14].wikidata_id)&&g(i,"data-qid",a)},d(t){t&&p(e),x&&x.d(),u=!1,y()}}}function Ct(t){let e,i,r,n=Math.round(t[2].score/t[2].turn*100)+"";return{c(){e=d("("),i=d(n),r=d("%)")},m(t,n){c(t,e,n),c(t,i,n),c(t,r,n)},p(t,e){4&e&&n!==(n=Math.round(t[2].score/t[2].turn*100)+"")&&m(i,n)},d(t){t&&p(e),t&&p(i),t&&p(r)}}}function Pt(e){let i,r,n,o,a,s;return{c(){i=h("div"),r=h("h1"),r.textContent="Can you guess the country?",n=f(),o=h("button"),o.innerHTML="Let&#39;s get started!<br/>",g(o,"class","uk-button uk-button-primary uk-button-large uk-width-1-1"),y(o,"background-color","#1ba3e3")},m(t,u){c(t,i,u),l(i,r),l(i,n),l(i,o),a||(s=_(o,"click",e[6]),a=!0)},p:t,d(t){t&&p(i),a=!1,s()}}}function Tt(e){let i;return{c(){i=h("h4"),i.innerHTML='<div uk-spinner=""></div>\n          Loading list of countries.'},m(t,e){c(t,i,e)},p:t,d(t){t&&p(i)}}}function Lt(t){let e,i,r;function n(t,e){return t[2].showIntro?st:t[2].choices?at:t[2].endTurn?ot:void 0}let o=n(t),a=o&&o(t);return{c(){e=h("main"),a&&a.c(),i=f(),r=h("footer"),r.innerHTML='<small>❤️ Built with\n        <a href="https://docs.mapbox.com/mapbox-gl-js/api/">Mapbox GL JS</a>,\n        <a href="https://docs.mapbox.com/vector-tiles/reference/mapbox-countries-v1/">Mapbox\n          Countries</a>,\n        <a href="https://www.openstreetmap.org/">OpenStreetMap</a>,\n        <a href="https://www.wikidata.org/wiki/Wikidata:Main_Page">Wikidata</a>\n        and\n        <a href="https://svelte.dev/">Svelte</a>\n        |\n        <a href="https://github.com/planemad/map-quiz/tree/main">Source code</a></small>',g(r,"class","uk-margin-top"),g(e,"id","panel"),g(e,"class","uk-position-absolute uk-padding-small uk-width-1-1")},m(t,n){c(t,e,n),a&&a.m(e,null),l(e,i),l(e,r)},p(t,r){o===(o=n(t))&&a?a.p(t,r):(a&&a.d(1),a=o&&o(t),a&&(a.c(),a.m(e,i)))},d(t){t&&p(e),a&&a.d()}}}function Mt(t){let e,i,r,n,o;function a(e){t[7].call(null,e)}e=new Q({props:{$$slots:{default:[Lt]},$$scope:{ctx:t}}});let s={style:t[1].mapStyle,worldview:t[1].mapWorldview,difficultyLevel:t[1].difficultyLevel,location:{bounds:JSON.parse(t[3].Q142.bounds)},data:t[2].correctAnswer};return void 0!==t[0]&&(s.map=t[0]),r=new Y({props:s}),E.push((()=>function(t,e,i){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=i,i(t.$$.ctx[r]))}(r,"map",a))),{c(){z(e.$$.fragment),i=f(),z(r.$$.fragment)},m(t,n){F(e,t,n),c(t,i,n),F(r,t,n),o=!0},p(t,[i]){const o={};131076&i&&(o.$$scope={dirty:i,ctx:t}),e.$set(o);const a={};var s;2&i&&(a.style=t[1].mapStyle),2&i&&(a.worldview=t[1].mapWorldview),2&i&&(a.difficultyLevel=t[1].difficultyLevel),8&i&&(a.location={bounds:JSON.parse(t[3].Q142.bounds)}),4&i&&(a.data=t[2].correctAnswer),!n&&1&i&&(n=!0,a.map=t[0],s=()=>n=!1,I.push(s)),r.$set(a)},i(t){o||(D(e.$$.fragment,t),D(r.$$.fragment,t),o=!0)},o(t){O(e.$$.fragment,t),O(r.$$.fragment,t),o=!1},d(t){B(e,t),t&&p(i),B(r,t)}}}function kt(t,e){return`${t}?width=${e}px`}function Rt(t,e,i){let r,n=null,o={locale:navigator.language,language:"ta",fallbackLanguage:"en",mapWorldview:"US",mapStyle:"mapbox://styles/planemad/ckgopajx83l581bo6qr5l86yg",choices:4,viewportWidth:window.innerWidth},a={difficultyLevel:1,difficultyLevels:[{message:"You have been looking at maps since you were born, am sure you can do this 🤓"},{message:"😅"},{message:"🤨"},{message:"🙈"}],dataLoaded:!1,showIntro:!0,turn:0,score:0,endTurn:!1,place:null,choices:null,answerIsCorrect:null};function s(){i(1,o.language=o.locale.split("-")[0],o),["IN","JP","CN","US"].indexOf(o.locale.split("-")[1])>=0&&i(1,o.mapWorldview=o.locale.split("-")[1],o)}1==o.locale.split("-").length&&fetch("https://freegeoip.app/json/").then((t=>t.json())).then((t=>{i(1,o.locale+="-"+t.country_code,o),s()})).catch((()=>null)),s();let u=rt.filter((t=>("all"==t.worldview||t.worldview==o.mapWorldview)&&"FALSE"==t.disputed)).reduce(((t,e)=>(t[e.wikidata_id]=e,t)),{});function l(){for(i(2,a.endTurn=!1,a),i(2,a.correctAnswer=it(u),a),i(2,a.choices=[],a),a.choices.push(a.correctAnswer);a.choices.length<o.choices;){let t=it(u,(t=>t.subregion==a.correctAnswer.subregion));a.choices.filter((e=>e.wikidata_id==t.wikidata_id)).length||a.choices.push(t)}i(2,a.choices=function(t){for(var e,i,r=t.length;0!==r;)i=Math.floor(Math.random()*r),e=t[r-=1],t[r]=t[i],t[i]=e;return t}(a.choices),a);let t=a.correctAnswer.hasOwnProperty("capital");var e;et(`\n      select ${t?"(SAMPLE(?capitalLocation) as ?capitalLocation)":null} ?anthemLabel ?anthemAudio ?coatOfArms (GROUP_CONCAT(DISTINCT ?officialLanguageLabel; SEPARATOR=", ") AS ?officialLanguageLabels) (GROUP_CONCAT(DISTINCT ?otherLanguageLabel; SEPARATOR=", ") AS ?otherLanguageLabels) (SAMPLE(?website) AS ?website)  (SAMPLE(?namedAfter) as ?namedAfter) (SAMPLE(?pageBanner) as ?pageBanner) (SAMPLE(?pronounciationAudio) as ?pronounciationAudio) where {\n\n        OPTIONAL {  wd:${a.correctAnswer.wikidata_id}  wdt:P85 ?anthem }.\n        OPTIONAL { ?anthem wdt:P51 ?anthemAudio }.\n        \n        OPTIONAL { wd:${a.correctAnswer.wikidata_id} wdt:P94 ?coatOfArms }.\n        OPTIONAL { wd:${a.correctAnswer.wikidata_id} wdt:P856 ?website }.\n        OPTIONAL { wd:${a.correctAnswer.wikidata_id} wdt:P138 ?namedAfter}.\n        OPTIONAL { wd:${a.correctAnswer.wikidata_id} wdt:P948 ?pageBanner}.\n        OPTIONAL { wd:${a.correctAnswer.wikidata_id} wdt:P443 ?pronounciationAudio}.\n        OPTIONAL { wd:${a.correctAnswer.wikidata_id} wdt:P37 ?officialLanguage }.\n        OPTIONAL { wd:${a.correctAnswer.wikidata_id} wdt:P2936 ?otherLanguage }.\n\n        ${t?`OPTIONAL { \n          wd:${a.correctAnswer.capital.value.replace("http://www.wikidata.org/entity/","")} wdt:P625 ?capitalLocation }.`:null}\n        \n      service wikibase:label { bd:serviceParam wikibase:language "${o.language},${o.fallbackLanguage}". \n      ?officialLanguage rdfs:label ?officialLanguageLabel .\n   ?otherLanguage rdfs:label ?otherLanguageLabel .\n   ?anthem rdfs:label ?anthemLabel .\n  }\n      }\n      GROUP BY ?anthemLabel ?anthemAudio ?coatOfArms\n\n      `).then((t=>{let e;i(2,a.correctAnswer.wikidata=Object.assign(t[0],a.correctAnswer.wikidata),a),e=t[0].hasOwnProperty("capitalLocation")?tt(a.correctAnswer.wikidata.capitalLocation.value):a.correctAnswer.centroid,n.getSource("capital-location").setData(e)})),e=a.correctAnswer.iso_3166_1,n.setLayoutProperty("country-label","visibility","none"),n.setPaintProperty("country-boundaries","fill-color",["match",["get","iso_3166_1"],e,"hsla(0, 0%, 94%, 0)","hsla(36, 0%, 100%, 0.89)"]),n.setPaintProperty("country-boundaries-outline","line-color",["match",["get","iso_3166_1"],e,"orange","hsla(0, 0%, 100%, 0)"]),n.setPaintProperty("admin-boundaries-line","line-color",["match",["get","iso_3166_1"],e,"hsl(0, 0%, 100%)","hsl(0, 0%, 60%)"]),n.fitBounds(JSON.parse(a.correctAnswer.bounds),{padding:.1*document.getElementById("map").offsetWidth,duration:1e3,bearing:360*Math.random(),maxZoom:9}),r=setTimeout((function(){n.easeTo({center:JSON.parse(a.correctAnswer.centroid),zoom:n.getZoom()<5?n.getZoom():5,duration:6e3})}),1e3)}return et(`\n  # List of all countries based on ISO 3166-2 country code with their capitals \n  SELECT DISTINCT  (SAMPLE(?location) as ?location) ?country ?countryLabel (SAMPLE(?capital) as ?capital) (SAMPLE(?capitalLabel) as ?capitalLabel) (SAMPLE(?flag) as ?flag) WHERE {\n  VALUES ?country { ${Object.keys(u).join(" ").replace(/Q/g,"wd:Q")}}\n  OPTIONAL { ?country wdt:P625 ?location }.\n  OPTIONAL { ?country wdt:P41 ?flag }.\n  OPTIONAL { ?country wdt:P36 ?capital }.\n    # Retrieve labels to enable group_concat \n    # https://stackoverflow.com/questions/48855767/group-concat-not-working\n    SERVICE wikibase:label {\n    bd:serviceParam wikibase:language "${o.language},${o.fallbackLanguage}". \n    ?country rdfs:label ?countryLabel . \n    ?capital rdfs:label ?capitalLabel . \n  }\n  }\nGROUP BY ?country ?countryLabel\nORDER BY ?countryLabel\n`).then((t=>{t.forEach((t=>{let e=t.country.value.replace("http://www.wikidata.org/entity/","");Object.assign(u[e],t),i(3,u[e].wikidata=t,u),i(3,u[e].name_lang=t.countryLabel.value,u)})),a.dataLoaded||i(2,a.dataLoaded=!0,a)})),[n,o,a,u,l,function(t){i(2,a.endTurn=!0,a),n.easeTo({zoom:3,bearing:0,duration:1e3}),n.setLayoutProperty("country-label","visibility","visible"),t==a.correctAnswer.countryLabel.value?(i(2,a.score+=1,a),i(2,a.answerIsCorrect=!0,a)):i(2,a.answerIsCorrect=!1,a),i(2,a.turn+=1,a),i(2,a.choices=null,a)},function(){i(2,a.showIntro=!1,a),l()},function(t){n=t,i(0,n)}]}return new class extends V{constructor(t){super(),U(this,t,Rt,Mt,o,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
